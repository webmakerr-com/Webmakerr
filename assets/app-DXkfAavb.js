const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Test-OdrklMQK.js","./vue.esm-bundler-DZdE0M9V.js","./_plugin-vue_export-helper-DlAUqK2U.js","./BuyProducts-KZIeFRck.js","./Categories-DkPgPH9Y.js","./Code-9W1TinKn.js","./GetProducts-B5cjUsRF.js","./Categories-Bhkr2KeK.js","./Product-CocTR2sg.js","./Products-DYLSEfqH.js","./ModuleSettings-CgpIwQuk.js","./Translator-Bios5QX5.js","./Arr-MwYQQ3qa.js","./Badge-CAEsoWyQ.js","./Str-Ckn63bs5.js","./DynamicIcon-D-LZibaK.js","./assets/Badge-DS9TjnvE.css","./PaymentView-B2PHNhas.js","./AddressComponent-gHf1Vq94.js","./Rest-DEQMhckH.js","./CopyToClipboard-BjLMcgNd.js","./Notify-CV-A2uNH.js","./index-DwF99AZu.js","./assets/CopyToClipboard-CGuVxSTb.css","./CreatePageButton-izdgypQN.js","./PageSelector-CjxFE49u.js"])))=>i.map(i=>d[i]);
var ap=Object.defineProperty;var sp=(t,e,a)=>e in t?ap(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var fe=(t,e,a)=>sp(t,typeof e!="symbol"?e+"":e,a);import{c as _,r as Nt,o as d,a as y,b as U,w as r,d as o,u as p,e as x,f as i,g as M,t as h,F as H,h as q,i as T,j as pe,k as je,l as Xe,m as X,n as ne,p as ce,q as de,s as ut,v as $l,x as fa,y as pa,z as ka,A as np,B as ht,C as Oa,D as sa,E as op,G as Ls,H as Rn,I as ks,T as zo,J as Il,K as Ke,L as lp,M as rp,N as Rs,V as ip,O as Ap,P as dp,Q as Li,R as At,S as Et,U as nl,W as up,X as zr,Y as cp,Z as Sn,_ as fp,$ as pp,a0 as mp,a1 as hp,a2 as _p}from"./vue.esm-bundler-DZdE0M9V.js";import{u as Fa,S as nt,a as Wt,o as _u,c as gp,b as vp}from"./Str-Ckn63bs5.js";import{T as gn,_ as vt,P as Ps,a as vn,C as le,b as Oi,F as ol,c as ae,d as se,e as bs,f as Hi,g as gu,m as yp}from"./RouteCell-CQByaDWH.js";import{t as f,a as Mt,A as $e,p as Zn}from"./Translator-Bios5QX5.js";import{A as we}from"./Arr-MwYQQ3qa.js";import{_ as et,a as Ri,p as eo,b as vu,c as yu,L as Pi,d as Tl,O as bu,e as Ml,P as Ki}from"./OrderCustomerInformation-BafBcgKD.js";import{C as xe,f as st,a as bp,p as wp,b as Bp,g as Cp,c as kp,d as Fp}from"./productService-BVWCmR6j.js";import{_ as Vt,a as Ni,b as Gi,c as xp,S as wu,d as Bu,e as Up,f as Cu}from"./CancelSubscription-D8gNPEbv.js";import{_ as Le}from"./Empty-aPQNCX5s.js";import{_ as Y,a as tt}from"./DynamicIcon-D-LZibaK.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as Be,S as Ge,B as dt}from"./Badge-CAEsoWyQ.js";import{c as Ep,h as ll,a as Sp,g as ku,f as ws,$ as Pt,b as Qp}from"./common-D35bkMcN.js";import{M as Xt}from"./Model-B7FTF6mI.js";import{R as te}from"./Rest-DEQMhckH.js";import{d as Ce}from"./dayjs.min-2rai63wT.js";import{a as ji,d as Ds,b as ma,i as Aa,s as Dp,c as rl,e as zi,r as Yi,E as cs,f as Fu,w as $p,g as Vl,l as Ip,h as il,t as Tp,j as Mp,k as Vp,m as Lp,u as Op,p as Hp,n as Rp,z as Pp}from"./index-DwF99AZu.js";import{_ as Ks,T as me,m as $a,a as Fs,i as ot,r as Kp,L as Yr,b as to,d as xu,c as Uu}from"./dateShortCuts-UbgWu8mW.js";import{n as J}from"./Notify-CV-A2uNH.js";import{u as Ns,L as Ze,_ as Ll}from"./NotFound-tC_jj0zn.js";import{A as Os}from"./Asset-DDfERlE5.js";import{E as Np}from"./index-CL2oGAAm.js";import{U as qr}from"./Url-D4lOoZOf.js";import{u as Eu,t as Su}from"./timezone-C2U15obx.js";import{e as ao,i as qi,U as Wi,p as Gp}from"./Utils-DWmIjEEK.js";import{_ as na,a as Ca,C as Ol}from"./CopyToClipboard-BjLMcgNd.js";import{_ as yn,P as jp}from"./ProductVariationSelector-s07lN-_m.js";import{u as ro,c as Qu,_ as zp}from"./ShippingClassDrawer-VQ2GwDc8.js";import{E as qs,v as Yp,i as qp}from"./defaults-BcSgDByC.js";import Wp from"./Screenshot-_pzg63Gq.js";import{u as Xp}from"./useElementPlusComponents-5pM0GxE5.js";import"./index-C83b7x36.js";class Jp extends gn{getTabs(){return null}getToggleableColumns(){return[{label:f("Lifetime Value (LTV)"),value:"ltv"},{label:f("Customer Since"),value:"customer_since"},{label:f("Last Purchase Date"),value:"last_purchase_date"}]}getSortableColumns(){return[{label:f("Customer ID"),value:"id"},{label:f("Name"),value:"first_name"},{label:f("Purchases"),value:"purchase_count"},{label:f("Lifetime Value (LTV)"),value:"ltv"},{label:f("Last Purchase Date"),value:"last_purchase_date"},{label:f("Customer Since"),value:"created_at"}]}getSearchHint(){return f("Search by, #ID, First Name, Last Name and Email")}getFetchUrl(){return"customers"}parseResponse(e){return e.customers}getTableName(){return"customers"}getAdvanceFilterOptions(){return we.get(window,"fluentCartAdminApp.filter_options.customer_filter_options.advance")}getSearchGuideOptions(){return we.get(window,"fluentCartAdminApp.filter_options.customer_filter_options.guide")}useFullWidthSearch(){return!0}}function Du(t){return Jp.init(t)}const Zp={name:"CardFooter"},em={class:"fct-card-footer"};function tm(t,e,a,s,n,l){return d(),_("div",em,[Nt(t.$slots,"default")])}const Xi=ye(Zp,[["render",tm]]),am={class:"table-cell"},sm={class:"fct-product-info-card w-full"},nm={class:"fct-product-info-media"},om={class:"fct-product-info-details grow-0 shrink-0 basis-[calc(100%-52px)]",style:{overflow:"hidden"}},lm={class:"fct-product-info-name flex flex-col items-start gap-3"},rm={class:"table-cell"},im={class:"table-cell"},Am={class:"table-cell"},dm={class:"table-cell"};const um={__name:"CustomersLoader",props:{nextPageCount:{type:Number,default:0},customerTable:{type:Object,default:()=>({})}},setup(t){const e=t,a=Array.from({length:e.nextPageCount},(s,n)=>n+1);return(s,n)=>{const l=y("el-table-column"),A=y("el-skeleton-item"),u=y("el-table"),c=y("el-skeleton");return d(),U(c,{animated:""},{template:r(()=>[o(u,{data:p(a),class:"w-full compact-table responsive"},{empty:r(()=>n[0]||(n[0]=[])),default:r(()=>[x("",!0),o(l,{label:s.$t("Customer"),width:"300"},{default:r(()=>[i("div",am,[i("div",sm,[i("div",nm,[o(A,{varient:"image",class:"w-10 h-10.5 rounded-full flex-none"})]),i("div",om,[i("div",lm,[o(A,{varient:"p",class:"max-w-[190px]"}),o(A,{varient:"p",class:"max-w-[100px]"})])])])])]),_:1},8,["label"]),o(l,{label:s.$t("Address"),width:"300"},{default:r(()=>[i("div",rm,[o(A,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"]),o(l,{label:s.$t("Purchases"),width:"150"},{default:r(()=>[i("div",im,[o(A,{varient:"p",class:"w-3/5"})])]),_:1},8,["label"]),t.customerTable.isColumnVisible("last_purchase_date")?(d(),U(l,{key:1,label:s.$t("Last Purchase Date"),width:"200"},{default:r(()=>[i("div",Am,[o(A,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),t.customerTable.isColumnVisible("customer_since")?(d(),U(l,{key:2,label:s.$t("Customer Since"),width:"150"},{default:r(()=>[i("div",dm,[o(A,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),(t.customerTable.isColumnVisible("actions"),x("",!0))]),_:1},8,["data"])]),_:1})}}},cm={key:0,class:"fct-customer-card"},fm={class:"fct-customer-avatar"},pm=["src"],mm={class:"fct-customer-details"},hm={class:"fct-customer-name"},_m={class:"fct-customer-id"},gm={class:"fct-customer-email"},vm=["innerHTML"],ym={__name:"CustomersTable",props:{table:{type:Object,required:!0}},setup(t){return(e,a)=>{const s=y("el-table-column"),n=y("el-table");return d(),U(n,{data:t.table.getTableData(),class:"w-full compact-table"},{empty:r(()=>[o(Le,{icon:"Empty/ListView","has-dark":!0,text:p(f)("No customer found!")},null,8,["text"])]),default:r(()=>[x("",!0),o(s,{label:p(f)("Customer"),width:"300"},{default:r(l=>{var A;return[o(vt,{class:"hover:no-underline",to:{name:"view_customer",params:{customer_id:(A=l.row)==null?void 0:A.id}}},{default:r(()=>{var u,c,m,v,b;return[(u=l.row)!=null&&u.id?(d(),_("div",cm,[i("div",fm,[i("span",null,[i("img",{src:(c=l.row)==null?void 0:c.photo,alt:"avatar"},null,8,pm)])]),i("div",mm,[i("div",hm,[M(h(((m=l.row)==null?void 0:m.full_name)||p(f)("No Name"))+" ",1),i("span",_m,"#"+h((v=l.row)==null?void 0:v.id),1)]),i("div",gm,h((b=l.row)==null?void 0:b.email),1)])])):x("",!0)]}),_:2},1032,["to"])]}),_:1},8,["label"]),o(s,{label:p(f)("Address"),width:"300"},{default:r(l=>{var A;return[o(vt,{class:"hover:no-underline",to:{name:"view_customer",params:{customer_id:(A=l.row)==null?void 0:A.id}}},{default:r(()=>[M(h(e.getOrderAddress(l.row)),1)]),_:2},1032,["to"])]}),_:1},8,["label"]),o(s,{label:p(f)("Purchases"),width:90},{default:r(l=>{var A;return[o(vt,{class:"hover:no-underline",to:{name:"view_customer",params:{customer_id:(A=l.row)==null?void 0:A.id}}},{default:r(()=>[M(h(p(f)(l.row.purchase_count)),1)]),_:2},1032,["to"])]}),_:1},8,["label"]),t.table.isColumnVisible("ltv")?(d(),U(s,{key:1,label:p(f)("LTV"),width:100},{default:r(l=>{var A;return[o(vt,{class:"hover:no-underline",to:{name:"view_customer",params:{customer_id:(A=l.row)==null?void 0:A.id}}},{default:r(()=>[i("span",{innerHTML:p(xe).formatNumber(l.row.ltv,!0,!1)},null,8,vm)]),_:2},1032,["to"])]}),_:1},8,["label"])):x("",!0),t.table.isColumnVisible("last_purchase_date")?(d(),U(s,{key:2,label:p(f)("Last Purchase Date"),width:"200"},{default:r(l=>{var A;return[o(vt,{class:"hover:no-underline",to:{name:"view_customer",params:{customer_id:(A=l.row)==null?void 0:A.id}}},{default:r(()=>[o(Vt,{"date-time":l.row.last_purchase_date},null,8,["date-time"])]),_:2},1032,["to"])]}),_:1},8,["label"])):x("",!0),t.table.isColumnVisible("customer_since")?(d(),U(s,{key:3,label:p(f)("Customer Since"),width:"150"},{default:r(l=>{var A;return[o(vt,{class:"hover:no-underline",to:{name:"view_customer",params:{customer_id:(A=l.row)==null?void 0:A.id}}},{default:r(()=>[o(Vt,{"date-time":l.row.created_at},null,8,["date-time"])]),_:2},1032,["to"])]}),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])}}},bm={class:"fct-customer-table-mobile-wrap"},wm=["onClick"],Bm={class:"fct-customer-table-mobile-header"},Cm={key:0,class:"fct-customer-table-customer-col fct-customer-card"},km={class:"fct-customer-avatar"},Fm=["src"],xm={class:"fct-customer-details"},Um={class:"fct-customer-name"},Em={class:"fct-customer-id"},Sm={class:"fct-customer-email"},Qm={class:"fct-customer-table-purchases-col"},Dm={class:"fct-customer-table-mobile-body"},$m={class:"fct-customer-table-mobile-body-list"},Im={key:0,class:"fct-customer-table-ltv-col"},Tm={class:"label"},Mm=["innerHTML"],Vm={key:1,class:"fct-customer-table-last-purchase-date-col"},Lm={class:"label"},Om={class:"value"},Hm={key:2,class:"fct-customer-table-customer-since-col"},Rm={class:"label"},Pm={class:"value"},Km={class:"fct-customer-table-mobile-footer"},Nm={class:"fct-customer-table-address-col"},Gm={key:0,class:"py-6 text-center"},jm={__name:"CustomersTableMobile",props:{table:{type:Object,required:!0},emptyText:{type:String,default:f("No customers found.")}},setup(t){return(e,a)=>(d(),_("div",bm,[(d(!0),_(H,null,q(t.table.getTableData(),(s,n)=>(d(),_("div",{key:s.id,class:"fct-customer-table-mobile-row",onClick:l=>e.$router.push({name:"view_customer",params:{customer_id:s.id}})},[i("div",Bm,[s!=null&&s.id?(d(),_("div",Cm,[i("div",km,[i("img",{src:s==null?void 0:s.photo,alt:"avatar"},null,8,Fm)]),i("div",xm,[i("div",Um,[M(h((s==null?void 0:s.full_name)||p(f)("No Name"))+" ",1),i("span",Em,"#"+h(s==null?void 0:s.id),1)]),i("div",Sm,h(s==null?void 0:s.email),1)])])):x("",!0),i("div",Qm,h(s.purchase_count)+" "+h(s.purchase_count>1?p(f)("Purchases"):p(f)("Purchase")),1)]),i("div",Dm,[i("ul",$m,[t.table.isColumnVisible("ltv")?(d(),_("li",Im,[i("div",Tm,h(p(f)("LTV:")),1),i("div",{class:"value",innerHTML:p(xe).formatNumber(s.ltv,!0,!1)},null,8,Mm)])):x("",!0),t.table.isColumnVisible("last_purchase_date")?(d(),_("li",Vm,[i("div",Lm,h(p(f)("Last Purchase Date:")),1),i("div",Om,[o(Vt,{"date-time":s.last_purchase_date},null,8,["date-time"])])])):x("",!0),t.table.isColumnVisible("customer_since")?(d(),_("li",Hm,[i("div",Rm,h(p(f)("Customer Since:")),1),i("div",Pm,[o(Vt,{"date-time":s.created_at},null,8,["date-time"])])])):x("",!0)])]),i("div",Km,[i("div",Nm,[o(Y,{name:"LocationPin"}),M(" "+h(e.getOrderAddress(s)),1)])])],8,wm))),128)),t.table.getTableData().length===0?(d(),_("div",Gm,[o(Le,{icon:"Empty/Order","has-dark":"",text:t.emptyText},null,8,["text"])])):x("",!0)]))}},zm={},Ym={class:"px-4 py-3"},qm={class:"flex items-center justify-between mb-3"},Wm={class:"flex items-center justify-between mb-3"},Xm={class:"flex items-center justify-between mb-3"},Jm={class:"flex items-center justify-between mb-3"};function Zm(t,e){const a=y("el-skeleton-item"),s=y("el-skeleton");return d(),U(s,{animated:""},{template:r(()=>[i("div",Ym,[i("div",qm,[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})]),i("div",Wm,[o(a,{varient:"p",class:"w-[50px]"}),o(a,{varient:"p",class:"w-[80px]"})]),i("div",Xm,[o(a,{varient:"p",class:"w-[120px]"}),o(a,{varient:"p",class:"w-[100px]"})]),i("div",Jm,[o(a,{varient:"p",class:"w-[100px]"}),o(a,{varient:"p",class:"w-[100px]"})]),o(a,{varient:"p",class:"w-[230px]"})])]),_:1})}const eh=ye(zm,[["render",Zm]]),th={class:"fct-all-customers-page fct-layout-width"},ah={class:"fct-all-customers-wrap"},sh={key:1},nh={__name:"AllCustomers",setup(t){const e=Du(),a=T({showModal:!1,action:"create",title:f("Create New Customer"),customer:{}}),s=T(!1),n=()=>{s.value=window.innerWidth<768};return pe(()=>{n(),window.addEventListener("resize",n)}),je(()=>{window.removeEventListener("resize",n)}),(l,A)=>{const u=y("el-button");return d(),_("div",th,[o(et,{permission:"customers/manage"},{default:r(()=>[o(Ps,{title:p(f)("Customers")},{action:r(()=>[o(u,{type:"primary",onClick:A[0]||(A[0]=c=>a.value.showModal=!0)},{default:r(()=>[M(h(p(f)("Add Customer")),1)]),_:1})]),_:1},8,["title"])]),_:1}),o(et,{permission:"customers/view"},{default:r(()=>[i("div",ah,[o(vn,{table:p(e),"has-mobile-slot":!0},{mobile:r(()=>[p(e).isLoading()?(d(),U(eh,{key:0})):x("",!0),o(jm,{table:p(e)},null,8,["table"])]),default:r(()=>[p(e).isLoading()?(d(),U(um,{key:0,customerTable:p(e),"next-page-count":p(e).nextPageCount},null,8,["customerTable","next-page-count"])):(d(),_("div",sh,[o(ym,{table:p(e)},null,8,["table"])]))]),_:1},8,["table"])])]),_:1}),o(et,{permission:"customers/manage"},{default:r(()=>[o(Ri,{"onUpdate:customerModal":A[1]||(A[1]=()=>{a.value.showModal=!1,a.value.customer={},p(e).fetch()}),customerModalInfos:a.value,customer_id:a.value.customer_id,customer:a.value.customer,onCloseModal:A[2]||(A[2]=c=>a.value.showModal=!1)},null,8,["customerModalInfos","customer_id","customer"])]),_:1})])}}};class oh extends gn{getTabs(){return{all:f("All"),completed:f("Completed"),processing:f("Processing"),"on-hold":f("On Hold"),paid:f("Paid"),subscription:f("Subscription"),renewal:f("Renewal"),refunded:f("Refunded"),partially_refunded:f("Partially Refunded"),upgraded_from:{title:f("Upgraded From"),description:f("Orders upgraded from another order")},upgraded_to:{title:f("Upgraded To"),description:f("Orders upgraded to another order")}}}getToggleableColumns(){return[{label:f("Customer"),value:"customer"},{label:f("Items"),value:"order_items"},{label:f("Order Status"),value:"status"},{label:f("Order Type"),value:"type"},{label:f("Actions"),value:"actions"}]}getSortableColumns(){return[{label:f("Order ID"),value:"id"},{label:f("Total"),value:"total_amount"},{label:f("Payment Status"),value:"payment_status"},{label:f("Order Status"),value:"status"}]}getSearchHint(){return f("Search by invoice no, customer name, or customer email.")}getFetchUrl(){return"orders"}parseResponse(e){return e.orders}getTableName(){return"order_table"}getAdvanceFilterOptions(){return we.get(window,"fluentCartAdminApp.filter_options.order_filter_options.advance")}getSearchGuideOptions(){return we.get(window,"fluentCartAdminApp.filter_options.order_filter_options.guide")}getCustomColumns(){return we.get(window,"fluentCartAdminApp.filter_options.order_filter_options.columns")||{}}with(){return["customer.primary_billing_address","order_items"]}}function $u(t){return oh.init(t)}const lh={class:"fct-order-stats-card"},rh={class:"fct-order-stats-card-head"},ih={class:"fct-order-stats-card-head-content"},Ah={class:"text"},dh={key:0,class:"value"},uh={class:"fct-order-stats-card-body"},ch={key:0,class:"change-wrap"},fh={key:0,class:"change-title"},ph={key:1,class:"change-title"},mh={key:1,class:"change-wrap"},hh={class:"change-title"},_h={__name:"StatCard",props:{direction:String,stat:Object,statRanges:Object,currentRange:String|Number,statKey:String|Number,loading:Boolean},setup(t){const e=Xe().ctx,a=t,s=X(()=>{switch(a.statKey){case"total_orders":return"warning";case"paid_orders":return"blue";case"total_paid_order_items":return"danger";case"total_paid_amounts":return"secondary";default:return"info"}}),n=X(()=>A.value===0?"":A.value>0?"success":"danger"),l=c=>c.is_cents?e.formatNumber(c.current_count):Mt(c.current_count),A=X(()=>{let c=Ep(a.stat.current_count,a.stat.compare_count)??0;return c===""?0:c}),u=X(()=>a.statRanges[a.currentRange].label);return(c,m)=>{const v=y("el-skeleton"),b=y("el-skeleton-item");return d(),_("div",lh,[i("div",rh,[o(Be,{size:"large",bg:s.value,soft:""},{default:r(()=>[Nt(c.$slots,"icon")]),_:3},8,["bg"]),i("div",ih,[o(v,{loading:t.loading,animated:"",rows:0},null,8,["loading"]),i("span",Ah,h(t.stat.title),1),t.loading?x("",!0):(d(),_("div",dh,h(l(t.stat)),1))])]),i("div",uh,[o(v,{loading:t.loading,animated:""},{template:r(()=>[o(b,{variant:"p",class:"w-1/2 h-4"})]),_:1},8,["loading"]),!t.loading&&t.currentRange!=="all_time"?(d(),_("div",ch,[i("span",{class:ne("change "+n.value)},[A.value!==0?(d(),U(Y,{key:0,name:A.value>0?"CaretUp":"CaretDown"},null,8,["name"])):x("",!0),M(" "+h(A.value===0?c.$t("Same as previous"):Math.abs(A.value)+"%"),1)],2),A.value>0?(d(),_("span",fh,h(p(f)("More than %s",u.value==="Today"?c.$t("Yesterday"):c.$t(u.value))),1)):A.value<0?(d(),_("span",ph,h(p(f)("Less than %s",u.value==="Today"?c.$t("Yesterday"):c.$t(u.value))),1)):x("",!0)])):x("",!0),!t.loading&&t.currentRange==="all_time"?(d(),_("div",mh,[i("span",hh,h(c.$t("All Time")),1)])):x("",!0)])])}}};class Iu{constructor(){fe(this,"_attributes",{})}attribute(e,a){return this._attributes[e]=a,this}setAttribute(e){return this._attributes=typeof e=="object"?e:this._attributes,this}}class gs{static install(e,a,s={},n=!1){const l=new a(...Object.values(s));Object.keys(l).forEach(A=>{(n||!e.hasOwnProperty(A))&&(e[A]=l[A])}),Object.getOwnPropertyNames(a.prototype).forEach(A=>{A!=="constructor"&&typeof l[A]=="function"&&(n||typeof e[A]!="function")&&(e[A]=l[A].bind(e))})}}class gh extends Xt{constructor(){super(...arguments);fe(this,"data",{salesGrowthChart:[],countryHeatMap:[],fluctuations:[],dashBoardStats:[],recentOrders:[],unfulfilledOrders:[],recentActivities:[],topSoldProducts:[],currencySign:$e.get("shop.currency_sign"),isBusy:{recentActivities:!1,fluctuations:!1,dashBoardStats:!1,recentOrders:!1,unfulfilledOrders:!1,countryHeatMap:!1,salesGrowthChart:!0,topSoldProducts:!0}})}get controllerKey(){return"ReportingController"}beforeInit(){}makeRequest(a,s,n,l){this.data.isBusy[l]=!0,typeof s!="object"&&(s={});const A=te.get(`reports/${a}`,s);return this.resolvePromiseResponse(A,n,l),A}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null||(this.data[n]=l[s])}).catch(l=>{}).finally(()=>{this.data.isBusy[n]=!1})}getDashboardStats(a={}){return this.makeRequest("dashboard-stats",a,"dashBoardStats","dashBoardStats")}getSalesGrowthChart(a={}){return this.makeRequest("sales-growth-chart",a,"salesGrowthChart","salesGrowthChart")}getCountryHeatMap(a={}){return this.makeRequest("country-heat-map",a,"countryHeatMap","countryHeatMap")}getRecentOrders(a={}){return this.makeRequest("get-recent-orders",a,"recentOrders","recentOrders")}getUnfulfilledOrders(a={}){return this.makeRequest("get-unfulfilled-orders",a,"unfulfilledOrders","unfulfilledOrders")}getRecentActivities(a={}){return this.makeRequest("get-recent-activities",a,"recentActivities","recentActivities")}getSummary(a={}){return this.makeRequest("get-dashboard-summary",a,"summaryData","summaryData")}getTopSoldProducts(a={}){return this.makeRequest("fetch-top-sold-products",a,"topSoldProducts","topSoldProducts")}}const Ht=gh.init(),vh={},yh={class:"fct-order-stats-row"},bh={class:"p-4 bg-gray-25 rounded dark:bg-primary-500"},wh={class:"flex items-center gap-2 mb-3"},Bh={class:"right flex flex-col flex-1 gap-2"};function Ch(t,e){const a=y("el-skeleton-item"),s=y("el-skeleton");return d(),_("div",yh,[(d(),_(H,null,q(4,n=>o(s,{animated:"",key:n},{template:r(()=>[i("div",bh,[i("div",wh,[o(a,{variant:"p",class:"rounded w-10 h-10 block"}),i("div",Bh,[o(a,{variant:"p",class:"rounded w-4/5 block"}),o(a,{variant:"p",class:"rounded w-1/2 block"})])]),i("div",null,[o(a,{variant:"p",class:"rounded w-2/3 block"})])])]),_:2},1024)),64))])}const kh=ye(vh,[["render",Ch]]),Fh={class:"fct-order-stats-wrap"},xh={class:"fct-order-stats-actions flex items-center gap-2.5"},Uh={class:"fct-order-stats-body"},Eh={key:1,class:"fct-order-stats-row"},Sh={class:"flex justify-end mt-2"},Qh=Object.assign({name:"OrderStatBar"},{__name:"OrderStatBar",setup(t){const e=T(Ge.get("order_stat_collapse",!1)),a=T(""),s=Xe().ctx,n=T(!1),l=T(!0),A=T(!1),u=T("-7 days"),c=Fa(),m=T({"-0 days":{label:f("Today"),desc:f("Compared to yesterday")},"-7 days":{label:f("Last 7 days"),desc:f("Compared to the previous 7 days")},"-30 days":{label:f("Last 30 days"),desc:f("Compared to the previous 30 days")},this_month:{label:f("This Month"),desc:f("Compared to the previous Month")},all_time:{label:f("All Time"),desc:f("See All time Sales Stat")}}),v=async g=>{if(u.value!==g)try{u.value=g,a.value="collapse",e.value===!0&&(e.value=!1,Ge.set("order_stat_collapse",e.value)),await Promise.all([s.Storage().set("order_quick_stat_bar_range",u.value),b()])}catch(F){console.error("Error in handleStatRangeChanged:",F)}},b=()=>{A.value=!1,l.value=!0;const g={"-0 days":[Ce().startOf("day").format("YYYY-MM-DD"),Ce().endOf("day").format("YYYY-MM-DD")],"-7 days":[Ce().subtract(7,"days").startOf("day").format("YYYY-MM-DD"),Ce().endOf("day").format("YYYY-MM-DD")],"-30 days":[Ce().subtract(30,"days").startOf("day").format("YYYY-MM-DD"),Ce().endOf("day").format("YYYY-MM-DD")],this_month:[Ce().startOf("month").format("YYYY-MM-DD"),Ce().endOf("day").format("YYYY-MM-DD")],all_time:[null,null]},[F,B]=g[u.value]||[Ce().startOf("month"),Ce().endOf("day")],w={startDate:F,endDate:B,paymentStatus:"all"};Ht.getDashboardStats({params:{...w}}).then(()=>{n.value=Ht.data.dashBoardStats}).catch(C=>{console.error("Error fetching dashboard stats:",C)}).finally(()=>{l.value=!1})};return pe(()=>{u.value=Ge.get("order_quick_stat_bar_range","-0 days");let g=Ge.get("order_quick_stat_bar_collapse_item");a.value=g===null?"collapse":g,b()}),(g,F)=>{const B=y("el-button");return d(),_("div",Fh,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Order Stats Overview"),border_bottom:""},{action:r(()=>[i("div",xh,[o(Oi,{class:"hide-animation-on-mobile"},{default:r(()=>[(d(!0),_(H,null,q(m.value,(w,C)=>(d(),U(ol,{title:`${p(f)("Order Stats Overview of")} ${w.label}`,tabindex:"0",key:C,onClick:k=>v(C),class:ne(C===u.value?"active":"")},{default:r(()=>[M(h(w.label),1)]),_:2},1032,["title","onClick","class"]))),128))]),_:1})])]),_:1},8,["title"]),o(ae,null,{default:r(()=>[i("div",Uh,[l.value?(d(),U(kh,{key:0})):(d(),_("div",Eh,[(d(!0),_(H,null,q(n.value,(w,C)=>(d(),_("div",{key:C,class:"fct-order-stats-col cursor-pointer",onClick:F[0]||(F[0]=k=>p(c).push({name:"reports_orders"}))},[(d(),U(_h,{key:C,stat:w,"current-range":u.value,"stat-ranges":m.value,loading:l.value,"stat-key":C},{icon:r(()=>[o(Y,{name:w.icon},null,8,["name"])]),_:2},1032,["stat","current-range","stat-ranges","loading","stat-key"]))]))),128))])),i("div",Sh,[o(B,{text:"",class:"underline-link-button",onClick:F[1]||(F[1]=w=>p(c).push({name:"reports_overview"}))},{default:r(()=>[M(h(p(f)("See Full Report")),1)]),_:1})])])]),_:1})]),_:1})])}}}),Dh={class:"table-cell"},$h={class:"table-cell"},Ih={class:"table-cell"},Th={class:"table-cell"},Mh={class:"table-cell items-center gap-1"},Vh={class:"table-cell"},Lh={class:"table-cell"},Oh={class:"table-cell"},Hh={__name:"OrdersLoader",props:{nextPageCount:{type:Number,default:0},orderTable:{type:Object,default:()=>({})}},setup(t){const e=t,a=n=>e.orderTable.columns.includes(n),s=Array.from({length:e.nextPageCount},(n,l)=>l+1);return(n,l)=>{const A=y("el-table-column"),u=y("el-skeleton-item"),c=y("el-table"),m=y("el-skeleton");return d(),U(m,{animated:""},{template:r(()=>[o(c,{data:p(s),class:"w-full compact-table responsive"},{empty:r(()=>l[0]||(l[0]=[])),default:r(()=>[x("",!0),o(A,{label:n.$t("# Date"),width:140},{default:r(()=>[i("div",Dh,[o(u,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"]),a("customer")?(d(),U(A,{key:1,width:"100",label:n.$t("Customer")},{default:r(()=>[i("div",$h,[o(u,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),a("order_items")?(d(),U(A,{key:2,label:n.$t("Items"),width:"250"},{default:r(()=>[i("div",Ih,[o(u,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),o(A,{width:"100",label:n.$t("Total")},{default:r(()=>[i("div",Th,[o(u,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"]),o(A,{width:"150",label:n.$t("Payment Status")},{default:r(()=>[i("div",Mh,[o(u,{varient:"p",class:"w-4/5"}),o(u,{varient:"p",class:"w-3/5"})])]),_:1},8,["label"]),a("status")?(d(),U(A,{key:3,width:"150",label:n.$t("Status")},{default:r(()=>[i("div",Vh,[o(u,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),a("type")?(d(),U(A,{key:4,width:"110",label:n.$t("Order Type")},{default:r(()=>[i("div",Lh,[o(u,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),a("actions")?(d(),U(A,{key:5,width:"60",label:""},{default:r(()=>[i("div",Oh,[o(u,{varient:"p",class:"w-3/5"})])]),_:1})):x("",!0)]),_:1},8,["data"])]),_:1})}}},Rh={},Ph={class:"px-4 py-3"},Kh={class:"grid grid-cols-3 gap-5 mt-5"};function Nh(t,e){const a=y("el-skeleton-item"),s=y("el-skeleton");return d(),U(s,{animated:""},{template:r(()=>[i("div",Ph,[(d(),_(H,null,q(2,n=>i("div",{key:n,class:"flex items-center justify-between mb-3"},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64)),i("div",Kh,[(d(),_(H,null,q(3,n=>i("div",{key:n},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const Gh=ye(Rh,[["render",Nh]]),jh={class:"fct-all-orders-page fct-layout-width"},zh={class:"fct-all-orders-wrap"},Yh={__name:"AllOrders",setup(t){const e=$u({instance:Xe()}),a=T(!1),s=T(!1),n=()=>{s.value=window.innerWidth<768},l=u=>{u==="show_order_stats"&&(Ge.set("show_order_stats",!a.value),a.value=!a.value),u==="show_delete_bulk_action"&&e.showBulkDeleteAction(!0),u==="hide_delete_bulk_action"&&e.showBulkDeleteAction(!1)},A=()=>{const u=Ge.get("show_order_stats");u&&(a.value=u)};return pe(()=>{A(),n(),window.addEventListener("resize",n)}),je(()=>{window.removeEventListener("resize",n)}),(u,c)=>{const m=y("el-icon"),v=y("el-button"),b=y("el-dropdown-item"),g=y("el-dropdown-menu"),F=y("el-dropdown");return d(),_("div",jh,[o(Ps,{title:p(f)("Orders")},{action:r(()=>[o(et,{permission:"reports/view"},{default:r(()=>[o(F,{trigger:"click","popper-class":"fct-dropdown",onCommand:l,placement:"bottom-end"},{dropdown:r(()=>[o(g,null,{default:r(()=>[o(b,{command:"show_order_stats"},{default:r(()=>[a.value?(d(),_(H,{key:1},[o(Y,{name:"EyeOff"}),M(" "+h(p(f)("Hide Order Stats")),1)],64)):(d(),_(H,{key:0},[o(Y,{name:"Eye"}),M(" "+h(p(f)("Show Order Stats")),1)],64))]),_:1}),p(e).data.showDeleteBulkAction?x("",!0):(d(),U(b,{key:0,command:"show_delete_bulk_action"},{default:r(()=>[o(Y,{name:"Eye"}),M(" "+h(p(f)("Show Bulk Actions")),1)]),_:1})),p(e).data.showDeleteBulkAction?(d(),U(b,{key:1,command:"hide_delete_bulk_action"},{default:r(()=>[o(Y,{name:"EyeOff"}),M(" "+h(p(f)("Hide Bulk Actions")),1)]),_:1})):x("",!0)]),_:1})]),default:r(()=>[o(v,null,{default:r(()=>[M(h(p(f)("More actions"))+" ",1),o(m,null,{default:r(()=>[o(p(ji))]),_:1})]),_:1})]),_:1})]),_:1}),o(et,{permission:"orders/create"},{default:r(()=>[o(v,{tag:"router-link",type:"primary",to:{name:"add_order"}},{default:r(()=>[M(h(p(f)("Create Order")),1)]),_:1})]),_:1})]),_:1},8,["title"]),o(et,{permission:"reports/view"},{default:r(()=>[a.value?(d(),U(Qh,{key:0})):x("",!0)]),_:1}),o(et,{permission:"orders/view"},{default:r(()=>[i("div",zh,[o(vn,{table:p(e),classicTabStyle:!0,hasMobileSlot:!0},{mobile:r(()=>[p(e).isLoading()?(d(),U(Gh,{key:0})):x("",!0),p(e).isLoading()?x("",!0):(d(),U(Gi,{key:1,table:p(e),orders:p(e).getTableData(),columns:p(e).data.columns,"empty-text":p(e).emptyMessage},null,8,["table","orders","columns","empty-text"]))]),default:r(()=>[p(e).isLoading()?(d(),U(Hh,{key:0,orderTable:p(e),"next-page-count":p(e).nextPageCount},null,8,["orderTable","next-page-count"])):(d(),U(Ni,{key:1,table:p(e),orders:p(e).getTableData(),columns:p(e).data.columns,"empty-text":p(e).emptyMessage},null,8,["table","orders","columns","empty-text"]))]),_:1},8,["table"])])]),_:1})])}}},qh={class:"setting-wrap wm-container-enhanced"},Wh={class:"setting-confirmation-content"},Xh={class:"custom-wp-editor-wrapper"},Jh={class:"setting-save-action"},Zh={__name:"InvoicePacking",setup(t){const e=T([]),a=T([]),s=T(!1),n=T(!1);Ns().onSave(()=>{m()});const A=T([f("Invoice Template"),f("Packing Slip Template"),f("Delivery Slip Template"),f("Shipping Slip Template"),f("Dispatch Slip Template")]),u=()=>{s.value=!0,te.get("templates/print-templates").then(v=>{e.value=v.templates,s.value=!1}).catch(v=>{J.error(v)}).finally(()=>{s.value=!1})},c=()=>{s.value=!0,te.get("settings/confirmation/shortcode",{}).then(v=>{a.value=v.data}).catch(v=>{J.error(v)}).finally(()=>{s.value=!1})},m=()=>{n.value=!0,te.put("templates/print-templates",{templates:e.value}).then(v=>{J.success(v.message)}).catch(v=>{J.error(v)}).finally(()=>{n.value=!1})};return pe(()=>{u(),c()}),(v,b)=>{const g=y("el-skeleton");return y("el-button"),d(),_("div",qh,[o(bs,{class:"mb-5",type:"information",content:p(f)("It will be available soon!")},null,8,["content"]),s.value?(d(!0),_(H,{key:0},q(A.value,(F,B)=>(d(),U(se,{key:B},{default:r(()=>[o(le,{title:F,border_bottom:""},null,8,["title"]),o(ae,null,{default:r(()=>[o(g,{animated:"",rows:6})]),_:1})]),_:2},1024))),128)):x("",!0),!s.value&&e.value.length>0?(d(),_(H,{key:1},[(d(!0),_(H,null,q(e.value,(F,B)=>(d(),U(se,{key:B},{default:r(()=>[o(le,{title:F.title+" (Under Development)",border_bottom:""},null,8,["title"]),o(ae,null,{default:r(()=>[i("div",Wh,[i("div",Xh,[o(Ks,{"short-codes":a.value,modelValue:F.content,"onUpdate:modelValue":w=>F.content=w,onUpdate:w=>{F.content=w}},null,8,["short-codes","modelValue","onUpdate:modelValue","onUpdate"])])])]),_:2},1024)]),_:2},1024))),128)),i("div",Jh,[x("",!0)])],64)):x("",!0)])}}},e_={name:"CustomersRoute"},t_={class:"fca_customers_route"};function a_(t,e,a,s,n,l){const A=y("router-view");return d(),_("div",t_,[o(A)])}const s_=ye(e_,[["render",a_]]);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wr=function(t,e){return Wr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(a[n]=s[n])},Wr(t,e)};function Ia(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Wr(t,e);function a(){this.constructor=t}t.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}var Xr=function(){return Xr=Object.assign||function(e){for(var a,s=1,n=arguments.length;s<n;s++){a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},Xr.apply(this,arguments)};function Zt(t,e,a,s){function n(l){return l instanceof a?l:new a(function(A){A(l)})}return new(a||(a=Promise))(function(l,A){function u(v){try{m(s.next(v))}catch(b){A(b)}}function c(v){try{m(s.throw(v))}catch(b){A(b)}}function m(v){v.done?l(v.value):n(v.value).then(u,c)}m((s=s.apply(t,[])).next())})}function zt(t,e){var a={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,n,l,A;return A={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function u(m){return function(v){return c([m,v])}}function c(m){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,n&&(l=m[0]&2?n.return:m[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,m[1])).done)return l;switch(n=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return a.label++,{value:m[1],done:!1};case 5:a.label++,n=m[1],m=[0];continue;case 7:m=a.ops.pop(),a.trys.pop();continue;default:if(l=a.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){a=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){a.label=m[1];break}if(m[0]===6&&a.label<l[1]){a.label=l[1],l=m;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(m);break}l[2]&&a.ops.pop(),a.trys.pop();continue}m=e.call(t,a)}catch(v){m=[6,v],n=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function mo(t,e,a){if(arguments.length===2)for(var s=0,n=e.length,l;s<n;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||e)}var ts=function(){function t(e,a,s,n){this.left=e,this.top=a,this.width=s,this.height=n}return t.prototype.add=function(e,a,s,n){return new t(this.left+e,this.top+a,this.width+s,this.height+n)},t.fromClientRect=function(e,a){return new t(a.left+e.windowBounds.left,a.top+e.windowBounds.top,a.width,a.height)},t.fromDOMRectList=function(e,a){var s=Array.from(a).find(function(n){return n.width!==0});return s?new t(s.left+e.windowBounds.left,s.top+e.windowBounds.top,s.width,s.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Hl=function(t,e){return ts.fromClientRect(t,e.getBoundingClientRect())},n_=function(t){var e=t.body,a=t.documentElement;if(!e||!a)throw new Error("Unable to get document size");var s=Math.max(Math.max(e.scrollWidth,a.scrollWidth),Math.max(e.offsetWidth,a.offsetWidth),Math.max(e.clientWidth,a.clientWidth)),n=Math.max(Math.max(e.scrollHeight,a.scrollHeight),Math.max(e.offsetHeight,a.offsetHeight),Math.max(e.clientHeight,a.clientHeight));return new ts(0,0,s,n)},Rl=function(t){for(var e=[],a=0,s=t.length;a<s;){var n=t.charCodeAt(a++);if(n>=55296&&n<=56319&&a<s){var l=t.charCodeAt(a++);(l&64512)===56320?e.push(((n&1023)<<10)+(l&1023)+65536):(e.push(n),a--)}else e.push(n)}return e},Bt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var a=t.length;if(!a)return"";for(var s=[],n=-1,l="";++n<a;){var A=t[n];A<=65535?s.push(A):(A-=65536,s.push((A>>10)+55296,A%1024+56320)),(n+1===a||s.length>16384)&&(l+=String.fromCharCode.apply(String,s),s.length=0)}return l},FA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o_=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ho=0;ho<FA.length;ho++)o_[FA.charCodeAt(ho)]=ho;var xA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _o=0;_o<xA.length;_o++)Qn[xA.charCodeAt(_o)]=_o;var l_=function(t){var e=t.length*.75,a=t.length,s,n=0,l,A,u,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var m=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),v=Array.isArray(m)?m:new Uint8Array(m);for(s=0;s<a;s+=4)l=Qn[t.charCodeAt(s)],A=Qn[t.charCodeAt(s+1)],u=Qn[t.charCodeAt(s+2)],c=Qn[t.charCodeAt(s+3)],v[n++]=l<<2|A>>4,v[n++]=(A&15)<<4|u>>2,v[n++]=(u&3)<<6|c&63;return m},r_=function(t){for(var e=t.length,a=[],s=0;s<e;s+=2)a.push(t[s+1]<<8|t[s]);return a},i_=function(t){for(var e=t.length,a=[],s=0;s<e;s+=4)a.push(t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]);return a},Ms=5,Ji=11,lr=2,A_=Ji-Ms,Tu=65536>>Ms,d_=1<<Ms,rr=d_-1,u_=1024>>Ms,c_=Tu+u_,f_=c_,p_=32,m_=f_+p_,h_=65536>>Ji,__=1<<A_,g_=__-1,UA=function(t,e,a){return t.slice?t.slice(e,a):new Uint16Array(Array.prototype.slice.call(t,e,a))},v_=function(t,e,a){return t.slice?t.slice(e,a):new Uint32Array(Array.prototype.slice.call(t,e,a))},y_=function(t,e){var a=l_(t),s=Array.isArray(a)?i_(a):new Uint32Array(a),n=Array.isArray(a)?r_(a):new Uint16Array(a),l=24,A=UA(n,l/2,s[4]/2),u=s[5]===2?UA(n,(l+s[4])/2):v_(s,Math.ceil((l+s[4])/4));return new b_(s[0],s[1],s[2],s[3],A,u)},b_=function(){function t(e,a,s,n,l,A){this.initialValue=e,this.errorValue=a,this.highStart=s,this.highValueIndex=n,this.index=l,this.data=A}return t.prototype.get=function(e){var a;if(e>=0){if(e<55296||e>56319&&e<=65535)return a=this.index[e>>Ms],a=(a<<lr)+(e&rr),this.data[a];if(e<=65535)return a=this.index[Tu+(e-55296>>Ms)],a=(a<<lr)+(e&rr),this.data[a];if(e<this.highStart)return a=m_-h_+(e>>Ji),a=this.index[a],a+=e>>Ms&g_,a=this.index[a],a=(a<<lr)+(e&rr),this.data[a];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),EA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w_=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var go=0;go<EA.length;go++)w_[EA.charCodeAt(go)]=go;var B_="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",SA=50,C_=1,Mu=2,Vu=3,k_=4,F_=5,QA=7,Lu=8,DA=9,fs=10,Jr=11,$A=12,Zr=13,x_=14,Dn=15,ei=16,vo=17,Fn=18,U_=19,IA=20,ti=21,xn=22,ir=23,Ws=24,la=25,$n=26,In=27,Xs=28,E_=29,$s=30,S_=31,yo=32,bo=33,ai=34,si=35,ni=36,so=37,oi=38,Yo=39,qo=40,Ar=41,Ou=42,Q_=43,D_=[9001,65288],Hu="!",Ne="",wo="",li=y_(B_),Ya=[$s,ni],ri=[C_,Mu,Vu,F_],Ru=[fs,Lu],TA=[In,$n],$_=ri.concat(Ru),MA=[oi,Yo,qo,ai,si],I_=[Dn,Zr],T_=function(t,e){e===void 0&&(e="strict");var a=[],s=[],n=[];return t.forEach(function(l,A){var u=li.get(l);if(u>SA?(n.push(!0),u-=SA):n.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(l)!==-1)return s.push(A),a.push(ei);if(u===k_||u===Jr){if(A===0)return s.push(A),a.push($s);var c=a[A-1];return $_.indexOf(c)===-1?(s.push(s[A-1]),a.push(c)):(s.push(A),a.push($s))}if(s.push(A),u===S_)return a.push(e==="strict"?ti:so);if(u===Ou||u===E_)return a.push($s);if(u===Q_)return l>=131072&&l<=196605||l>=196608&&l<=262141?a.push(so):a.push($s);a.push(u)}),[s,a,n]},dr=function(t,e,a,s){var n=s[a];if(Array.isArray(t)?t.indexOf(n)!==-1:t===n)for(var l=a;l<=s.length;){l++;var A=s[l];if(A===e)return!0;if(A!==fs)break}if(n===fs)for(var l=a;l>0;){l--;var u=s[l];if(Array.isArray(t)?t.indexOf(u)!==-1:t===u)for(var c=a;c<=s.length;){c++;var A=s[c];if(A===e)return!0;if(A!==fs)break}if(u!==fs)break}return!1},VA=function(t,e){for(var a=t;a>=0;){var s=e[a];if(s===fs)a--;else return s}return 0},M_=function(t,e,a,s,n){if(a[s]===0)return Ne;var l=s-1;if(Array.isArray(n)&&n[l]===!0)return Ne;var A=l-1,u=l+1,c=e[l],m=A>=0?e[A]:0,v=e[u];if(c===Mu&&v===Vu)return Ne;if(ri.indexOf(c)!==-1)return Hu;if(ri.indexOf(v)!==-1||Ru.indexOf(v)!==-1)return Ne;if(VA(l,e)===Lu)return wo;if(li.get(t[l])===Jr||(c===yo||c===bo)&&li.get(t[u])===Jr||c===QA||v===QA||c===DA||[fs,Zr,Dn].indexOf(c)===-1&&v===DA||[vo,Fn,U_,Ws,Xs].indexOf(v)!==-1||VA(l,e)===xn||dr(ir,xn,l,e)||dr([vo,Fn],ti,l,e)||dr($A,$A,l,e))return Ne;if(c===fs)return wo;if(c===ir||v===ir)return Ne;if(v===ei||c===ei)return wo;if([Zr,Dn,ti].indexOf(v)!==-1||c===x_||m===ni&&I_.indexOf(c)!==-1||c===Xs&&v===ni||v===IA||Ya.indexOf(v)!==-1&&c===la||Ya.indexOf(c)!==-1&&v===la||c===In&&[so,yo,bo].indexOf(v)!==-1||[so,yo,bo].indexOf(c)!==-1&&v===$n||Ya.indexOf(c)!==-1&&TA.indexOf(v)!==-1||TA.indexOf(c)!==-1&&Ya.indexOf(v)!==-1||[In,$n].indexOf(c)!==-1&&(v===la||[xn,Dn].indexOf(v)!==-1&&e[u+1]===la)||[xn,Dn].indexOf(c)!==-1&&v===la||c===la&&[la,Xs,Ws].indexOf(v)!==-1)return Ne;if([la,Xs,Ws,vo,Fn].indexOf(v)!==-1)for(var b=l;b>=0;){var g=e[b];if(g===la)return Ne;if([Xs,Ws].indexOf(g)!==-1)b--;else break}if([In,$n].indexOf(v)!==-1)for(var b=[vo,Fn].indexOf(c)!==-1?A:l;b>=0;){var g=e[b];if(g===la)return Ne;if([Xs,Ws].indexOf(g)!==-1)b--;else break}if(oi===c&&[oi,Yo,ai,si].indexOf(v)!==-1||[Yo,ai].indexOf(c)!==-1&&[Yo,qo].indexOf(v)!==-1||[qo,si].indexOf(c)!==-1&&v===qo||MA.indexOf(c)!==-1&&[IA,$n].indexOf(v)!==-1||MA.indexOf(v)!==-1&&c===In||Ya.indexOf(c)!==-1&&Ya.indexOf(v)!==-1||c===Ws&&Ya.indexOf(v)!==-1||Ya.concat(la).indexOf(c)!==-1&&v===xn&&D_.indexOf(t[u])===-1||Ya.concat(la).indexOf(v)!==-1&&c===Fn)return Ne;if(c===Ar&&v===Ar){for(var F=a[l],B=1;F>0&&(F--,e[F]===Ar);)B++;if(B%2!==0)return Ne}return c===yo&&v===bo?Ne:wo},V_=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var a=T_(t,e.lineBreak),s=a[0],n=a[1],l=a[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(n=n.map(function(u){return[la,$s,Ou].indexOf(u)!==-1?so:u}));var A=e.wordBreak==="keep-all"?l.map(function(u,c){return u&&t[c]>=19968&&t[c]<=40959}):void 0;return[s,n,A]},L_=function(){function t(e,a,s,n){this.codePoints=e,this.required=a===Hu,this.start=s,this.end=n}return t.prototype.slice=function(){return Bt.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),O_=function(t,e){var a=Rl(t),s=V_(a,e),n=s[0],l=s[1],A=s[2],u=a.length,c=0,m=0;return{next:function(){if(m>=u)return{done:!0,value:null};for(var v=Ne;m<u&&(v=M_(a,l,n,++m,A))===Ne;);if(v!==Ne||m===u){var b=new L_(a,v,c,m);return c=m,{value:b,done:!1}}return{done:!0,value:null}}}},H_=1,R_=2,io=4,LA=8,Al=10,OA=47,Pn=92,P_=9,K_=32,Bo=34,Un=61,N_=35,G_=36,j_=37,Co=39,ko=40,En=41,z_=95,aa=45,Y_=33,q_=60,W_=62,X_=64,J_=91,Z_=93,eg=61,tg=123,Fo=63,ag=125,HA=124,sg=126,ng=128,RA=65533,ur=42,Ts=43,og=44,lg=58,rg=59,no=46,ig=0,Ag=8,dg=11,ug=14,cg=31,fg=127,Va=-1,Pu=48,Ku=97,Nu=101,pg=102,mg=117,hg=122,Gu=65,ju=69,zu=70,_g=85,gg=90,qt=function(t){return t>=Pu&&t<=57},vg=function(t){return t>=55296&&t<=57343},Js=function(t){return qt(t)||t>=Gu&&t<=zu||t>=Ku&&t<=pg},yg=function(t){return t>=Ku&&t<=hg},bg=function(t){return t>=Gu&&t<=gg},wg=function(t){return yg(t)||bg(t)},Bg=function(t){return t>=ng},xo=function(t){return t===Al||t===P_||t===K_},dl=function(t){return wg(t)||Bg(t)||t===z_},PA=function(t){return dl(t)||qt(t)||t===aa},Cg=function(t){return t>=ig&&t<=Ag||t===dg||t>=ug&&t<=cg||t===fg},As=function(t,e){return t!==Pn?!1:e!==Al},Uo=function(t,e,a){return t===aa?dl(e)||As(e,a):dl(t)?!0:!!(t===Pn&&As(t,e))},cr=function(t,e,a){return t===Ts||t===aa?qt(e)?!0:e===no&&qt(a):qt(t===no?e:t)},kg=function(t){var e=0,a=1;(t[e]===Ts||t[e]===aa)&&(t[e]===aa&&(a=-1),e++);for(var s=[];qt(t[e]);)s.push(t[e++]);var n=s.length?parseInt(Bt.apply(void 0,s),10):0;t[e]===no&&e++;for(var l=[];qt(t[e]);)l.push(t[e++]);var A=l.length,u=A?parseInt(Bt.apply(void 0,l),10):0;(t[e]===ju||t[e]===Nu)&&e++;var c=1;(t[e]===Ts||t[e]===aa)&&(t[e]===aa&&(c=-1),e++);for(var m=[];qt(t[e]);)m.push(t[e++]);var v=m.length?parseInt(Bt.apply(void 0,m),10):0;return a*(n+u*Math.pow(10,-A))*Math.pow(10,c*v)},Fg={type:2},xg={type:3},Ug={type:4},Eg={type:13},Sg={type:8},Qg={type:21},Dg={type:9},$g={type:10},Ig={type:11},Tg={type:12},Mg={type:14},Eo={type:23},Vg={type:1},Lg={type:25},Og={type:24},Hg={type:26},Rg={type:27},Pg={type:28},Kg={type:29},Ng={type:31},ii={type:32},Yu=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Rl(e))},t.prototype.read=function(){for(var e=[],a=this.consumeToken();a!==ii;)e.push(a),a=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Bo:return this.consumeStringToken(Bo);case N_:var a=this.peekCodePoint(0),s=this.peekCodePoint(1),n=this.peekCodePoint(2);if(PA(a)||As(s,n)){var l=Uo(a,s,n)?R_:H_,A=this.consumeName();return{type:5,value:A,flags:l}}break;case G_:if(this.peekCodePoint(0)===Un)return this.consumeCodePoint(),Eg;break;case Co:return this.consumeStringToken(Co);case ko:return Fg;case En:return xg;case ur:if(this.peekCodePoint(0)===Un)return this.consumeCodePoint(),Mg;break;case Ts:if(cr(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case og:return Ug;case aa:var u=e,c=this.peekCodePoint(0),m=this.peekCodePoint(1);if(cr(u,c,m))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Uo(u,c,m))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===aa&&m===W_)return this.consumeCodePoint(),this.consumeCodePoint(),Og;break;case no:if(cr(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case OA:if(this.peekCodePoint(0)===ur)for(this.consumeCodePoint();;){var v=this.consumeCodePoint();if(v===ur&&(v=this.consumeCodePoint(),v===OA))return this.consumeToken();if(v===Va)return this.consumeToken()}break;case lg:return Hg;case rg:return Rg;case q_:if(this.peekCodePoint(0)===Y_&&this.peekCodePoint(1)===aa&&this.peekCodePoint(2)===aa)return this.consumeCodePoint(),this.consumeCodePoint(),Lg;break;case X_:var b=this.peekCodePoint(0),g=this.peekCodePoint(1),F=this.peekCodePoint(2);if(Uo(b,g,F)){var A=this.consumeName();return{type:7,value:A}}break;case J_:return Pg;case Pn:if(As(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Z_:return Kg;case eg:if(this.peekCodePoint(0)===Un)return this.consumeCodePoint(),Sg;break;case tg:return Ig;case ag:return Tg;case mg:case _g:var B=this.peekCodePoint(0),w=this.peekCodePoint(1);return B===Ts&&(Js(w)||w===Fo)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case HA:if(this.peekCodePoint(0)===Un)return this.consumeCodePoint(),Dg;if(this.peekCodePoint(0)===HA)return this.consumeCodePoint(),Qg;break;case sg:if(this.peekCodePoint(0)===Un)return this.consumeCodePoint(),$g;break;case Va:return ii}return xo(e)?(this.consumeWhiteSpace(),Ng):qt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):dl(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Bt(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],a=this.consumeCodePoint();Js(a)&&e.length<6;)e.push(a),a=this.consumeCodePoint();for(var s=!1;a===Fo&&e.length<6;)e.push(a),a=this.consumeCodePoint(),s=!0;if(s){var n=parseInt(Bt.apply(void 0,e.map(function(c){return c===Fo?Pu:c})),16),l=parseInt(Bt.apply(void 0,e.map(function(c){return c===Fo?zu:c})),16);return{type:30,start:n,end:l}}var A=parseInt(Bt.apply(void 0,e),16);if(this.peekCodePoint(0)===aa&&Js(this.peekCodePoint(1))){this.consumeCodePoint(),a=this.consumeCodePoint();for(var u=[];Js(a)&&u.length<6;)u.push(a),a=this.consumeCodePoint();var l=parseInt(Bt.apply(void 0,u),16);return{type:30,start:A,end:l}}else return{type:30,start:A,end:A}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ko?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ko?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Va)return{type:22,value:""};var a=this.peekCodePoint(0);if(a===Co||a===Bo){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Va||this.peekCodePoint(0)===En)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),Eo)}for(;;){var n=this.consumeCodePoint();if(n===Va||n===En)return{type:22,value:Bt.apply(void 0,e)};if(xo(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Va||this.peekCodePoint(0)===En?(this.consumeCodePoint(),{type:22,value:Bt.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Eo);if(n===Bo||n===Co||n===ko||Cg(n))return this.consumeBadUrlRemnants(),Eo;if(n===Pn)if(As(n,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Eo;else e.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;xo(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===En||e===Va)return;As(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var a=5e4,s="";e>0;){var n=Math.min(a,e);s+=Bt.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),s},t.prototype.consumeStringToken=function(e){var a="",s=0;do{var n=this._value[s];if(n===Va||n===void 0||n===e)return a+=this.consumeStringSlice(s),{type:0,value:a};if(n===Al)return this._value.splice(0,s),Vg;if(n===Pn){var l=this._value[s+1];l!==Va&&l!==void 0&&(l===Al?(a+=this.consumeStringSlice(s),s=-1,this._value.shift()):As(n,l)&&(a+=this.consumeStringSlice(s),a+=Bt(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},t.prototype.consumeNumber=function(){var e=[],a=io,s=this.peekCodePoint(0);for((s===Ts||s===aa)&&e.push(this.consumeCodePoint());qt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(s===no&&qt(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),a=LA;qt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0),n=this.peekCodePoint(1);var l=this.peekCodePoint(2);if((s===ju||s===Nu)&&((n===Ts||n===aa)&&qt(l)||qt(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),a=LA;qt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[kg(e),a]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),a=e[0],s=e[1],n=this.peekCodePoint(0),l=this.peekCodePoint(1),A=this.peekCodePoint(2);if(Uo(n,l,A)){var u=this.consumeName();return{type:15,number:a,flags:s,unit:u}}return n===j_?(this.consumeCodePoint(),{type:16,number:a,flags:s}):{type:17,number:a,flags:s}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Js(e)){for(var a=Bt(e);Js(this.peekCodePoint(0))&&a.length<6;)a+=Bt(this.consumeCodePoint());xo(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(a,16);return s===0||vg(s)||s>1114111?RA:s}return e===Va?RA:e},t.prototype.consumeName=function(){for(var e="";;){var a=this.consumeCodePoint();if(PA(a))e+=Bt(a);else if(As(a,this.peekCodePoint(0)))e+=Bt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(a),e}},t}(),qu=function(){function t(e){this._tokens=e}return t.create=function(e){var a=new Yu;return a.write(e),new t(a.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var a=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return a;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var a=this.consumeComponentValue();if(a.type===32)return e;e.push(a),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var a={type:e,values:[]},s=this.consumeToken();;){if(s.type===32||jg(s,e))return a;this.reconsumeToken(s),a.values.push(this.consumeComponentValue()),s=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var a={name:e.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return a;this.reconsumeToken(s),a.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?ii:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Ao=function(t){return t.type===15},bn=function(t){return t.type===17},at=function(t){return t.type===20},Gg=function(t){return t.type===0},Ai=function(t,e){return at(t)&&t.value===e},Wu=function(t){return t.type!==31},mn=function(t){return t.type!==31&&t.type!==4},Na=function(t){var e=[],a=[];return t.forEach(function(s){if(s.type===4){if(a.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(a),a=[];return}s.type!==31&&a.push(s)}),a.length&&e.push(a),e},jg=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Bs=function(t){return t.type===17||t.type===15},Ut=function(t){return t.type===16||Bs(t)},Xu=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Kt={type:17,number:0,flags:io},Zi={type:16,number:50,flags:io},ps={type:16,number:100,flags:io},Tn=function(t,e,a){var s=t[0],n=t[1];return[it(s,e),it(typeof n<"u"?n:s,a)]},it=function(t,e){if(t.type===16)return t.number/100*e;if(Ao(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Ju="deg",Zu="grad",ec="rad",tc="turn",Pl={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Ju:return Math.PI*e.number/180;case Zu:return Math.PI/200*e.number;case ec:return e.number;case tc:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},ac=function(t){return t.type===15&&(t.unit===Ju||t.unit===Zu||t.unit===ec||t.unit===tc)},sc=function(t){var e=t.filter(at).map(function(a){return a.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Kt,Kt];case"to top":case"bottom":return ba(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Kt,ps];case"to right":case"left":return ba(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ps,ps];case"to bottom":case"top":return ba(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ps,Kt];case"to left":case"right":return ba(270)}return 0},ba=function(t){return Math.PI*t/180},vs={name:"color",parse:function(t,e){if(e.type===18){var a=zg[e.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return a(t,e.values)}if(e.type===5){if(e.value.length===3){var s=e.value.substring(0,1),n=e.value.substring(1,2),l=e.value.substring(2,3);return ms(parseInt(s+s,16),parseInt(n+n,16),parseInt(l+l,16),1)}if(e.value.length===4){var s=e.value.substring(0,1),n=e.value.substring(1,2),l=e.value.substring(2,3),A=e.value.substring(3,4);return ms(parseInt(s+s,16),parseInt(n+n,16),parseInt(l+l,16),parseInt(A+A,16)/255)}if(e.value.length===6){var s=e.value.substring(0,2),n=e.value.substring(2,4),l=e.value.substring(4,6);return ms(parseInt(s,16),parseInt(n,16),parseInt(l,16),1)}if(e.value.length===8){var s=e.value.substring(0,2),n=e.value.substring(2,4),l=e.value.substring(4,6),A=e.value.substring(6,8);return ms(parseInt(s,16),parseInt(n,16),parseInt(l,16),parseInt(A,16)/255)}}if(e.type===20){var u=Ja[e.value.toUpperCase()];if(typeof u<"u")return u}return Ja.TRANSPARENT}},ys=function(t){return(255&t)===0},Tt=function(t){var e=255&t,a=255&t>>8,s=255&t>>16,n=255&t>>24;return e<255?"rgba("+n+","+s+","+a+","+e/255+")":"rgb("+n+","+s+","+a+")"},ms=function(t,e,a,s){return(t<<24|e<<16|a<<8|Math.round(s*255)<<0)>>>0},KA=function(t,e){if(t.type===17)return t.number;if(t.type===16){var a=e===3?1:255;return e===3?t.number/100*a:Math.round(t.number/100*a)}return 0},NA=function(t,e){var a=e.filter(mn);if(a.length===3){var s=a.map(KA),n=s[0],l=s[1],A=s[2];return ms(n,l,A,1)}if(a.length===4){var u=a.map(KA),n=u[0],l=u[1],A=u[2],c=u[3];return ms(n,l,A,c)}return 0};function fr(t,e,a){return a<0&&(a+=1),a>=1&&(a-=1),a<1/6?(e-t)*a*6+t:a<1/2?e:a<2/3?(e-t)*6*(2/3-a)+t:t}var GA=function(t,e){var a=e.filter(mn),s=a[0],n=a[1],l=a[2],A=a[3],u=(s.type===17?ba(s.number):Pl.parse(t,s))/(Math.PI*2),c=Ut(n)?n.number/100:0,m=Ut(l)?l.number/100:0,v=typeof A<"u"&&Ut(A)?it(A,1):1;if(c===0)return ms(m*255,m*255,m*255,1);var b=m<=.5?m*(c+1):m+c-m*c,g=m*2-b,F=fr(g,b,u+1/3),B=fr(g,b,u),w=fr(g,b,u-1/3);return ms(F*255,B*255,w*255,v)},zg={hsl:GA,hsla:GA,rgb:NA,rgba:NA},Kn=function(t,e){return vs.parse(t,qu.create(e).parseComponentValue())},Ja={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Yg={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(a){if(at(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},qg={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Kl=function(t,e){var a=vs.parse(t,e[0]),s=e[1];return s&&Ut(s)?{color:a,stop:s}:{color:a,stop:null}},jA=function(t,e){var a=t[0],s=t[t.length-1];a.stop===null&&(a.stop=Kt),s.stop===null&&(s.stop=ps);for(var n=[],l=0,A=0;A<t.length;A++){var u=t[A].stop;if(u!==null){var c=it(u,e);c>l?n.push(c):n.push(l),l=c}else n.push(null)}for(var m=null,A=0;A<n.length;A++){var v=n[A];if(v===null)m===null&&(m=A);else if(m!==null){for(var b=A-m,g=n[m-1],F=(v-g)/(b+1),B=1;B<=b;B++)n[m+B-1]=F*B;m=null}}return t.map(function(w,C){var k=w.color;return{color:k,stop:Math.max(Math.min(1,n[C]/e),0)}})},Wg=function(t,e,a){var s=e/2,n=a/2,l=it(t[0],e)-s,A=n-it(t[1],a);return(Math.atan2(A,l)+Math.PI*2)%(Math.PI*2)},Xg=function(t,e,a){var s=typeof t=="number"?t:Wg(t,e,a),n=Math.abs(e*Math.sin(s))+Math.abs(a*Math.cos(s)),l=e/2,A=a/2,u=n/2,c=Math.sin(s-Math.PI/2)*u,m=Math.cos(s-Math.PI/2)*u;return[n,l-m,l+m,A-c,A+c]},Sa=function(t,e){return Math.sqrt(t*t+e*e)},zA=function(t,e,a,s,n){var l=[[0,0],[0,e],[t,0],[t,e]];return l.reduce(function(A,u){var c=u[0],m=u[1],v=Sa(a-c,s-m);return(n?v<A.optimumDistance:v>A.optimumDistance)?{optimumCorner:u,optimumDistance:v}:A},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},Jg=function(t,e,a,s,n){var l=0,A=0;switch(t.size){case 0:t.shape===0?l=A=Math.min(Math.abs(e),Math.abs(e-s),Math.abs(a),Math.abs(a-n)):t.shape===1&&(l=Math.min(Math.abs(e),Math.abs(e-s)),A=Math.min(Math.abs(a),Math.abs(a-n)));break;case 2:if(t.shape===0)l=A=Math.min(Sa(e,a),Sa(e,a-n),Sa(e-s,a),Sa(e-s,a-n));else if(t.shape===1){var u=Math.min(Math.abs(a),Math.abs(a-n))/Math.min(Math.abs(e),Math.abs(e-s)),c=zA(s,n,e,a,!0),m=c[0],v=c[1];l=Sa(m-e,(v-a)/u),A=u*l}break;case 1:t.shape===0?l=A=Math.max(Math.abs(e),Math.abs(e-s),Math.abs(a),Math.abs(a-n)):t.shape===1&&(l=Math.max(Math.abs(e),Math.abs(e-s)),A=Math.max(Math.abs(a),Math.abs(a-n)));break;case 3:if(t.shape===0)l=A=Math.max(Sa(e,a),Sa(e,a-n),Sa(e-s,a),Sa(e-s,a-n));else if(t.shape===1){var u=Math.max(Math.abs(a),Math.abs(a-n))/Math.max(Math.abs(e),Math.abs(e-s)),b=zA(s,n,e,a,!1),m=b[0],v=b[1];l=Sa(m-e,(v-a)/u),A=u*l}break}return Array.isArray(t.size)&&(l=it(t.size[0],s),A=t.size.length===2?it(t.size[1],n):l),[l,A]},Zg=function(t,e){var a=ba(180),s=[];return Na(e).forEach(function(n,l){if(l===0){var A=n[0];if(A.type===20&&A.value==="to"){a=sc(n);return}else if(ac(A)){a=Pl.parse(t,A);return}}var u=Kl(t,n);s.push(u)}),{angle:a,stops:s,type:1}},So=function(t,e){var a=ba(180),s=[];return Na(e).forEach(function(n,l){if(l===0){var A=n[0];if(A.type===20&&["top","left","right","bottom"].indexOf(A.value)!==-1){a=sc(n);return}else if(ac(A)){a=(Pl.parse(t,A)+ba(270))%ba(360);return}}var u=Kl(t,n);s.push(u)}),{angle:a,stops:s,type:1}},ev=function(t,e){var a=ba(180),s=[],n=1,l=0,A=3,u=[];return Na(e).forEach(function(c,m){var v=c[0];if(m===0){if(at(v)&&v.value==="linear"){n=1;return}else if(at(v)&&v.value==="radial"){n=2;return}}if(v.type===18){if(v.name==="from"){var b=vs.parse(t,v.values[0]);s.push({stop:Kt,color:b})}else if(v.name==="to"){var b=vs.parse(t,v.values[0]);s.push({stop:ps,color:b})}else if(v.name==="color-stop"){var g=v.values.filter(mn);if(g.length===2){var b=vs.parse(t,g[1]),F=g[0];bn(F)&&s.push({stop:{type:16,number:F.number*100,flags:F.flags},color:b})}}}}),n===1?{angle:(a+ba(180))%ba(360),stops:s,type:n}:{size:A,shape:l,stops:s,position:u,type:n}},nc="closest-side",oc="farthest-side",lc="closest-corner",rc="farthest-corner",ic="circle",Ac="ellipse",dc="cover",uc="contain",tv=function(t,e){var a=0,s=3,n=[],l=[];return Na(e).forEach(function(A,u){var c=!0;if(u===0){var m=!1;c=A.reduce(function(b,g){if(m)if(at(g))switch(g.value){case"center":return l.push(Zi),b;case"top":case"left":return l.push(Kt),b;case"right":case"bottom":return l.push(ps),b}else(Ut(g)||Bs(g))&&l.push(g);else if(at(g))switch(g.value){case ic:return a=0,!1;case Ac:return a=1,!1;case"at":return m=!0,!1;case nc:return s=0,!1;case dc:case oc:return s=1,!1;case uc:case lc:return s=2,!1;case rc:return s=3,!1}else if(Bs(g)||Ut(g))return Array.isArray(s)||(s=[]),s.push(g),!1;return b},c)}if(c){var v=Kl(t,A);n.push(v)}}),{size:s,shape:a,stops:n,position:l,type:2}},Qo=function(t,e){var a=0,s=3,n=[],l=[];return Na(e).forEach(function(A,u){var c=!0;if(u===0?c=A.reduce(function(v,b){if(at(b))switch(b.value){case"center":return l.push(Zi),!1;case"top":case"left":return l.push(Kt),!1;case"right":case"bottom":return l.push(ps),!1}else if(Ut(b)||Bs(b))return l.push(b),!1;return v},c):u===1&&(c=A.reduce(function(v,b){if(at(b))switch(b.value){case ic:return a=0,!1;case Ac:return a=1,!1;case uc:case nc:return s=0,!1;case oc:return s=1,!1;case lc:return s=2,!1;case dc:case rc:return s=3,!1}else if(Bs(b)||Ut(b))return Array.isArray(s)||(s=[]),s.push(b),!1;return v},c)),c){var m=Kl(t,A);n.push(m)}}),{size:s,shape:a,stops:n,position:l,type:2}},av=function(t){return t.type===1},sv=function(t){return t.type===2},eA={name:"image",parse:function(t,e){if(e.type===22){var a={url:e.value,type:0};return t.cache.addImage(e.value),a}if(e.type===18){var s=cc[e.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return s(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function nv(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!cc[t.name])}var cc={"linear-gradient":Zg,"-moz-linear-gradient":So,"-ms-linear-gradient":So,"-o-linear-gradient":So,"-webkit-linear-gradient":So,"radial-gradient":tv,"-moz-radial-gradient":Qo,"-ms-radial-gradient":Qo,"-o-radial-gradient":Qo,"-webkit-radial-gradient":Qo,"-webkit-gradient":ev},ov={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var a=e[0];return a.type===20&&a.value==="none"?[]:e.filter(function(s){return mn(s)&&nv(s)}).map(function(s){return eA.parse(t,s)})}},lv={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(a){if(at(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},rv={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Na(e).map(function(a){return a.filter(Ut)}).map(Xu)}},iv={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Na(e).map(function(a){return a.filter(at).map(function(s){return s.value}).join(" ")}).map(Av)}},Av=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},fn;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(fn||(fn={}));var dv={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Na(e).map(function(a){return a.filter(uv)})}},uv=function(t){return at(t)||Ut(t)},Nl=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},cv=Nl("top"),fv=Nl("right"),pv=Nl("bottom"),mv=Nl("left"),Gl=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,a){return Xu(a.filter(Ut))}}},hv=Gl("top-left"),_v=Gl("top-right"),gv=Gl("bottom-right"),vv=Gl("bottom-left"),jl=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,a){switch(a){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},yv=jl("top"),bv=jl("right"),wv=jl("bottom"),Bv=jl("left"),zl=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,a){return Ao(a)?a.number:0}}},Cv=zl("top"),kv=zl("right"),Fv=zl("bottom"),xv=zl("left"),Uv={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ev={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Sv={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(at).reduce(function(a,s){return a|Qv(s.value)},0)}},Qv=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Dv={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},$v={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},ul;(function(t){t.NORMAL="normal",t.STRICT="strict"})(ul||(ul={}));var Iv={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return ul.STRICT;case"normal":default:return ul.NORMAL}}},Tv={name:"line-height",initialValue:"normal",prefix:!1,type:4},YA=function(t,e){return at(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Ut(t)?it(t,e):e},Mv={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:eA.parse(t,e)}},Vv={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},di={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Yl=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Lv=Yl("top"),Ov=Yl("right"),Hv=Yl("bottom"),Rv=Yl("left"),Pv={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(at).map(function(a){switch(a.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Kv={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},ql=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Nv=ql("top"),Gv=ql("right"),jv=ql("bottom"),zv=ql("left"),Yv={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},qv={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Wv={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Ai(e[0],"none")?[]:Na(e).map(function(a){for(var s={color:Ja.TRANSPARENT,offsetX:Kt,offsetY:Kt,blur:Kt},n=0,l=0;l<a.length;l++){var A=a[l];Bs(A)?(n===0?s.offsetX=A:n===1?s.offsetY=A:s.blur=A,n++):s.color=vs.parse(t,A)}return s})}},Xv={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Jv={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var a=ty[e.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return a(e.values)}return null}},Zv=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number});return e.length===6?e:null},ey=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),a=e[0],s=e[1];e[2],e[3];var n=e[4],l=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var A=e[12],u=e[13];return e[14],e[15],e.length===16?[a,s,n,l,A,u]:null},ty={matrix:Zv,matrix3d:ey},qA={type:16,number:50,flags:io},ay=[qA,qA],sy={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var a=e.filter(Ut);return a.length!==2?ay:[a[0],a[1]]}},ny={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Nn;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Nn||(Nn={}));var oy={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Nn.BREAK_ALL;case"keep-all":return Nn.KEEP_ALL;case"normal":default:return Nn.NORMAL}}},ly={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(bn(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},fc={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},ry={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return bn(e)?e.number:1}},iy={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ay={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(at).map(function(a){switch(a.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(a){return a!==0})}},dy={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var a=[],s=[];return e.forEach(function(n){switch(n.type){case 20:case 0:a.push(n.value);break;case 17:a.push(n.number.toString());break;case 4:s.push(a.join(" ")),a.length=0;break}}),a.length&&s.push(a.join(" ")),s.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},uy={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},cy={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(bn(e))return e.number;if(at(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},fy={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(at).map(function(a){return a.value})}},py={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},$t=function(t,e){return(t&e)!==0},my={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var a=e[0];return a.type===20&&a.value==="none"?[]:e}},hy={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var a=e[0];if(a.type===20&&a.value==="none")return null;for(var s=[],n=e.filter(Wu),l=0;l<n.length;l++){var A=n[l],u=n[l+1];if(A.type===20){var c=u&&bn(u)?u.number:1;s.push({counter:A.value,increment:c})}}return s}},_y={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var a=[],s=e.filter(Wu),n=0;n<s.length;n++){var l=s[n],A=s[n+1];if(at(l)&&l.value!=="none"){var u=A&&bn(A)?A.number:0;a.push({counter:l.value,reset:u})}}return a}},gy={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Ao).map(function(a){return fc.parse(t,a)})}},vy={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var a=e[0];if(a.type===20&&a.value==="none")return null;var s=[],n=e.filter(Gg);if(n.length%2!==0)return null;for(var l=0;l<n.length;l+=2){var A=n[l].value,u=n[l+1].value;s.push({open:A,close:u})}return s}},WA=function(t,e,a){if(!t)return"";var s=t[Math.min(e,t.length-1)];return s?a?s.open:s.close:""},yy={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Ai(e[0],"none")?[]:Na(e).map(function(a){for(var s={color:255,offsetX:Kt,offsetY:Kt,blur:Kt,spread:Kt,inset:!1},n=0,l=0;l<a.length;l++){var A=a[l];Ai(A,"inset")?s.inset=!0:Bs(A)?(n===0?s.offsetX=A:n===1?s.offsetY=A:n===2?s.blur=A:s.spread=A,n++):s.color=vs.parse(t,A)}return s})}},by={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var a=[0,1,2],s=[];return e.filter(at).forEach(function(n){switch(n.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),a.forEach(function(n){s.indexOf(n)===-1&&s.push(n)}),s}},wy={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},By={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Ao(e)?e.number:0}},Cy=function(){function t(e,a){var s,n;this.animationDuration=Fe(e,gy,a.animationDuration),this.backgroundClip=Fe(e,Yg,a.backgroundClip),this.backgroundColor=Fe(e,qg,a.backgroundColor),this.backgroundImage=Fe(e,ov,a.backgroundImage),this.backgroundOrigin=Fe(e,lv,a.backgroundOrigin),this.backgroundPosition=Fe(e,rv,a.backgroundPosition),this.backgroundRepeat=Fe(e,iv,a.backgroundRepeat),this.backgroundSize=Fe(e,dv,a.backgroundSize),this.borderTopColor=Fe(e,cv,a.borderTopColor),this.borderRightColor=Fe(e,fv,a.borderRightColor),this.borderBottomColor=Fe(e,pv,a.borderBottomColor),this.borderLeftColor=Fe(e,mv,a.borderLeftColor),this.borderTopLeftRadius=Fe(e,hv,a.borderTopLeftRadius),this.borderTopRightRadius=Fe(e,_v,a.borderTopRightRadius),this.borderBottomRightRadius=Fe(e,gv,a.borderBottomRightRadius),this.borderBottomLeftRadius=Fe(e,vv,a.borderBottomLeftRadius),this.borderTopStyle=Fe(e,yv,a.borderTopStyle),this.borderRightStyle=Fe(e,bv,a.borderRightStyle),this.borderBottomStyle=Fe(e,wv,a.borderBottomStyle),this.borderLeftStyle=Fe(e,Bv,a.borderLeftStyle),this.borderTopWidth=Fe(e,Cv,a.borderTopWidth),this.borderRightWidth=Fe(e,kv,a.borderRightWidth),this.borderBottomWidth=Fe(e,Fv,a.borderBottomWidth),this.borderLeftWidth=Fe(e,xv,a.borderLeftWidth),this.boxShadow=Fe(e,yy,a.boxShadow),this.color=Fe(e,Uv,a.color),this.direction=Fe(e,Ev,a.direction),this.display=Fe(e,Sv,a.display),this.float=Fe(e,Dv,a.cssFloat),this.fontFamily=Fe(e,dy,a.fontFamily),this.fontSize=Fe(e,uy,a.fontSize),this.fontStyle=Fe(e,py,a.fontStyle),this.fontVariant=Fe(e,fy,a.fontVariant),this.fontWeight=Fe(e,cy,a.fontWeight),this.letterSpacing=Fe(e,$v,a.letterSpacing),this.lineBreak=Fe(e,Iv,a.lineBreak),this.lineHeight=Fe(e,Tv,a.lineHeight),this.listStyleImage=Fe(e,Mv,a.listStyleImage),this.listStylePosition=Fe(e,Vv,a.listStylePosition),this.listStyleType=Fe(e,di,a.listStyleType),this.marginTop=Fe(e,Lv,a.marginTop),this.marginRight=Fe(e,Ov,a.marginRight),this.marginBottom=Fe(e,Hv,a.marginBottom),this.marginLeft=Fe(e,Rv,a.marginLeft),this.opacity=Fe(e,ry,a.opacity);var l=Fe(e,Pv,a.overflow);this.overflowX=l[0],this.overflowY=l[l.length>1?1:0],this.overflowWrap=Fe(e,Kv,a.overflowWrap),this.paddingTop=Fe(e,Nv,a.paddingTop),this.paddingRight=Fe(e,Gv,a.paddingRight),this.paddingBottom=Fe(e,jv,a.paddingBottom),this.paddingLeft=Fe(e,zv,a.paddingLeft),this.paintOrder=Fe(e,by,a.paintOrder),this.position=Fe(e,qv,a.position),this.textAlign=Fe(e,Yv,a.textAlign),this.textDecorationColor=Fe(e,iy,(s=a.textDecorationColor)!==null&&s!==void 0?s:a.color),this.textDecorationLine=Fe(e,Ay,(n=a.textDecorationLine)!==null&&n!==void 0?n:a.textDecoration),this.textShadow=Fe(e,Wv,a.textShadow),this.textTransform=Fe(e,Xv,a.textTransform),this.transform=Fe(e,Jv,a.transform),this.transformOrigin=Fe(e,sy,a.transformOrigin),this.visibility=Fe(e,ny,a.visibility),this.webkitTextStrokeColor=Fe(e,wy,a.webkitTextStrokeColor),this.webkitTextStrokeWidth=Fe(e,By,a.webkitTextStrokeWidth),this.wordBreak=Fe(e,oy,a.wordBreak),this.zIndex=Fe(e,ly,a.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return ys(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return $t(this.display,4)||$t(this.display,33554432)||$t(this.display,268435456)||$t(this.display,536870912)||$t(this.display,67108864)||$t(this.display,134217728)},t}(),ky=function(){function t(e,a){this.content=Fe(e,my,a.content),this.quotes=Fe(e,vy,a.quotes)}return t}(),XA=function(){function t(e,a){this.counterIncrement=Fe(e,hy,a.counterIncrement),this.counterReset=Fe(e,_y,a.counterReset)}return t}(),Fe=function(t,e,a){var s=new Yu,n=a!==null&&typeof a<"u"?a.toString():e.initialValue;s.write(n);var l=new qu(s.read());switch(e.type){case 2:var A=l.parseComponentValue();return e.parse(t,at(A)?A.value:e.initialValue);case 0:return e.parse(t,l.parseComponentValue());case 1:return e.parse(t,l.parseComponentValues());case 4:return l.parseComponentValue();case 3:switch(e.format){case"angle":return Pl.parse(t,l.parseComponentValue());case"color":return vs.parse(t,l.parseComponentValue());case"image":return eA.parse(t,l.parseComponentValue());case"length":var u=l.parseComponentValue();return Bs(u)?u:Kt;case"length-percentage":var c=l.parseComponentValue();return Ut(c)?c:Kt;case"time":return fc.parse(t,l.parseComponentValue())}break}},Fy="data-html2canvas-debug",xy=function(t){var e=t.getAttribute(Fy);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ui=function(t,e){var a=xy(t);return a===1||e===a},Ga=function(){function t(e,a){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,ui(a,3))debugger;this.styles=new Cy(e,window.getComputedStyle(a,null)),pi(a)&&(this.styles.animationDuration.some(function(s){return s>0})&&(a.style.animationDuration="0s"),this.styles.transform!==null&&(a.style.transform="none")),this.bounds=Hl(this.context,a),ui(a,4)&&(this.flags|=16)}return t}(),Uy="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",JA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Do=0;Do<JA.length;Do++)Mn[JA.charCodeAt(Do)]=Do;var Ey=function(t){var e=t.length*.75,a=t.length,s,n=0,l,A,u,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var m=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),v=Array.isArray(m)?m:new Uint8Array(m);for(s=0;s<a;s+=4)l=Mn[t.charCodeAt(s)],A=Mn[t.charCodeAt(s+1)],u=Mn[t.charCodeAt(s+2)],c=Mn[t.charCodeAt(s+3)],v[n++]=l<<2|A>>4,v[n++]=(A&15)<<4|u>>2,v[n++]=(u&3)<<6|c&63;return m},Sy=function(t){for(var e=t.length,a=[],s=0;s<e;s+=2)a.push(t[s+1]<<8|t[s]);return a},Qy=function(t){for(var e=t.length,a=[],s=0;s<e;s+=4)a.push(t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]);return a},Vs=5,tA=11,pr=2,Dy=tA-Vs,pc=65536>>Vs,$y=1<<Vs,mr=$y-1,Iy=1024>>Vs,Ty=pc+Iy,My=Ty,Vy=32,Ly=My+Vy,Oy=65536>>tA,Hy=1<<Dy,Ry=Hy-1,ZA=function(t,e,a){return t.slice?t.slice(e,a):new Uint16Array(Array.prototype.slice.call(t,e,a))},Py=function(t,e,a){return t.slice?t.slice(e,a):new Uint32Array(Array.prototype.slice.call(t,e,a))},Ky=function(t,e){var a=Ey(t),s=Array.isArray(a)?Qy(a):new Uint32Array(a),n=Array.isArray(a)?Sy(a):new Uint16Array(a),l=24,A=ZA(n,l/2,s[4]/2),u=s[5]===2?ZA(n,(l+s[4])/2):Py(s,Math.ceil((l+s[4])/4));return new Ny(s[0],s[1],s[2],s[3],A,u)},Ny=function(){function t(e,a,s,n,l,A){this.initialValue=e,this.errorValue=a,this.highStart=s,this.highValueIndex=n,this.index=l,this.data=A}return t.prototype.get=function(e){var a;if(e>=0){if(e<55296||e>56319&&e<=65535)return a=this.index[e>>Vs],a=(a<<pr)+(e&mr),this.data[a];if(e<=65535)return a=this.index[pc+(e-55296>>Vs)],a=(a<<pr)+(e&mr),this.data[a];if(e<this.highStart)return a=Ly-Oy+(e>>tA),a=this.index[a],a+=e>>Vs&Ry,a=this.index[a],a=(a<<pr)+(e&mr),this.data[a];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),ed="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $o=0;$o<ed.length;$o++)Gy[ed.charCodeAt($o)]=$o;var jy=1,hr=2,_r=3,td=4,ad=5,zy=7,sd=8,gr=9,vr=10,nd=11,od=12,ld=13,rd=14,yr=15,Yy=function(t){for(var e=[],a=0,s=t.length;a<s;){var n=t.charCodeAt(a++);if(n>=55296&&n<=56319&&a<s){var l=t.charCodeAt(a++);(l&64512)===56320?e.push(((n&1023)<<10)+(l&1023)+65536):(e.push(n),a--)}else e.push(n)}return e},qy=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var a=t.length;if(!a)return"";for(var s=[],n=-1,l="";++n<a;){var A=t[n];A<=65535?s.push(A):(A-=65536,s.push((A>>10)+55296,A%1024+56320)),(n+1===a||s.length>16384)&&(l+=String.fromCharCode.apply(String,s),s.length=0)}return l},Wy=Ky(Uy),_a="",br="",Xy=function(t){return Wy.get(t)},Jy=function(t,e,a){var s=a-2,n=e[s],l=e[a-1],A=e[a];if(l===hr&&A===_r)return _a;if(l===hr||l===_r||l===td||A===hr||A===_r||A===td)return br;if(l===sd&&[sd,gr,nd,od].indexOf(A)!==-1||(l===nd||l===gr)&&(A===gr||A===vr)||(l===od||l===vr)&&A===vr||A===ld||A===ad||A===zy||l===jy)return _a;if(l===ld&&A===rd){for(;n===ad;)n=e[--s];if(n===rd)return _a}if(l===yr&&A===yr){for(var u=0;n===yr;)u++,n=e[--s];if(u%2===0)return _a}return br},Zy=function(t){var e=Yy(t),a=e.length,s=0,n=0,l=e.map(Xy);return{next:function(){if(s>=a)return{done:!0,value:null};for(var A=_a;s<a&&(A=Jy(e,l,++s))===_a;);if(A!==_a||s===a){var u=qy.apply(null,e.slice(n,s));return n=s,{value:u,done:!1}}return{done:!0,value:null}}}},e1=function(t){for(var e=Zy(t),a=[],s;!(s=e.next()).done;)s.value&&a.push(s.value.slice());return a},t1=function(t){var e=123;if(t.createRange){var a=t.createRange();if(a.getBoundingClientRect){var s=t.createElement("boundtest");s.style.height=e+"px",s.style.display="block",t.body.appendChild(s),a.selectNode(s);var n=a.getBoundingClientRect(),l=Math.round(n.height);if(t.body.removeChild(s),l===e)return!0}}return!1},a1=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var a=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=e.firstChild,n=Rl(s.data).map(function(c){return Bt(c)}),l=0,A={},u=n.every(function(c,m){a.setStart(s,l),a.setEnd(s,l+c.length);var v=a.getBoundingClientRect();l+=c.length;var b=v.x>A.x||v.y>A.y;return A=v,m===0?!0:b});return t.body.removeChild(e),u},s1=function(){return typeof new Image().crossOrigin<"u"},n1=function(){return typeof new XMLHttpRequest().responseType=="string"},o1=function(t){var e=new Image,a=t.createElement("canvas"),s=a.getContext("2d");if(!s)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(e,0,0),a.toDataURL()}catch{return!1}return!0},id=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},l1=function(t){var e=t.createElement("canvas"),a=100;e.width=a,e.height=a;var s=e.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,a,a);var n=new Image,l=e.toDataURL();n.src=l;var A=ci(a,a,0,0,n);return s.fillStyle="red",s.fillRect(0,0,a,a),Ad(A).then(function(u){s.drawImage(u,0,0);var c=s.getImageData(0,0,a,a).data;s.fillStyle="red",s.fillRect(0,0,a,a);var m=t.createElement("div");return m.style.backgroundImage="url("+l+")",m.style.height=a+"px",id(c)?Ad(ci(a,a,0,0,m)):Promise.reject(!1)}).then(function(u){return s.drawImage(u,0,0),id(s.getImageData(0,0,a,a).data)}).catch(function(){return!1})},ci=function(t,e,a,s,n){var l="http://www.w3.org/2000/svg",A=document.createElementNS(l,"svg"),u=document.createElementNS(l,"foreignObject");return A.setAttributeNS(null,"width",t.toString()),A.setAttributeNS(null,"height",e.toString()),u.setAttributeNS(null,"width","100%"),u.setAttributeNS(null,"height","100%"),u.setAttributeNS(null,"x",a.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"externalResourcesRequired","true"),A.appendChild(u),u.appendChild(n),A},Ad=function(t){return new Promise(function(e,a){var s=new Image;s.onload=function(){return e(s)},s.onerror=a,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Rt={get SUPPORT_RANGE_BOUNDS(){var t=t1(document);return Object.defineProperty(Rt,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Rt.SUPPORT_RANGE_BOUNDS&&a1(document);return Object.defineProperty(Rt,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=o1(document);return Object.defineProperty(Rt,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?l1(document):Promise.resolve(!1);return Object.defineProperty(Rt,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=s1();return Object.defineProperty(Rt,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=n1();return Object.defineProperty(Rt,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Rt,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Rt,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Gn=function(){function t(e,a){this.text=e,this.bounds=a}return t}(),r1=function(t,e,a,s){var n=d1(e,a),l=[],A=0;return n.forEach(function(u){if(a.textDecorationLine.length||u.trim().length>0)if(Rt.SUPPORT_RANGE_BOUNDS){var c=dd(s,A,u.length).getClientRects();if(c.length>1){var m=aA(u),v=0;m.forEach(function(g){l.push(new Gn(g,ts.fromDOMRectList(t,dd(s,v+A,g.length).getClientRects()))),v+=g.length})}else l.push(new Gn(u,ts.fromDOMRectList(t,c)))}else{var b=s.splitText(u.length);l.push(new Gn(u,i1(t,s))),s=b}else Rt.SUPPORT_RANGE_BOUNDS||(s=s.splitText(u.length));A+=u.length}),l},i1=function(t,e){var a=e.ownerDocument;if(a){var s=a.createElement("html2canvaswrapper");s.appendChild(e.cloneNode(!0));var n=e.parentNode;if(n){n.replaceChild(s,e);var l=Hl(t,s);return s.firstChild&&n.replaceChild(s.firstChild,s),l}}return ts.EMPTY},dd=function(t,e,a){var s=t.ownerDocument;if(!s)throw new Error("Node has no owner document");var n=s.createRange();return n.setStart(t,e),n.setEnd(t,e+a),n},aA=function(t){if(Rt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(a){return a.segment})}return e1(t)},A1=function(t,e){if(Rt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var a=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(a.segment(t)).map(function(s){return s.segment})}return c1(t,e)},d1=function(t,e){return e.letterSpacing!==0?aA(t):A1(t,e)},u1=[32,160,4961,65792,65793,4153,4241],c1=function(t,e){for(var a=O_(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),s=[],n,l=function(){if(n.value){var A=n.value.slice(),u=Rl(A),c="";u.forEach(function(m){u1.indexOf(m)===-1?c+=Bt(m):(c.length&&s.push(c),s.push(Bt(m)),c="")}),c.length&&s.push(c)}};!(n=a.next()).done;)l();return s},f1=function(){function t(e,a,s){this.text=p1(a.data,s.textTransform),this.textBounds=r1(e,this.text,s,a)}return t}(),p1=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(m1,h1);case 2:return t.toUpperCase();default:return t}},m1=/(^|\s|:|-|\(|\))([a-z])/g,h1=function(t,e,a){return t.length>0?e+a.toUpperCase():t},mc=function(t){Ia(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n.src=s.currentSrc||s.src,n.intrinsicWidth=s.naturalWidth,n.intrinsicHeight=s.naturalHeight,n.context.cache.addImage(n.src),n}return e}(Ga),hc=function(t){Ia(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n.canvas=s,n.intrinsicWidth=s.width,n.intrinsicHeight=s.height,n}return e}(Ga),_c=function(t){Ia(e,t);function e(a,s){var n=t.call(this,a,s)||this,l=new XMLSerializer,A=Hl(a,s);return s.setAttribute("width",A.width+"px"),s.setAttribute("height",A.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(l.serializeToString(s)),n.intrinsicWidth=s.width.baseVal.value,n.intrinsicHeight=s.height.baseVal.value,n.context.cache.addImage(n.svg),n}return e}(Ga),gc=function(t){Ia(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n.value=s.value,n}return e}(Ga),fi=function(t){Ia(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n.start=s.start,n.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,n}return e}(Ga),_1=[{type:15,flags:0,unit:"px",number:3}],g1=[{type:16,flags:0,number:50}],v1=function(t){return t.width>t.height?new ts(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new ts(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},y1=function(t){var e=t.type===b1?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},cl="checkbox",fl="radio",b1="password",ud=707406591,sA=function(t){Ia(e,t);function e(a,s){var n=t.call(this,a,s)||this;switch(n.type=s.type.toLowerCase(),n.checked=s.checked,n.value=y1(s),(n.type===cl||n.type===fl)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=v1(n.bounds)),n.type){case cl:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=_1;break;case fl:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=g1;break}return n}return e}(Ga),vc=function(t){Ia(e,t);function e(a,s){var n=t.call(this,a,s)||this,l=s.options[s.selectedIndex||0];return n.value=l&&l.text||"",n}return e}(Ga),yc=function(t){Ia(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n.value=s.value,n}return e}(Ga),bc=function(t){Ia(e,t);function e(a,s){var n=t.call(this,a,s)||this;n.src=s.src,n.width=parseInt(s.width,10)||0,n.height=parseInt(s.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){n.tree=Bc(a,s.contentWindow.document.documentElement);var l=s.contentWindow.document.documentElement?Kn(a,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):Ja.TRANSPARENT,A=s.contentWindow.document.body?Kn(a,getComputedStyle(s.contentWindow.document.body).backgroundColor):Ja.TRANSPARENT;n.backgroundColor=ys(l)?ys(A)?n.styles.backgroundColor:A:l}}catch{}return n}return e}(Ga),w1=["OL","UL","MENU"],Wo=function(t,e,a,s){for(var n=e.firstChild,l=void 0;n;n=l)if(l=n.nextSibling,Cc(n)&&n.data.trim().length>0)a.textNodes.push(new f1(t,n,a.styles));else if(un(n))if(Uc(n)&&n.assignedNodes)n.assignedNodes().forEach(function(u){return Wo(t,u,a,s)});else{var A=wc(t,n);A.styles.isVisible()&&(B1(n,A,s)?A.flags|=4:C1(A.styles)&&(A.flags|=2),w1.indexOf(n.tagName)!==-1&&(A.flags|=8),a.elements.push(A),n.slot,n.shadowRoot?Wo(t,n.shadowRoot,A,s):!pl(n)&&!kc(n)&&!ml(n)&&Wo(t,n,A,s))}},wc=function(t,e){return mi(e)?new mc(t,e):Fc(e)?new hc(t,e):kc(e)?new _c(t,e):k1(e)?new gc(t,e):F1(e)?new fi(t,e):x1(e)?new sA(t,e):ml(e)?new vc(t,e):pl(e)?new yc(t,e):xc(e)?new bc(t,e):new Ga(t,e)},Bc=function(t,e){var a=wc(t,e);return a.flags|=4,Wo(t,e,a,a),a},B1=function(t,e,a){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||nA(t)&&a.styles.isTransparent()},C1=function(t){return t.isPositioned()||t.isFloating()},Cc=function(t){return t.nodeType===Node.TEXT_NODE},un=function(t){return t.nodeType===Node.ELEMENT_NODE},pi=function(t){return un(t)&&typeof t.style<"u"&&!Xo(t)},Xo=function(t){return typeof t.className=="object"},k1=function(t){return t.tagName==="LI"},F1=function(t){return t.tagName==="OL"},x1=function(t){return t.tagName==="INPUT"},U1=function(t){return t.tagName==="HTML"},kc=function(t){return t.tagName==="svg"},nA=function(t){return t.tagName==="BODY"},Fc=function(t){return t.tagName==="CANVAS"},cd=function(t){return t.tagName==="VIDEO"},mi=function(t){return t.tagName==="IMG"},xc=function(t){return t.tagName==="IFRAME"},fd=function(t){return t.tagName==="STYLE"},E1=function(t){return t.tagName==="SCRIPT"},pl=function(t){return t.tagName==="TEXTAREA"},ml=function(t){return t.tagName==="SELECT"},Uc=function(t){return t.tagName==="SLOT"},pd=function(t){return t.tagName.indexOf("-")>0},S1=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var a=this.counters[e];return a&&a.length?a[a.length-1]:1},t.prototype.getCounterValues=function(e){var a=this.counters[e];return a||[]},t.prototype.pop=function(e){var a=this;e.forEach(function(s){return a.counters[s].pop()})},t.prototype.parse=function(e){var a=this,s=e.counterIncrement,n=e.counterReset,l=!0;s!==null&&s.forEach(function(u){var c=a.counters[u.counter];c&&u.increment!==0&&(l=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=u.increment)});var A=[];return l&&n.forEach(function(u){var c=a.counters[u.counter];A.push(u.counter),c||(c=a.counters[u.counter]=[]),c.push(u.reset)}),A},t}(),md={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},hd={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Q1={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},D1={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Zs=function(t,e,a,s,n,l){return t<e||t>a?oo(t,n,l.length>0):s.integers.reduce(function(A,u,c){for(;t>=u;)t-=u,A+=s.values[c];return A},"")+l},Ec=function(t,e,a,s){var n="";do a||t--,n=s(t)+n,t/=e;while(t*e>=e);return n},wt=function(t,e,a,s,n){var l=a-e+1;return(t<0?"-":"")+(Ec(Math.abs(t),l,s,function(A){return Bt(Math.floor(A%l)+e)})+n)},Us=function(t,e,a){a===void 0&&(a=". ");var s=e.length;return Ec(Math.abs(t),s,!1,function(n){return e[Math.floor(n%s)]})+a},on=1,rs=2,is=4,Vn=8,qa=function(t,e,a,s,n,l){if(t<-9999||t>9999)return oo(t,4,n.length>0);var A=Math.abs(t),u=n;if(A===0)return e[0]+u;for(var c=0;A>0&&c<=4;c++){var m=A%10;m===0&&$t(l,on)&&u!==""?u=e[m]+u:m>1||m===1&&c===0||m===1&&c===1&&$t(l,rs)||m===1&&c===1&&$t(l,is)&&t>100||m===1&&c>1&&$t(l,Vn)?u=e[m]+(c>0?a[c-1]:"")+u:m===1&&c>0&&(u=a[c-1]+u),A=Math.floor(A/10)}return(t<0?s:"")+u},_d="",gd="",vd="",wr="",oo=function(t,e,a){var s=a?". ":"",n=a?"":"",l=a?", ":"",A=a?" ":"";switch(e){case 0:return""+A;case 1:return""+A;case 2:return""+A;case 5:var u=wt(t,48,57,!0,s);return u.length<4?"0"+u:u;case 4:return Us(t,"",n);case 6:return Zs(t,1,3999,md,3,s).toLowerCase();case 7:return Zs(t,1,3999,md,3,s);case 8:return wt(t,945,969,!1,s);case 9:return wt(t,97,122,!1,s);case 10:return wt(t,65,90,!1,s);case 11:return wt(t,1632,1641,!0,s);case 12:case 49:return Zs(t,1,9999,hd,3,s);case 35:return Zs(t,1,9999,hd,3,s).toLowerCase();case 13:return wt(t,2534,2543,!0,s);case 14:case 30:return wt(t,6112,6121,!0,s);case 15:return Us(t,"",n);case 16:return Us(t,"",n);case 17:case 48:return qa(t,"",_d,"",n,rs|is|Vn);case 47:return qa(t,"",gd,"",n,on|rs|is|Vn);case 42:return qa(t,"",_d,"",n,rs|is|Vn);case 41:return qa(t,"",gd,"",n,on|rs|is|Vn);case 26:return qa(t,"","",vd,n,0);case 25:return qa(t,"","",vd,n,on|rs|is);case 31:return qa(t,"","",wr,l,on|rs|is);case 33:return qa(t,"","",wr,l,0);case 32:return qa(t,"","",wr,l,on|rs|is);case 18:return wt(t,2406,2415,!0,s);case 20:return Zs(t,1,19999,D1,3,s);case 21:return wt(t,2790,2799,!0,s);case 22:return wt(t,2662,2671,!0,s);case 22:return Zs(t,1,10999,Q1,3,s);case 23:return Us(t,"");case 24:return Us(t,"");case 27:return wt(t,3302,3311,!0,s);case 28:return Us(t,"",n);case 29:return Us(t,"",n);case 34:return wt(t,3792,3801,!0,s);case 37:return wt(t,6160,6169,!0,s);case 38:return wt(t,4160,4169,!0,s);case 39:return wt(t,2918,2927,!0,s);case 40:return wt(t,1776,1785,!0,s);case 43:return wt(t,3046,3055,!0,s);case 44:return wt(t,3174,3183,!0,s);case 45:return wt(t,3664,3673,!0,s);case 46:return wt(t,3872,3881,!0,s);case 3:default:return wt(t,48,57,!0,s)}},Sc="data-html2canvas-ignore",yd=function(){function t(e,a,s){if(this.context=e,this.options=s,this.scrolledElements=[],this.referenceElement=a,this.counters=new S1,this.quoteDepth=0,!a.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(a.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,a){var s=this,n=$1(e,a);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var l=e.defaultView.pageXOffset,A=e.defaultView.pageYOffset,u=n.contentWindow,c=u.document,m=M1(n).then(function(){return Zt(s,void 0,void 0,function(){var v,b;return zt(this,function(g){switch(g.label){case 0:return this.scrolledElements.forEach(H1),u&&(u.scrollTo(a.left,a.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(u.scrollY!==a.top||u.scrollX!==a.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(u.scrollX-a.left,u.scrollY-a.top,0,0))),v=this.options.onclone,b=this.clonedReferenceElement,typeof b>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:g.sent(),g.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,T1(c)]:[3,4];case 3:g.sent(),g.label=4;case 4:return typeof v=="function"?[2,Promise.resolve().then(function(){return v(c,b)}).then(function(){return n})]:[2,n]}})})});return c.open(),c.write(L1(document.doctype)+"<html></html>"),O1(this.referenceElement.ownerDocument,l,A),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),m},t.prototype.createElementClone=function(e){if(ui(e,2))debugger;if(Fc(e))return this.createCanvasClone(e);if(cd(e))return this.createVideoClone(e);if(fd(e))return this.createStyleClone(e);var a=e.cloneNode(!1);return mi(a)&&(mi(e)&&e.currentSrc&&e.currentSrc!==e.src&&(a.src=e.currentSrc,a.srcset=""),a.loading==="lazy"&&(a.loading="eager")),pd(a)?this.createCustomElementClone(a):a},t.prototype.createCustomElementClone=function(e){var a=document.createElement("html2canvascustomelement");return Br(e.style,a),a},t.prototype.createStyleClone=function(e){try{var a=e.sheet;if(a&&a.cssRules){var s=[].slice.call(a.cssRules,0).reduce(function(l,A){return A&&typeof A.cssText=="string"?l+A.cssText:l},""),n=e.cloneNode(!1);return n.textContent=s,n}}catch(l){if(this.context.logger.error("Unable to access cssRules property",l),l.name!=="SecurityError")throw l}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var a;if(this.options.inlineImages&&e.ownerDocument){var s=e.ownerDocument.createElement("img");try{return s.src=e.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var l=e.getContext("2d"),A=n.getContext("2d");if(A)if(!this.options.allowTaint&&l)A.putImageData(l.getImageData(0,0,e.width,e.height),0,0);else{var u=(a=e.getContext("webgl2"))!==null&&a!==void 0?a:e.getContext("webgl");if(u){var c=u.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}A.drawImage(e,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return n},t.prototype.createVideoClone=function(e){var a=e.ownerDocument.createElement("canvas");a.width=e.offsetWidth,a.height=e.offsetHeight;var s=a.getContext("2d");try{return s&&(s.drawImage(e,0,0,a.width,a.height),this.options.allowTaint||s.getImageData(0,0,a.width,a.height)),a}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var n=e.ownerDocument.createElement("canvas");return n.width=e.offsetWidth,n.height=e.offsetHeight,n},t.prototype.appendChildNode=function(e,a,s){(!un(a)||!E1(a)&&!a.hasAttribute(Sc)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(a)))&&(!this.options.copyStyles||!un(a)||!fd(a))&&e.appendChild(this.cloneNode(a,s))},t.prototype.cloneChildNodes=function(e,a,s){for(var n=this,l=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;l;l=l.nextSibling)if(un(l)&&Uc(l)&&typeof l.assignedNodes=="function"){var A=l.assignedNodes();A.length&&A.forEach(function(u){return n.appendChildNode(a,u,s)})}else this.appendChildNode(a,l,s)},t.prototype.cloneNode=function(e,a){if(Cc(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var s=e.ownerDocument.defaultView;if(s&&un(e)&&(pi(e)||Xo(e))){var n=this.createElementClone(e);n.style.transitionProperty="none";var l=s.getComputedStyle(e),A=s.getComputedStyle(e,":before"),u=s.getComputedStyle(e,":after");this.referenceElement===e&&pi(n)&&(this.clonedReferenceElement=n),nA(n)&&K1(n);var c=this.counters.parse(new XA(this.context,l)),m=this.resolvePseudoContent(e,n,A,jn.BEFORE);pd(e)&&(a=!0),cd(e)||this.cloneChildNodes(e,n,a),m&&n.insertBefore(m,n.firstChild);var v=this.resolvePseudoContent(e,n,u,jn.AFTER);return v&&n.appendChild(v),this.counters.pop(c),(l&&(this.options.copyStyles||Xo(e))&&!xc(e)||a)&&Br(l,n),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(pl(e)||ml(e))&&(pl(n)||ml(n))&&(n.value=e.value),n}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,a,s,n){var l=this;if(s){var A=s.content,u=a.ownerDocument;if(!(!u||!A||A==="none"||A==="-moz-alt-content"||s.display==="none")){this.counters.parse(new XA(this.context,s));var c=new ky(this.context,s),m=u.createElement("html2canvaspseudoelement");Br(s,m),c.content.forEach(function(b){if(b.type===0)m.appendChild(u.createTextNode(b.value));else if(b.type===22){var g=u.createElement("img");g.src=b.value,g.style.opacity="1",m.appendChild(g)}else if(b.type===18){if(b.name==="attr"){var F=b.values.filter(at);F.length&&m.appendChild(u.createTextNode(e.getAttribute(F[0].value)||""))}else if(b.name==="counter"){var B=b.values.filter(mn),w=B[0],C=B[1];if(w&&at(w)){var k=l.counters.getCounterValue(w.value),S=C&&at(C)?di.parse(l.context,C.value):3;m.appendChild(u.createTextNode(oo(k,S,!1)))}}else if(b.name==="counters"){var E=b.values.filter(mn),w=E[0],V=E[1],C=E[2];if(w&&at(w)){var $=l.counters.getCounterValues(w.value),O=C&&at(C)?di.parse(l.context,C.value):3,D=V&&V.type===0?V.value:"",Q=$.map(function(K){return oo(K,O,!1)}).join(D);m.appendChild(u.createTextNode(Q))}}}else if(b.type===20)switch(b.value){case"open-quote":m.appendChild(u.createTextNode(WA(c.quotes,l.quoteDepth++,!0)));break;case"close-quote":m.appendChild(u.createTextNode(WA(c.quotes,--l.quoteDepth,!1)));break;default:m.appendChild(u.createTextNode(b.value))}}),m.className=hi+" "+_i;var v=n===jn.BEFORE?" "+hi:" "+_i;return Xo(a)?a.className.baseValue+=v:a.className+=v,m}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),jn;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(jn||(jn={}));var $1=function(t,e){var a=t.createElement("iframe");return a.className="html2canvas-container",a.style.visibility="hidden",a.style.position="fixed",a.style.left="-10000px",a.style.top="0px",a.style.border="0",a.width=e.width.toString(),a.height=e.height.toString(),a.scrolling="no",a.setAttribute(Sc,"true"),t.body.appendChild(a),a},I1=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},T1=function(t){return Promise.all([].slice.call(t.images,0).map(I1))},M1=function(t){return new Promise(function(e,a){var s=t.contentWindow;if(!s)return a("No window assigned for iframe");var n=s.document;s.onload=t.onload=function(){s.onload=t.onload=null;var l=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(l),e(t))},50)}})},V1=["all","d","content"],Br=function(t,e){for(var a=t.length-1;a>=0;a--){var s=t.item(a);V1.indexOf(s)===-1&&e.style.setProperty(s,t.getPropertyValue(s))}return e},L1=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},O1=function(t,e,a){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||a!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,a)},H1=function(t){var e=t[0],a=t[1],s=t[2];e.scrollLeft=a,e.scrollTop=s},R1=":before",P1=":after",hi="___html2canvas___pseudoelement_before",_i="___html2canvas___pseudoelement_after",bd=`{
    content: "" !important;
    display: none !important;
}`,K1=function(t){N1(t,"."+hi+R1+bd+`
         .`+_i+P1+bd)},N1=function(t,e){var a=t.ownerDocument;if(a){var s=a.createElement("style");s.textContent=e,t.appendChild(s)}},Qc=function(){function t(){}return t.getOrigin=function(e){var a=t._link;return a?(a.href=e,a.href=a.href,a.protocol+a.hostname+a.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),G1=function(){function t(e,a){this.context=e,this._options=a,this._cache={}}return t.prototype.addImage=function(e){var a=Promise.resolve();return this.has(e)||(kr(e)||q1(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),a},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Zt(this,void 0,void 0,function(){var a,s,n,l,A=this;return zt(this,function(u){switch(u.label){case 0:return a=Qc.isSameOrigin(e),s=!Cr(e)&&this._options.useCORS===!0&&Rt.SUPPORT_CORS_IMAGES&&!a,n=!Cr(e)&&!a&&!kr(e)&&typeof this._options.proxy=="string"&&Rt.SUPPORT_CORS_XHR&&!s,!a&&this._options.allowTaint===!1&&!Cr(e)&&!kr(e)&&!n&&!s?[2]:(l=e,n?[4,this.proxy(l)]:[3,2]);case 1:l=u.sent(),u.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,m){var v=new Image;v.onload=function(){return c(v)},v.onerror=m,(W1(l)||s)&&(v.crossOrigin="anonymous"),v.src=l,v.complete===!0&&setTimeout(function(){return c(v)},500),A._options.imageTimeout>0&&setTimeout(function(){return m("Timed out ("+A._options.imageTimeout+"ms) loading image")},A._options.imageTimeout)})];case 3:return[2,u.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var a=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var n=e.substring(0,256);return new Promise(function(l,A){var u=Rt.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(u==="text")l(c.response);else{var b=new FileReader;b.addEventListener("load",function(){return l(b.result)},!1),b.addEventListener("error",function(g){return A(g)},!1),b.readAsDataURL(c.response)}else A("Failed to proxy resource "+n+" with status code "+c.status)},c.onerror=A;var m=s.indexOf("?")>-1?"&":"?";if(c.open("GET",""+s+m+"url="+encodeURIComponent(e)+"&responseType="+u),u!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=u),a._options.imageTimeout){var v=a._options.imageTimeout;c.timeout=v,c.ontimeout=function(){return A("Timed out ("+v+"ms) proxying "+n)}}c.send()})},t}(),j1=/^data:image\/svg\+xml/i,z1=/^data:image\/.*;base64,/i,Y1=/^data:image\/.*/i,q1=function(t){return Rt.SUPPORT_SVG_DRAWING||!X1(t)},Cr=function(t){return Y1.test(t)},W1=function(t){return z1.test(t)},kr=function(t){return t.substr(0,4)==="blob"},X1=function(t){return t.substr(-3).toLowerCase()==="svg"||j1.test(t)},ke=function(){function t(e,a){this.type=0,this.x=e,this.y=a}return t.prototype.add=function(e,a){return new t(this.x+e,this.y+a)},t}(),en=function(t,e,a){return new ke(t.x+(e.x-t.x)*a,t.y+(e.y-t.y)*a)},Io=function(){function t(e,a,s,n){this.type=1,this.start=e,this.startControl=a,this.endControl=s,this.end=n}return t.prototype.subdivide=function(e,a){var s=en(this.start,this.startControl,e),n=en(this.startControl,this.endControl,e),l=en(this.endControl,this.end,e),A=en(s,n,e),u=en(n,l,e),c=en(A,u,e);return a?new t(this.start,s,A,c):new t(c,u,l,this.end)},t.prototype.add=function(e,a){return new t(this.start.add(e,a),this.startControl.add(e,a),this.endControl.add(e,a),this.end.add(e,a))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),ya=function(t){return t.type===1},J1=function(){function t(e){var a=e.styles,s=e.bounds,n=Tn(a.borderTopLeftRadius,s.width,s.height),l=n[0],A=n[1],u=Tn(a.borderTopRightRadius,s.width,s.height),c=u[0],m=u[1],v=Tn(a.borderBottomRightRadius,s.width,s.height),b=v[0],g=v[1],F=Tn(a.borderBottomLeftRadius,s.width,s.height),B=F[0],w=F[1],C=[];C.push((l+c)/s.width),C.push((B+b)/s.width),C.push((A+w)/s.height),C.push((m+g)/s.height);var k=Math.max.apply(Math,C);k>1&&(l/=k,A/=k,c/=k,m/=k,b/=k,g/=k,B/=k,w/=k);var S=s.width-c,E=s.height-g,V=s.width-b,$=s.height-w,O=a.borderTopWidth,D=a.borderRightWidth,Q=a.borderBottomWidth,I=a.borderLeftWidth,L=it(a.paddingTop,e.bounds.width),K=it(a.paddingRight,e.bounds.width),N=it(a.paddingBottom,e.bounds.width),W=it(a.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=l>0||A>0?ct(s.left+I/3,s.top+O/3,l-I/3,A-O/3,Je.TOP_LEFT):new ke(s.left+I/3,s.top+O/3),this.topRightBorderDoubleOuterBox=l>0||A>0?ct(s.left+S,s.top+O/3,c-D/3,m-O/3,Je.TOP_RIGHT):new ke(s.left+s.width-D/3,s.top+O/3),this.bottomRightBorderDoubleOuterBox=b>0||g>0?ct(s.left+V,s.top+E,b-D/3,g-Q/3,Je.BOTTOM_RIGHT):new ke(s.left+s.width-D/3,s.top+s.height-Q/3),this.bottomLeftBorderDoubleOuterBox=B>0||w>0?ct(s.left+I/3,s.top+$,B-I/3,w-Q/3,Je.BOTTOM_LEFT):new ke(s.left+I/3,s.top+s.height-Q/3),this.topLeftBorderDoubleInnerBox=l>0||A>0?ct(s.left+I*2/3,s.top+O*2/3,l-I*2/3,A-O*2/3,Je.TOP_LEFT):new ke(s.left+I*2/3,s.top+O*2/3),this.topRightBorderDoubleInnerBox=l>0||A>0?ct(s.left+S,s.top+O*2/3,c-D*2/3,m-O*2/3,Je.TOP_RIGHT):new ke(s.left+s.width-D*2/3,s.top+O*2/3),this.bottomRightBorderDoubleInnerBox=b>0||g>0?ct(s.left+V,s.top+E,b-D*2/3,g-Q*2/3,Je.BOTTOM_RIGHT):new ke(s.left+s.width-D*2/3,s.top+s.height-Q*2/3),this.bottomLeftBorderDoubleInnerBox=B>0||w>0?ct(s.left+I*2/3,s.top+$,B-I*2/3,w-Q*2/3,Je.BOTTOM_LEFT):new ke(s.left+I*2/3,s.top+s.height-Q*2/3),this.topLeftBorderStroke=l>0||A>0?ct(s.left+I/2,s.top+O/2,l-I/2,A-O/2,Je.TOP_LEFT):new ke(s.left+I/2,s.top+O/2),this.topRightBorderStroke=l>0||A>0?ct(s.left+S,s.top+O/2,c-D/2,m-O/2,Je.TOP_RIGHT):new ke(s.left+s.width-D/2,s.top+O/2),this.bottomRightBorderStroke=b>0||g>0?ct(s.left+V,s.top+E,b-D/2,g-Q/2,Je.BOTTOM_RIGHT):new ke(s.left+s.width-D/2,s.top+s.height-Q/2),this.bottomLeftBorderStroke=B>0||w>0?ct(s.left+I/2,s.top+$,B-I/2,w-Q/2,Je.BOTTOM_LEFT):new ke(s.left+I/2,s.top+s.height-Q/2),this.topLeftBorderBox=l>0||A>0?ct(s.left,s.top,l,A,Je.TOP_LEFT):new ke(s.left,s.top),this.topRightBorderBox=c>0||m>0?ct(s.left+S,s.top,c,m,Je.TOP_RIGHT):new ke(s.left+s.width,s.top),this.bottomRightBorderBox=b>0||g>0?ct(s.left+V,s.top+E,b,g,Je.BOTTOM_RIGHT):new ke(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=B>0||w>0?ct(s.left,s.top+$,B,w,Je.BOTTOM_LEFT):new ke(s.left,s.top+s.height),this.topLeftPaddingBox=l>0||A>0?ct(s.left+I,s.top+O,Math.max(0,l-I),Math.max(0,A-O),Je.TOP_LEFT):new ke(s.left+I,s.top+O),this.topRightPaddingBox=c>0||m>0?ct(s.left+Math.min(S,s.width-D),s.top+O,S>s.width+D?0:Math.max(0,c-D),Math.max(0,m-O),Je.TOP_RIGHT):new ke(s.left+s.width-D,s.top+O),this.bottomRightPaddingBox=b>0||g>0?ct(s.left+Math.min(V,s.width-I),s.top+Math.min(E,s.height-Q),Math.max(0,b-D),Math.max(0,g-Q),Je.BOTTOM_RIGHT):new ke(s.left+s.width-D,s.top+s.height-Q),this.bottomLeftPaddingBox=B>0||w>0?ct(s.left+I,s.top+Math.min($,s.height-Q),Math.max(0,B-I),Math.max(0,w-Q),Je.BOTTOM_LEFT):new ke(s.left+I,s.top+s.height-Q),this.topLeftContentBox=l>0||A>0?ct(s.left+I+W,s.top+O+L,Math.max(0,l-(I+W)),Math.max(0,A-(O+L)),Je.TOP_LEFT):new ke(s.left+I+W,s.top+O+L),this.topRightContentBox=c>0||m>0?ct(s.left+Math.min(S,s.width+I+W),s.top+O+L,S>s.width+I+W?0:c-I+W,m-(O+L),Je.TOP_RIGHT):new ke(s.left+s.width-(D+K),s.top+O+L),this.bottomRightContentBox=b>0||g>0?ct(s.left+Math.min(V,s.width-(I+W)),s.top+Math.min(E,s.height+O+L),Math.max(0,b-(D+K)),g-(Q+N),Je.BOTTOM_RIGHT):new ke(s.left+s.width-(D+K),s.top+s.height-(Q+N)),this.bottomLeftContentBox=B>0||w>0?ct(s.left+I+W,s.top+$,Math.max(0,B-(I+W)),w-(Q+N),Je.BOTTOM_LEFT):new ke(s.left+I+W,s.top+s.height-(Q+N))}return t}(),Je;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Je||(Je={}));var ct=function(t,e,a,s,n){var l=4*((Math.sqrt(2)-1)/3),A=a*l,u=s*l,c=t+a,m=e+s;switch(n){case Je.TOP_LEFT:return new Io(new ke(t,m),new ke(t,m-u),new ke(c-A,e),new ke(c,e));case Je.TOP_RIGHT:return new Io(new ke(t,e),new ke(t+A,e),new ke(c,m-u),new ke(c,m));case Je.BOTTOM_RIGHT:return new Io(new ke(c,e),new ke(c,e+u),new ke(t+A,m),new ke(t,m));case Je.BOTTOM_LEFT:default:return new Io(new ke(c,m),new ke(c-A,m),new ke(t,e+u),new ke(t,e))}},hl=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Z1=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},_l=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},eb=function(){function t(e,a,s){this.offsetX=e,this.offsetY=a,this.matrix=s,this.type=0,this.target=6}return t}(),To=function(){function t(e,a){this.path=e,this.target=a,this.type=1}return t}(),tb=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),ab=function(t){return t.type===0},Dc=function(t){return t.type===1},sb=function(t){return t.type===2},wd=function(t,e){return t.length===e.length?t.some(function(a,s){return a===e[s]}):!1},nb=function(t,e,a,s,n){return t.map(function(l,A){switch(A){case 0:return l.add(e,a);case 1:return l.add(e+s,a);case 2:return l.add(e+s,a+n);case 3:return l.add(e,a+n)}return l})},$c=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),Ic=function(){function t(e,a){if(this.container=e,this.parent=a,this.effects=[],this.curves=new J1(this.container),this.container.styles.opacity<1&&this.effects.push(new tb(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,l=this.container.styles.transform;this.effects.push(new eb(s,n,l))}if(this.container.styles.overflowX!==0){var A=hl(this.curves),u=_l(this.curves);wd(A,u)?this.effects.push(new To(A,6)):(this.effects.push(new To(A,2)),this.effects.push(new To(u,4)))}}return t.prototype.getEffects=function(e){for(var a=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,n=this.effects.slice(0);s;){var l=s.effects.filter(function(c){return!Dc(c)});if(a||s.container.styles.position!==0||!s.parent){if(n.unshift.apply(n,l),a=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var A=hl(s.curves),u=_l(s.curves);wd(A,u)||n.unshift(new To(u,6))}}else n.unshift.apply(n,l);s=s.parent}return n.filter(function(c){return $t(c.target,e)})},t}(),gi=function(t,e,a,s){t.container.elements.forEach(function(n){var l=$t(n.flags,4),A=$t(n.flags,2),u=new Ic(n,t);$t(n.styles.display,2048)&&s.push(u);var c=$t(n.flags,8)?[]:s;if(l||A){var m=l||n.styles.isPositioned()?a:e,v=new $c(u);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var b=n.styles.zIndex.order;if(b<0){var g=0;m.negativeZIndex.some(function(B,w){return b>B.element.container.styles.zIndex.order?(g=w,!1):g>0}),m.negativeZIndex.splice(g,0,v)}else if(b>0){var F=0;m.positiveZIndex.some(function(B,w){return b>=B.element.container.styles.zIndex.order?(F=w+1,!1):F>0}),m.positiveZIndex.splice(F,0,v)}else m.zeroOrAutoZIndexOrTransformedOrOpacity.push(v)}else n.styles.isFloating()?m.nonPositionedFloats.push(v):m.nonPositionedInlineLevel.push(v);gi(u,v,l?v:a,c)}else n.styles.isInlineLevel()?e.inlineLevel.push(u):e.nonInlineLevel.push(u),gi(u,e,a,c);$t(n.flags,8)&&Tc(n,c)})},Tc=function(t,e){for(var a=t instanceof fi?t.start:1,s=t instanceof fi?t.reversed:!1,n=0;n<e.length;n++){var l=e[n];l.container instanceof gc&&typeof l.container.value=="number"&&l.container.value!==0&&(a=l.container.value),l.listValue=oo(a,l.container.styles.listStyleType,!0),a+=s?-1:1}},ob=function(t){var e=new Ic(t,null),a=new $c(e),s=[];return gi(e,a,a,s),Tc(e.container,s),a},Bd=function(t,e){switch(e){case 0:return wa(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return wa(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return wa(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return wa(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},lb=function(t,e){switch(e){case 0:return wa(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return wa(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return wa(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return wa(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},rb=function(t,e){switch(e){case 0:return wa(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return wa(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return wa(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return wa(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},ib=function(t,e){switch(e){case 0:return Mo(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Mo(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Mo(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Mo(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Mo=function(t,e){var a=[];return ya(t)?a.push(t.subdivide(.5,!1)):a.push(t),ya(e)?a.push(e.subdivide(.5,!0)):a.push(e),a},wa=function(t,e,a,s){var n=[];return ya(t)?n.push(t.subdivide(.5,!1)):n.push(t),ya(a)?n.push(a.subdivide(.5,!0)):n.push(a),ya(s)?n.push(s.subdivide(.5,!0).reverse()):n.push(s),ya(e)?n.push(e.subdivide(.5,!1).reverse()):n.push(e),n},Mc=function(t){var e=t.bounds,a=t.styles;return e.add(a.borderLeftWidth,a.borderTopWidth,-(a.borderRightWidth+a.borderLeftWidth),-(a.borderTopWidth+a.borderBottomWidth))},gl=function(t){var e=t.styles,a=t.bounds,s=it(e.paddingLeft,a.width),n=it(e.paddingRight,a.width),l=it(e.paddingTop,a.width),A=it(e.paddingBottom,a.width);return a.add(s+e.borderLeftWidth,l+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+s+n),-(e.borderTopWidth+e.borderBottomWidth+l+A))},Ab=function(t,e){return t===0?e.bounds:t===2?gl(e):Mc(e)},db=function(t,e){return t===0?e.bounds:t===2?gl(e):Mc(e)},Fr=function(t,e,a){var s=Ab(ln(t.styles.backgroundOrigin,e),t),n=db(ln(t.styles.backgroundClip,e),t),l=ub(ln(t.styles.backgroundSize,e),a,s),A=l[0],u=l[1],c=Tn(ln(t.styles.backgroundPosition,e),s.width-A,s.height-u),m=cb(ln(t.styles.backgroundRepeat,e),c,l,s,n),v=Math.round(s.left+c[0]),b=Math.round(s.top+c[1]);return[m,v,b,A,u]},tn=function(t){return at(t)&&t.value===fn.AUTO},Vo=function(t){return typeof t=="number"},ub=function(t,e,a){var s=e[0],n=e[1],l=e[2],A=t[0],u=t[1];if(!A)return[0,0];if(Ut(A)&&u&&Ut(u))return[it(A,a.width),it(u,a.height)];var c=Vo(l);if(at(A)&&(A.value===fn.CONTAIN||A.value===fn.COVER)){if(Vo(l)){var m=a.width/a.height;return m<l!=(A.value===fn.COVER)?[a.width,a.width/l]:[a.height*l,a.height]}return[a.width,a.height]}var v=Vo(s),b=Vo(n),g=v||b;if(tn(A)&&(!u||tn(u))){if(v&&b)return[s,n];if(!c&&!g)return[a.width,a.height];if(g&&c){var F=v?s:n*l,B=b?n:s/l;return[F,B]}var w=v?s:a.width,C=b?n:a.height;return[w,C]}if(c){var k=0,S=0;return Ut(A)?k=it(A,a.width):Ut(u)&&(S=it(u,a.height)),tn(A)?k=S*l:(!u||tn(u))&&(S=k/l),[k,S]}var E=null,V=null;if(Ut(A)?E=it(A,a.width):u&&Ut(u)&&(V=it(u,a.height)),E!==null&&(!u||tn(u))&&(V=v&&b?E/s*n:a.height),V!==null&&tn(A)&&(E=v&&b?V/n*s:a.width),E!==null&&V!==null)return[E,V];throw new Error("Unable to calculate background-size for element")},ln=function(t,e){var a=t[e];return typeof a>"u"?t[0]:a},cb=function(t,e,a,s,n){var l=e[0],A=e[1],u=a[0],c=a[1];switch(t){case 2:return[new ke(Math.round(s.left),Math.round(s.top+A)),new ke(Math.round(s.left+s.width),Math.round(s.top+A)),new ke(Math.round(s.left+s.width),Math.round(c+s.top+A)),new ke(Math.round(s.left),Math.round(c+s.top+A))];case 3:return[new ke(Math.round(s.left+l),Math.round(s.top)),new ke(Math.round(s.left+l+u),Math.round(s.top)),new ke(Math.round(s.left+l+u),Math.round(s.height+s.top)),new ke(Math.round(s.left+l),Math.round(s.height+s.top))];case 1:return[new ke(Math.round(s.left+l),Math.round(s.top+A)),new ke(Math.round(s.left+l+u),Math.round(s.top+A)),new ke(Math.round(s.left+l+u),Math.round(s.top+A+c)),new ke(Math.round(s.left+l),Math.round(s.top+A+c))];default:return[new ke(Math.round(n.left),Math.round(n.top)),new ke(Math.round(n.left+n.width),Math.round(n.top)),new ke(Math.round(n.left+n.width),Math.round(n.height+n.top)),new ke(Math.round(n.left),Math.round(n.height+n.top))]}},fb="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Cd="Hidden Text",pb=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,a){var s=this._document.createElement("div"),n=this._document.createElement("img"),l=this._document.createElement("span"),A=this._document.body;s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=a,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",A.appendChild(s),n.src=fb,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",l.style.fontFamily=e,l.style.fontSize=a,l.style.margin="0",l.style.padding="0",l.appendChild(this._document.createTextNode(Cd)),s.appendChild(l),s.appendChild(n);var u=n.offsetTop-l.offsetTop+2;s.removeChild(l),s.appendChild(this._document.createTextNode(Cd)),s.style.lineHeight="normal",n.style.verticalAlign="super";var c=n.offsetTop-s.offsetTop+2;return A.removeChild(s),{baseline:u,middle:c}},t.prototype.getMetrics=function(e,a){var s=e+" "+a;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(e,a)),this._data[s]},t}(),Vc=function(){function t(e,a){this.context=e,this.options=a}return t}(),mb=1e4,hb=function(t){Ia(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n._activeEffects=[],n.canvas=s.canvas?s.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),s.canvas||(n.canvas.width=Math.floor(s.width*s.scale),n.canvas.height=Math.floor(s.height*s.scale),n.canvas.style.width=s.width+"px",n.canvas.style.height=s.height+"px"),n.fontMetrics=new pb(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-s.x,-s.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),n}return e.prototype.applyEffects=function(a){for(var s=this;this._activeEffects.length;)this.popEffect();a.forEach(function(n){return s.applyEffect(n)})},e.prototype.applyEffect=function(a){this.ctx.save(),sb(a)&&(this.ctx.globalAlpha=a.opacity),ab(a)&&(this.ctx.translate(a.offsetX,a.offsetY),this.ctx.transform(a.matrix[0],a.matrix[1],a.matrix[2],a.matrix[3],a.matrix[4],a.matrix[5]),this.ctx.translate(-a.offsetX,-a.offsetY)),Dc(a)&&(this.path(a.path),this.ctx.clip()),this._activeEffects.push(a)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(a){return Zt(this,void 0,void 0,function(){var s;return zt(this,function(n){switch(n.label){case 0:return s=a.element.container.styles,s.isVisible()?[4,this.renderStackContent(a)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(a){return Zt(this,void 0,void 0,function(){return zt(this,function(s){switch(s.label){case 0:if($t(a.container.flags,16))debugger;return a.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(a)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(a)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(a,s,n){var l=this;if(s===0)this.ctx.fillText(a.text,a.bounds.left,a.bounds.top+n);else{var A=aA(a.text);A.reduce(function(u,c){return l.ctx.fillText(c,u,a.bounds.top+n),u+l.ctx.measureText(c).width},a.bounds.left)}},e.prototype.createFontStyle=function(a){var s=a.fontVariant.filter(function(A){return A==="normal"||A==="small-caps"}).join(""),n=bb(a.fontFamily).join(", "),l=Ao(a.fontSize)?""+a.fontSize.number+a.fontSize.unit:a.fontSize.number+"px";return[[a.fontStyle,s,a.fontWeight,l,n].join(" "),n,l]},e.prototype.renderTextNode=function(a,s){return Zt(this,void 0,void 0,function(){var n,l,A,u,c,m,v,b,g=this;return zt(this,function(F){return n=this.createFontStyle(s),l=n[0],A=n[1],u=n[2],this.ctx.font=l,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(A,u),m=c.baseline,v=c.middle,b=s.paintOrder,a.textBounds.forEach(function(B){b.forEach(function(w){switch(w){case 0:g.ctx.fillStyle=Tt(s.color),g.renderTextWithLetterSpacing(B,s.letterSpacing,m);var C=s.textShadow;C.length&&B.text.trim().length&&(C.slice(0).reverse().forEach(function(k){g.ctx.shadowColor=Tt(k.color),g.ctx.shadowOffsetX=k.offsetX.number*g.options.scale,g.ctx.shadowOffsetY=k.offsetY.number*g.options.scale,g.ctx.shadowBlur=k.blur.number,g.renderTextWithLetterSpacing(B,s.letterSpacing,m)}),g.ctx.shadowColor="",g.ctx.shadowOffsetX=0,g.ctx.shadowOffsetY=0,g.ctx.shadowBlur=0),s.textDecorationLine.length&&(g.ctx.fillStyle=Tt(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(k){switch(k){case 1:g.ctx.fillRect(B.bounds.left,Math.round(B.bounds.top+m),B.bounds.width,1);break;case 2:g.ctx.fillRect(B.bounds.left,Math.round(B.bounds.top),B.bounds.width,1);break;case 3:g.ctx.fillRect(B.bounds.left,Math.ceil(B.bounds.top+v),B.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&B.text.trim().length&&(g.ctx.strokeStyle=Tt(s.webkitTextStrokeColor),g.ctx.lineWidth=s.webkitTextStrokeWidth,g.ctx.lineJoin=window.chrome?"miter":"round",g.ctx.strokeText(B.text,B.bounds.left,B.bounds.top+m)),g.ctx.strokeStyle="",g.ctx.lineWidth=0,g.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(a,s,n){if(n&&a.intrinsicWidth>0&&a.intrinsicHeight>0){var l=gl(a),A=_l(s);this.path(A),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,a.intrinsicWidth,a.intrinsicHeight,l.left,l.top,l.width,l.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(a){return Zt(this,void 0,void 0,function(){var s,n,l,A,u,c,S,S,m,v,b,g,V,F,B,$,w,C,k,S,E,V,$;return zt(this,function(O){switch(O.label){case 0:this.applyEffects(a.getEffects(4)),s=a.container,n=a.curves,l=s.styles,A=0,u=s.textNodes,O.label=1;case 1:return A<u.length?(c=u[A],[4,this.renderTextNode(c,l)]):[3,4];case 2:O.sent(),O.label=3;case 3:return A++,[3,1];case 4:if(!(s instanceof mc))return[3,8];O.label=5;case 5:return O.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return S=O.sent(),this.renderReplacedElement(s,n,S),[3,8];case 7:return O.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof hc&&this.renderReplacedElement(s,n,s.canvas),!(s instanceof _c))return[3,12];O.label=9;case 9:return O.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return S=O.sent(),this.renderReplacedElement(s,n,S),[3,12];case 11:return O.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof bc&&s.tree?(m=new e(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,m.render(s.tree)]):[3,14];case 13:v=O.sent(),s.width&&s.height&&this.ctx.drawImage(v,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),O.label=14;case 14:if(s instanceof sA&&(b=Math.min(s.bounds.width,s.bounds.height),s.type===cl?s.checked&&(this.ctx.save(),this.path([new ke(s.bounds.left+b*.39363,s.bounds.top+b*.79),new ke(s.bounds.left+b*.16,s.bounds.top+b*.5549),new ke(s.bounds.left+b*.27347,s.bounds.top+b*.44071),new ke(s.bounds.left+b*.39694,s.bounds.top+b*.5649),new ke(s.bounds.left+b*.72983,s.bounds.top+b*.23),new ke(s.bounds.left+b*.84,s.bounds.top+b*.34085),new ke(s.bounds.left+b*.39363,s.bounds.top+b*.79)]),this.ctx.fillStyle=Tt(ud),this.ctx.fill(),this.ctx.restore()):s.type===fl&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+b/2,s.bounds.top+b/2,b/4,0,Math.PI*2,!0),this.ctx.fillStyle=Tt(ud),this.ctx.fill(),this.ctx.restore())),_b(s)&&s.value.length){switch(g=this.createFontStyle(l),V=g[0],F=g[1],B=this.fontMetrics.getMetrics(V,F).baseline,this.ctx.font=V,this.ctx.fillStyle=Tt(l.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=vb(s.styles.textAlign),$=gl(s),w=0,s.styles.textAlign){case 1:w+=$.width/2;break;case 2:w+=$.width;break}C=$.add(w,0,0,-$.height/2+1),this.ctx.save(),this.path([new ke($.left,$.top),new ke($.left+$.width,$.top),new ke($.left+$.width,$.top+$.height),new ke($.left,$.top+$.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Gn(s.value,C),l.letterSpacing,B),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!$t(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(k=s.styles.listStyleImage,k.type!==0)return[3,18];S=void 0,E=k.url,O.label=15;case 15:return O.trys.push([15,17,,18]),[4,this.context.cache.match(E)];case 16:return S=O.sent(),this.ctx.drawImage(S,s.bounds.left-(S.width+10),s.bounds.top),[3,18];case 17:return O.sent(),this.context.logger.error("Error loading list-style-image "+E),[3,18];case 18:return[3,20];case 19:a.listValue&&s.styles.listStyleType!==-1&&(V=this.createFontStyle(l)[0],this.ctx.font=V,this.ctx.fillStyle=Tt(l.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",$=new ts(s.bounds.left,s.bounds.top+it(s.styles.paddingTop,s.bounds.width),s.bounds.width,YA(l.lineHeight,l.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Gn(a.listValue,$),l.letterSpacing,YA(l.lineHeight,l.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),O.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(a){return Zt(this,void 0,void 0,function(){var s,n,k,l,A,k,u,c,k,m,v,k,b,g,k,F,B,k,w,C,k;return zt(this,function(S){switch(S.label){case 0:if($t(a.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(a.element)];case 1:S.sent(),s=0,n=a.negativeZIndex,S.label=2;case 2:return s<n.length?(k=n[s],[4,this.renderStack(k)]):[3,5];case 3:S.sent(),S.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(a.element)];case 6:S.sent(),l=0,A=a.nonInlineLevel,S.label=7;case 7:return l<A.length?(k=A[l],[4,this.renderNode(k)]):[3,10];case 8:S.sent(),S.label=9;case 9:return l++,[3,7];case 10:u=0,c=a.nonPositionedFloats,S.label=11;case 11:return u<c.length?(k=c[u],[4,this.renderStack(k)]):[3,14];case 12:S.sent(),S.label=13;case 13:return u++,[3,11];case 14:m=0,v=a.nonPositionedInlineLevel,S.label=15;case 15:return m<v.length?(k=v[m],[4,this.renderStack(k)]):[3,18];case 16:S.sent(),S.label=17;case 17:return m++,[3,15];case 18:b=0,g=a.inlineLevel,S.label=19;case 19:return b<g.length?(k=g[b],[4,this.renderNode(k)]):[3,22];case 20:S.sent(),S.label=21;case 21:return b++,[3,19];case 22:F=0,B=a.zeroOrAutoZIndexOrTransformedOrOpacity,S.label=23;case 23:return F<B.length?(k=B[F],[4,this.renderStack(k)]):[3,26];case 24:S.sent(),S.label=25;case 25:return F++,[3,23];case 26:w=0,C=a.positiveZIndex,S.label=27;case 27:return w<C.length?(k=C[w],[4,this.renderStack(k)]):[3,30];case 28:S.sent(),S.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(a){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(a.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(a){this.ctx.beginPath(),this.formatPath(a),this.ctx.closePath()},e.prototype.formatPath=function(a){var s=this;a.forEach(function(n,l){var A=ya(n)?n.start:n;l===0?s.ctx.moveTo(A.x,A.y):s.ctx.lineTo(A.x,A.y),ya(n)&&s.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},e.prototype.renderRepeat=function(a,s,n,l){this.path(a),this.ctx.fillStyle=s,this.ctx.translate(n,l),this.ctx.fill(),this.ctx.translate(-n,-l)},e.prototype.resizeImage=function(a,s,n){var l;if(a.width===s&&a.height===n)return a;var A=(l=this.canvas.ownerDocument)!==null&&l!==void 0?l:document,u=A.createElement("canvas");u.width=Math.max(1,s),u.height=Math.max(1,n);var c=u.getContext("2d");return c.drawImage(a,0,0,a.width,a.height,0,0,s,n),u},e.prototype.renderBackgroundImage=function(a){return Zt(this,void 0,void 0,function(){var s,n,l,A,u,c;return zt(this,function(m){switch(m.label){case 0:s=a.styles.backgroundImage.length-1,n=function(v){var b,g,F,L,oe,Ae,W,R,Q,B,L,oe,Ae,W,R,w,C,k,S,E,V,$,O,D,Q,I,L,K,N,W,R,ee,oe,Ae,ue,P,G,z,j,Z,_e,he;return zt(this,function(Qe){switch(Qe.label){case 0:if(v.type!==0)return[3,5];b=void 0,g=v.url,Qe.label=1;case 1:return Qe.trys.push([1,3,,4]),[4,l.context.cache.match(g)];case 2:return b=Qe.sent(),[3,4];case 3:return Qe.sent(),l.context.logger.error("Error loading background-image "+g),[3,4];case 4:return b&&(F=Fr(a,s,[b.width,b.height,b.width/b.height]),L=F[0],oe=F[1],Ae=F[2],W=F[3],R=F[4],Q=l.ctx.createPattern(l.resizeImage(b,W,R),"repeat"),l.renderRepeat(L,Q,oe,Ae)),[3,6];case 5:av(v)?(B=Fr(a,s,[null,null,null]),L=B[0],oe=B[1],Ae=B[2],W=B[3],R=B[4],w=Xg(v.angle,W,R),C=w[0],k=w[1],S=w[2],E=w[3],V=w[4],$=document.createElement("canvas"),$.width=W,$.height=R,O=$.getContext("2d"),D=O.createLinearGradient(k,E,S,V),jA(v.stops,C).forEach(function(ge){return D.addColorStop(ge.stop,Tt(ge.color))}),O.fillStyle=D,O.fillRect(0,0,W,R),W>0&&R>0&&(Q=l.ctx.createPattern($,"repeat"),l.renderRepeat(L,Q,oe,Ae))):sv(v)&&(I=Fr(a,s,[null,null,null]),L=I[0],K=I[1],N=I[2],W=I[3],R=I[4],ee=v.position.length===0?[Zi]:v.position,oe=it(ee[0],W),Ae=it(ee[ee.length-1],R),ue=Jg(v,oe,Ae,W,R),P=ue[0],G=ue[1],P>0&&G>0&&(z=l.ctx.createRadialGradient(K+oe,N+Ae,0,K+oe,N+Ae,P),jA(v.stops,P*2).forEach(function(ge){return z.addColorStop(ge.stop,Tt(ge.color))}),l.path(L),l.ctx.fillStyle=z,P!==G?(j=a.bounds.left+.5*a.bounds.width,Z=a.bounds.top+.5*a.bounds.height,_e=G/P,he=1/_e,l.ctx.save(),l.ctx.translate(j,Z),l.ctx.transform(1,0,0,_e,0,0),l.ctx.translate(-j,-Z),l.ctx.fillRect(K,he*(N-Z)+Z,W,R*he),l.ctx.restore()):l.ctx.fill())),Qe.label=6;case 6:return s--,[2]}})},l=this,A=0,u=a.styles.backgroundImage.slice(0).reverse(),m.label=1;case 1:return A<u.length?(c=u[A],[5,n(c)]):[3,4];case 2:m.sent(),m.label=3;case 3:return A++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(a,s,n){return Zt(this,void 0,void 0,function(){return zt(this,function(l){return this.path(Bd(n,s)),this.ctx.fillStyle=Tt(a),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(a,s,n,l){return Zt(this,void 0,void 0,function(){var A,u;return zt(this,function(c){switch(c.label){case 0:return s<3?[4,this.renderSolidBorder(a,n,l)]:[3,2];case 1:return c.sent(),[2];case 2:return A=lb(l,n),this.path(A),this.ctx.fillStyle=Tt(a),this.ctx.fill(),u=rb(l,n),this.path(u),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(a){return Zt(this,void 0,void 0,function(){var s,n,l,A,u,c,m,v,b=this;return zt(this,function(g){switch(g.label){case 0:return this.applyEffects(a.getEffects(2)),s=a.container.styles,n=!ys(s.backgroundColor)||s.backgroundImage.length,l=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],A=gb(ln(s.backgroundClip,0),a.curves),n||s.boxShadow.length?(this.ctx.save(),this.path(A),this.ctx.clip(),ys(s.backgroundColor)||(this.ctx.fillStyle=Tt(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(a.container)]):[3,2];case 1:g.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(F){b.ctx.save();var B=hl(a.curves),w=F.inset?0:mb,C=nb(B,-w+(F.inset?1:-1)*F.spread.number,(F.inset?1:-1)*F.spread.number,F.spread.number*(F.inset?-2:2),F.spread.number*(F.inset?-2:2));F.inset?(b.path(B),b.ctx.clip(),b.mask(C)):(b.mask(B),b.ctx.clip(),b.path(C)),b.ctx.shadowOffsetX=F.offsetX.number+w,b.ctx.shadowOffsetY=F.offsetY.number,b.ctx.shadowColor=Tt(F.color),b.ctx.shadowBlur=F.blur.number,b.ctx.fillStyle=F.inset?Tt(F.color):"rgba(0,0,0,1)",b.ctx.fill(),b.ctx.restore()}),g.label=2;case 2:u=0,c=0,m=l,g.label=3;case 3:return c<m.length?(v=m[c],v.style!==0&&!ys(v.color)&&v.width>0?v.style!==2?[3,5]:[4,this.renderDashedDottedBorder(v.color,v.width,u,a.curves,2)]:[3,11]):[3,13];case 4:return g.sent(),[3,11];case 5:return v.style!==3?[3,7]:[4,this.renderDashedDottedBorder(v.color,v.width,u,a.curves,3)];case 6:return g.sent(),[3,11];case 7:return v.style!==4?[3,9]:[4,this.renderDoubleBorder(v.color,v.width,u,a.curves)];case 8:return g.sent(),[3,11];case 9:return[4,this.renderSolidBorder(v.color,u,a.curves)];case 10:g.sent(),g.label=11;case 11:u++,g.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(a,s,n,l,A){return Zt(this,void 0,void 0,function(){var u,c,m,v,b,g,F,B,w,C,k,S,E,V,$,O,$,O;return zt(this,function(D){return this.ctx.save(),u=ib(l,n),c=Bd(l,n),A===2&&(this.path(c),this.ctx.clip()),ya(c[0])?(m=c[0].start.x,v=c[0].start.y):(m=c[0].x,v=c[0].y),ya(c[1])?(b=c[1].end.x,g=c[1].end.y):(b=c[1].x,g=c[1].y),n===0||n===2?F=Math.abs(m-b):F=Math.abs(v-g),this.ctx.beginPath(),A===3?this.formatPath(u):this.formatPath(c.slice(0,2)),B=s<3?s*3:s*2,w=s<3?s*2:s,A===3&&(B=s,w=s),C=!0,F<=B*2?C=!1:F<=B*2+w?(k=F/(2*B+w),B*=k,w*=k):(S=Math.floor((F+w)/(B+w)),E=(F-S*B)/(S-1),V=(F-(S+1)*B)/S,w=V<=0||Math.abs(w-E)<Math.abs(w-V)?E:V),C&&(A===3?this.ctx.setLineDash([0,B+w]):this.ctx.setLineDash([B,w])),A===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=Tt(a),this.ctx.stroke(),this.ctx.setLineDash([]),A===2&&(ya(c[0])&&($=c[3],O=c[0],this.ctx.beginPath(),this.formatPath([new ke($.end.x,$.end.y),new ke(O.start.x,O.start.y)]),this.ctx.stroke()),ya(c[1])&&($=c[1],O=c[2],this.ctx.beginPath(),this.formatPath([new ke($.end.x,$.end.y),new ke(O.start.x,O.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(a){return Zt(this,void 0,void 0,function(){var s;return zt(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Tt(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=ob(a),[4,this.renderStack(s)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Vc),_b=function(t){return t instanceof yc||t instanceof vc?!0:t instanceof sA&&t.type!==fl&&t.type!==cl},gb=function(t,e){switch(t){case 0:return hl(e);case 2:return Z1(e);case 1:default:return _l(e)}},vb=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},yb=["-apple-system","system-ui"],bb=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return yb.indexOf(e)===-1}):t},wb=function(t){Ia(e,t);function e(a,s){var n=t.call(this,a,s)||this;return n.canvas=s.canvas?s.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=s,n.canvas.width=Math.floor(s.width*s.scale),n.canvas.height=Math.floor(s.height*s.scale),n.canvas.style.width=s.width+"px",n.canvas.style.height=s.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-s.x,-s.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),n}return e.prototype.render=function(a){return Zt(this,void 0,void 0,function(){var s,n;return zt(this,function(l){switch(l.label){case 0:return s=ci(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,a),[4,Bb(s)];case 1:return n=l.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Tt(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Vc),Bb=function(t){return new Promise(function(e,a){var s=new Image;s.onload=function(){e(s)},s.onerror=a,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Cb=function(){function t(e){var a=e.id,s=e.enabled;this.id=a,this.enabled=s,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,mo([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,mo([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,mo([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,mo([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),kb=function(){function t(e,a){var s;this.windowBounds=a,this.instanceName="#"+t.instanceCount++,this.logger=new Cb({id:this.instanceName,enabled:e.logging}),this.cache=(s=e.cache)!==null&&s!==void 0?s:new G1(this,e)}return t.instanceCount=1,t}(),Fb=function(t,e){return e===void 0&&(e={}),xb(t,e)};typeof window<"u"&&Qc.setContext(window);var xb=function(t,e){return Zt(void 0,void 0,void 0,function(){var a,s,n,l,A,u,c,m,v,b,g,F,B,w,C,k,S,E,V,$,D,O,D,Q,I,L,K,N,W,R,ee,oe,Ae,ue,P,G,z,j,Z,_e;return zt(this,function(he){switch(he.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(a=t.ownerDocument,!a)throw new Error("Element is not attached to a Document");if(s=a.defaultView,!s)throw new Error("Document is not attached to a Window");return n={allowTaint:(Q=e.allowTaint)!==null&&Q!==void 0?Q:!1,imageTimeout:(I=e.imageTimeout)!==null&&I!==void 0?I:15e3,proxy:e.proxy,useCORS:(L=e.useCORS)!==null&&L!==void 0?L:!1},l=Xr({logging:(K=e.logging)!==null&&K!==void 0?K:!0,cache:e.cache},n),A={windowWidth:(N=e.windowWidth)!==null&&N!==void 0?N:s.innerWidth,windowHeight:(W=e.windowHeight)!==null&&W!==void 0?W:s.innerHeight,scrollX:(R=e.scrollX)!==null&&R!==void 0?R:s.pageXOffset,scrollY:(ee=e.scrollY)!==null&&ee!==void 0?ee:s.pageYOffset},u=new ts(A.scrollX,A.scrollY,A.windowWidth,A.windowHeight),c=new kb(l,u),m=(oe=e.foreignObjectRendering)!==null&&oe!==void 0?oe:!1,v={allowTaint:(Ae=e.allowTaint)!==null&&Ae!==void 0?Ae:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:m,copyStyles:m},c.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),b=new yd(c,t,v),g=b.clonedReferenceElement,g?[4,b.toIFrame(a,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return F=he.sent(),B=nA(g)||U1(g)?n_(g.ownerDocument):Hl(c,g),w=B.width,C=B.height,k=B.left,S=B.top,E=Ub(c,g,e.backgroundColor),V={canvas:e.canvas,backgroundColor:E,scale:(P=(ue=e.scale)!==null&&ue!==void 0?ue:s.devicePixelRatio)!==null&&P!==void 0?P:1,x:((G=e.x)!==null&&G!==void 0?G:0)+k,y:((z=e.y)!==null&&z!==void 0?z:0)+S,width:(j=e.width)!==null&&j!==void 0?j:Math.ceil(w),height:(Z=e.height)!==null&&Z!==void 0?Z:Math.ceil(C)},m?(c.logger.debug("Document cloned, using foreign object rendering"),D=new wb(c,V),[4,D.render(g)]):[3,3];case 2:return $=he.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+k+","+S+" with size "+w+"x"+C+" using computed rendering"),c.logger.debug("Starting DOM parsing"),O=Bc(c,g),E===O.styles.backgroundColor&&(O.styles.backgroundColor=Ja.TRANSPARENT),c.logger.debug("Starting renderer for element at "+V.x+","+V.y+" with size "+V.width+"x"+V.height),D=new hb(c,V),[4,D.render(O)];case 4:$=he.sent(),he.label=5;case 5:return(!((_e=e.removeContainer)!==null&&_e!==void 0)||_e)&&(yd.destroy(F)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,$]}})})},Ub=function(t,e,a){var s=e.ownerDocument,n=s.documentElement?Kn(t,getComputedStyle(s.documentElement).backgroundColor):Ja.TRANSPARENT,l=s.body?Kn(t,getComputedStyle(s.body).backgroundColor):Ja.TRANSPARENT,A=typeof a=="string"?Kn(t,a):a===null?Ja.TRANSPARENT:4294967295;return e===s.documentElement?ys(n)?ys(l)?A:l:n:A};const St={__name:"Screenshot",props:{targetRef:{type:[Object,null],required:!1},size:{type:String,default:"small"}},setup(t){const e=()=>{a.targetRef?Fb(a.targetRef,{useCORS:!0,scale:2,backgroundColor:null,scrollY:-window.scrollY}).then(n=>{const l=document.createElement("a");l.download="chart-screenshot.png",l.href=n.toDataURL(),l.click()}):console.error("Target element for screenshot not found.")},a=t;return(s,n)=>(d(),U(Be,{tag:"button",onClick:e,size:t.size,title:s.$t("Screenshot")},{default:r(()=>[o(Y,{name:"Screenshot"})]),_:1},8,["size","title"]))}};var xr={exports:{}};/** @license
 *
 *     Colour Palette Generator script.
 *     Copyright (c) 2014 Google Inc.
 *
 *     Licensed under the Apache License, Version 2.0 (the "License"); you may
 *     not use this file except in compliance with the License.  You may
 *     obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 *     Unless required by applicable law or agreed to in writing, software
 *     distributed under the License is distributed on an "AS IS" BASIS,
 *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 *     implied.  See the License for the specific language governing
 *     permissions and limitations under the License.
 *
 * Furthermore, ColorBrewer colour schemes are covered by the following:
 *
 *     Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and
 *                        The Pennsylvania State University.
 *
 *     Licensed under the Apache License, Version 2.0 (the "License"); you may
 *     not use this file except in compliance with the License. You may obtain
 *     a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 *     Unless required by applicable law or agreed to in writing, software
 *     distributed under the License is distributed on an "AS IS" BASIS,
 *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 *     implied. See the License for the specific language governing
 *     permissions and limitations under the License.
 *
 *     Redistribution and use in source and binary forms, with or without
 *     modification, are permitted provided that the following conditions are
 *     met:
 *
 *     1. Redistributions as source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *
 *     2. The end-user documentation included with the redistribution, if any,
 *     must include the following acknowledgment: "This product includes color
 *     specifications and designs developed by Cynthia Brewer
 *     (http://colorbrewer.org/)." Alternately, this acknowledgment may appear
 *     in the software itself, if and wherever such third-party
 *     acknowledgments normally appear.
 *
 *     4. The name "ColorBrewer" must not be used to endorse or promote products
 *     derived from this software without prior written permission. For written
 *     permission, please contact Cynthia Brewer at cbrewer@psu.edu.
 *
 *     5. Products derived from this software may not be called "ColorBrewer",
 *     nor may "ColorBrewer" appear in their name, without prior written
 *     permission of Cynthia Brewer.
 *
 * Furthermore, Solarized colour schemes are covered by the following:
 *
 *     Copyright (c) 2011 Ethan Schoonover
 *
 *     Permission is hereby granted, free of charge, to any person obtaining
 *     a copy of this software and associated documentation files (the
 *     "Software"), to deal in the Software without restriction, including
 *     without limitation the rights to use, copy, modify, merge, publish,
 *     distribute, sublicense, and/or sell copies of the Software, and to
 *     permit persons to whom the Software is furnished to do so, subject to
 *     the following conditions:
 *
 *     The above copyright notice and this permission notice shall be included
 *     in all copies or substantial portions of the Software.
 *
 *     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 *     OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 *     MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 *     LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 *     OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 *     WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */var kd;function Eb(){return kd||(kd=1,function(t){var e=function(){var a=Array.prototype,s=function(m,v,b){return a.slice.apply(m,a.slice.call(arguments,1))},n="function",l=1e9,A=function(m,v,b,g){if(v|=0,v==0)return[];if(typeof m!==n){var F=A.listSchemes(m,v);if(!F.length)return null;m=F[(b||0)%F.length]}var B=s(arguments,2);return B[0]=v,m.apply(m,B)};A.Scheme=function(m,v){var b={},g=0,F=l,B=function(){if(arguments.length<=1)return w.color_func.bind(w);var C=s(arguments);return function(k){return C[0]=k,w.color_func.apply(w,C)}},w=function(C,k){if(C|=0,!C)return[];var S=C;if(C=Math.abs(C),C<=g){for(var E=Math.max(C,F);!(E in b);++E);var V=b[E];if(E>C){var $="shrinking_takes_head"in V?V.shrinking_takes_head:w.shrinking_takes_head;if($)V=V.slice(0,C),E=C;else return A.generate(function(O){return V[Math.round(O)]},S,0,V.length-1)}return V=V.slice(),S<0&&V.reverse(),V}else return w.color_func?A.generate(B.apply(w,arguments),S,0,1,w.color_func_cyclic):null};return w.scheme_name=m,w.groups=v?typeof v=="string"?[v]:v:[],w.max=0,w.cbf_max=l,w.addPalette=function(C,k){var S=C.length;S&&(b[S]=C,F=Math.min(F,S),g=Math.max(g,S),w.max=Math.max(w.max,S),!k&&S!=1&&(w.cbf_max=Math.min(w.cbf_max,S-1)))},w.addPalettes=function(C,k,S){k=k||C.length;for(var E=0;E<k;++E)E in C&&w.addPalette(C[E],!0);w.cbf_max=Math.min(w.cbf_max,S||1)},w.shrinkByTakingHead=function(C,k){k!==void 0?k in b&&(b[k].shrinking_takes_head=!!C):w.shrinking_takes_head=!!C},w.setColorFunction=function(C,k,S){w.color_func=C,w.color_func_cyclic=!!S,w.max=l,!k&&w.cbf_max===l&&(w.cbf_max=1)},w.color=function(C,k){return w.color_func?w.color_func.apply(this,arguments):null},w},A.Scheme.fromPalettes=function(m,v,b,g,F){var B=A.Scheme(m,v);return B.addPalettes.apply(B,s(arguments,2)),B},A.Scheme.withColorFunction=function(m,v,b,g,F){var B=A.Scheme(m,v);return B.setColorFunction.apply(B,s(arguments,2)),B};var u={};A.register=function(m){u["n-"+m.scheme_name]=[m],m.groups.forEach(function(v){(u["g-"+v]=u["g-"+v]||[]).push(m)}),(u["g-all"]=u["g-all"]||[]).push(m)},A.listSchemes=function(m,v){v?v<0&&(v=-v):v=2;var b=[];return(typeof m=="string"?[m]:m).forEach(function(g){var F=g.substring(g.length-4)==="-cbf";F&&(g=g.substring(0,g.length-4));for(var B=u["g-"+g]||u["n-"+g]||[],w=0,C;C=B[w];++w)(F?C.cbf:C.max)>=v&&b.push(C)}),b.sort(function(g,F){return g.scheme_name>=F.scheme_name?g.scheme_name>F.scheme_name?1:0:-1}),b},A.generate=function(m,v,b,g,F){if(Math.abs(v)<1)return[];if(b=b===void 0?0:b,g=g===void 0?1:g,Math.abs(v)<2)return[m(b)];for(var B=Math.abs(v),w=b,C=[],k=(g-b)/(F?B:B-1);--B>=0;w+=k)C.push(m(w));return v<0&&C.reverse(),C};var c=function(m){return m>0?m<1?m:1:0};return A.rgbColor=function(m,v,b){return[m,v,b].map(function(g){return g=Number(Math.round(c(g)*255)).toString(16),g.length==1?"0"+g:g}).join("")},A.linearRgbColor=function(m,v,b){return[m,v,b].map(function(g){return g=c(g),g<=.0031308?g=12.92*g:g=1.055*Math.pow(g,.4166666666666667)-.055,g=Number(Math.round(g*255)).toString(16),g.length==1?"0"+g:g}).join("")},A.hsvColor=function(m,v,b){m*=6;var g=v===void 0?1:c(v),F=b===void 0?1:c(b),B=F*(1-g*Math.abs(m%2-1)),w=F*(1-g);switch(Math.floor(m)%6){case 0:return A.rgbColor(F,B,w);case 1:return A.rgbColor(B,F,w);case 2:return A.rgbColor(w,F,B);case 3:return A.rgbColor(w,B,F);case 4:return A.rgbColor(B,w,F);default:return A.rgbColor(F,w,B)}},A.register(A.Scheme.withColorFunction("rainbow","qualitative",A.hsvColor,!1,!0)),A}();e.ColorFunction,e.Palette,e.PalettesList,e.SchemeType,function(){var a=e.Scheme.fromPalettes("mpn65","qualitative",[["ff0029","377eb8","66a61e","984ea3","00d2d5","ff7f00","af8d00","7f80cd","b3e900","c42e60","a65628","f781bf","8dd3c7","bebada","fb8072","80b1d3","fdb462","fccde5","bc80bd","ffed6f","c4eaff","cf8c00","1b9e77","d95f02","e7298a","e6ab02","a6761d","0097ff","00d067","000000","252525","525252","737373","969696","bdbdbd","f43600","4ba93b","5779bb","927acc","97ee3f","bf3947","9f5b00","f48758","8caed6","f2b94f","eff26e","e43872","d9b100","9d7a00","698cff","d9d9d9","00d27e","d06800","009f82","c49200","cbe8ff","fecddf","c27eb6","8cd2ce","c4b8d9","f883b0","a49100","f48800","27d0df","a04a9b"]]);a.shrinkByTakingHead(!0),e.register(a)}(),function(){var a=e.rgbColor,s=function(l,A){for(var u=arguments.length-1,c=arguments[u];u>1;)c=c*l+arguments[--u];return c},n=function(l){var A=s(Math.abs(l),1,.278393,.230389,972e-6,.078108);return A*=A,A*=A,A=1-1/A,l<0?-A:A};e.register(e.Scheme.fromPalettes("tol","qualitative",[["4477aa"],["4477aa","cc6677"],["4477aa","ddcc77","cc6677"],["4477aa","117733","ddcc77","cc6677"],["332288","88ccee","117733","ddcc77","cc6677"],["332288","88ccee","117733","ddcc77","cc6677","aa4499"],["332288","88ccee","44aa99","117733","ddcc77","cc6677","aa4499"],["332288","88ccee","44aa99","117733","999933","ddcc77","cc6677","aa4499"],["332288","88ccee","44aa99","117733","999933","ddcc77","cc6677","882255","aa4499"],["332288","88ccee","44aa99","117733","999933","ddcc77","661100","cc6677","882255","aa4499"],["332288","6699cc","88ccee","44aa99","117733","999933","ddcc77","661100","cc6677","882255","aa4499"],["332288","6699cc","88ccee","44aa99","117733","999933","ddcc77","661100","cc6677","aa4466","882255","aa4499"]],12,12)),e.tolSequentialColor=function(l){return a(1-.392*(1+n((l-.869)/.255)),1.021-.456*(1+n((l-.527)/.376)),1-.493*(1+n((l-.272)/.309)))},e.register(e.Scheme.withColorFunction("tol-sq","sequential",e.tolSequentialColor,!0)),e.tolDivergingColor=function(l){var A=s(l,.572,1.524,-1.811)/s(l,1,-.291,.1574);return a(s(l,.235,-2.13,26.92,-65.5,63.5,-22.36),A*A,1/s(l,1.579,-4.03,12.92,-31.4,48.6,-23.36))},e.register(e.Scheme.withColorFunction("tol-dv","diverging",e.tolDivergingColor,!0)),e.tolRainbowColor=function(l){return a(s(l,.472,-.567,4.05)/s(l,1,8.72,-19.17,14.1),s(l,.108932,-1.22635,27.284,-98.577,163.3,-131.395,40.634),1/s(l,1.97,3.54,-68.5,243,-297,125))},e.register(e.Scheme.withColorFunction("tol-rainbow","qualitative",e.tolRainbowColor,!0))}(),function(){e.register(e.Scheme.fromPalettes("sol-base","sequential",[["002b36","073642","586e75","657b83","839496","93a1a1","eee8d5","fdf6e3"]],1,8)),e.register(e.Scheme.fromPalettes("sol-accent","qualitative",[["b58900","cb4b16","dc322f","d33682","6c71c4","268bd2","2aa198","859900"]]))}(),function(){var a={YlGn:{type:"sequential",cbf:42,3:["f7fcb9","addd8e","31a354"],4:["ffffcc","c2e699","78c679","238443"],5:["ffffcc","c2e699","78c679","31a354","006837"],6:["ffffcc","d9f0a3","addd8e","78c679","31a354","006837"],7:["ffffcc","d9f0a3","addd8e","78c679","41ab5d","238443","005a32"],8:["ffffe5","f7fcb9","d9f0a3","addd8e","78c679","41ab5d","238443","005a32"],9:["ffffe5","f7fcb9","d9f0a3","addd8e","78c679","41ab5d","238443","006837","004529"]},YlGnBu:{type:"sequential",cbf:42,3:["edf8b1","7fcdbb","2c7fb8"],4:["ffffcc","a1dab4","41b6c4","225ea8"],5:["ffffcc","a1dab4","41b6c4","2c7fb8","253494"],6:["ffffcc","c7e9b4","7fcdbb","41b6c4","2c7fb8","253494"],7:["ffffcc","c7e9b4","7fcdbb","41b6c4","1d91c0","225ea8","0c2c84"],8:["ffffd9","edf8b1","c7e9b4","7fcdbb","41b6c4","1d91c0","225ea8","0c2c84"],9:["ffffd9","edf8b1","c7e9b4","7fcdbb","41b6c4","1d91c0","225ea8","253494","081d58"]},GnBu:{type:"sequential",cbf:42,3:["e0f3db","a8ddb5","43a2ca"],4:["f0f9e8","bae4bc","7bccc4","2b8cbe"],5:["f0f9e8","bae4bc","7bccc4","43a2ca","0868ac"],6:["f0f9e8","ccebc5","a8ddb5","7bccc4","43a2ca","0868ac"],7:["f0f9e8","ccebc5","a8ddb5","7bccc4","4eb3d3","2b8cbe","08589e"],8:["f7fcf0","e0f3db","ccebc5","a8ddb5","7bccc4","4eb3d3","2b8cbe","08589e"],9:["f7fcf0","e0f3db","ccebc5","a8ddb5","7bccc4","4eb3d3","2b8cbe","0868ac","084081"]},BuGn:{type:"sequential",cbf:42,3:["e5f5f9","99d8c9","2ca25f"],4:["edf8fb","b2e2e2","66c2a4","238b45"],5:["edf8fb","b2e2e2","66c2a4","2ca25f","006d2c"],6:["edf8fb","ccece6","99d8c9","66c2a4","2ca25f","006d2c"],7:["edf8fb","ccece6","99d8c9","66c2a4","41ae76","238b45","005824"],8:["f7fcfd","e5f5f9","ccece6","99d8c9","66c2a4","41ae76","238b45","005824"],9:["f7fcfd","e5f5f9","ccece6","99d8c9","66c2a4","41ae76","238b45","006d2c","00441b"]},PuBuGn:{type:"sequential",cbf:42,3:["ece2f0","a6bddb","1c9099"],4:["f6eff7","bdc9e1","67a9cf","02818a"],5:["f6eff7","bdc9e1","67a9cf","1c9099","016c59"],6:["f6eff7","d0d1e6","a6bddb","67a9cf","1c9099","016c59"],7:["f6eff7","d0d1e6","a6bddb","67a9cf","3690c0","02818a","016450"],8:["fff7fb","ece2f0","d0d1e6","a6bddb","67a9cf","3690c0","02818a","016450"],9:["fff7fb","ece2f0","d0d1e6","a6bddb","67a9cf","3690c0","02818a","016c59","014636"]},PuBu:{type:"sequential",cbf:42,3:["ece7f2","a6bddb","2b8cbe"],4:["f1eef6","bdc9e1","74a9cf","0570b0"],5:["f1eef6","bdc9e1","74a9cf","2b8cbe","045a8d"],6:["f1eef6","d0d1e6","a6bddb","74a9cf","2b8cbe","045a8d"],7:["f1eef6","d0d1e6","a6bddb","74a9cf","3690c0","0570b0","034e7b"],8:["fff7fb","ece7f2","d0d1e6","a6bddb","74a9cf","3690c0","0570b0","034e7b"],9:["fff7fb","ece7f2","d0d1e6","a6bddb","74a9cf","3690c0","0570b0","045a8d","023858"]},BuPu:{type:"sequential",cbf:42,3:["e0ecf4","9ebcda","8856a7"],4:["edf8fb","b3cde3","8c96c6","88419d"],5:["edf8fb","b3cde3","8c96c6","8856a7","810f7c"],6:["edf8fb","bfd3e6","9ebcda","8c96c6","8856a7","810f7c"],7:["edf8fb","bfd3e6","9ebcda","8c96c6","8c6bb1","88419d","6e016b"],8:["f7fcfd","e0ecf4","bfd3e6","9ebcda","8c96c6","8c6bb1","88419d","6e016b"],9:["f7fcfd","e0ecf4","bfd3e6","9ebcda","8c96c6","8c6bb1","88419d","810f7c","4d004b"]},RdPu:{type:"sequential",cbf:42,3:["fde0dd","fa9fb5","c51b8a"],4:["feebe2","fbb4b9","f768a1","ae017e"],5:["feebe2","fbb4b9","f768a1","c51b8a","7a0177"],6:["feebe2","fcc5c0","fa9fb5","f768a1","c51b8a","7a0177"],7:["feebe2","fcc5c0","fa9fb5","f768a1","dd3497","ae017e","7a0177"],8:["fff7f3","fde0dd","fcc5c0","fa9fb5","f768a1","dd3497","ae017e","7a0177"],9:["fff7f3","fde0dd","fcc5c0","fa9fb5","f768a1","dd3497","ae017e","7a0177","49006a"]},PuRd:{type:"sequential",cbf:42,3:["e7e1ef","c994c7","dd1c77"],4:["f1eef6","d7b5d8","df65b0","ce1256"],5:["f1eef6","d7b5d8","df65b0","dd1c77","980043"],6:["f1eef6","d4b9da","c994c7","df65b0","dd1c77","980043"],7:["f1eef6","d4b9da","c994c7","df65b0","e7298a","ce1256","91003f"],8:["f7f4f9","e7e1ef","d4b9da","c994c7","df65b0","e7298a","ce1256","91003f"],9:["f7f4f9","e7e1ef","d4b9da","c994c7","df65b0","e7298a","ce1256","980043","67001f"]},OrRd:{type:"sequential",cbf:42,3:["fee8c8","fdbb84","e34a33"],4:["fef0d9","fdcc8a","fc8d59","d7301f"],5:["fef0d9","fdcc8a","fc8d59","e34a33","b30000"],6:["fef0d9","fdd49e","fdbb84","fc8d59","e34a33","b30000"],7:["fef0d9","fdd49e","fdbb84","fc8d59","ef6548","d7301f","990000"],8:["fff7ec","fee8c8","fdd49e","fdbb84","fc8d59","ef6548","d7301f","990000"],9:["fff7ec","fee8c8","fdd49e","fdbb84","fc8d59","ef6548","d7301f","b30000","7f0000"]},YlOrRd:{type:"sequential",cbf:42,3:["ffeda0","feb24c","f03b20"],4:["ffffb2","fecc5c","fd8d3c","e31a1c"],5:["ffffb2","fecc5c","fd8d3c","f03b20","bd0026"],6:["ffffb2","fed976","feb24c","fd8d3c","f03b20","bd0026"],7:["ffffb2","fed976","feb24c","fd8d3c","fc4e2a","e31a1c","b10026"],8:["ffffcc","ffeda0","fed976","feb24c","fd8d3c","fc4e2a","e31a1c","b10026"],9:["ffffcc","ffeda0","fed976","feb24c","fd8d3c","fc4e2a","e31a1c","bd0026","800026"]},YlOrBr:{type:"sequential",cbf:42,3:["fff7bc","fec44f","d95f0e"],4:["ffffd4","fed98e","fe9929","cc4c02"],5:["ffffd4","fed98e","fe9929","d95f0e","993404"],6:["ffffd4","fee391","fec44f","fe9929","d95f0e","993404"],7:["ffffd4","fee391","fec44f","fe9929","ec7014","cc4c02","8c2d04"],8:["ffffe5","fff7bc","fee391","fec44f","fe9929","ec7014","cc4c02","8c2d04"],9:["ffffe5","fff7bc","fee391","fec44f","fe9929","ec7014","cc4c02","993404","662506"]},Purples:{type:"sequential",cbf:42,3:["efedf5","bcbddc","756bb1"],4:["f2f0f7","cbc9e2","9e9ac8","6a51a3"],5:["f2f0f7","cbc9e2","9e9ac8","756bb1","54278f"],6:["f2f0f7","dadaeb","bcbddc","9e9ac8","756bb1","54278f"],7:["f2f0f7","dadaeb","bcbddc","9e9ac8","807dba","6a51a3","4a1486"],8:["fcfbfd","efedf5","dadaeb","bcbddc","9e9ac8","807dba","6a51a3","4a1486"],9:["fcfbfd","efedf5","dadaeb","bcbddc","9e9ac8","807dba","6a51a3","54278f","3f007d"]},Blues:{type:"sequential",cbf:42,3:["deebf7","9ecae1","3182bd"],4:["eff3ff","bdd7e7","6baed6","2171b5"],5:["eff3ff","bdd7e7","6baed6","3182bd","08519c"],6:["eff3ff","c6dbef","9ecae1","6baed6","3182bd","08519c"],7:["eff3ff","c6dbef","9ecae1","6baed6","4292c6","2171b5","084594"],8:["f7fbff","deebf7","c6dbef","9ecae1","6baed6","4292c6","2171b5","084594"],9:["f7fbff","deebf7","c6dbef","9ecae1","6baed6","4292c6","2171b5","08519c","08306b"]},Greens:{type:"sequential",cbf:42,3:["e5f5e0","a1d99b","31a354"],4:["edf8e9","bae4b3","74c476","238b45"],5:["edf8e9","bae4b3","74c476","31a354","006d2c"],6:["edf8e9","c7e9c0","a1d99b","74c476","31a354","006d2c"],7:["edf8e9","c7e9c0","a1d99b","74c476","41ab5d","238b45","005a32"],8:["f7fcf5","e5f5e0","c7e9c0","a1d99b","74c476","41ab5d","238b45","005a32"],9:["f7fcf5","e5f5e0","c7e9c0","a1d99b","74c476","41ab5d","238b45","006d2c","00441b"]},Oranges:{type:"sequential",cbf:42,3:["fee6ce","fdae6b","e6550d"],4:["feedde","fdbe85","fd8d3c","d94701"],5:["feedde","fdbe85","fd8d3c","e6550d","a63603"],6:["feedde","fdd0a2","fdae6b","fd8d3c","e6550d","a63603"],7:["feedde","fdd0a2","fdae6b","fd8d3c","f16913","d94801","8c2d04"],8:["fff5eb","fee6ce","fdd0a2","fdae6b","fd8d3c","f16913","d94801","8c2d04"],9:["fff5eb","fee6ce","fdd0a2","fdae6b","fd8d3c","f16913","d94801","a63603","7f2704"]},Reds:{type:"sequential",cbf:42,3:["fee0d2","fc9272","de2d26"],4:["fee5d9","fcae91","fb6a4a","cb181d"],5:["fee5d9","fcae91","fb6a4a","de2d26","a50f15"],6:["fee5d9","fcbba1","fc9272","fb6a4a","de2d26","a50f15"],7:["fee5d9","fcbba1","fc9272","fb6a4a","ef3b2c","cb181d","99000d"],8:["fff5f0","fee0d2","fcbba1","fc9272","fb6a4a","ef3b2c","cb181d","99000d"],9:["fff5f0","fee0d2","fcbba1","fc9272","fb6a4a","ef3b2c","cb181d","a50f15","67000d"]},Greys:{type:"sequential",cbf:42,3:["f0f0f0","bdbdbd","636363"],4:["f7f7f7","cccccc","969696","525252"],5:["f7f7f7","cccccc","969696","636363","252525"],6:["f7f7f7","d9d9d9","bdbdbd","969696","636363","252525"],7:["f7f7f7","d9d9d9","bdbdbd","969696","737373","525252","252525"],8:["ffffff","f0f0f0","d9d9d9","bdbdbd","969696","737373","525252","252525"],9:["ffffff","f0f0f0","d9d9d9","bdbdbd","969696","737373","525252","252525","000000"]},PuOr:{type:"diverging",cbf:42,3:["f1a340","f7f7f7","998ec3"],4:["e66101","fdb863","b2abd2","5e3c99"],5:["e66101","fdb863","f7f7f7","b2abd2","5e3c99"],6:["b35806","f1a340","fee0b6","d8daeb","998ec3","542788"],7:["b35806","f1a340","fee0b6","f7f7f7","d8daeb","998ec3","542788"],8:["b35806","e08214","fdb863","fee0b6","d8daeb","b2abd2","8073ac","542788"],9:["b35806","e08214","fdb863","fee0b6","f7f7f7","d8daeb","b2abd2","8073ac","542788"],10:["7f3b08","b35806","e08214","fdb863","fee0b6","d8daeb","b2abd2","8073ac","542788","2d004b"],11:["7f3b08","b35806","e08214","fdb863","fee0b6","f7f7f7","d8daeb","b2abd2","8073ac","542788","2d004b"]},BrBG:{type:"diverging",cbf:42,3:["d8b365","f5f5f5","5ab4ac"],4:["a6611a","dfc27d","80cdc1","018571"],5:["a6611a","dfc27d","f5f5f5","80cdc1","018571"],6:["8c510a","d8b365","f6e8c3","c7eae5","5ab4ac","01665e"],7:["8c510a","d8b365","f6e8c3","f5f5f5","c7eae5","5ab4ac","01665e"],8:["8c510a","bf812d","dfc27d","f6e8c3","c7eae5","80cdc1","35978f","01665e"],9:["8c510a","bf812d","dfc27d","f6e8c3","f5f5f5","c7eae5","80cdc1","35978f","01665e"],10:["543005","8c510a","bf812d","dfc27d","f6e8c3","c7eae5","80cdc1","35978f","01665e","003c30"],11:["543005","8c510a","bf812d","dfc27d","f6e8c3","f5f5f5","c7eae5","80cdc1","35978f","01665e","003c30"]},PRGn:{type:"diverging",cbf:42,3:["af8dc3","f7f7f7","7fbf7b"],4:["7b3294","c2a5cf","a6dba0","008837"],5:["7b3294","c2a5cf","f7f7f7","a6dba0","008837"],6:["762a83","af8dc3","e7d4e8","d9f0d3","7fbf7b","1b7837"],7:["762a83","af8dc3","e7d4e8","f7f7f7","d9f0d3","7fbf7b","1b7837"],8:["762a83","9970ab","c2a5cf","e7d4e8","d9f0d3","a6dba0","5aae61","1b7837"],9:["762a83","9970ab","c2a5cf","e7d4e8","f7f7f7","d9f0d3","a6dba0","5aae61","1b7837"],10:["40004b","762a83","9970ab","c2a5cf","e7d4e8","d9f0d3","a6dba0","5aae61","1b7837","00441b"],11:["40004b","762a83","9970ab","c2a5cf","e7d4e8","f7f7f7","d9f0d3","a6dba0","5aae61","1b7837","00441b"]},PiYG:{type:"diverging",cbf:42,3:["e9a3c9","f7f7f7","a1d76a"],4:["d01c8b","f1b6da","b8e186","4dac26"],5:["d01c8b","f1b6da","f7f7f7","b8e186","4dac26"],6:["c51b7d","e9a3c9","fde0ef","e6f5d0","a1d76a","4d9221"],7:["c51b7d","e9a3c9","fde0ef","f7f7f7","e6f5d0","a1d76a","4d9221"],8:["c51b7d","de77ae","f1b6da","fde0ef","e6f5d0","b8e186","7fbc41","4d9221"],9:["c51b7d","de77ae","f1b6da","fde0ef","f7f7f7","e6f5d0","b8e186","7fbc41","4d9221"],10:["8e0152","c51b7d","de77ae","f1b6da","fde0ef","e6f5d0","b8e186","7fbc41","4d9221","276419"],11:["8e0152","c51b7d","de77ae","f1b6da","fde0ef","f7f7f7","e6f5d0","b8e186","7fbc41","4d9221","276419"]},RdBu:{type:"diverging",cbf:42,3:["ef8a62","f7f7f7","67a9cf"],4:["ca0020","f4a582","92c5de","0571b0"],5:["ca0020","f4a582","f7f7f7","92c5de","0571b0"],6:["b2182b","ef8a62","fddbc7","d1e5f0","67a9cf","2166ac"],7:["b2182b","ef8a62","fddbc7","f7f7f7","d1e5f0","67a9cf","2166ac"],8:["b2182b","d6604d","f4a582","fddbc7","d1e5f0","92c5de","4393c3","2166ac"],9:["b2182b","d6604d","f4a582","fddbc7","f7f7f7","d1e5f0","92c5de","4393c3","2166ac"],10:["67001f","b2182b","d6604d","f4a582","fddbc7","d1e5f0","92c5de","4393c3","2166ac","053061"],11:["67001f","b2182b","d6604d","f4a582","fddbc7","f7f7f7","d1e5f0","92c5de","4393c3","2166ac","053061"]},RdGy:{type:"diverging",cbf:42,3:["ef8a62","ffffff","999999"],4:["ca0020","f4a582","bababa","404040"],5:["ca0020","f4a582","ffffff","bababa","404040"],6:["b2182b","ef8a62","fddbc7","e0e0e0","999999","4d4d4d"],7:["b2182b","ef8a62","fddbc7","ffffff","e0e0e0","999999","4d4d4d"],8:["b2182b","d6604d","f4a582","fddbc7","e0e0e0","bababa","878787","4d4d4d"],9:["b2182b","d6604d","f4a582","fddbc7","ffffff","e0e0e0","bababa","878787","4d4d4d"],10:["67001f","b2182b","d6604d","f4a582","fddbc7","e0e0e0","bababa","878787","4d4d4d","1a1a1a"],11:["67001f","b2182b","d6604d","f4a582","fddbc7","ffffff","e0e0e0","bababa","878787","4d4d4d","1a1a1a"]},RdYlBu:{type:"diverging",cbf:42,3:["fc8d59","ffffbf","91bfdb"],4:["d7191c","fdae61","abd9e9","2c7bb6"],5:["d7191c","fdae61","ffffbf","abd9e9","2c7bb6"],6:["d73027","fc8d59","fee090","e0f3f8","91bfdb","4575b4"],7:["d73027","fc8d59","fee090","ffffbf","e0f3f8","91bfdb","4575b4"],8:["d73027","f46d43","fdae61","fee090","e0f3f8","abd9e9","74add1","4575b4"],9:["d73027","f46d43","fdae61","fee090","ffffbf","e0f3f8","abd9e9","74add1","4575b4"],10:["a50026","d73027","f46d43","fdae61","fee090","e0f3f8","abd9e9","74add1","4575b4","313695"],11:["a50026","d73027","f46d43","fdae61","fee090","ffffbf","e0f3f8","abd9e9","74add1","4575b4","313695"]},Spectral:{type:"diverging",cbf:0,3:["fc8d59","ffffbf","99d594"],4:["d7191c","fdae61","abdda4","2b83ba"],5:["d7191c","fdae61","ffffbf","abdda4","2b83ba"],6:["d53e4f","fc8d59","fee08b","e6f598","99d594","3288bd"],7:["d53e4f","fc8d59","fee08b","ffffbf","e6f598","99d594","3288bd"],8:["d53e4f","f46d43","fdae61","fee08b","e6f598","abdda4","66c2a5","3288bd"],9:["d53e4f","f46d43","fdae61","fee08b","ffffbf","e6f598","abdda4","66c2a5","3288bd"],10:["9e0142","d53e4f","f46d43","fdae61","fee08b","e6f598","abdda4","66c2a5","3288bd","5e4fa2"],11:["9e0142","d53e4f","f46d43","fdae61","fee08b","ffffbf","e6f598","abdda4","66c2a5","3288bd","5e4fa2"]},RdYlGn:{type:"diverging",cbf:0,3:["fc8d59","ffffbf","91cf60"],4:["d7191c","fdae61","a6d96a","1a9641"],5:["d7191c","fdae61","ffffbf","a6d96a","1a9641"],6:["d73027","fc8d59","fee08b","d9ef8b","91cf60","1a9850"],7:["d73027","fc8d59","fee08b","ffffbf","d9ef8b","91cf60","1a9850"],8:["d73027","f46d43","fdae61","fee08b","d9ef8b","a6d96a","66bd63","1a9850"],9:["d73027","f46d43","fdae61","fee08b","ffffbf","d9ef8b","a6d96a","66bd63","1a9850"],10:["a50026","d73027","f46d43","fdae61","fee08b","d9ef8b","a6d96a","66bd63","1a9850","006837"],11:["a50026","d73027","f46d43","fdae61","fee08b","ffffbf","d9ef8b","a6d96a","66bd63","1a9850","006837"]},Accent:{type:"qualitative",cbf:0,3:["7fc97f","beaed4","fdc086"],4:["7fc97f","beaed4","fdc086","ffff99"],5:["7fc97f","beaed4","fdc086","ffff99","386cb0"],6:["7fc97f","beaed4","fdc086","ffff99","386cb0","f0027f"],7:["7fc97f","beaed4","fdc086","ffff99","386cb0","f0027f","bf5b17"],8:["7fc97f","beaed4","fdc086","ffff99","386cb0","f0027f","bf5b17","666666"]},Dark2:{type:"qualitative",cbf:3,3:["1b9e77","d95f02","7570b3"],4:["1b9e77","d95f02","7570b3","e7298a"],5:["1b9e77","d95f02","7570b3","e7298a","66a61e"],6:["1b9e77","d95f02","7570b3","e7298a","66a61e","e6ab02"],7:["1b9e77","d95f02","7570b3","e7298a","66a61e","e6ab02","a6761d"],8:["1b9e77","d95f02","7570b3","e7298a","66a61e","e6ab02","a6761d","666666"]},Paired:{type:"qualitative",cbf:4,3:["a6cee3","1f78b4","b2df8a"],4:["a6cee3","1f78b4","b2df8a","33a02c"],5:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99"],6:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c"],7:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f"],8:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00"],9:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00","cab2d6"],10:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00","cab2d6","6a3d9a"],11:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00","cab2d6","6a3d9a","ffff99"],12:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00","cab2d6","6a3d9a","ffff99","b15928"]},Pastel1:{type:"qualitative",cbf:0,3:["fbb4ae","b3cde3","ccebc5"],4:["fbb4ae","b3cde3","ccebc5","decbe4"],5:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6"],6:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6","ffffcc"],7:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6","ffffcc","e5d8bd"],8:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6","ffffcc","e5d8bd","fddaec"],9:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6","ffffcc","e5d8bd","fddaec","f2f2f2"]},Pastel2:{type:"qualitative",cbf:0,3:["b3e2cd","fdcdac","cbd5e8"],4:["b3e2cd","fdcdac","cbd5e8","f4cae4"],5:["b3e2cd","fdcdac","cbd5e8","f4cae4","e6f5c9"],6:["b3e2cd","fdcdac","cbd5e8","f4cae4","e6f5c9","fff2ae"],7:["b3e2cd","fdcdac","cbd5e8","f4cae4","e6f5c9","fff2ae","f1e2cc"],8:["b3e2cd","fdcdac","cbd5e8","f4cae4","e6f5c9","fff2ae","f1e2cc","cccccc"]},Set1:{type:"qualitative",cbf:0,3:["e41a1c","377eb8","4daf4a"],4:["e41a1c","377eb8","4daf4a","984ea3"],5:["e41a1c","377eb8","4daf4a","984ea3","ff7f00"],6:["e41a1c","377eb8","4daf4a","984ea3","ff7f00","ffff33"],7:["e41a1c","377eb8","4daf4a","984ea3","ff7f00","ffff33","a65628"],8:["e41a1c","377eb8","4daf4a","984ea3","ff7f00","ffff33","a65628","f781bf"],9:["e41a1c","377eb8","4daf4a","984ea3","ff7f00","ffff33","a65628","f781bf","999999"]},Set2:{type:"qualitative",cbf:3,3:["66c2a5","fc8d62","8da0cb"],4:["66c2a5","fc8d62","8da0cb","e78ac3"],5:["66c2a5","fc8d62","8da0cb","e78ac3","a6d854"],6:["66c2a5","fc8d62","8da0cb","e78ac3","a6d854","ffd92f"],7:["66c2a5","fc8d62","8da0cb","e78ac3","a6d854","ffd92f","e5c494"],8:["66c2a5","fc8d62","8da0cb","e78ac3","a6d854","ffd92f","e5c494","b3b3b3"]},Set3:{type:"qualitative",cbf:0,3:["8dd3c7","ffffb3","bebada"],4:["8dd3c7","ffffb3","bebada","fb8072"],5:["8dd3c7","ffffb3","bebada","fb8072","80b1d3"],6:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462"],7:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69"],8:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5"],9:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5","d9d9d9"],10:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5","d9d9d9","bc80bd"],11:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5","d9d9d9","bc80bd","ccebc5"],12:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5","d9d9d9","bc80bd","ccebc5","ffed6f"]}};for(var s in a){var n=a[s];n=e.Scheme.fromPalettes("cb-"+s,[n.type,"cb-"+n.type],n,12,n.cbf),e.register(n)}}(),t.exports&&(t.exports=e)}(xr)),xr.exports}Eb();class Sb extends Xt{constructor(){super(...arguments);fe(this,"data",{dashboard:[{name:"sales_growth_chart",type:"line"}],order:[{name:"gross_sale_by_day_chart",type:""},{name:"order_completion_time_chart",type:""},{name:"item_count_distribution_chart",type:""},{name:"gross_sale_by_hour_chart",type:""},{name:"order_value_distribution_chart",type:""},{name:"avg_order_gross_chart",type:""},{name:"avg_order_items_chart",type:""},{name:"order_chart",type:""}],revenue:[{name:"revenue_chart",type:"line"}],refund:[{name:"refund_chart",type:"line"}],subscription:[{name:"subscription_chart",type:"line"},{name:"retention_chart",type:"line"},{name:"daily_signups_chart",type:"line"}],product:[{name:"product_chart",type:"bar"}]});fe(this,"storageKey","chart-type");fe(this,"listeners",{})}beforeInit(){this.mergeWithStorage()}mergeWithStorage(){const a=Ge.get(this.storageKey);this.data.dashboard=a.dashboard??this.data.dashboard,this.data.order=a.order??this.data.order,this.data.revenue=a.revenue??this.data.revenue,this.data.refund=a.refund??this.data.refund,this.data.subscription=a.subscription??this.data.subscription}addListener(a,s){this.listeners[a]=s}async onChange(a,s,n){const A=this.data[a].findIndex(u=>u.name===s);A!==-1?this.data[a][A].type=n:this.data[a].push({name:s,type:n}),this.syncStorage();for(let u in this.listeners)this.listeners[u](this.applicableFilters)}getChartType(a,s){const l=this.data[a].find(A=>A.name===s);return l?l.type:null}syncStorage(){Ge.set(this.storageKey,this.applicableFilters.chartType)}removeListener(a){delete this.listeners[a]}get applicableFilters(){return{chartType:{dashboard:this.data.dashboard,order:this.data.order,revenue:this.data.revenue,refund:this.data.refund,subscription:this.data.subscription}}}}const yt=Sb.init();function Gs(t){const e=Ce(t[0]).format("MMMM D, YYYY"),a=Ce(t[1]).format("MMMM D, YYYY");return e===a?`on ${e}.`:`between ${e} and ${a}.`}function js(t){const e=t.split("-");if(e.length===3){const[a,s,n]=e;return`${$a[parseInt(s)-1]} ${n}`}else if(e.length===2){const[a,s]=e;return`${$a[parseInt(s)-1]} ${a}`}else if(e.length===1){const[a]=e;return`${a}`}}function ns(t){return t.map(e=>js(e.group))}const It=me.colors.report,Qb={[It.light_gray]:It.cyan_blue,[It.light_gray_cyan_blue]:It.cyan_blue_dark,[It.blue]:It.royal_blue,[It.royal_blue]:It.dark_blue,[It.medium_slate_blue]:It.dark_purple,[It.dark_cyan_blue_16]:It.dark_cyan_blue_40,[It.dark_cyan_blue_24]:It.dark_cyan_blue_40,[It.blue]:It.blue_dark_mode,[It.purple]:It.purple_dark_mode};function ea(t){return Qb[t]}function xa(t){const e=t<=31?6:7,a=Math.floor(t/e);return{splitNumber:e,interval:a}}const Db={class:"fct-gross-sale-vs-net-revenue-wrap"},$b={class:"fct-btn-group sm"},Ib={__name:"SalesGrowthChart",props:{chartData:{type:Array,required:!0},reportFilter:{type:Object},loading:{type:Boolean,default:!0}},emits:["fetch-chart-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T(null);T("daily");const l=T(yt.getChartType("order","sales_growth_chart")||"line"),A=me.colors.report,u=T(me.isDark()),c=X(()=>a.chartData.every(E=>E.orders===0)),m=X(()=>u.value?A.dark_cyan_blue_16:A.light_gray),v=X(()=>u.value?A.dark_cyan_blue_36:A.light_gray_cyan_blue),b=X(()=>[{title:f("Orders"),key:"orders",color:m.value,yAxisIndex:1},{title:f("Revenue"),key:"net_revenue",color:v.value,yAxisIndex:0}].map(({title:E,key:V,color:$,yAxisIndex:O})=>k(E,l.value,a.chartData.map(D=>D[V]),$,O)));$a.map(E=>E.slice(0,3));const g=X(()=>ns(a.chartData));let F=null;const B=()=>{F&&(F.dispose(),F=null),de(()=>{s.value&&(F=ot(s.value),C())})},w=X(()=>xa(a.chartData.length)),C=()=>{if(!F)return;u.value=me.isDark();const E={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,top:"5%",icon:"circle",itemWidth:8,itemHeight:8,itemGap:30,textStyle:{color:u.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?A.dark_cyan_blue_16:A.light_gray_blue}},formatter:V=>{let $=V[0].name;return V.forEach(O=>{const D=O.seriesIndex===1?`${xe.scaled(O.value)}`:O.value,Q=u.value?"#ffffff":"#565865";$+=`<div>
            ${O.marker}
            <span style="color: ${Q};">${O.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${Q};">
              ${D}
            </span>
          </div>`}),$}},xAxis:{type:"category",data:g.value,axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12,interval:w.value.interval},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:[{name:f("Revenue"),type:"value",position:"left",axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12,formatter:V=>`${xe.formatScaled(V)}`},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}},{name:f("Orders"),type:"value",position:"right",axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12},splitLine:{show:!1,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}}],series:b.value};F.setOption(E,{notMerge:!0,replaceMerge:["series"]})},k=(E,V,$,O,D)=>({name:E,type:V,barMaxWidth:30,data:$,smooth:!1,color:O,lineStyle:{width:3},areaStyle:{opacity:.3,color:O},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:O,borderRadius:[4,4,0,0]},yAxisIndex:D,emphasis:{scale:2,itemStyle:{color:ea(O)},lineStyle:{color:O},areaStyle:{opacity:.3,color:O}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),S=E=>{l.value!==E&&(l.value=E,yt.onChange("order","sales_growth_chart",E),C())};return ce([()=>a.chartData,l],()=>{de(C)},{deep:!0}),ce(c,E=>{E||B()}),ce(()=>a.loading,E=>{E||B()}),je(()=>{window.removeEventListener("onFluentCartThemeChange",C,!1)}),pe(()=>{window.addEventListener("onFluentCartThemeChange",C),de(B)}),(E,V)=>{const $=y("el-skeleton");return d(),_("div",Db,[o(se,{id:"chartContainer",ref_key:"cardRef",ref:n},{default:r(()=>[o(le,{title:E.$t("Sales Growth"),border_bottom:""},ut({_:2},[!c.value&&!t.loading?{name:"action",fn:r(()=>[i("div",$b,[o(Fs,{activeType:l.value,types:{bar:"BarChart",line:"LineChart"},onChange:S},null,8,["activeType"]),o(St,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1032,["title"]),o(ae,{class:"p-0"},{default:r(()=>[t.loading?(d(),U($,{key:0,animated:"",rows:5,class:"p-4"})):(d(),_(H,{key:1},[c.value?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-chart-wrap fct-gross-sale-vs-net-revenue-chart",ref_key:"chartRef",ref:s},null,512))],64))]),_:1})]),_:1},512)])}}},Tb={class:"fct-gross-sale-vs-net-revenue-wrap"},Mb={class:"fct-btn-group sm"},Vb={key:0,class:"fct-world-map-action-btns absolute top-5 right-5 flex flex-col gap-1 z-10"},Lb={key:1,class:"fct-world-map-action-btns absolute top-[10px] right-[40px] flex flex-col gap-1 z-10"},Fd=.5,Ur=6,Lo=1.2,Ob={__name:"HeatMap",props:{data:{type:Array,required:!0}},setup(t){const e=t,a=me.colors,s=T(null),n=T(null),l=T(!1),A=T("world"),u=T(92),c=T(100);T(!1);let m=null,v=null,b=50;const g=T(1.2),F=T(),B=a.blue,w=X(()=>{const G=c.value-u.value,z=e.data?e.data.length:0;return G<60||z<15}),C=G=>{G=G.replace(/^#/,"");const z=parseInt(G.substring(0,2),16),j=parseInt(G.substring(2,4),16),Z=parseInt(G.substring(4,6),16);return[z,j,Z]},k=()=>me.isDark()?a.gray[50]:a.gray[600],S=C(B[500]),E=async()=>{const G=Os.getUrl("world.geo.json"),j=await(await fetch(G)).json();Kp("world",j)},V=G=>{if(!G||isNaN(G))return`rgba(${S.join(",")}, 0)`;const z=Math.log(G+1)/Math.log(b+1);return`rgba(${S.join(",")}, ${z})`},$=G=>{A.value=G,R(),m&&(m.clear(),m.setOption(N()),G==="bar"&&O()),v&&l.value&&(v.clear(),v.setOption(N()),G==="bar"&&D())},O=()=>{m&&(m.off("dataZoom"),m.on("dataZoom",function(G){G.batch&&G.batch[0]?(u.value=G.batch[0].start||0,c.value=G.batch[0].end||100):(u.value=G.start||0,c.value=G.end||100),setTimeout(()=>{R()},100)}))},D=()=>{v&&(v.off("dataZoom"),v.on("dataZoom",function(G){G.batch&&G.batch[0]?(u.value=G.batch[0].start||0,c.value=G.batch[0].end||100):(u.value=G.start||0,c.value=G.end||100),setTimeout(()=>{v&&v.setOption(N())},100)}))},Q=X(()=>(e.data||[]).map(G=>({...G,value:G.value||0,itemStyle:{color:V(G.value||0)},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}))),I=()=>({backgroundColor:me.isDark()?a.dark[700]:a.gray[25],tooltip:{trigger:"item",formatter:G=>f("%1$s%2$s Orders: %3$s",G.name,"<br>",G.value||0),borderRadius:8,backgroundColor:me.isDark()?"#38485a":"#ffffff",borderColor:me.isDark()?"#4a5a6b":"#c0c4ca",borderWidth:1,textStyle:{color:me.isDark()?"#ffffff":"#565865"}},visualMap:{min:0,max:b,left:l.value?"5%":"center",bottom:l.value?"center":"4%",text:[f("High"),f("Low")],orient:l.value?"vertical":"horizontal",calculable:!0,inRange:{color:[B[100],B[500]]},textStyle:{color:a.gray[800]}},series:[{name:"Orders",type:"map",map:"world",roam:F.value,zoom:g.value,label:{show:!1,emphasis:{show:!0,color:a.gray[1e3],fontWeight:"bold",textShadowColor:a.gray[50],textShadowBlur:3,textShadowOffsetX:0,textShadowOffsetY:0}},emphasis:{itemStyle:{areaColor:B[300],shadowBlur:10,shadowColor:a.gray[400]}},itemStyle:{borderColor:a.gray[200],borderWidth:.5},data:Q.value}]}),L=X(()=>{const G=e.data.length,z=c.value-u.value,j=Math.ceil(G*z/100);let Z=0;return j>100?Z=9:j>50?Z=4:j>30?Z=2:j>20&&(Z=1),Z}),K=()=>{const G=w.value;return{backgroundColor:me.isDark()?a.dark[700]:a.gray[25],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(z){const j=z[0];return`${j.name}<br/>${f("Orders")}: ${j.value||0}`},backgroundColor:me.isDark()?"#38485a":"#ffffff",textStyle:{color:me.isDark()?a.gray[25]:a.system.mid},borderColor:me.isDark()?"#4a5a6b":"#c0c4ca",borderWidth:1},dataZoom:[{type:"inside",yAxisIndex:0,start:u.value,end:c.value},{type:"slider",yAxisIndex:0,start:u.value,end:c.value,width:25,top:10,right:10,textStyle:{color:k()},brushSelect:!1,showDetail:!1,disabled:!0}],grid:{left:G?"10px":"0%",right:"15%",top:"10%",bottom:"15%",containLabel:!0},yAxis:{type:"category",axisTick:{show:G},splitLine:{show:!1},axisLine:{show:G,lineStyle:{color:k()}},axisLabel:{show:G,interval:L.value,color:k(),fontSize:11},data:e.data.map(z=>z.name)},xAxis:{type:"value",axisLabel:{show:!0,color:k(),formatter:function(z){return z.toLocaleString()}},splitLine:{show:!0,lineStyle:{color:me.isDark()?a.gray[600]:a.gray[200]}}},series:[{type:"bar",large:!0,itemStyle:{color:new Yr(0,0,1,0,[{offset:0,color:B[400]},{offset:1,color:B[600]}]),borderRadius:[0,4,4,0]},emphasis:{itemStyle:{color:new Yr(0,0,1,0,[{offset:0,color:B[500]},{offset:1,color:B[700]}])}},data:e.data.map(z=>z.value),label:{show:G,formatter:"{c}",position:"right",color:k(),fontSize:10}}]}},N=()=>A.value==="bar"?K():I(),W=async()=>{await E(),s.value&&(m=ot(s.value),m.setOption(N()),A.value==="bar"&&O(),m.on("georoam",()=>{const z=m.getOption().series[0].zoom;if(z!==g.value)if(z<Lo||z>Ur){const j=Math.max(Lo,Math.min(Ur,z));m.setOption({series:[{zoom:j}]},!1),g.value=j}else g.value=z}))},R=()=>{e.data&&e.data.length>0?b=Math.max(...e.data.map(G=>G.value||0)):b=1,m&&m.setOption(N(),{notMerge:!0})},ee=()=>{g.value=Math.min(g.value+Fd,Ur),F.value=!0,m.setOption({series:[{zoom:g.value,roam:F.value}]})},oe=()=>{g.value=Math.max(g.value-Fd,Lo),F.value=!0,m.setOption({series:[{zoom:g.value,roam:F.value}]})},Ae=()=>{A.value==="bar"?(u.value=92,c.value=100,m&&m.dispatchAction({type:"dataZoom",start:92,end:100})):(g.value=Lo,F.value="move",m&&(m.clear(),m.setOption(N())))},ue=async()=>{l.value=!0,await de(),v?v.clear():v=ot(n.value),v.setOption(N()),A.value==="bar"&&D()},P=G=>{k(),m&&m.setOption(N())};return pe(()=>{window.addEventListener("onFluentCartThemeChange",P),F.value="move",de(W)}),je(()=>{window.removeEventListener("onFluentCartThemeChange",P),m&&(m.dispose(),m=null),v&&(v.dispose(),v=null)}),ce(()=>e.data,()=>R(),{deep:!0}),ce(w,()=>{A.value==="bar"&&de(()=>{R()})}),(G,z)=>(d(),_("div",Tb,[o(se,{id:"chartContainer"},{default:r(()=>[o(le,{title:G.$t("Order Heat Map"),border_bottom:""},{action:r(()=>[i("div",Mb,[o(Fs,{activeType:A.value,types:{world:"Globe",bar:"BarChart"},onChange:$},null,8,["activeType"]),o(St,{targetRef:s.value,size:"small"},null,8,["targetRef"])])]),_:1},8,["title"]),o(ae,{class:"p-0 pt-0 relative"},{default:r(()=>[A.value==="world"?(d(),_("div",Vb,[o(Be,{tag:"button",size:"small",onClick:ee},{default:r(()=>[o(Y,{name:"Plus"})]),_:1}),o(Be,{tag:"button",size:"small",onClick:oe},{default:r(()=>[o(Y,{name:"Minus"})]),_:1}),o(Be,{tag:"button",size:"small",onClick:Ae},{default:r(()=>[o(Y,{name:"Reload"})]),_:1}),o(Be,{tag:"button",size:"small lg:hidden",onClick:ue},{default:r(()=>[o(Y,{name:"Eye"})]),_:1})])):x("",!0),A.value==="bar"?(d(),_("div",Lb,[o(Be,{tag:"button",size:"small",onClick:Ae},{default:r(()=>[o(Y,{name:"Reload"})]),_:1})])):x("",!0),i("div",{class:"fct-chart-wrap rounded-[0px] bg-transparent",ref_key:"chartRef",ref:s},null,512)]),_:1})]),_:1}),o(p(Np),{modelValue:l.value,"onUpdate:modelValue":z[0]||(z[0]=j=>l.value=j),title:G.$t("Order Heat Map"),class:"country-heat-map-dialog"},{default:r(()=>[i("div",{class:"fct-chart-wrap",ref_key:"modalChartRef",ref:n},null,512)]),_:1},8,["modelValue","title"])]))}},Hb=ye(Ob,[["__scopeId","data-v-342ab7be"]]),Rb={class:"fct-report-card"},Pb={key:0,class:"fct-report-card-header"},Kb={key:0,class:"flex items-center gap-2"},Nb={class:"title"},Gb={class:"actions"},jb={class:"fct-report-card-body flex h-full items-center"},zb={class:"w-full"},uo={__name:"ReportCard",props:{cardOptions:{type:Object,default:()=>({heading:"",linkButtonText:"",linkButtonUrl:"",headingIcon:{type:Boolean,default:!1}})}},setup(t){return(e,a)=>{const s=y("router-link");return d(),_("div",Rb,[t.cardOptions.heading||t.cardOptions.linkButtonText?(d(),_("div",Pb,[t.cardOptions.heading?(d(),_("div",Kb,[t.cardOptions.headingIcon?(d(),U(Be,{key:0,size:"x-small",bg:"danger",soft:""},{default:r(()=>[o(Y,{name:"FailedCircle"})]),_:1})):x("",!0),i("h4",Nb,h(t.cardOptions.heading),1)])):x("",!0),i("div",Gb,[t.cardOptions.linkButtonText?(d(),U(s,{key:0,to:`/${t.cardOptions.linkButtonUrl}`,class:"link"},{default:r(()=>[M(h(e.$t(t.cardOptions.linkButtonText)),1)]),_:1},8,["to"])):x("",!0),Nt(e.$slots,"action")])])):x("",!0),i("div",jb,[i("div",zb,[Nt(e.$slots,"default")])])])}}},Yb={key:0,class:"fct-report-sold-product-list has-scroll"},qb={class:"list-left-content"},Wb={class:"list-title"},Xb={class:"list-title-inner"},Jb={class:"list-id"},Zb={class:"list-right-content"},e0={class:"list-value"},t0={class:"list-price"},a0={__name:"RecentOrders",setup(t){const e=Ht.data;return(a,s)=>{const n=y("router-link");return d(),U(uo,{class:"top-sold-products","card-options":{heading:p(f)("Recent Orders"),linkButtonText:p(f)("View All"),linkButtonUrl:"orders"}},{default:r(()=>{var l,A;return[((A=(l=p(e))==null?void 0:l.recentOrders)==null?void 0:A.length)>0?(d(),_("ul",Yb,[(d(!0),_(H,null,q(p(e).recentOrders,u=>(d(),_("li",{key:u.id},[o(n,{class:"no-underline",to:{name:"view_order",params:{order_id:u.id}}},{default:r(()=>[i("div",qb,[i("div",Wb,[i("div",Xb,h(u.customer_name)+" #"+h(p(Mt)(u.id)),1),i("div",Jb,[o(Vt,{"date-time":u.created_at},null,8,["date-time"])])])]),i("div",Zb,[i("div",e0,h(p(xe).scaled(u.total_amount)),1),i("div",t0,h(p(Mt)(u.order_items_count))+" "+h(p(f)("Items")),1)])]),_:2},1032,["to"])]))),128))])):(d(),U(Le,{key:1,icon:"Empty/ListView",text:p(f)("Currently there is no item!")},null,8,["text"]))]}),_:1},8,["card-options"])}}},s0={key:0},n0={key:1,class:"fc_dashboard_onboarding_wrap"},o0={class:"fc_dashboard_onboarding_title"},l0={class:"fc_dashboard_onboarding_lists"},r0=["href"],i0={class:"circle-shape"},A0={class:"fc_dashboard_onboarding_item__title"},d0={__name:"Onboarding",setup(t){const e=T(0),a=T(!1);Xe().ctx;const s=T([]),n=T(!0);T(localStorage.getItem("started_content_collapse")==="true"||!1),X(()=>{const A=Object.keys(s.value).length;return A?Math.round(e.value/A*100):0});const l=$l("dashboardTogglePageNotification");return pe(async()=>{a.value=!0,te.get("dashboard").then(A=>{var c;s.value=A.data.steps,e.value=A.data.completed,n.value=Object.keys(s.value).length!==e.value,a.value=!1;let u=((c=s.value.page_setup)==null?void 0:c.completed)||!1;l&&l(!u)}).catch(A=>{a.value=!1})}),(A,u)=>{const c=y("el-skeleton"),m=y("Check"),v=y("el-icon");return n.value?(d(),_("div",s0,[a.value?(d(),U(c,{key:0,rows:3,animated:""})):(d(),_("div",n0,[i("h3",o0,h(A.$t("Onboarding Checklist")),1),i("div",l0,[(d(!0),_(H,null,q(s.value,(b,g)=>(d(),_("a",{key:g,href:b.url,class:ne([b.completed===!0?"active":"","fc_dashboard_onboarding_item"])},[i("span",i0,[b.completed===!0?(d(),U(v,{key:0},{default:r(()=>[o(m)]),_:1})):x("",!0)]),i("div",A0,h(b.title),1)],10,r0))),128))])]))])):x("",!0)}}},u0={class:"fct-dashboard-recent-activities-wrap"},c0={class:"fct-dashboard-recent-activities__header"},f0={class:"fct-dashboard-recent-activities__header_title"},p0={class:"fct-dashboard-recent-activities__header_desc"},m0={key:0,class:"fct-dashboard-recent-activities__body"},h0={key:0,class:"fct-dashboard-recent-activities__item has-icon"},_0={class:"content"},g0={class:"title"},v0=["onClick"],y0={class:"date"},b0=["innerHTML"],w0={class:"created_by"},B0={key:1,class:"fct-dashboard-recent-activities__empty"},C0={class:"fct-dashboard-recent-activities__empty_text"},k0={__name:"RecentActivity",props:{activities:{type:Array,default:()=>[]},showManageActivity:{type:Boolean,default:!1}},emits:["reload"],setup(t,{emit:e}){const a=Fa();T(!1),T({});const s=T([{label:f("All"),value:"all"},{label:f("Today"),value:"today"},{label:f("Yesterday"),value:"yesterday"},{label:f("This Week"),value:"this_week"}]),n=T("all"),l=()=>{switch(n.value){case"all":return f("all");case"today":return f("today");case"yesterday":return f("yesterday");case"this_week":return f("this week");default:return n.value}},A=()=>{l(),Ht.getRecentActivities({groupKey:n.value})},u={Order:"orders/view",Payment:"orders/view",Product:"products/view",Customer:"customers/view",Coupon:"coupons/view"},c=v=>{const g={Order:{name:"view_order",param:"order_id",permission:"orders/view"},Payment:{name:"view_order",param:"order_id",permission:"orders/view"},Product:{name:"view_product",param:"product_id",permission:"products/view"},Customer:{name:"view_customer",param:"customer_id",permission:"customers/view"},Coupon:{name:"view_coupon",param:"coupon_id",permission:"coupons/view"}}[v.module_name];g&&v.module_id&&m(v)?a.push({name:g.name,params:{[g.param]:v.module_id}}):console.warn("Invalid activity or module not supported:",v)},m=v=>{if(!v.module_name)return!0;const b=we.get(u,nt.capitalize(v.module_name));return b?eo.has(b):!1};return pe(()=>{A()}),(v,b)=>{const g=y("el-radio-button"),F=y("el-radio-group");return d(),_("div",u0,[i("div",c0,[i("h4",f0,h(p(f)("Recent Activities")),1),i("p",p0,[n.value==="all"?(d(),_(H,{key:0},[M(h(p(f)("%s new activities",p(Mt)(p(Ht).data.recentActivities.length))),1)],64)):(d(),_(H,{key:1},[M(h(p(f)("%1$s new activities %2$s",p(Mt)(p(Ht).data.recentActivities.length),l())),1)],64))]),o(F,{class:"fct-dashboard-recent-activities__header_filter",modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=B=>n.value=B),onChange:A,size:"large"},{default:r(()=>[(d(!0),_(H,null,q(s.value,(B,w)=>(d(),U(g,{key:w,label:B.label,value:B.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),p(Ht).data.recentActivities.length?(d(),_("div",m0,[(d(!0),_(H,null,q(p(Ht).data.recentActivities,(B,w)=>(d(),_(H,{key:w},[m(B)?(d(),_("div",h0,[b[1]||(b[1]=i("span",{class:"icon"},[i("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M12.8499 9.92029L13.5711 10.3529C13.6156 10.3795 13.6524 10.4172 13.678 10.4623C13.7036 10.5075 13.717 10.5584 13.717 10.6103C13.717 10.6621 13.7036 10.7131 13.678 10.7582C13.6524 10.8033 13.6156 10.841 13.5711 10.8677L8.30911 14.0249C8.21579 14.081 8.10897 14.1106 8.00011 14.1106C7.89124 14.1106 7.78443 14.081 7.69111 14.0249L2.42911 10.8677C2.38462 10.841 2.34779 10.8033 2.32222 10.7582C2.29664 10.7131 2.2832 10.6621 2.2832 10.6103C2.2832 10.5584 2.29664 10.5075 2.32222 10.4623C2.34779 10.4172 2.38462 10.3795 2.42911 10.3529L3.15031 9.92029L8.00011 12.8303L12.8499 9.92029ZM12.8499 7.10029L13.5711 7.53289C13.6156 7.55952 13.6524 7.59723 13.678 7.64235C13.7036 7.68746 13.717 7.73843 13.717 7.79029C13.717 7.84214 13.7036 7.89311 13.678 7.93822C13.6524 7.98334 13.6156 8.02105 13.5711 8.04769L8.00011 11.3903L2.42911 8.04769C2.38462 8.02105 2.34779 7.98334 2.32222 7.93822C2.29664 7.89311 2.2832 7.84214 2.2832 7.79029C2.2832 7.73843 2.29664 7.68746 2.32222 7.64235C2.34779 7.59723 2.38462 7.55952 2.42911 7.53289L3.15031 7.10029L8.00011 10.0103L12.8499 7.10029ZM8.30851 1.58569L13.5711 4.74289C13.6156 4.76952 13.6524 4.80724 13.678 4.85235C13.7036 4.89746 13.717 4.94843 13.717 5.00029C13.717 5.05214 13.7036 5.10311 13.678 5.14822C13.6524 5.19334 13.6156 5.23105 13.5711 5.25769L8.00011 8.60029L2.42911 5.25769C2.38462 5.23105 2.34779 5.19334 2.32222 5.14822C2.29664 5.10311 2.2832 5.05214 2.2832 5.00029C2.2832 4.94843 2.29664 4.89746 2.32222 4.85235C2.34779 4.80724 2.38462 4.76952 2.42911 4.74289L7.69111 1.58569C7.78443 1.52962 7.89124 1.5 8.00011 1.5C8.10897 1.5 8.21579 1.52962 8.30911 1.58569H8.30851ZM8.00011 2.79949L4.33231 5.00029L8.00011 7.20109L11.6679 5.00029L8.00011 2.79949Z",fill:"#335CFF"})])],-1)),i("div",_0,[i("h3",g0,[B.module_name!==""?(d(),_("span",{key:0,onClick:C=>c(B)},h(B.title||"--"),9,v0)):(d(),_(H,{key:1},[M(h(B.title),1)],64)),i("span",y0,[o(Vt,{"date-time":B.created_at},null,8,["date-time"])])]),i("p",{innerHTML:B.content,class:"description"},null,8,b0),i("span",w0,h(p(f)("By %s",B.created_by)),1)])])):x("",!0)],64))),128))])):(d(),_("div",B0,[i("div",C0,h(p(f)("No activity found.")),1)]))])}}},F0={class:"fc_dashboard_sidebar bg-white dark:bg-dark-700 p-5 rounded"},x0={__name:"SideBar",setup(t){return(e,a)=>(d(),_("div",F0,[o(et,{permission:"is_super_admin"},{default:r(()=>[o(d0)]),_:1}),o(k0,{onReload:a[0]||(a[0]=()=>{})})]))}},U0={class:"fct-product-create"},E0={class:"fct-product-step"},S0={class:"fct-product-item-selector"},Q0=["onClick"],D0={class:"fct-product-item-selector-content"},$0={class:"dialog-footer"},Wl={__name:"AddProductModal",props:{customModal:String},emits:["process_custom","update:createProductModal"],setup(t,{emit:e}){const a=t,s=e,n=Fa(),l=T({post_title:"",post_content:"",post_excerpt:"",post_date:new Date,post_status:"draft",detail:{fulfillment_type:"digital",variation_type:"simple",manage_stock:"0",manage_downloadable:"0",other_info:{use_pricing_table:"yes",group_pricing_by:"repeat_interval",active_editor:"wp-editor",sold_individually:"no"}}}),A=[{type:"physical",title:f("Physical Product"),icon:"Gift"},{type:"digital",title:f("Digital Product"),icon:"Code"}],u=T(!1),c=T(null),m=g=>{l.value.detail.fulfillment_type=g},v=()=>{u.value=!0,te.post("products",{...l.value}).then(g=>{if(J.success(g.message),a.customModal==="order_modal"){const F={id:g.data.product_variants.id,object_id:g.data.product_variants.post_id,variation_id:g.data.product_variants.id,item_name:g.data.product_variants.variation_title,item_price:g.data.product_variants.item_price,quantity:1,stock:100,object_type:g.data.product_details.fulfillment_type,item_total:g.data.product_variants.item_price,line_total:g.data.product_variants.item_price,tax_amount:0,discount_total:0};s("process_custom",F),s("update:createProductModal",!1)}else n.push({name:"product_edit",params:{product_id:g.data.ID}})}).catch(g=>{var F;g.status_code=="422"?J.validationErrors(g):J.error((F=g.data)==null?void 0:F.message)}).finally(()=>{u.value=!1})},b=g=>{g.stopPropagation(),g.preventDefault(),v()};return pe(()=>{de(()=>{setTimeout(()=>{var g;(g=c.value)==null||g.focus()},10)})}),(g,F)=>{const B=y("el-input"),w=y("el-form-item"),C=y("el-form"),k=y("el-button");return d(),_("div",U0,[i("div",E0,[o(C,{"label-position":"top",model:l.value,"require-asterisk-position":"right"},{default:r(()=>[o(w,{label:p(f)("Product Title"),required:""},{default:r(()=>[o(B,{type:"text",modelValue:l.value.post_title,"onUpdate:modelValue":F[0]||(F[0]=S=>l.value.post_title=S),placeholder:"Product Title",minlength:"3",maxlength:"200","show-word-limit":"",autofocus:"",ref_key:"fcProductTitle",ref:c,onKeydown:fa(b,["enter"])},null,8,["modelValue"])]),_:1},8,["label"]),o(w,null,{default:r(()=>[i("ul",S0,[(d(),_(H,null,q(A,S=>i("li",{key:S.type,class:ne({active:S.type===l.value.detail.fulfillment_type}),onClick:E=>m(S.type)},[i("div",D0,[o(Y,{name:S.icon},null,8,["name"]),M(" "+h(S.title),1)]),F[1]||(F[1]=i("div",{class:"fct-product-item-selector-dot-wrap"},[i("span",{class:"fct-product-item-selector-dot"})],-1))],10,Q0)),64))])]),_:1})]),_:1},8,["model"])]),i("div",$0,[o(k,{disabled:!l.value.post_title||u.value,loading:u.value,onClick:v,type:"primary"},{default:r(()=>[M(h(u.value?p(f)("Creating"):p(f)("Add Product")),1)]),_:1},8,["disabled","loading"])])])}}};class oA{constructor(e=new Date){this.date=e}getHours(){return this.date.getHours()}static greeting(){const e=new oA().getHours();if(e>=5&&e<12)return f("Good morning");if(e>=12&&e<17)return f("Good afternoon");if(e>=17&&e<21)return f("Good evening");{const a=[f("Step into the moonlight!"),f("Evening vibes!"),f("The night's still young!")];return a[Math.floor(Math.random()*a.length)]}}}const I0={class:"fct-current-user-info-wrap"},T0={class:"fct-current-user-info-content"},M0={class:"image"},V0=["src","alt"],L0={class:"content"},O0={key:0,class:"fct-current-user-info-action"},H0={__name:"CurrentUserInfo",setup(t){const e=T(!1),a=T($e.get("me")),s=()=>$e.get("shop.store_name"),n=$e.get("total_products_count");return(l,A)=>{const u=y("el-button"),c=y("el-dialog");return d(),_("div",I0,[i("div",T0,[i("div",M0,[i("img",{src:a.value.avatar,alt:a.value.full_name},null,8,V0)]),i("div",L0,[i("h4",null,h(p(oA).greeting())+" "+h(a.value.full_name),1),i("p",null,h(p(f)("Welcome to %1$s %2$s",s(),"")),1)])]),o(et,{permission:"products/create"},{default:r(()=>[p(n)==0?(d(),_("div",O0,[o(u,{onClick:A[0]||(A[0]=m=>e.value=!0),type:"primary"},{default:r(()=>[M(h(p(f)("Add Product")),1)]),_:1})])):x("",!0)]),_:1}),o(c,{"append-to-body":!0,modelValue:e.value,"onUpdate:modelValue":A[1]||(A[1]=m=>e.value=m),onClose:A[2]||(A[2]=m=>e.value=!1),title:p(f)("Add New Product")},{default:r(()=>[o(Wl)]),_:1},8,["modelValue","title"])])}}},R0=["innerHTML"],vi={__name:"FieldNote",props:{note:String},setup(t){return(e,a)=>(d(),_("div",{class:"form-note",innerHTML:t.note},null,8,R0))}},P0=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"})),xd=Object.assign({name:"ValidationError"},{__name:"ValidationErrorNew",props:{errorKey:String,form:{type:Object,required:!0}},setup(t){return(e,a)=>t.form.hasValidationError(t.errorKey)?(d(),_("div",{key:0,class:ne(`fluent-cart-admin-validation-error-wrapper ${t.errorKey}`)},[(d(!0),_(H,null,q(t.form.getValidationError(t.errorKey),(s,n)=>(d(),_("span",{class:"fluent-cart-admin-validation-error",key:s.toLowerCase().replace(/\s/g,"")},h(s),1))),128))],2)):x("",!0)}}),Lc={__name:"Resolver",props:pa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},label:{type:String},attribute:{type:Object},callback:{type:Function}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ka(t,"modelValue"),a=Object.assign({"./Affix/Test.vue":()=>tt(()=>import("./Test-OdrklMQK.js"),__vite__mapDeps([0,1,2]),import.meta.url),"./Base/Inputs/Checkbox.vue":()=>tt(()=>Promise.resolve().then(()=>Z0),void 0,import.meta.url),"./Base/Inputs/ColorPicker.vue":()=>tt(()=>Promise.resolve().then(()=>iw),void 0,import.meta.url),"./Base/Inputs/Date.vue":()=>tt(()=>Promise.resolve().then(()=>Aw),void 0,import.meta.url),"./Base/Inputs/FieldNote.vue":()=>tt(()=>Promise.resolve().then(()=>P0),void 0,import.meta.url),"./Base/Inputs/Input.vue":()=>tt(()=>Promise.resolve().then(()=>sw),void 0,import.meta.url),"./Base/Inputs/Media.vue":()=>tt(()=>Promise.resolve().then(()=>$w),void 0,import.meta.url),"./Base/Inputs/RadioGroup.vue":()=>tt(()=>Promise.resolve().then(()=>tw),void 0,import.meta.url),"./Base/Inputs/RemoteSearchableSelect.vue":()=>tt(()=>Promise.resolve().then(()=>fw),void 0,import.meta.url),"./Base/Inputs/Select.vue":()=>tt(()=>Promise.resolve().then(()=>cw),void 0,import.meta.url),"./Base/Inputs/Switch.vue":()=>tt(()=>Promise.resolve().then(()=>J0),void 0,import.meta.url),"./Base/Inputs/Time.vue":()=>tt(()=>Promise.resolve().then(()=>dw),void 0,import.meta.url),"./Base/Layouts/FormGrid.vue":()=>tt(()=>Promise.resolve().then(()=>K0),void 0,import.meta.url),"./Base/Layouts/FormSection.vue":()=>tt(()=>Promise.resolve().then(()=>Y0),void 0,import.meta.url),"./Base/Layouts/FormTab.vue":()=>tt(()=>Promise.resolve().then(()=>q0),void 0,import.meta.url),"./Base/Layouts/FormTabPane.vue":()=>tt(()=>Promise.resolve().then(()=>W0),void 0,import.meta.url),"./Coupon/BuyProducts.vue":()=>tt(()=>import("./BuyProducts-KZIeFRck.js"),__vite__mapDeps([3,1]),import.meta.url),"./Coupon/Categories.vue":()=>tt(()=>import("./Categories-DkPgPH9Y.js"),__vite__mapDeps([4,1]),import.meta.url),"./Coupon/Code.vue":()=>tt(()=>import("./Code-9W1TinKn.js"),__vite__mapDeps([5,1]),import.meta.url),"./Coupon/GetProducts.vue":()=>tt(()=>import("./GetProducts-B5cjUsRF.js"),__vite__mapDeps([6,1]),import.meta.url),"./Coupon/IncludeExclude/Categories.vue":()=>tt(()=>import("./Categories-Bhkr2KeK.js"),__vite__mapDeps([7,1]),import.meta.url),"./Coupon/IncludeExclude/Product.vue":()=>tt(()=>import("./Product-CocTR2sg.js"),__vite__mapDeps([8,1]),import.meta.url),"./Coupon/Products.vue":()=>tt(()=>import("./Products-DYLSEfqH.js"),__vite__mapDeps([9,1]),import.meta.url),"./ModuleSettings.vue":()=>tt(()=>import("./ModuleSettings-CgpIwQuk.js"),__vite__mapDeps([10,1,11,12,13,14,2,15,16]),import.meta.url),"./PaymentView.vue":()=>tt(()=>import("./PaymentView-B2PHNhas.js"),__vite__mapDeps([17,1,11,12,15]),import.meta.url),"./StoreSettings/AddressComponent.vue":()=>tt(()=>import("./AddressComponent-gHf1Vq94.js"),__vite__mapDeps([18,1,19,11,12,20,2,13,14,15,16,21,22,23]),import.meta.url),"./StoreSettings/CreatePageButton.vue":()=>tt(()=>import("./CreatePageButton-izdgypQN.js"),__vite__mapDeps([24,1,15,11,12,21,14,22,19,13,2,16]),import.meta.url),"./StoreSettings/PageSelector.vue":()=>tt(()=>import("./PageSelector-CjxFE49u.js"),__vite__mapDeps([25,1,11,12,15,24,21,14,22,19,13,2,16]),import.meta.url)}),s=np(null);pe(()=>{n(l.name)});const n=async A=>{const u=`./${A}.vue`;a[u]?s.value=(await a[u]()).default:console.error(`Form Component ${u} not found`)},l=t;return(A,u)=>(d(),_(H,null,[(d(),U(Oa(s.value),ht({name:t.name,field:t.field,fieldKey:t.fieldKey,value:t.value,variant:t.variant,nesting:t.nesting,statePath:t.statePath,form:t.form,attribute:t.attribute,label:t.label,callback:t.callback},{modelValue:e.value,"onUpdate:modelValue":u[0]||(u[0]=c=>e.value=c)}),null,16,["modelValue"])),Nt(A.$slots,"fieldNote"),Nt(A.$slots,"validationError")],64))}},lA={__name:"FormGrid",props:{field:{type:Object},value:{type:Object},statePath:{type:String},form:{type:Object,required:!0}},setup(t){return(e,a)=>{var s,n,l,A,u,c,m,v,b,g;return d(),_("div",{class:"gap-2 grid grid-cols-dynamic sm:grid-cols-sm-dynamic md:grid-cols-md-dynamic lg:grid-cols-lg--dynamic",style:sa({"--grid-columns":((s=t.field.columns)==null?void 0:s.default)??2,"--sm-grid-columns":((n=t.field.columns)==null?void 0:n.sm)??((l=t.field.columns)==null?void 0:l.default)??2,"--md-grid-columns":((A=t.field.columns)==null?void 0:A.sm)??((u=t.field.columns)==null?void 0:u.md)??((c=t.field.columns)==null?void 0:c.default)??2,"--lg-grid-columns":((m=t.field.columns)==null?void 0:m.lg)??((v=t.field.columns)==null?void 0:v.md)??((b=t.field.columns)==null?void 0:b.sm)??((g=t.field.columns)==null?void 0:g.default)??2})},[o(Zl,{form:t.form,schema:t.field.schema,value:t.value,statePath:t.statePath},null,8,["form","schema","value","statePath"])],4)}}},K0=Object.freeze(Object.defineProperty({__proto__:null,default:lA},Symbol.toStringTag,{value:"Module"})),N0={key:0,class:"fct-content-card-header"},G0={key:0,class:"title"},j0={key:1,class:"fct-content-card-action"},Oc={__name:"ContentCard",props:["title","show_heading"],setup(t){return(e,a)=>(d(),_("div",{class:ne({"fct-content-card":t.show_heading!==!1})},[t.show_heading!==!1?(d(),_("div",N0,[t.title||e.$slots.title?(d(),_("div",G0,[Nt(e.$slots,"title",{},()=>[M(h(t.title),1)])])):x("",!0),e.$slots.action?(d(),_("div",j0,[Nt(e.$slots,"action")])):x("",!0)])):x("",!0),i("div",{class:ne({"fct-content-card-body":t.show_heading!==!1})},[Nt(e.$slots,"default")],2)],2))}},z0={class:"form-section"},Hc={__name:"FormSection",props:{field:{type:Object},fieldKey:{type:String},value:{type:Object},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0}},setup(t){return(e,a)=>(d(),_("div",z0,[o(se,null,{default:r(()=>[o(le,{title:t.field.title,border_bottom:""},null,8,["title"]),o(ae,null,{default:r(()=>[o(lA,{form:t.form,field:t.field,statePath:t.statePath,value:t.value},null,8,["form","field","statePath","value"])]),_:1})]),_:1})]))}},Y0=Object.freeze(Object.defineProperty({__proto__:null,default:Hc},Symbol.toStringTag,{value:"Module"})),Rc={__name:"FormTab",props:{field:{type:Object},value:{type:Object},statePath:{type:String},form:{type:Object,required:!0}},setup(t){const e=t,a=T(""),s=T([]),n=Fa(),l=m=>{const v=m.props.name;A(v)},A=m=>{const v=new URL(window.location.href);v.hash=`#/settings/${m}`,window.history.replaceState(null,"",v.toString())},u=()=>{const v=window.location.hash.split("/").pop();s.value=Object.keys(e.field.schema);const b=s.value.find(g=>g===v);b?a.value=b:a.value=e.field.default_tab};let c;return pe(()=>{c=n.beforeEach((m,v,b)=>{b(),setTimeout(()=>{u()},200)}),u()}),je(()=>{c&&c()}),(m,v)=>{const b=y("el-tabs");return d(),U(b,{modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=g=>a.value=g),class:ne(["fct-tabs-button",{"hidden-switch":t.field.hide_tab_switch}]),onTabClick:l,type:"card"},{default:r(()=>[o(Zl,{form:t.form,schema:t.field.schema,value:t.value,"state-path":t.statePath},null,8,["form","schema","value","state-path"])]),_:1},8,["modelValue","class"])}}},q0=Object.freeze(Object.defineProperty({__proto__:null,default:Rc},Symbol.toStringTag,{value:"Module"})),Pc={__name:"FormTabPane",props:{fieldKey:{type:String},field:{type:Object},value:{type:Object},statePath:{type:String},form:{type:Object,required:!0}},setup(t){return(e,a)=>{const s=y("el-tab-pane");return d(),U(s,{label:t.field.title,name:t.fieldKey},{default:r(()=>[o(Zl,{form:t.form,schema:t.field.schema,value:t.value,statePath:t.statePath},null,8,["form","schema","value","statePath"])]),_:1},8,["label","name"])}}},W0=Object.freeze(Object.defineProperty({__proto__:null,default:Pc},Symbol.toStringTag,{value:"Module"}));class rA{}fe(rA,"attributesBuilders",async(e,a,s)=>{if(e.attributes||(e.attributes={}),e.class&&(e.attributes.class=e.class),e.placeholder&&(e.attributes.placeholder=e.placeholder),typeof a!="function")return e.attributes??{};let n={};typeof e.events!="object"&&(n={}),n.hasOwnProperty("onChange")&&typeof n.onChange=="function"?n.onChange=(...l)=>{s.data.hasChange=!0,n.onChange(l)}:n.onChange=()=>{s.data.hasChange=!0};for(let l in e.events)n[l]=(...A)=>{a(e.events[l],A)};for(let l in e.attributes??{}){let A=e.attributes[l];typeof A=="function"&&await a(A,{})}return{...e.attributes??{},...n}});const X0={__name:"LayoutRenderer",props:{form:{type:Object,required:!0},field:{type:Object,required:!0},value:{type:Object,required:!0},statePath:{type:String,required:!0},fieldKey:{type:String,required:!0},fullStatePath:{type:String,required:!0}},setup(t){const e=t;Xe().ctx;const a=(l,A)=>{if(typeof l=="function")return l({data:e.value,form:e.form,statePath:e.statePath,field:e.field,event:Array.isArray(A)&&A.length===1?A[0]:A})},s=T(!1),n=T({});return pe(async()=>{n.value=await rA.attributesBuilders(e.field,a,e.form),s.value=!0}),(l,A)=>(d(),_(H,null,[t.field.type==="grid"&&typeof t.field.schema<"u"?(d(),U(lA,ht({key:0,class:t.field.wrapperClass,form:t.form,field:t.field,value:t.value,statePath:t.fullStatePath},n.value),null,16,["class","form","field","value","statePath"])):x("",!0),t.field.type==="tab"&&typeof t.field.schema<"u"?(d(),U(Rc,ht({key:1,form:t.form,field:t.field,value:t.value,statePath:t.fullStatePath},n.value),null,16,["form","field","value","statePath"])):x("",!0),t.field.type==="tab-pane"&&typeof t.field.schema<"u"&&typeof t.field.title<"u"?(d(),U(Pc,ht({key:2,form:t.form,field:t.field,value:t.value,fieldKey:t.fieldKey,statePath:t.fullStatePath},n.value),null,16,["form","field","value","fieldKey","statePath"])):x("",!0),t.field.type==="section"?(d(),U(Hc,ht({key:3,form:t.form,statePath:t.field.disable_nesting===!0?t.fullStatePath:t.fieldKey+".",field:t.field,"field-key":t.fieldKey,value:t.field.disable_nesting===!0?t.value:t.value[t.fieldKey],nesting:t.field.disable_nesting===!0},n.value),null,16,["form","statePath","field","field-key","value","nesting"])):x("",!0)],64))}},Kc={__name:"Switch",props:pa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ka(t,"modelValue");return(a,s)=>{const n=y("el-switch");return d(),U(n,ht({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=l=>e.value=l),disabled:t.field.disabled},t.attribute),null,16,["modelValue","disabled"])}}},J0=Object.freeze(Object.defineProperty({__proto__:null,default:Kc},Symbol.toStringTag,{value:"Module"})),Nc={__name:"Checkbox",props:pa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ka(t,"modelValue");return(a,s)=>{const n=y("el-checkbox");return d(),U(n,ht({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=l=>e.value=l)},t.attribute,{"true-value":"yes","false-value":"no",disabled:t.field.disabled}),{default:r(()=>[M(h(t.label),1)]),_:1},16,["modelValue","disabled"])}}},Z0=Object.freeze(Object.defineProperty({__proto__:null,default:Nc},Symbol.toStringTag,{value:"Module"})),ew=["innerHTML"],Gc={__name:"RadioGroup",props:pa({field:{type:Object},statePath:{type:String},value:{required:!0},form:{type:Object},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ka(t,"modelValue"),a=t,s=T([]),n=async(l="")=>{if(typeof a.field.options=="function")return s.value=await a.field.options({data:a.value,form:a.form,statePath:a.statePath,search:l});if(Array.isArray(a.field.options))return s.value=[...a.field.options]};return pe(async()=>{await n()}),(l,A)=>{const u=y("el-radio"),c=y("el-radio-group");return d(),U(c,ht({modelValue:e.value,"onUpdate:modelValue":A[0]||(A[0]=m=>e.value=m)},t.attribute),{default:r(()=>[(d(!0),_(H,null,q(t.field.options,(m,v)=>(d(),U(u,{key:v,value:m.value,class:ne(m.option_class)},{default:r(()=>[i("div",null,h(m.label),1),i("div",{innerHTML:m.note},null,8,ew)]),_:2},1032,["value","class"]))),128))]),_:1},16,["modelValue"])}}},tw=Object.freeze(Object.defineProperty({__proto__:null,default:Gc},Symbol.toStringTag,{value:"Module"})),aw=["innerHTML"],rn={__name:"Input",props:pa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Xe().ctx,a=ka(t,"modelValue"),s=t,n=T(),l=async()=>{typeof s.field.prefix=="function"?n.value=await s.callback(s.field.prefix):n.value=s.field.prefix};return pe(()=>{l()}),op(()=>{l()}),X(()=>s.fieldKey==="amount"?s.form.data.values.type==="fixed"?$e.shop.get("currency_sign"):"%":e.appVars.shop.currency_sign),(A,u)=>{var m;const c=y("el-input");return d(),U(c,ht({modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=v=>a.value=v)},t.attribute,{disabled:t.field.disabled}),ut({_:2},[(m=t.field.prefix)!=null&&m.component?{name:"prefix",fn:r(()=>[o(Lc,{form:t.form,name:t.field.prefix.component,field:t.field,value:t.value},null,8,["form","name","field","value"])]),key:"0"}:t.field.prefix?{name:"prefix",fn:r(()=>[i("div",{innerHTML:n.value},null,8,aw)]),key:"1"}:void 0]),1040,["modelValue","disabled"])}}},sw=Object.freeze(Object.defineProperty({__proto__:null,default:rn},Symbol.toStringTag,{value:"Module"})),nw={class:"fct-color-picker-box"},ow={class:"fct-color-picker-trigger-wrap"},lw={key:0,class:"text-xs text-system-light"},rw={key:1,class:"fct-color-picker-action-wrap"},iA={__name:"ColorPicker",props:pa({field:{type:Object},statePath:{type:String},value:{required:!0},form:{type:Object},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ka(t,"modelValue"),a=s=>{e.value=""};return(s,n)=>{const l=y("el-color-picker");return d(),_("div",nw,[i("div",ow,[o(l,ht({modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=A=>e.value=A)},t.attribute,{disabled:t.field.disabled,"popper-class":"fct-color-picker-popover"}),null,16,["modelValue","disabled"]),e.value?x("",!0):(d(),U(Y,{key:0,name:"ColorPicker",class:"fct-color-picker-icon w-4 h-4"}))]),e.value?x("",!0):(d(),_("span",lw,h(p(f)("Add...")),1)),e.value?(d(),_("div",rw,[i("span",null,h(e.value),1),o(Y,{name:"Cross",class:"fct-color-picker-action w-5 h-5",onClick:n[1]||(n[1]=A=>a(s.fieldKey))})])):x("",!0)])}}},iw=Object.freeze(Object.defineProperty({__proto__:null,default:iA},Symbol.toStringTag,{value:"Module"})),jc={__name:"Date",props:pa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ka(t,"modelValue");return(a,s)=>{const n=y("el-date-picker");return d(),U(n,ht({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=l=>e.value=l)},t.attribute,{disabled:t.field.disabled}),null,16,["modelValue","disabled"])}}},Aw=Object.freeze(Object.defineProperty({__proto__:null,default:jc},Symbol.toStringTag,{value:"Module"})),zc={__name:"Time",props:pa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ka(t,"modelValue");return(a,s)=>{const n=y("el-time-select");return d(),U(n,ht({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=l=>e.value=l)},t.attribute,{disabled:t.field.disabled}),null,16,["modelValue","disabled"])}}},dw=Object.freeze(Object.defineProperty({__proto__:null,default:zc},Symbol.toStringTag,{value:"Module"})),uw={key:0},Yc={__name:"Select",props:pa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ka(t,"modelValue"),a=t,s=T([]),n=T(!1),l=async(u="")=>{n.value=!0,typeof a.field.options=="function"&&(s.value=await a.field.options({data:a.value,form:a.form,statePath:a.statePath,search:u})),Array.isArray(a.field.options)&&(s.value=[...a.field.options]),n.value=!1};pe(async()=>{await l()});const A=u=>typeof u.disabled=="function"?a.callback(u.disabled,{}):u.disabled;return(u,c)=>{const m=y("el-option"),v=y("el-select");return d(),U(v,ht({modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=b=>e.value=b)},t.attribute,{"remote-method":l,loading:n.value,filterable:t.field.filterable===!0,clearable:t.field.clearable===!0,disabled:t.field.disabled}),{default:r(()=>[(d(!0),_(H,null,q(s.value,(b,g)=>(d(),U(m,{key:g,value:b.value,label:b.label,disabled:A(b)},{default:r(()=>[b.slot?(d(),_("span",uw,h(b.slot),1)):x("",!0)]),_:2},1032,["value","label","disabled"]))),128))]),_:1},16,["modelValue","loading","filterable","clearable","disabled"])}}},cw=Object.freeze(Object.defineProperty({__proto__:null,default:Yc},Symbol.toStringTag,{value:"Module"})),qc={__name:"RemoteSearchableSelect",props:pa({field:{type:Object},key:{type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ka(t,"modelValue"),a=t,s=T(!1),n=T(a.field.options||[]),l=A=>{if(a.field.search_only_on_type===!0){if(A.query.length===0)return}else if(A.query.length<1&&n.value.length>0)return;s.value=!0,te.get("forms/search_options",{search_by:A.query,search_for:A.key}).then(u=>{n.value=u.options,s.value=!1})};return(A,u)=>{const c=y("el-option"),m=y("el-select");return d(),U(m,{modelValue:e.value,"onUpdate:modelValue":u[0]||(u[0]=v=>e.value=v),filterable:"",remote:"",placeholder:t.field.placeholder??p(f)("Please enter a keyword"),"remote-method":v=>{l({query:v,key:t.field.remote_key})},loading:s.value,multiple:t.field.multiple},{default:r(()=>[(d(!0),_(H,null,q(n.value,v=>(d(),U(c,{key:v.value,label:v.label,value:v.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading","multiple"])}}},fw=Object.freeze(Object.defineProperty({__proto__:null,default:qc},Symbol.toStringTag,{value:"Module"}));function wn(t,e){e===void 0&&(e={});var a=e.insertAt;if(t&&typeof document<"u"){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",a==="top"&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}wn(".vel-fade-enter-active,.vel-fade-leave-active{-webkit-transition:all .3s ease;transition:all .3s ease}.vel-fade-enter-from,.vel-fade-leave-to{opacity:0}.vel-img-swiper{display:block;position:relative}.vel-modal{background:rgba(0,0,0,.5);bottom:0;left:0;margin:0;position:fixed;right:0;top:0;z-index:9998}.vel-img-wrapper{left:50%;margin:0;position:absolute;top:50%;-webkit-transform:translate(-50% -50%);transform:translate(-50% -50%);-webkit-transition:.3s linear;transition:.3s linear;will-change:transform opacity}.vel-img,.vel-img-wrapper{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-img{background-color:rgba(0,0,0,.7);-webkit-box-shadow:0 5px 20px 2px rgba(0,0,0,.7);box-shadow:0 5px 20px 2px rgba(0,0,0,.7);display:block;max-height:80vh;max-width:80vw;position:relative;-webkit-transition:-webkit-transform .3s ease-in-out;transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out;transition:transform .3s ease-in-out,-webkit-transform .3s ease-in-out}@media (max-width:750px){.vel-img{max-height:95vh;max-width:85vw}}.vel-btns-wrapper{position:static}.vel-btns-wrapper .btn__close,.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;font-size:32px;opacity:.6;outline:none;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-transition:.15s linear;transition:.15s linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-btns-wrapper .btn__close:hover,.vel-btns-wrapper .btn__next:hover,.vel-btns-wrapper .btn__prev:hover{opacity:1}.vel-btns-wrapper .btn__close.disable,.vel-btns-wrapper .btn__close.disable:hover,.vel-btns-wrapper .btn__next.disable,.vel-btns-wrapper .btn__next.disable:hover,.vel-btns-wrapper .btn__prev.disable,.vel-btns-wrapper .btn__prev.disable:hover{cursor:default;opacity:.2}.vel-btns-wrapper .btn__next{right:12px}.vel-btns-wrapper .btn__prev{left:12px}.vel-btns-wrapper .btn__close{right:10px;top:24px}@media (max-width:750px){.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{font-size:20px}.vel-btns-wrapper .btn__close{font-size:24px}.vel-btns-wrapper .btn__next{right:4px}.vel-btns-wrapper .btn__prev{left:4px}}.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:12px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{left:auto;right:12px}@media (max-width:750px){.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:4px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{left:auto;right:4px}}.vel-modal.is-rtl .vel-img-title{direction:rtl}");wn('.vel-loading{left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-loading .ring{display:inline-block;height:64px;width:64px}.vel-loading .ring:after{-webkit-animation:ring 1.2s linear infinite;animation:ring 1.2s linear infinite;border-color:hsla(0,0%,100%,.7) transparent;border-radius:50%;border-style:solid;border-width:5px;content:" ";display:block;height:46px;margin:1px;width:46px}@-webkit-keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}');wn(".vel-on-error{left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-on-error .icon{color:#aaa;font-size:80px}");wn(".vel-img-title{bottom:60px;color:#ccc;cursor:default;font-size:12px;left:50%;line-height:1;max-width:80%;opacity:.8;overflow:hidden;position:absolute;text-align:center;text-overflow:ellipsis;-webkit-transform:translate(-50%);transform:translate(-50%);-webkit-transition:opacity .15s;transition:opacity .15s;white-space:nowrap}.vel-img-title:hover{opacity:1}");wn(".vel-icon{fill:currentColor;height:1em;overflow:hidden;vertical-align:-.15em;width:1em}");wn(".vel-toolbar{border-radius:4px;bottom:8px;display:-webkit-box;display:-ms-flexbox;display:flex;left:50%;opacity:.9;overflow:hidden;padding:0;position:absolute;-webkit-transform:translate(-50%);transform:translate(-50%)}.vel-toolbar,.vel-toolbar .toolbar-btn{background-color:#2d2d2d;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-toolbar .toolbar-btn{-ms-flex-negative:0;-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;flex-shrink:0;font-size:20px;outline:none;padding:6px 10px}.vel-toolbar .toolbar-btn:active,.vel-toolbar .toolbar-btn:hover{background-color:#3d3d3d}");const va="vel",Da=Ls({name:"SvgIcon",props:{type:{type:String,default:""}},setup:t=>()=>o("svg",{class:`${va}-icon icon`,"aria-hidden":"true"},[o("use",{"xlink:href":`#icon-${t.type}`},null)])}),Xl=typeof window<"u",An=()=>{};let Wc=!1;if(Xl)try{const t={};Object.defineProperty(t,"passive",{get(){Wc=!0}}),window.addEventListener("test-passive",An,t)}catch{}const Ud=function(t,e,a){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];Xl&&t.addEventListener(e,a,!!Wc&&{capture:!1,passive:s})},Ed=(t,e,a)=>{Xl&&t.removeEventListener(e,a)},pw=t=>{t.preventDefault()},mw=Object.prototype.toString,AA=t=>e=>mw.call(e).slice(8,-1)===t,hw=t=>!!t&&AA("Object")(t),Sd=t=>!!t&&AA("String")(t);function _w(t){return t!=null}const gw=Ls({name:"Toolbar",props:{zoomIn:{type:Function,default:An},zoomOut:{type:Function,default:An},rotateLeft:{type:Function,default:An},rotateRight:{type:Function,default:An},resize:{type:Function,default:An},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1}},setup:t=>()=>o("div",{class:`${va}-toolbar`},[!t.zoomDisabled&&o(H,null,[o("div",{role:"button","aria-label":"zoom in button",class:"toolbar-btn toolbar-btn__zoomin",onClick:t.zoomIn},[o(Da,{type:"zoomin"},null)]),o("div",{role:"button","aria-label":"zoom out button",class:"toolbar-btn toolbar-btn__zoomout",onClick:t.zoomOut},[o(Da,{type:"zoomout"},null)])]),o("div",{role:"button","aria-label":"resize image button",class:"toolbar-btn toolbar-btn__resize",onClick:t.resize},[o(Da,{type:"resize"},null)]),!t.rotateDisabled&&o(H,null,[o("div",{role:"button","aria-label":"image rotate left button",class:"toolbar-btn toolbar-btn__rotate",onClick:t.rotateLeft},[o(Da,{type:"rotate-left"},null)]),o("div",{role:"button","aria-label":"image rotate right button",class:"toolbar-btn toolbar-btn__rotate",onClick:t.rotateRight},[o(Da,{type:"rotate-right"},null)])])])}),vw=()=>o("div",{class:`${va}-loading`},[o("div",{class:"ring"},null)]),yw=()=>o("div",{class:`${va}-on-error`},[o("div",{class:"ring"},null),o(Da,{type:"img-broken"},null)]),bw=(t,e)=>{let{slots:a}=e;return o("div",{class:`${va}-img-title`},[a.default?a.default():""])},ww=Ls({name:"DefaultIcons",setup:()=>()=>o("svg",{"aria-hidden":!0,style:"position: absolute; width: 0; height: 0; overflow: hidden; visibility: hidden;"},[o("symbol",{id:"icon-rotate-right",viewBox:"0 0 1024 1024"},[o("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973z m282.559912-479.07185A509.887841 509.887841 0 0 0 511.99984 0.00032C229.215928 0.00032 0 229.216248 0 512.00016s229.215928 511.99984 511.99984 511.99984 511.99984-229.215928 511.99984-511.99984c0-3.743999-0.032-7.455998-0.128-11.167997-1.631999-11.295996-8.159997-27.103992-31.87199-27.103991-27.487991 0-31.67999 21.247993-32.03199 32.06399l0.032 4.127999a30.62399 30.62399 0 0 0 0.16 2.079999H959.9997c0 247.423923-200.575937 447.99986-447.99986 447.99986S63.99998 759.424083 63.99998 512.00016 264.575917 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 1 277.439913 96.22397l-94.91197 91.679971c-25.439992 24.607992-17.439995 44.991986 17.887994 45.599986l188.031942 3.295999a64.31998 64.31998 0 0 0 65.055979-62.84798l3.295999-188.127942C969.407697 15.040315 949.311703 5.792318 923.871711 30.368311l-87.999972 85.023973z",fill:""},null)]),o("symbol",{id:"icon-rotate-left",viewBox:"0 0 1024 1024"},[o("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973zM188.159941 115.392284A509.887841 509.887841 0 0 1 511.99984 0.00032c282.783912 0 511.99984 229.215928 511.99984 511.99984s-229.215928 511.99984-511.99984 511.99984S0 794.784072 0 512.00016c0-3.743999 0.032-7.455998 0.128-11.167997 1.631999-11.295996 8.159997-27.103992 31.87199-27.103991 27.487991 0 31.67999 21.247993 32.03199 32.06399L63.99998 509.920161a30.62399 30.62399 0 0 1-0.16 2.079999H63.99998c0 247.423923 200.575937 447.99986 447.99986 447.99986s447.99986-200.575937 447.99986-447.99986S759.423763 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 0-277.439913 96.22397l94.91197 91.679971c25.439992 24.607992 17.439995 44.991986-17.887994 45.599986L123.551961 300.800226a64.31998 64.31998 0 0 1-65.055979-62.84798l-3.295999-188.127942C54.591983 15.040315 74.687977 5.792318 100.127969 30.368311l87.999972 85.023973z",fill:""},null)]),o("symbol",{id:"icon-resize",viewBox:"0 0 1024 1024"},[o("path",{d:"M456.036919 791.8108 270.553461 791.8108 460.818829 601.572038l-39.593763-39.567157L231.314785 751.915162l0.873903-183.953615c0-15.465227-12.515035-27.981285-27.981285-27.981285s-27.981285 12.515035-27.981285 27.981285l0 251.829516c0 8.3072 3.415796 14.975063 8.826016 19.564591 5.082762 5.192256 12.132318 8.416693 19.947308 8.416693l251.036453 0c15.46625 0 27.981285-12.514012 27.981285-27.981285C484.018204 804.325835 471.504192 791.8108 456.036919 791.8108zM838.945819 184.644347c-5.082762-5.191232-12.132318-8.416693-19.947308-8.416693L567.961034 176.227654c-15.46625 0-27.981285 12.515035-27.981285 27.981285 0 15.46625 12.514012 27.981285 27.981285 27.981285l185.483458 0L563.206754 422.427962l39.567157 39.567157 189.910281-189.910281-0.873903 183.953615c0 15.46625 12.514012 27.981285 27.981285 27.981285s27.981285-12.514012 27.981285-27.981285L847.772858 204.208938C847.771835 195.902762 844.356039 189.234899 838.945819 184.644347zM847.771835 64.303538 176.227142 64.303538c-61.809741 0-111.924115 50.115398-111.924115 111.924115l0 671.544693c0 61.809741 50.114374 111.924115 111.924115 111.924115l671.544693 0c61.809741 0 111.924115-50.114374 111.924115-111.924115l0-671.544693C959.69595 114.418936 909.581576 64.303538 847.771835 64.303538zM903.733381 847.772346c0 30.878265-25.056676 55.962569-55.962569 55.962569L176.227142 903.734916c-30.90487 0-55.962569-25.084305-55.962569-55.962569l0-671.544693c0-30.9325 25.056676-55.962569 55.962569-55.962569l671.544693 0c30.90487 0 55.962569 25.03007 55.962569 55.962569L903.734404 847.772346z"},null)]),o("symbol",{id:"icon-img-broken",viewBox:"0 0 1024 1024"},[o("path",{d:"M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m0 682.666667H213.333333v-195.413334l42.24 42.24 170.666667-170.666666 170.666667 170.666666 170.666666-170.24L810.666667 530.346667V810.666667z m0-401.493334l-43.093334-43.093333-170.666666 171.093333-170.666667-170.666666-170.666667 170.666666-42.24-42.666666V213.333333h597.333334v195.84z"},null)]),o("symbol",{id:"icon-prev",viewBox:"0 0 1024 1024"},[o("path",{d:"M784.652701 955.6957 346.601985 517.644983c-2.822492-2.822492-2.822492-7.902977 0-11.289967l439.179713-439.179713c6.77398-6.77398 10.725469-16.370452 10.725469-25.966924L796.507166 36.692393c0-20.32194-16.370452-36.692393-36.692393-36.692393l-4.515987 0c-9.596472 0-19.192944 3.951488-25.966924 10.725469L250.072767 489.420066c-12.418964 12.418964-12.418964 32.740904 0 45.159868l477.565601 477.565601c7.338479 7.338479 17.499449 11.854465 28.224917 11.854465l0 0c22.015436 0 40.079383-18.063947 40.079383-40.079383l0 0C796.507166 973.759647 791.99118 963.598677 784.652701 955.6957z"},null)]),o("symbol",{id:"icon-next",viewBox:"0 0 1024 1024"},[o("path",{d:"M246.121279 955.6957l438.050717-438.050717c2.822492-2.822492 2.822492-7.902977 0-11.289967L244.992282 67.175303c-6.77398-6.77398-10.725469-16.370452-10.725469-25.966924L234.266814 36.692393C234.266814 16.370452 250.637266 0 270.959206 0l4.515987 0c9.596472 0 19.192944 3.951488 25.966924 10.725469l478.694598 478.694598c12.418964 12.418964 12.418964 32.740904 0 45.159868l-477.565601 477.565601c-7.338479 7.338479-17.499449 11.854465-28.224917 11.854465l0 0c-22.015436 0-40.079383-18.063947-40.079383-40.079383l0 0C234.266814 973.759647 238.7828 963.598677 246.121279 955.6957z"},null)]),o("symbol",{id:"icon-zoomin",viewBox:"0 0 1024 1024"},[o("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),o("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null),o("path",{d:"M367.488 238.144h127.104v390.72H367.488z"},null)]),o("symbol",{id:"icon-close",viewBox:"0 0 1024 1024"},[o("path",{d:"M570.24 512l259.2 259.2-58.88 58.24L512 570.24l-261.12 261.12-58.24-58.24L453.76 512 194.56 252.8l58.24-58.24L512 453.76l261.12-261.12 58.24 58.24z"},null)]),o("symbol",{id:"icon-zoomout",viewBox:"0 0 1024 1024"},[o("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),o("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null)])])}),zn=Xl?window:global;let Qd=Date.now();function Bw(t){const e=Date.now(),a=Math.max(0,16-(e-Qd)),s=setTimeout(t,a);return Qd=e+a,s}function Er(t){return(zn.requestAnimationFrame||Bw).call(zn,t)}function Dd(t){(zn.cancelAnimationFrame||zn.clearTimeout).call(zn,t)}function $d(t,e){const a=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(a*a+s*s)}function Sr(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!lp(t)}var Qr=Ls({name:"VueEasyLightbox",props:{imgs:{type:[Array,String],default:()=>""},visible:{type:Boolean,default:!1},index:{type:Number,default:0},scrollDisabled:{type:Boolean,default:!0},escDisabled:{type:Boolean,default:!1},moveDisabled:{type:Boolean,default:!1},titleDisabled:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},teleport:{type:[String,Object],default:null},swipeTolerance:{type:Number,default:50},loop:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},zoomScale:{type:Number,default:.12},maxZoom:{type:Number,default:3},minZoom:{type:Number,default:.1},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1},pinchDisabled:{type:Boolean,default:!1},dblclickDisabled:{type:Boolean,default:!1}},emits:{hide:()=>!0,"on-error":t=>!0,"on-prev":(t,e)=>!0,"on-next":(t,e)=>!0,"on-prev-click":(t,e)=>!0,"on-next-click":(t,e)=>!0,"on-index-change":(t,e)=>!0,"on-rotate":t=>!0},setup(t,e){let{emit:a,slots:s}=e;const{imgRef:n,imgState:l,setImgSize:A}=(()=>{const ie=T(),ve=Rn({width:0,height:0,maxScale:1});return{imgRef:ie,imgState:ve,setImgSize:()=>{if(ie.value){const{width:Oe,height:re,naturalWidth:Se}=ie.value;ve.maxScale=Se/Oe,ve.width=Oe,ve.height=re}}}})(),u=T(t.index),c=T(""),m=Rn({scale:1,lastScale:1,rotateDeg:0,top:0,left:0,initX:0,initY:0,lastX:0,lastY:0,touches:[]}),v=Rn({loadError:!1,loading:!1,dragging:!1,gesturing:!1,wheeling:!1}),b=X(()=>{return ie=t.imgs,AA("Array")(ie)?t.imgs.map(ve=>typeof ve=="string"?{src:ve}:function(Oe){return hw(Oe)&&Sd(Oe.src)}(ve)?ve:void 0).filter(_w):Sd(t.imgs)?[{src:t.imgs}]:[];var ie}),g=X(()=>b.value[u.value]),F=X(()=>{var ie;return(ie=b.value[u.value])==null?void 0:ie.src}),B=X(()=>{var ie;return(ie=b.value[u.value])==null?void 0:ie.title}),w=X(()=>{var ie;return(ie=b.value[u.value])==null?void 0:ie.alt}),C=X(()=>({cursor:v.loadError?"default":t.moveDisabled?v.dragging?"grabbing":"grab":"move",top:`calc(50% + ${m.top}px)`,left:`calc(50% + ${m.left}px)`,transition:v.dragging||v.gesturing?"none":"",transform:`translate(-50%, -50%) scale(${m.scale}) rotate(${m.rotateDeg}deg)`})),k=()=>{a("hide")},S=()=>{m.scale=1,m.lastScale=1,m.rotateDeg=0,m.top=0,m.left=0,v.loadError=!1,v.dragging=!1,v.loading=!0},E=(ie,ve)=>{const Oe=u.value;S(),u.value=ie,b.value[u.value]===b.value[ie]&&de(()=>{v.loading=!1}),t.visible&&Oe!==ie&&(ve&&ve(Oe,ie),a("on-index-change",Oe,ie))},V=()=>{const ie=u.value,ve=t.loop?(ie+1)%b.value.length:ie+1;!t.loop&&ve>b.value.length-1||E(ve,(Oe,re)=>{a("on-next",Oe,re),a("on-next-click",Oe,re)})},$=()=>{const ie=u.value;let ve=ie-1;if(ie===0){if(!t.loop)return;ve=b.value.length-1}E(ve,(Oe,re)=>{a("on-prev",Oe,re),a("on-prev-click",Oe,re)})},O=ie=>{Math.abs(1-ie)<.05?ie=1:Math.abs(l.maxScale-ie)<.05&&(ie=l.maxScale),m.lastScale=m.scale,m.scale=ie},D=()=>{const ie=m.scale+t.zoomScale;ie<l.maxScale*t.maxZoom&&O(ie)},Q=()=>{const ie=m.scale-t.zoomScale;ie>t.minZoom&&O(ie)},I=()=>{const ie=m.rotateDeg%360;a("on-rotate",Math.abs(ie<0?ie+360:ie))},L=()=>{m.rotateDeg-=90,I()},K=()=>{m.rotateDeg+=90,I()},N=()=>{m.scale=1,m.top=0,m.left=0},W=function(){let ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return!t.moveDisabled&&ie===0},{onMouseDown:R,onMouseMove:ee,onMouseUp:oe}=((ie,ve,Oe)=>{let re,Se=!1;return{onMouseDown:Pe=>{ie.initX=ie.lastX=Pe.clientX,ie.initY=ie.lastY=Pe.clientY,ve.dragging=!0,Se=!1,Pe.stopPropagation()},onMouseUp:Pe=>{Oe(Pe.button)&&Dd(re),ve.dragging=!1,Se=!1},onMouseMove:Pe=>{if(ve.dragging)if(Oe(Pe.button)){if(Se)return;Se=!0,re=Er(()=>{const{top:oa,left:Lt,lastY:Qt,lastX:Ct}=ie;ie.top=oa-Qt+Pe.clientY,ie.left=Lt-Ct+Pe.clientX,ie.lastX=Pe.clientX,ie.lastY=Pe.clientY,Se=!1})}else ie.lastX=Pe.clientX,ie.lastY=Pe.clientY;Pe.stopPropagation()}}})(m,v,W),{onTouchStart:Ae,onTouchMove:ue,onTouchEnd:P}=((ie,ve,Oe,re,Se)=>{let Pe,oa=!1;return{onTouchStart:Lt=>{const{touches:Qt}=Lt;Qt.length>1&&Se()?(Oe.gesturing=!0,ve.touches=Qt):(ve.initX=ve.lastX=Qt[0].clientX,ve.initY=ve.lastY=Qt[0].clientY,Oe.dragging=!0),Lt.stopPropagation()},onTouchMove:Lt=>{if(oa)return;const{touches:Qt}=Lt,{lastX:Ct,lastY:ha,left:kt,top:Gt,scale:Ua}=ve;if(!Oe.gesturing&&Oe.dragging){if(!Qt[0])return;const{clientX:za,clientY:Ta}=Qt[0];re()?Pe=Er(()=>{ve.lastX=za,ve.lastY=Ta,ve.top=Gt-ha+Ta,ve.left=kt-Ct+za,oa=!1}):(ve.lastX=za,ve.lastY=Ta)}else Oe.gesturing&&ve.touches.length>1&&Qt.length>1&&Se()&&(Pe=Er(()=>{const za=($d(ve.touches[0],ve.touches[1])-$d(Qt[0],Qt[1]))/ie.width;ve.touches=Qt;const Ta=Ua-1.3*za;Ta>.5&&Ta<1.5*ie.maxScale&&(ve.scale=Ta),oa=!1}))},onTouchEnd:()=>{Dd(Pe),Oe.dragging=!1,Oe.gesturing=!1,oa=!1}}})(l,m,v,W,()=>!t.pinchDisabled),G=()=>{t.dblclickDisabled||(m.scale!==l.maxScale?(m.lastScale=m.scale,m.scale=l.maxScale):m.scale=m.lastScale)},z=ie=>{v.loadError||v.gesturing||v.loading||v.dragging||v.wheeling||!t.scrollDisabled||t.zoomDisabled||(v.wheeling=!0,setTimeout(()=>{v.wheeling=!1},80),ie.deltaY<0?D():Q())},j=ie=>{const ve=ie;t.visible&&(!t.escDisabled&&ve.key==="Escape"&&t.visible&&k(),ve.key==="ArrowLeft"&&(t.rtl?V():$()),ve.key==="ArrowRight"&&(t.rtl?$():V()))},Z=()=>{t.maskClosable&&k()},_e=()=>{A()},he=()=>{v.loading=!1},Qe=ie=>{v.loading=!1,v.loadError=!0,a("on-error",ie)},ge=()=>{t.visible&&A()};ce(()=>t.index,ie=>{ie<0||ie>=b.value.length||E(ie)}),ce(()=>v.dragging,(ie,ve)=>{const Oe=!ie&&ve;if(!W()&&Oe){const re=m.lastX-m.initX,Se=m.lastY-m.initY,Pe=t.swipeTolerance;Math.abs(re)>Math.abs(Se)&&(re<-1*Pe?V():re>Pe&&$())}}),ce(()=>t.visible,ie=>{if(ie){S();const ve=b.value.length;if(ve===0)return u.value=0,v.loading=!1,void de(()=>v.loadError=!0);u.value=t.index>=ve?ve-1:t.index<0?0:t.index,t.scrollDisabled&&De()}else t.scrollDisabled&&Ue()});const De=()=>{document&&(c.value=document.body.style.overflowY,document.body.style.overflowY="hidden")},Ue=()=>{document&&(document.body.style.overflowY=c.value)};pe(()=>{Ud(document,"keydown",j),Ud(window,"resize",ge)}),ks(()=>{Ed(document,"keydown",j),Ed(window,"resize",ge),t.scrollDisabled&&Ue()});const Ie=()=>v.loading?s.loading?s.loading({key:"loading"}):o(vw,{key:"img-loading"},null):v.loadError?s.onerror?s.onerror({key:"onerror"}):o(yw,{key:"img-on-error"},null):o("div",{class:`${va}-img-wrapper`,style:C.value,key:"img-wrapper"},[o("img",{alt:w.value,ref:n,draggable:"false",class:`${va}-img`,src:F.value,onMousedown:R,onMouseup:oe,onMousemove:ee,onTouchstart:Ae,onTouchmove:ue,onTouchend:P,onLoad:_e,onDblclick:G,onDragstart:ie=>{ie.preventDefault()}},null)]),Ee=()=>{if(s["prev-btn"])return s["prev-btn"]({prev:$});if(b.value.length<=1)return;const ie=!t.loop&&u.value<=0;return o("div",{role:"button","aria-label":"previous image button",class:"btn__prev "+(ie?"disable":""),onClick:$},[t.rtl?o(Da,{type:"next"},null):o(Da,{type:"prev"},null)])},Ye=()=>{if(s["next-btn"])return s["next-btn"]({next:V});if(b.value.length<=1)return;const ie=!t.loop&&u.value>=b.value.length-1;return o("div",{role:"button","aria-label":"next image button",class:"btn__next "+(ie?"disable":""),onClick:V},[t.rtl?o(Da,{type:"prev"},null):o(Da,{type:"next"},null)])},mt=()=>{if(!(t.titleDisabled||v.loading||v.loadError))return s.title?s.title({currentImg:g.value}):B.value?o(bw,null,{default:()=>[B.value]}):void 0},qe=()=>{let ie;if(t.visible)return o("div",{onTouchmove:pw,class:[`${va}-modal`,t.rtl?"is-rtl":""],onClick:Ke(Z,["self"]),onWheel:z},[o(ww,null,null),o(zo,{name:`${va}-fade`,mode:"out-in"},Sr(ie=Ie())?ie:{default:()=>[ie]}),o("img",{style:"display:none;",src:F.value,onError:Qe,onLoad:he},null),o("div",{class:`${va}-btns-wrapper`},[Ee(),Ye(),mt(),s["close-btn"]?s["close-btn"]({close:k}):o("div",{role:"button","aria-label":"close image preview button",class:"btn__close",onClick:k},[o(Da,{type:"close"},null)]),s.toolbar?s.toolbar({toolbarMethods:{zoomIn:D,zoomOut:Q,rotate:L,rotateLeft:L,rotateRight:K,resize:N},zoomIn:D,zoomOut:Q,rotate:L,rotateLeft:L,rotateRight:K,resize:N}):o(gw,{zoomIn:D,zoomOut:Q,resize:N,rotateLeft:L,rotateRight:K,rotateDisabled:t.rotateDisabled,zoomDisabled:t.zoomDisabled},null)])])};return()=>{let ie;if(t.teleport){let ve;return o(Il,{to:t.teleport},{default:()=>[o(zo,{name:`${va}-fade`},Sr(ve=qe())?ve:{default:()=>[ve]})]})}return o(zo,{name:`${va}-fade`},Sr(ie=qe())?ie:{default:()=>[ie]})}}});const Xc=Object.assign(Qr,{install:t=>{t.component(Qr.name,Qr)}}),Cw={name:"Attachments",props:{multiple:Boolean,attachments:{type:[Array,Object],default:()=>[]},empty_text:String,isSingle:Boolean,title:String,type:String,icon:String,showList:{type:Boolean,default:!0},showDeleteButton:{type:Boolean,default:!0},previewImage:{type:Boolean,default:!0},mediaInputSize:{type:String},mediaInputBg:{type:String}},emits:["removeImage","mediaUploaded"],data(){return{visible:!1,imageIndex:0,lightboxData:[],images:T([])}},components:{MediaButton:to,VueEasyLightbox:Xc,IconButton:Be,Delete:Ds},computed:{showMediaButtonAsIcon:function(){return!this.multiple&&this.attachments.length===1}},mounted:function(){Array.isArray(this.attachments)&&this.attachments.length>0&&this.attachments.forEach(t=>{this.lightboxData.push(t.url),this.images.push({id:t.id,url:t.url,title:t.title})})},methods:{translate:f,removeImageEvent(t){this.$emit("removeImage",t)},onMediaSelected(t){this.images=t.map(e=>({id:e.id,title:e.title,url:e.url})),this.$emit("mediaUploaded",this.images)}},watch:{attachments:{handler:function(t,e){return this.lightboxData=[],Array.isArray(t)&&t.length>0&&t.map((a,s)=>{this.lightboxData.push(a.url)}),t},deep:!0}}},kw={class:"fct-attachments-wrap",style:{position:"relative"}},Fw={class:"fct-attachment-img-wrap"},xw=["src","alt","onClick"],Uw={class:"fct-attachments-button"};function Ew(t,e,a,s,n,l){const A=y("VueEasyLightbox"),u=y("MediaButton"),c=y("IconButton"),m=y("Delete");return d(),_(H,null,[o(A,{visible:n.visible,imgs:n.lightboxData,index:n.imageIndex,onHide:e[0]||(e[0]=()=>{this.visible=!1})},null,8,["visible","imgs","index"]),i("div",kw,[a.attachments?(d(),_("ul",{key:0,class:ne(`fct-attachments-list ${a.multiple?"is-multiple":"fct-single-attachment"} ${a.attachments.length>0?"is-single":""}`)},[a.showList===!0?(d(!0),_(H,{key:0},q(a.attachments,(v,b)=>(d(),_("li",{key:b,class:ne([[a.mediaInputSize,a.mediaInputBg],"fct-attachment-item"])},[i("div",Fw,[a.previewImage?(d(),_("img",{key:0,src:v.url,alt:v.title,onClick:()=>{this.imageIndex=b,this.visible=!0}},null,8,xw)):x("",!0),l.showMediaButtonAsIcon&&!a.multiple?(d(),U(c,{key:1,size:"x-small"},{default:r(()=>[o(u,{"icon-mode":!0,attachments:a.attachments,title:a.multiple?"":a.title,onOnMediaSelected:l.onMediaSelected,multiple:a.multiple,icon:a.icon},null,8,["attachments","title","onOnMediaSelected","multiple","icon"])]),_:1})):x("",!0)]),i("div",Uw,[a.showDeleteButton?(d(),U(c,{key:0,tag:"button",bg:"danger",outline:"",size:"x-small",onClick:Ke(g=>l.removeImageEvent(b),["prevent"]),title:l.translate("Delete media")},{default:r(()=>[a.multiple?(d(),U(m,{key:0})):(d(),_(H,{key:1},[M(h(l.translate("Remove")),1)],64))]),_:2},1032,["onClick","title"])):x("",!0),l.showMediaButtonAsIcon&&a.multiple?(d(),U(c,{key:1,size:"x-small"},{default:r(()=>[o(u,{"icon-mode":!0,attachments:a.attachments,title:a.multiple?"":a.title,onOnMediaSelected:l.onMediaSelected,multiple:a.multiple,icon:a.icon},null,8,["attachments","title","onOnMediaSelected","multiple","icon"])]),_:1})):x("",!0)])],2))),128)):x("",!0),l.showMediaButtonAsIcon?x("",!0):(d(),_("li",{key:1,class:ne([a.mediaInputSize,a.mediaInputBg])},[o(u,{"icon-mode":!1,attachments:a.attachments,title:a.multiple?"":a.title,onOnMediaSelected:l.onMediaSelected,multiple:a.multiple,icon:a.icon},null,8,["attachments","title","onOnMediaSelected","multiple","icon"])],2))],2)):x("",!0),Nt(t.$slots,"default")])],64)}const vl=ye(Cw,[["render",Ew]]),Sw={key:0},Qw={key:0,class:"setting-label"},Jl={__name:"MediaInput",props:{modelValue:{default:""},showSupported:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},icon:{type:String},title:{type:String},mediaInputSize:{type:String},mediaInputBg:{type:String},field:{type:Object}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,s=e,n=T();let l=T([]);const A=()=>{a.multiple?n.value=[]:n.value="",l=[],s("update:modelValue",n.value)},u=m=>{if(m.length)if(a.multiple){n.value=[],l=[];for(const v of m)n.value.push(v),l.push(v)}else n.value=m,l=m;s("update:modelValue",n.value)};ce(()=>a.modelValue,m=>{Array.isArray(m)&&m.length>0?n.value=m:m&&typeof m=="string"&&m!==""?n.value=[m]:m&&typeof m=="object"?n.value=[m]:n.value=[],c()});const c=()=>{l.value=[],Object.values(n.value).forEach((m,v)=>{m!==void 0&&m!==""&&l.value.push(m)})};return pe(()=>{Array.isArray(a.modelValue)&&a.modelValue.length>0?n.value=a.modelValue:a.modelValue&&typeof a.modelValue=="string"&&a.modelValue!==""?n.value=[a.modelValue]:a.modelValue&&typeof a.modelValue=="object"?n.value=[a.modelValue]:n.value=[],c()}),(m,v)=>(d(),_(H,null,[o(vl,{attachments:p(l),onMediaUploaded:u,onRemoveImage:A,icon:t.icon,title:t.title,mediaInputSize:t.mediaInputSize,mediaInputBg:t.mediaInputBg},null,8,["attachments","icon","title","mediaInputSize","mediaInputBg"]),t.showSupported?(d(),_("div",Sw,[t.field&&t.field.label?(d(),_("label",Qw,h(t.field.label),1)):x("",!0),i("span",null,h(p(f)("%1$s Recommended width: %2$s pixels minimum.","HEIC, WEBP, SVG, PNG, or JPG.","512")),1)])):x("",!0)],64))}},Dw={class:"setting-media-wrap"},Jc={__name:"Media",props:pa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=ka(t,"modelValue");return(a,s)=>(d(),_("div",Dw,[o(Jl,ht({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=n=>e.value=n),field:t.field,icon:"Upload"},t.attribute),null,16,["modelValue","field"])]))}},$w=Object.freeze(Object.defineProperty({__proto__:null,default:Jc},Symbol.toStringTag,{value:"Module"})),Iw={__name:"InputRenderer",props:{form:{type:Object,required:!0},field:{type:Object,required:!0},value:{type:Object,required:!0},statePath:{type:String,required:!0},fieldKey:{type:String,required:!0},fullStatePath:{type:String,required:!0}},setup(t){const e=t;T(!1),Xe().ctx;const a=m=>typeof m.label=="function"?m.label(e.value,e.statePath,e.form):m.label,s=(m,v)=>{if(typeof m=="function")return m({data:e.value,form:e.form,statePath:e.statePath,field:e.field,event:Array.isArray(v)&&v.length===1?v[0]:v})},n=T(!1);let l={};pe(async()=>{l=await rA.attributesBuilders(e.field,s,e.form),n.value=!0});const A={switch:Kc,checkbox:Nc,radio:Gc,input:rn,text:rn,email:rn,number:rn,textarea:rn,color:iA,date:jc,time:zc,select:Yc,media:Jc,remote_select:qc},u=X(()=>A[e.field.type]||null),c=X(()=>({modelValue:e.value[e.fieldKey],form:e.form,statePath:e.statePath,field:e.field,fieldKey:e.fieldKey,value:e.value[e.fieldKey],nesting:!1,label:a(e.field),attribute:l,callback:s}));return(m,v)=>t.field.type==="wp-editor"?(d(),U(Ks,{key:0,shortCodes:t.field.shortcodes.data,modelValue:e.value[e.fieldKey],onUpdate:v[0]||(v[0]=b=>{e.value[e.fieldKey]=b})},null,8,["shortCodes","modelValue"])):u.value&&n.value?(d(),U(Oa(u.value),ht({key:1,onChange:v[1]||(v[1]=b=>{t.form.triggerChange(b)}),onInput:v[2]||(v[2]=b=>{t.form.triggerChange(t.value[t.fieldKey])}),modelValue:t.value[t.fieldKey],"onUpdate:modelValue":v[3]||(v[3]=b=>t.value[t.fieldKey]=b)},c.value),null,16,["modelValue"])):x("",!0)}},Tw=["innerHTML"],Mw={key:0},Vw={key:0},Zl={__name:"FormRenderer",props:{form:{type:Object,required:!0},schema:{type:Object},value:{type:Object},statePath:{type:String}},setup(t){const e=t,a=e.statePath??"",s=["grid","section","tab","tab-pane"];T(!1),Xe().ctx;const n=(A,u)=>{if(typeof A.label=="function"){let c=l(A)?a:u+".",m=l(A)?e.value:e.value[u];return A.label(m,c,e.form)}return A.label},l=A=>A.disable_nesting!==!1;return(A,u)=>(d(!0),_(H,null,q(t.schema,(c,m)=>(d(),_(H,{key:m},[t.form.isVisible(c,t.statePath+m)?(d(),_(H,{key:0},[c.type==="html"?(d(),_("div",{key:0,class:ne(`setting-html-wrapper ${c.wrapperClass??""}`),innerHTML:c.value},null,10,Tw)):(d(),_(H,{key:1},[c.component?(d(),_("div",{key:0,class:ne(c.wrapperClass??"")},[c.component&&c.label?(d(),U(Ze,{key:0,title:n(c,m),content:c.tooltip,class:"setting-label",placement:c.tooltip_placement},{default:r(()=>[c.labelOptional?(d(),_("span",Mw,"("+h(c.labelOptional)+")",1)):x("",!0)]),_:2},1032,["title","content","placement"])):x("",!0),o(Lc,{modelValue:t.value[m],"onUpdate:modelValue":v=>t.value[m]=v,name:c.component,form:t.form,statePath:l(c)?p(a):m+".",field:c,"field-key":m,value:l(c)?t.value:t.value[m],nesting:l(c)},{fieldNote:r(()=>[c.note&&c.hide_note!==!0?(d(),U(vi,{key:0,note:c.note},null,8,["note"])):x("",!0)]),validationError:r(()=>[o(xd,{form:t.form,"error-key":p(a)+m},null,8,["form","error-key"])]),_:2},1032,["modelValue","onUpdate:modelValue","name","form","statePath","field","field-key","value","nesting"])],2)):x("",!0),s.includes(c.type)?(d(),U(X0,{key:1,form:t.form,field:c,value:t.value,"full-state-path":p(a),statePath:l(c)?p(a):m+".","field-key":m},null,8,["form","field","value","full-state-path","statePath","field-key"])):x("",!0),typeof c.type<"u"&&!s.includes(c.type)&&!["custom","component","html","hidden"].includes(c.type)?(d(),_("div",{key:2,class:ne(`setting-fields-inner ${c.wrapperClass??""}`)},[c.type!=="checkbox"&&!c.component&&c.label!==!1?(d(),U(Ze,{key:0,class:"setting-label",title:n(c,m),content:c.tooltip,placement:c.tooltip_placement},{default:r(()=>[c.labelOptional?(d(),_("span",Vw,"("+h(c.labelOptional)+")",1)):x("",!0)]),_:2},1032,["title","content","placement"])):x("",!0),o(Iw,{form:t.form,field:c,value:t.value,"full-state-path":p(a),"state-path":t.statePath,"field-key":m},null,8,["form","field","value","full-state-path","state-path","field-key"]),c.note&&!c.component?(d(),U(vi,{key:1,note:c.note},null,8,["note"])):x("",!0),c.component?x("",!0):(d(),U(xd,{key:2,form:t.form,"error-key":p(a)+m},null,8,["form","error-key"]))],2)):x("",!0)],64))],64)):x("",!0)],64))),128))}},Lw={key:0,class:"vue-form-wrap"},Ow={key:0,class:"form-section-save-action"},Hw={key:0,class:"cmd block leading-none"},er={__name:"VueForm",props:{form:{type:Object,required:!0},schema:{type:Object},value:{type:Object},showSubmitButton:{type:Boolean,default:!1},submitButtonText:{type:String,default:"Save"},loading:{type:Boolean,default:!1}},emits:["onSubmit","onChange","onSubmitButtonClick"],setup(t,{expose:e,emit:a}){const s=t,n=a;pe(()=>{de(()=>{l.registerCopyAction()})}),T({});const l=Xe().ctx,A=()=>{n("onSubmitButtonClick")};return e({getState:()=>s.form.values}),(c,m)=>{const v=y("el-button");return t.form.isReady?(d(),_("div",Lw,[o(Zl,{form:t.form,ref:"formRenderer",schema:t.form.schema,value:t.form.values},null,8,["form","schema","value"]),t.showSubmitButton?(d(),_("div",Ow,[o(v,{onClick:A,type:"primary",loading:t.loading},{default:r(()=>[t.loading?x("",!0):(d(),_("span",Hw,"s")),M(" "+h(t.loading?p(f)("Saving"):t.submitButtonText),1)]),_:1},8,["loading"])])):x("",!0)])):x("",!0)}}};class Rw{constructor(){fe(this,"operatorMap",{"!==":"matchNotEqual","!=":"matchNotEqual"});fe(this,"defaultMatcherMethod",null)}getMatchingMethod(e){return e==="=="||e==="==="?"matchEqual":this.operatorMap.hasOwnProperty(e)?this.operatorMap[e]:this.defaultMatcherMethod}defaultMatcher(e,a,s){}matchEqual(e,a,s){return s==="==="?e===a:e==a}matchNotEqual(e,a,s){return s==="!=="?e!==a:e!=a}matchContains(e,a,s){return a instanceof String||Array.isArray(a)?a.includes(e):typeof a=="object"?a.hasOwnProperty(e):!1}matchIn(e,a,s){return this.matchContains(e,a,s)}matchNotIn(e,a,s){return!this.matchContains(e,a,s)}}class Pw{constructor(){fe(this,"modifierMap",{"+":"applyAddition","-":"applySubstruction"});fe(this,"defaultModifierMethod",null)}getModificationMethod(e){return e==="=="||e==="==="?"matchEqual":this.modifierMap.hasOwnProperty(e)?this.modifierMap[e]:this.defaultModifierMethod}applyAddition(e,a,s,n,l){return e+a}}class Kw{constructor(e,a){fe(this,"value");fe(this,"operator");this.value=e,this.operator=a}setOperator(e){return this.operator=e,this}setValue(e){return this.value=e,this}static make(e,a){return new this(e,a)}build(){return{operator:this.operator,value:this.value instanceof yi?this.value.setModifiers([]).build():this.value}}}class yi{constructor(e,a){fe(this,"accessor");fe(this,"modifiers");this.accessor=e,this.modifiers=[],this.setModifiers(a)}setAccessor(e){return this.accessor=e,this}addModifier(e){return this.modifiers.push(e),this}setModifiers(e){return this.modifiers=Array.isArray(e)?e:this.modifiers,this}static make(e,a){return new this(e,a)}build(){let e=[];return Array.isArray(this.modifiers)&&this.modifiers.length>0&&(e=this.modifiers.map(a=>a instanceof Kw?a.build():a)),e.length>0?{accessor:this.accessor,modifiers:e}:{accessor:this.accessor}}}class Hs{constructor(e,a,s,n,l){fe(this,"conditionType");fe(this,"conditions");fe(this,"key");fe(this,"operator");fe(this,"value");this.key=e,this.value=a,this.operator=s,this.conditions=[],this.conditionType=this.buildConditionType(n),this.setConditions(l)}static make(e,a,s,n){return new this(e,a,s,n)}setConditionType(e){return this.conditionType=this.buildConditionType(e),this}buildConditionType(e){return e==="or"||e==="|"?"or":"and"}setOperator(e){return this.operator=e,this}setKey(e){return this.key=e,this}setValue(e){return this.value=e,this}addCondition(e){return this.conditions.push(e),this}setConditions(e){return this.conditions=Array.isArray(e)||e instanceof Hs||typeof e=="function"?e:this.conditions,this}build(){if(Array.isArray(this.conditions)&&this.conditions.length>0){let s=[];return s=this.conditions.map(n=>n instanceof Hs?n.build.bind(n)():n),{condition_type:this.conditionType,conditions:s}}const e=this.key instanceof yi?this.key.build():this.key,a=this.value instanceof yi?this.value.build():this.value;return{key:e,operator:this.operator,value:a}}}class Nw{constructor(e,a){fe(this,"data");fe(this,"conditions");fe(this,"stateKey");fe(this,"matcher");fe(this,"modifier");this.data=a,this.stateKey=e,this.matcher=new Rw,this.modifier=new Pw}match(e,a,s,n=!0){let l="",A=this.matcher.getMatchingMethod(a);return A!=null?l=A:l=nt.camel("match"+a),l in this.matcher&&typeof this.matcher[l]=="function"?this.matcher[l](e,s,a,n):(console.error(`Method ${l} does not exist in Matcher Class`),n)}evaluate(e,a="and"){if(e instanceof Hs){const n=e.build.bind(e)();n.hasOwnProperty("conditions")?(e=n.conditions,a=n.condition_type):e=[n]}a=a==="or"?"or":"and";let s=a==="and";if(typeof e=="function")return e(this.stateKey,this.data);if(!Array.isArray(e))return!0;for(let n of e){let l=null;if(Array.isArray(we.get(n,"conditions")))l=this.evaluate(n.conditions,we.get(n,"condition_type","and"));else{if(n.key===null||n.key===void 0){s=!0;continue}l=this.applyCondition(n)}s=a==="and"?s&&l:s||l}return s}applyCondition(e){let a="",s=null;typeof e.key=="object"?a=we.resolvePath(this.stateKey,we.get(e,"key.accessor")):a=we.resolvePath(this.stateKey,e.key);let n=we.get(this.data,a);if(typeof e.value=="object"){const l=we.resolvePath(this.stateKey,we.get(e,"value.accessor"));s=we.get(this.data,l)}else s=e.value;return n=this.applyModification(n,e.key.modifiers,this.stateKey),s=this.applyModification(s,e.value.modifiers,this.stateKey),this.match(n,e.operator,s)}applyModification(e,a,s){return Array.isArray(a)&&a.forEach(n=>{let l=n.operator,A="",u=this.modifier.getModificationMethod(l);if(u!=null?A=u:A=nt.camel("apply"+l),A in this.modifier&&typeof this.modifier[A]=="function"){let c=n.value;typeof c=="object"&&c!==null&&(c=we.getByPath(this.data,s,we.get(c,"accessor"))),e=this.modifier[A](e,c,l,s,this.data)}else console.error(`Method ${A} does not exist in Modifier Class`)}),e}}class Zc{constructor(){fe(this,"_conditionType","and");fe(this,"_conditions",null)}conditionType(e){return this._conditionType=e,this}conditions(e){return this._conditions=Array.isArray(e)||e instanceof Hs||typeof e=="function"?e:this._conditions,this}visibleIf(e){return this._conditions=e,this}buildConditions(e){return Array.isArray(e)&&e.length>0?e.map(a=>a instanceof Hs?a.build.bind(a)():a):e}}class ef{constructor(){fe(this,"_events",{})}event(e,a){return this._events[e]=a,this}}class yl{constructor(e=""){this._component="",this._affix=e}static component(e){const a=new yl;return a._component="Affix/"+e,a}static make(e=""){return new this(e)}build(){return this._component.length>0?{component:this._component}:this._affix}}class bi{constructor(e,a="input"){if(typeof e!="string"||e.length<1)throw new Error("Key is Required");this._key=e,this._type=a,this._class="",this._id="",this._name="",this._label="",this._value="",this._placeholder="",this._min="",this._max="",this._prefix="",this._hasPrefix=!1,this._hasSuffix=!1,this._suffix="",gs.install(this,Iu),gs.install(this,ef),gs.install(this,Zc),this._wrapperClass=""}static make(e,a="input"){return new this(e,a)}wrapperClass(e){return this._wrapperClass=e,this}type(e){return this._type=e,this}class(e){return this._class=e,this}id(e){return this._id=e,this}name(e){return this._name=e,this}label(e){return this._label=e,this}value(e){return this._value=e,this}placeholder(e){return this._placeholder=e,this}min(e){return this._min=e,this}max(e){return this._max=e,this}prefix(e){return this._hasPrefix=!0,this._prefix=e,this}suffix(e){this._hasSuffix=!0,this._suffix=e}onChange(e){return this._onChangeCallback=e,this}onKeyPress(e){return this._onKeyPressCallback=e,this}onKeyUp(e){return this._onKeyUpCallback=e,this}onKeyDown(e){return this._onKeyDownCallback=e,this}build(){return this._conditions,Array.isArray(this._conditions)&&this._conditions.length>0&&this._conditions.map(e=>e instanceof Hs?e.build.bind(e)():e),this._attributes=typeof this._attributes=="object"?this._attributes:{},this._attributes.min=this._min,this._attributes.max=this._max,this._attributes.placeholder=this._placeholder,this._attributes.type=this._type,{key:this._key,type:this._type,class:this._class,id:this._id,name:this._name??f(nt.headline(this._key)),label:this._label??f(nt.headline(this._key)),value:this._value,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),hasSuffix:this._hasSuffix,hasPrefix:this._hasPrefix,suffix:this._suffix instanceof yl?this._suffix.build():this._suffix,prefix:this._prefix instanceof yl?this._prefix.build():this._prefix,min:this._min,max:this._max,placeholder:this._placeholder,attributes:this._attributes,events:this._events,wrapperClass:this._wrapperClass}}}class wi{constructor(e){if(typeof e!="string"||e.length<1)throw new Error("Key is Required");this._type="section",this._key=e,this._schema=[],this._class="",this.disable_nesting=!0,gs.install(this,Iu),gs.install(this,ef),gs.install(this,Zc)}static make(e){return new this(e)}enableNesting(){return this.disable_nesting=!1,this}disableNesting(){return this.disable_nesting=!0,this}class(e){return this._class=e,this}get type(){return this._type}set type(e){if(typeof e=="string")this._type=e;else throw new TypeError("Type must be a string.")}get schema(){return this._schema}setSchema(e){return this._schema=e,this}build(){const e=hn.build(this.schema);return{key:this._key,type:this._type,class:this._class,schema:e,disable_nesting:this.disable_nesting,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),attributes:this._attributes}}}class Id{constructor(e,a){if(typeof e!="string"||e.length<1)throw new Error("Key is Required");gs.install(this,bi,{key:e}),gs.install(this,wi,{key:e}),this._component=a,this._key=e}static make(e,a=""){return new this(e,a)}component(e){return this._component=e,this}value(e){return this._value=e,this}build(){const e=hn.build(this.schema??{});return{type:this._type,class:this._class,id:this._id,name:this._name??f(nt.headline(this._key)),label:this._label??f(nt.headline(this._key)),value:this._value,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),hasSuffix:this._hasSuffix,hasPrefix:this._hasPrefix,suffix:this._suffix,prefix:this._prefix,placeholder:this._placeholder,attributes:this._attributes,onChange:this._onChangeCallback,onKeyUp:this._onKeyUpCallback,onKeyDown:this._onKeyDownCallback,type:this._type,class:this._class,schema:e,disable_nesting:this.disable_nesting,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),type:"custom",component:this._component,key:this._key}}}class hn{static build(e){return Array.isArray(e)?hn.buildFromArray(e):typeof e=="object"?hn.buildFromObject(e):e}static buildFromObject(e){let a={};return Object.keys(e).forEach((s,n)=>{const l=e[s];l instanceof bi||l instanceof wi||l instanceof Id?a[s]=l.build.bind(l)():a[s]=e[s]}),a}static buildFromArray(e){let a={};return Array.isArray(e)&&e.forEach(s=>{if(s instanceof bi||s instanceof wi||s instanceof Id){let n=s.build.bind(s)();a[n.key]=n}else a[s.key]=s}),a}}class Gw extends Xt{constructor(){super(...arguments);fe(this,"data",{schema:{},defaults:{},values:{},initialized:!1,hasChange:!1,validationErrors:{},onChangeCallback:[]});fe(this,"nestedFormLayouts",["section","tab","tab-pane","grid"]);fe(this,"ignorableFormLayouts",["grid"])}get hasChange(){return this.data.hasChange}setSchema(a){return this.data.schema={},this.data.schema=hn.build(a??{}),this.initForm(),this}setDefaults(a){return this.data.defaults=a,this.initForm(),this}get schema(){return this.data.schema}get values(){return this.data.values}get isReady(){return this.data.initialized}initForm(){if(typeof this.data.schema!="object"||typeof this.data.defaults!="object")throw new Error("You need to set Schema and Defaults First");this.setValues(),this.data.initialized=!0}setValues(){this.data.values=this.ensureNestedDataProperties(this.data.schema,this.data.defaults)}getState(){return this.data.values}setValidationErrors(a){this.data.validationErrors=a}hasValidationError(a){return(this.data.validationErrors??{}).hasOwnProperty(a)}getValidationError(a){return this.data.validationErrors[a]}ensureNestedDataProperties(a,s={}){return Object.keys(a).reduce((n,l)=>{const A=a[l];if(A.type==="html")return n;if(this.ignorableFormLayouts.includes(A.type),this.nestedFormLayouts.includes(A.type??""))if(A.disable_nesting===!0){const u=this.ensureNestedDataProperties(A.schema??{},s??{});n={...n,...u}}else n[l]=this.ensureNestedDataProperties(A.schema??{},s[l]??{});else n[l]=s[l]||A.value||"";return n},{})}isVisible(a,s){return a.hasOwnProperty("conditions")?new Nw(s,this.values).evaluate(we.get(a,"conditions"),we.get(a,"condition_type","and")):!0}triggerChange(a){for(let s of this.data.onChangeCallback)s(a)}onDataChanged(a){this.data.onChangeCallback.push(a)}}function dA(){return Gw.init()}const jw={key:0},zw={__name:"DynamicFormLoader",props:["schema","values","submit_button_text","form_name"],setup(t,{expose:e}){let a=dA();const s=t,n=()=>{const A=s.form_name,u={};return u[A]={...a.values},u},l=$l("triggerChange");return pe(()=>{a.setSchema(s.schema).setDefaults(s.values).initForm(),typeof l=="function"&&a.onDataChanged(A=>{l()})}),e({getState:n}),(A,u)=>p(a).isReady?(d(),_("div",jw,[o(er,{showSubmitButton:!1,submitButtonText:t.submit_button_text,form:p(a),onOnSubmitButtonClick:u[0]||(u[0]=()=>{p(a).values}),onOnChange:u[1]||(u[1]=c=>{}),"validation-errors":{}},null,8,["submitButtonText","form"])])):x("",!0)}},Yw={__name:"EChart",props:{option:{type:Object,required:!0},height:{type:String,default:"400px"},width:{type:String,default:"100%"}},setup(t){const e=t,a=T(null);let s=null;const n=()=>{a.value&&(s=ot(a.value),console.log(e.option),s.setOption(e.option))};ce(()=>e.option,c=>{s&&c&&s.setOption(c,!0)},{deep:!0});const l=(c,m)=>{if(c==null||c==="")return m;const v=Number(c);return isNaN(v)?c:`${v}px`},A=X(()=>l(e.height,"400px")),u=X(()=>l(e.width,"100%"));return pe(()=>{n(),window.addEventListener("resize",()=>s==null?void 0:s.resize())}),ks(()=>{window.removeEventListener("resize",()=>s==null?void 0:s.resize()),s==null||s.dispose()}),(c,m)=>(d(),_("div",{ref_key:"chartRef",ref:a,style:sa({width:u.value,height:A.value})},null,4))}},qw=["innerHTML"],Bn={__name:"DynamicTemplates",props:{widgetsQuery:{type:Object,default:{},required:!1},filter:{type:String,default:"",required:!1},data:{required:!1}},setup(t,{expose:e}){Xe().ctx;const a=t,s=T([]),n=rp(ip),l={},A=w=>{window.fluent_cart_admin.app={vue:n,components:w,xhr:te,notify:J},window.fluent_cart_admin.hooks.applyFilters(a.filter+"_components",[],n,w).forEach(({name:k,component:S})=>{l[k]=Ls(S)})};Rs(()=>{let C=Xe().appContext.components;A(C);let k=window.fluent_cart_admin.hooks.applyFilters(a.filter,[],n,C);Array.isArray(k)&&(s.value=s.value.concat(k));const S={filter:a.filter,data:a.widgetsQuery};te.get("widgets",S).then(E=>{Array.isArray(E.widgets)&&(s.value=s.value.concat(E.widgets))}),a.widgetsQuery});const u=w=>Ls(w),c=w=>l[w]||null,m=T([]),v=async(w,C)=>{const k=m.value.map(S=>typeof S[w]=="function"?S[w](C):Promise.resolve());return await Promise.all(k),!0};e({beforeUpdatingData:async w=>await v("beforeUpdatingData",w),afterUpdatingData:async w=>await v("afterUpdatingData",w),getFormStates:()=>{let w=[];if(Array.isArray(B.value))for(let C of B.value)w={...w,...C.getState()};return w}});const B=T();return(w,C)=>(d(!0),_(H,null,q(s.value,k=>(d(),_(H,null,[k.type!=="vue-component"||k.use_card==!0?(d(),U(se,{key:0},{default:r(()=>[o(le,{title:k.title,subtitle:k.subtitle,border_bottom:""},null,8,["title","subtitle"]),o(ae,null,{default:r(()=>[k.type==="html"?(d(),_("div",{key:0,innerHTML:k.content},null,8,qw)):k.type==="chart"?(d(),U(Yw,{key:1,option:k.data,height:`${k.height||400}`,width:`${k.width||"100%"}`},null,8,["option","height","width"])):k.type==="form"?(d(),U(zw,{key:2,schema:k.schema,values:k.values,submit_button_text:k.submit_button_text,form_name:k.form_name,ref_for:!0,ref_key:"formRefs",ref:B},null,8,["schema","values","submit_button_text","form_name"])):typeof k.component=="object"?(d(),U(Oa(u(k.component)),ht({key:3,ref_for:!0,ref_key:"componentRefs",ref:m},{ref_for:!0},{...k,data:t.data}),null,16)):c(k.component)?(d(),U(Oa(c(k.component)),ht({key:4,ref_for:!0,ref_key:"componentRefs",ref:m},{ref_for:!0},{...k,data:t.data}),null,16)):(d(),_(H,{key:5},[M(h(k.content),1)],64))]),_:2},1024)]),_:2},1024)):k.type==="vue-component"?(d(),_(H,{key:1},[typeof k.component=="object"?(d(),U(Oa(u(k.component)),ht({key:0,ref_for:!0,ref_key:"componentRefs",ref:m},{ref_for:!0},{...k,data:t.data}),null,16)):c(k.component)?(d(),U(Oa(c(k.component)),ht({key:1,ref_for:!0,ref_key:"componentRefs",ref:m},{ref_for:!0},{...k,data:t.data}),null,16)):x("",!0)],64)):x("",!0)],64))),256))}},bt=t=>t!=null&&!isNaN(Number(t))?new Intl.NumberFormat(void 0,{maximumFractionDigits:2}).format(Number(t)):t,Ww={class:"fct-dashboard-stat-widgets"},Xw={class:"right w-full"},Jw=["href"],Zw={class:"fct-dashboard-stat-widget__icon"},eB={class:"fct-dashboard-stat-widget__content"},tB={class:"fct-dashboard-stat-widget__title"},aB={class:"fct-dashboard-stat-widget__value inner-value"},sB={key:1,class:"fct-dashboard-stat-widget__inner"},nB={class:"fct-dashboard-stat-widget__content"},oB={class:"fct-dashboard-stat-widget__title"},lB=["href"],rB={key:1},iB={class:"fct-dashboard-stat-widget__value"},AB={__name:"StatsWidget",setup(t){const e=T(!0),a=T([]),s=()=>{e.value=!0,te.get("dashboard/stats").then(n=>{a.value=n.stats}).catch(n=>{J.error(n)}).finally(()=>{e.value=!1})};return pe(()=>{s()}),(n,l)=>{const A=y("el-skeleton-item"),u=y("el-skeleton");return d(),_("div",Ww,[e.value?(d(),_(H,{key:0},q(4,c=>o(u,{key:c,animated:"",class:"bg-white dark:bg-dark-700 flex flex-col items-start py-5 px-4.5 rounded-[12px] gap-3"},{template:r(()=>[o(A,{variant:"circle",class:"w-10 h-10 flex-none"}),i("div",Xw,[o(A,{variant:"p",class:"w-full"}),o(A,{variant:"p",class:"w-10"})])]),_:2},1024)),64)):(d(),_(H,{key:1},[(d(!0),_(H,null,q(a.value,(c,m)=>(d(),_("div",{key:m,class:"fct-dashboard-stat-widget"},[c.url?(d(),_("a",{key:0,href:c.url,class:"fct-dashboard-stat-widget__inner no-underline"},[i("div",Zw,[o(Y,{class:"w-5",name:c.icon},null,8,["name"])]),i("div",eB,[i("h3",tB,[i("span",null,h(c.title),1)]),i("span",aB,[c.has_currency?(d(),_(H,{key:0},[M(h(p(xe).scaled(c.current_count)),1)],64)):(d(),_(H,{key:1},[M(h(p(Mt)(p(bt)(c.current_count))||0),1)],64))])])],8,Jw)):(d(),_("div",sB,[l[0]||(l[0]=Ap('<div class="fct-dashboard-stat-widget__icon"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.20248 2.62165L5.7818 3.27834C3.59393 4.28965 2.5 4.7953 2.5 5.62533C2.5 6.45535 3.59393 6.961 5.7818 7.97231L7.20249 8.629C8.57936 9.26544 9.26781 9.58366 10 9.58366C10.7322 9.58366 11.4206 9.26544 12.7975 8.629L14.2182 7.97231C16.4061 6.961 17.5 6.45535 17.5 5.62533C17.5 4.7953 16.4061 4.28965 14.2182 3.27834L12.7975 2.62165C11.4206 1.98521 10.7322 1.66699 10 1.66699C9.26781 1.66699 8.57937 1.98521 7.20248 2.62165Z" stroke="#122368" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.3233 9.24805C17.4411 9.41368 17.5 9.5863 17.5 9.77614C17.5 10.5944 16.4061 11.0928 14.2182 12.0897L12.7975 12.7371C11.4206 13.3644 10.7322 13.6781 10 13.6781C9.26781 13.6781 8.57936 13.3644 7.20249 12.7371L5.7818 12.0897C3.59394 11.0928 2.5 10.5944 2.5 9.77614C2.5 9.5863 2.55889 9.41368 2.67667 9.24805" stroke="#122368" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16.9806 13.5557C17.3269 13.8315 17.5 14.1064 17.5 14.4319C17.5 15.2501 16.4061 15.7486 14.2182 16.7455L12.7975 17.3928C11.4206 18.0202 10.7322 18.3339 10 18.3339C9.26781 18.3339 8.57936 18.0202 7.20249 17.3928L5.7818 16.7455C3.59394 15.7486 2.5 15.2501 2.5 14.4319C2.5 14.1064 2.67315 13.8315 3.01945 13.5557" stroke="#122368" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></div>',1)),i("div",nB,[i("h3",oB,[c.url?(d(),_("a",{key:0,class:"link",href:c.url},h(c.title),9,lB)):(d(),_("span",rB,h(c.title),1))]),i("span",iB,h(c.current_count),1)])]))]))),128)),o(Bn,{data:{stats:a.value},filter:"dashboard_stats_widget"},null,8,["data"])],64))])}}},Td=200,dB=800,uB=.1,cB=.3,Md=.5,fB=.5,pB=12,mB=800,hB=1600,_B=150,gB=3500,vB=["#FFC700","#FF0000","#2E3191","#41BBC7"];var uA={props:{particleCount:{type:Number,default:_B},particleSize:{type:Number,default:pB},duration:{type:Number,default:gB},colors:{type:Array,default:vB},force:{type:Number,default:fB},stageHeight:{type:Number,default:mB},stageWidth:{type:Number,default:hB},shouldDestroyAfterDone:{type:Boolean,default:!0}},setup(t){const e=T(!0),a=(E,V)=>{S(E,{degree:V})},s=X(()=>l(t.particleCount,t.colors));dp(()=>{t.particleCount>300&&console.log("[VUE-CONFETTI-EXPLOSION] That's a lot of confetti, you sure about that? A lesser number like 200 will still give off the party vibes while still not bricking the device ")});const n=X(()=>k(t.particleCount,t.duration,t.colors,t.particleSize,t.force,t.stageHeight,t.stageWidth));pe(async()=>{await A(t.duration),t.shouldDestroyAfterDone&&(e.value=!1)});const l=(E,V)=>{const $=360/E;return Array.from({length:E},(O,D)=>({color:V[D%V.length],degree:D*$}))},A=E=>new Promise(V=>setTimeout(V,E));function u(E){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Math.round((E+Number.EPSILON)*10**V)/10**V}function c(E,V){if(E===V)return!0;if(E==null||V==null||E.length!==V.length)return!1;for(let $=0;$<E.length;$++)if(E[$]!==V[$])return!1;return!0}const m=(E,V,$,O,D)=>(E-V)*(D-O)/($-V)+O,v=(E,V)=>{const $=E+V;return $>360?$-360:$},b=()=>Math.random()>.5,g=[0,0,1],F=[[1,1,0],[1,0,1],[0,1,1],[1,0,0],[0,1,0],g],B=E=>!c(F[E],g)&&b(),w=E=>typeof E>"u",C=E=>{console.error(E)};function k(E,V,$,O,D,Q,I){const L=Number.isSafeInteger;return!w(E)&&L(E)&&E<0?(C("particleCount must be a positive integer"),!1):!w(V)&&L(V)&&V<0?(C("duration must be a positive integer"),!1):!w($)&&!Array.isArray($)?(C("colors must be an array of strings"),!1):!w(O)&&L(O)&&O<0?(C("particleSize must be a positive integer"),!1):!w(D)&&L(D)&&(D<0||D>1)?(C("force must be a positive integer and should be within 0 and 1"),!1):!w(Q)&&typeof Q=="number"&&L(Q)&&Q<0?(C("floorHeight must be a positive integer"),!1):!w(I)&&typeof I=="number"&&L(I)&&I<0?(C("floorWidth must be a positive integer"),!1):!0}function S(E,V){let{degree:$}=V;const O=m(Math.abs(v($,90)-180),0,180,-t.stageWidth/2,t.stageWidth/2),D=Math.random()*(dB-Td)+Td,Q=Math.round(Math.random()*(F.length-1)),I=t.duration-Math.round(Math.random()*1e3),L=Math.random()<uB,K=B(Q),N=L?u(Math.random()*cB,2):0,W=N*-1,R=N,ee=u(Math.abs(m(Math.abs(v($,90)-180),0,180,-1,1)),4),oe=u(Math.random()*Md,4),Ae=u(Math.random()*t.force*(b()?1:-1),4),ue=Md,P=u(Math.max(m(Math.abs($-180),0,180,t.force,-t.force),0),4),G=(z,j)=>E==null?void 0:E.style.setProperty(z,j+"");G("--x-landing-point",`${O}px`),G("--duration-chaos",`${I}ms`),G("--x1",`${N}`),G("--x2",`${W}`),G("--x3",`${R}`),G("--x4",`${ee}`),G("--y1",`${oe}`),G("--y2",`${Ae}`),G("--y3",`${ue}`),G("--y4",`${P}`),G("--width",`${K?t.particleSize:Math.round(Math.random()*4)+t.particleSize/2}px`),G("--height",(K?t.particleSize:Math.round(Math.random()*2)+t.particleSize)+"px"),G("--rotation",`${F[Q].join()}`),G("--rotation-duration",`${D}ms`),G("--border-radius",`${K?"50%":"0"}`)}return{isVisible:e,isValid:n,stageHeight:t.stageHeight,particles:s,setItemRef:a}}};function yB(t,e,a,s,n,l){return s.isVisible&&s.isValid?(d(),_("div",{key:0,class:"confetti-container",style:sa(`--floor-height: ${s.stageHeight}px;`)},[(d(!0),_(H,null,q(s.particles,A=>{let{color:u,degree:c}=A;return d(),_("div",{key:c,class:"particle",ref:m=>s.setItemRef(m,c)},[i("div",{style:sa(`--bgcolor: ${u};`)},null,4)],512)}),128))],4)):x("",!0)}function bB(t,e){e===void 0&&(e={});var a=e.insertAt;if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",a==="top"&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}var wB=`
@keyframes y-axis-4ff796ae {
to {
    transform: translate3d(0, var(--floor-height), 0);
}
}
@keyframes x-axis-4ff796ae {
to {
    transform: translate3d(var(--x-landing-point), 0, 0);
}
}
@keyframes rotation-4ff796ae {
to {
    transform: rotate3d(var(--rotation), 360deg);
}
}
.confetti-container[data-v-4ff796ae] {
  width: 0;
  height: 0;
  overflow: visible;
  position: relative;
  transform: translate3d(var(--x, 0), var(--y, 0), 0);
  z-index: 1200;
}
.confetti-container > .particle[data-v-4ff796ae] {
  animation: x-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--x1), var(--x2), var(--x3), var(--x4));
}
.confetti-container > .particle div[data-v-4ff796ae] {
  position: absolute;
  top: 0;
  left: 0;
  animation: y-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--y1), var(--y2), var(--y3), var(--y4));
  width: var(--width);
  height: var(--height);
}
.confetti-container > .particle div[data-v-4ff796ae]:before {
  display: block;
  height: 100%;
  width: 100%;
  content: "";
  background-color: var(--bgcolor);
  animation: rotation-4ff796ae var(--rotation-duration) infinite linear;
  border-radius: var(--border-radius);
}
`;bB(wB);uA.render=yB;uA.__scopeId="data-v-4ff796ae";var BB=(()=>{const t=uA;return t.install=e=>{e.component("ConfettiExplosion",t)},t})();Ce.extend(Eu);Ce.extend(Su);let lt=class{static withTimezone(e){const a=Ce(e);return a.isValid()?a.format("YYYY-MM-DDTHH:mm:ssZ"):null}};class CB extends Xt{constructor(){super(...arguments);fe(this,"data",{orderStatus:["all"],orderTypes:["all"],paymentStatus:["all"],filterOptions:{},showDropdown:!1,activeFilter:null,searchQuery:"",selectedFilters:{},onFilterChanged:null,dateRange:[lt.withTimezone(Ce().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),lt.withTimezone(Ce().format("YYYY-MM-DD 23:59:59"))],currencies:[],currency:"",variation_ids:[],rangeKey:"",storageKey:"filter-state",reRenderDate:!1,compareType:"previous_period",compareDate:lt.withTimezone(Ce().format("YYYY-MM-DD 23:59:59")),subscriptionType:""})}get dropdownOpen(){return this.data.showDropdown}toggleDropdown(){this.data.showDropdown=!this.data.showDropdown}setFilterOption(a){this.data.filterOptions=a}get filters(){return this.data.filterOptions}get filteredFilters(){var s;const a=(s=this.data.searchQuery)==null?void 0:s.toLowerCase().trim();return this.filters.filter(n=>a?n.label.toLowerCase().includes(a)||n.value.toLowerCase().includes(a):!0)}get visibleFilters(){return this.filteredFilters.filter(a=>this.shouldRenderOption(a))}selectActiveFilter(a){this.data.activeFilter=a}get activeFilterOptions(){return this.data.activeFilter||null}selectFilterOption(a){const s=this.activeFilterOptions;s&&(this.data.selectedFilters[s.value]={label:s.label,value:a.value,type:s.type,options:s.options},this.data[s.value]=a.value,this.triggerFilterChanged())}selectFilterOptionMulti(a){const s=this.activeFilterOptions;if(!s)return;this.data.selectedFilters[s.value]||(this.data.selectedFilters[s.value]={label:s.label,value:[],type:s.type,options:s.options});let n=this.data.selectedFilters[s.value].value;if(a.value==="all")this.data.selectedFilters[s.value].value=[{label:a.label,value:a.value}],this.data[s.value]=["all"];else{const l=n.findIndex(u=>u.value===a.value);l>-1?n.splice(l,1):n.push({label:a.label,value:a.value});const A=n.findIndex(u=>u.value==="all");A>-1&&n.splice(A,1),this.data[s.value]=n.map(u=>u.value)}this.triggerFilterChanged()}setDateRange(a){const s=Ce(a[0]),n=Ce(a[1]);this.data.selectedFilters.dateRange={label:f("Date"),value:[s,n],type:"date"},this.triggerFilterChanged()}postSetDateRange(){this.data.dateRange=[Yt.data.dateRange[0],Yt.data.dateRange[1]],this.data.selectedFilters.dateRange={label:f("Date"),value:[lt.withTimezone(Ce(this.data.dateRange[0])),lt.withTimezone(Ce(this.data.dateRange[1]))],type:"date",rangeKey:this.data.rangeKey},this.data.reRenderDate=!0,this.triggerFilterChanged()}setSelectChange(a,s=null){const n=s||this.activeFilterOptions;n&&(this.data.selectedFilters[n.value]={label:n.label,value:a,type:n.type},this.triggerFilterChanged())}setTreeSelectItem(a){const s=a.filter(n=>!n.children||n.children.length===0).map(n=>({id:n.value,label:n.label}));this.handleTreeSelections(s),this.triggerFilterChanged()}removeTreeSelectItem(a){var l;const n=(((l=this.data.selectedFilters.variation_ids)==null?void 0:l.value)||[]).filter(A=>A.id!==a);this.handleTreeSelections(n),this.data.variation_ids=this.data.variation_ids.filter(A=>A!==a),this.triggerFilterChanged()}handleTreeSelections(a){a.length?(this.data.selectedFilters.variation_ids||(this.data.selectedFilters.variation_ids={label:f("Products"),type:"tree-select"}),this.data.selectedFilters.variation_ids.value=a):delete this.data.selectedFilters.variation_ids}clearTreeSelect(){delete this.data.selectedFilters.variation_ids,this.data.variation_ids=[],Yt.resetFilterToDefault("variation_ids"),this.triggerFilterChanged()}isFilterOptionSelected(a){const s=this.activeFilterOptions;if(!s)return!1;const n=this.data.selectedFilters[s.value];return n?n.value===a.value:this.data[s.value]===a.value}isFilterOptionSelectedMulti(a){const s=this.activeFilterOptions,n=this.data.selectedFilters[s==null?void 0:s.value];return n?n.value.some(A=>A.value===a.value):!1}setMultiSelectChange(a,s){this.data.selectedFilters[a]||(this.data.selectedFilters[a]={});const n=s.some(A=>A.value==="all"),l=this.data.selectedFilters[a].value||[];n?l.length===1&&l[0].value==="all"&&s.length>1?this.data.selectedFilters[a].value=s.filter(A=>A.value!=="all"):this.data.selectedFilters[a].value=[s.find(A=>A.value==="all")]:this.data.selectedFilters[a].value=s,this.triggerFilterChanged()}onFilterChanged(a){return this.data.onFilterChanged=a}setCompareTypeChange(a){this.data.compareType=a,this.data.selectedFilters.compareType={value:a},a!=="custom"&&this.triggerFilterChanged()}setCompareDateChange(a){this.data.compareDate=a,this.data.selectedFilters.compareDate={value:lt.withTimezone(Ce(a))},this.triggerFilterChanged()}get currencies(){return Object.entries(Yt.data.currencies).map(([a,s])=>({label:a,value:a}))}shouldRenderOption(a){const s=a.disableRoutes||[],n=Wt();return s.includes(n.name)?!1:a.value==="currency"?this.data.currencies&&this.data.currencies.length>1:!0}applyFilterChange(){this.triggerFilterChanged()}resetFilters(){this.data.selectedFilters={},this.data.currency="",this.data.variation_ids=[],this.data.dateRange=[lt.withTimezone(Ce().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),lt.withTimezone(Ce().format("YYYY-MM-DD 23:59:59"))],this.data.compareType="previous_period",this.data.compareDate=lt.withTimezone(Ce().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),Yt.resetFiltersToDefault(),this.triggerFilterChanged()}removeFilter(a,s){s!=null?(this.removeFilterItem(a,s),Yt.resetFilterToDefault(a),this.triggerFilterChanged()):(delete this.data.selectedFilters[a],Yt.resetFilterToDefault(a),this.triggerFilterChanged())}removeFilterItem(a,s){const n=this.data.selectedFilters[a];if(!n)return;const l=n.value.filter(A=>A.id!==s);l.length?this.data.selectedFilters[a].value=l:delete this.data.selectedFilters[a],a==="variation_ids"&&(this.data.variation_ids=this.data.variation_ids.filter(A=>A!==s)),this.triggerFilterChanged()}triggerFilterChanged(){this.storeSelectedFilters(),typeof this.data.onFilterChanged=="function"&&this.data.onFilterChanged(this.data.selectedFilters)}get activeFilters(){return this.data.selectedFilters}applicableFilters(){return Object.fromEntries(["orderStatus","orderTypes","compareDate","currency","compareType","subscriptionType","variation_ids","paymentStatus","rangeKey"].map(s=>[s,this.data[s]]))}storeSelectedFilters(){const a="report-filter",s=Ge.get(a)||{},n=this.applicableFilters(),l={...s,...n};Ge.set(a,l),Ge.set(this.data.storageKey,this.activeFilters)}retrieveSavedFilters(){return Ge.get(this.data.storageKey)}retrieveSavedReportFilters(){return Ge.get("report-filter")}}function tf(){return CB.init()}class kB extends Xt{constructor(){super(...arguments);fe(this,"filterState",null);fe(this,"data",{orderStatus:["all"],orderTypes:["all"],paymentStatus:["all"],currencies:[],currency:"",currencySign:"",dateRange:[lt.withTimezone(Ce().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),lt.withTimezone(Ce().format("YYYY-MM-DD 23:59:59"))],rangeKey:"",dateDiff:0,minDate:"",variation_ids:[],active_tab:"",filterMode:"",storeMode:"",firstOrderDate:"",compareDate:lt.withTimezone(Ce().format("YYYY-MM-DD 23:59:59")),compareType:"previous_period",subscriptionType:""});fe(this,"storageKey","report-filter");fe(this,"currencyStorageKey",`${this.storageKey}_currencies`);fe(this,"listeners",{})}beforeInit(){this.filterState=tf(),this.mergeWithStorage();const a=Ge.get(this.storageKey),s=Ge.get(this.currencyStorageKey);(!a||!s)&&this.fetchReportMeta()}mergeWithStorage(){const a=Ge.get(this.storageKey),s=Ge.get(this.currencyStorageKey);this.data.paymentStatus=a.paymentStatus??this.data.paymentStatus,this.data.orderStatus=a.orderStatus??this.data.orderStatus,this.data.orderTypes=a.orderTypes??this.data.orderTypes,this.data.compareType=a.compareType?a.compareType:this.data.compareType,this.data.compareDate=a.compareDate??this.data.compareDate,this.data.subscriptionType=a.subscriptionType??this.data.subscriptionType,this.data.currency=a.currency?this.data.currency:$e.get("shop.currency"),this.data.dateRange=[a.startDate??this.data.dateRange[0],a.endDate??this.data.dateRange[1]],this.data.currencies=s??this.data.currencies,this.data.rangeKey=a.rangeKey,this.data.variation_ids=a.variation_ids?a.variation_ids:this.data.variation_ids,this.data.filterMode=a.filterMode??this.data.filterMode,this.data.storeMode=a.storeMode??this.data.storeMode}fetchReportMeta(){te.get("reports/fetch-report-meta",this.applicableFilters).then(a=>{this.data.currencies=a.currencies,this.data.dateRange[0]=a.min_date;const[s,n]=Object.entries(a.currencies)[0];this.applicableFilters.params.currency===""&&(this.data.currency=s),this.data.currencySign=n,this.data.storeMode=a.storeMode,this.data.firstOrderDate=Ce(a.first_order_date||Ce().startOf("month")).format("YYYY-MM-DD 00:00:00"),this.syncStorage()}).catch(a=>{}).finally(()=>{this.data.loading=!1})}get currentCurrencySign(){return this.data.currencies&&this.data.currencies.hasOwnProperty(this.data.currency)?this.data.currencies[this.data.currency]:""}addListener(a,s){this.listeners[a]=s,this.data.active_tab=a}async onFilterChange(){this.syncStorage(),this.setDateDiff();for(let a in this.listeners)this.listeners[a](this.applicableFilters)}onModeChange(a){this.data.filterMode=a,this.syncStorage()}syncStorage(){Ge.set(this.storageKey,this.applicableFilters.params),Ge.set(this.currencyStorageKey,this.data.currencies)}removeListener(a){delete this.listeners[a],this.data.active_tab=""}get applicableFilters(){const a=xu.find(u=>u.text===this.data.rangeKey);let s,n;if(a){const[u,c]=a.value();s=this.data.rangeKey==="All Time"?lt.withTimezone(Ce(this.data.dateRange[0]).format("YYYY-MM-DD 00:00:00")):lt.withTimezone(Ce(u).format("YYYY-MM-DD 00:00:00")),n=lt.withTimezone(Ce(c).format("YYYY-MM-DD 23:59:59"))}else s=lt.withTimezone(Ce(this.data.dateRange[0]).format("YYYY-MM-DD 00:00:00")),n=lt.withTimezone(Ce(this.data.dateRange[1]).format("YYYY-MM-DD 23:59:59"));const l={orderStatus:this.data.orderStatus,paymentStatus:this.data.paymentStatus,currency:this.data.currency,startDate:$e.get("app_config.isProActive")?s:lt.withTimezone(Ce().startOf("month").format("YYYY-MM-DD 00:00:00")),endDate:$e.get("app_config.isProActive")?n:lt.withTimezone(Ce().endOf("month").format("YYYY-MM-DD 23:59:59")),rangeKey:this.data.rangeKey,variation_ids:this.data.variation_ids,filterMode:this.data.filterMode,storeMode:this.data.storeMode,firstOrderDate:this.data.firstOrderDate,compareType:this.data.compareType,compareDate:this.data.compareDate,subscriptionType:this.data.subscriptionType};let A=this.data.orderTypes;return A.includes("all")||(l.orderTypes=A),{params:l}}setDateDiff(){if(!this.data.dateRange||this.data.dateRange.length<2)return 0;const[a,s]=this.data.dateRange;this.data.dateDiff=Ce(s).diff(Ce(a),"days")}resetFiltersToDefault(){this.data.orderStatus=["all"],this.data.orderTypes=["all"],this.data.paymentStatus=["all"],this.data.compareType="previous_period",this.data.compareDate=lt.withTimezone(Ce().format("YYYY-MM-DD 23:59:59")),this.data.variation_ids=[],this.data.dateRange=[lt.withTimezone(Ce().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),lt.withTimezone(Ce().format("YYYY-MM-DD 23:59:59"))],this.data.subscriptionType=""}resetFilterToDefault(a){a==="compareType"&&(this.data.compareType="previous_period"),a==="compareDate"&&(this.data.compareDate=lt.withTimezone(Ce().subtract(1,"month").format("YYYY-MM-DD 00:00:00"))),a==="subscriptionType"&&(this.data.subscriptionType=""),a==="orderTypes"&&(this.data.orderTypes=["all"]),(a==="orderStatus"||a==="paymentStatus")&&(this.data[a]=["all"]),a==="variation_ids"&&(this.data.variation_ids=[]),a==="dateRange"&&(this.data[a]=[lt.withTimezone(Ce().startOf("month").format("YYYY-MM-DD 00:00:00")),lt.withTimezone(Ce().format("YYYY-MM-DD 23:59:59"))])}retrieveSavedFilters(){return Ge.get(this.data.storageKey)}}const Yt=kB.init();class FB extends Xt{constructor(){super(...arguments);fe(this,"data",{summaryData:{net_revenue:0,order_count:0,subscription_renewal_count:0,new_customers:0,total_item_count:0,total_refunded_amount:0,total_refunded:0,average_order_net:0,average_order_items:0,average_customer_orders:0,average_customer_ltv:0},previousSummary:{},fluctuations:{net_revenue:0,order_count:0,new_customers:0,total_item_count:0,total_refunded_amount:0,total_refunded:0,subscrition_renewal:0},graphs:{netRevenueGraph:{},orderGraph:{},itemsSoldGraph:{},refundCountGraph:{},refundsGraph:{},newCustomerGraph:{},subscriptionRenewalGraph:{}},topSoldProducts:[],failedOrders:[],topSoldVariants:[],isBusy:{graphs:{netRevenueGraph:!1,orderGraph:!1,itemsSoldGraph:!1,refundCountGraph:!1,refundsGraph:!1,newCustomerGraph:!1,subscriptionRenewalGraph:!1},summaryData:!1,topSoldProductsAndFailedOrders:!1,topSoldVariants:!0,topSoldProducts:!0,fluctuations:!1,salesReport:!0}})}get controllerKey(){return"DefaultReportController"}makeRequest(a,s,n,l){if(l&&l.startsWith("graphs.")){const u=l.split(".")[1];this.data.isBusy.graphs[u]=!0}else this.data.isBusy[l]=!0;let A;return typeof s=="object"?A=te.get("reports/"+a,s):A=te.get("reports/"+a),this.resolvePromiseResponse(A,n,l),A}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null?Object.assign(this.data,l):we.set(this.data,n,we.get(l,s))}).catch(l=>{console.log(l,"error")}).finally(()=>{if(n&&n.startsWith("graphs.")){const l=n.split(".")[1];this.data.isBusy.graphs[l]=!1}else this.data.isBusy[n]=!1})}getDefaultReport(a={}){return this.makeRequest("fetch-default-report",a,"summaryData","summaryData")}getDefaultReportFluctuations(a={}){return this.makeRequest("fetch-default-report-fluctuations",a,"fluctuations","fluctuations")}getDefaultReportGraphs(a={}){return this.makeRequest("fetch-default-report-graphs",a,"graphs."+a.params.graph,"graphs."+a.params.graph)}getTopSoldProducts(a={}){return this.makeRequest("fetch-top-sold-products",a,"topSoldProducts","topSoldProducts")}getFailedOrders(a={}){return this.makeRequest("fetch-failed-orders",a,"failedOrders","failedOrders")}getTopSoldVariants(a={}){return this.makeRequest("fetch-top-sold-variants",a,"topSoldVariants","topSoldVariants")}getSalesReport(a={}){return this.data.isBusy.salesReport=!0,this.makeRequest("sales-report",a,"salesReport").then(()=>this.data.isBusy.salesReport=!1)}}const Qa=FB.init(),xB={key:0,class:"fct-report-sold-product-list has-scroll"},UB={class:"list-left-content"},EB={class:"list-image"},SB=["src"],QB=["src"],DB={class:"list-title"},$B=["title"],IB={class:"list-id"},TB={class:"list-right-content"},MB={class:"list-value"},VB={class:"list-price"},af={__name:"TopSoldProducts",props:{data:{type:Array,required:!0},loading:{type:Boolean,required:!0}},setup(t){const e=t,a=X(()=>e.data);return(s,n)=>{const l=y("el-skeleton"),A=y("router-link");return d(),U(et,{permission:"reports/view"},{default:r(()=>[o(uo,{class:"top-sold-products","card-options":{heading:p(f)("Top Sold Products"),linkButtonText:p(f)("View All"),linkButtonUrl:"products"}},{default:r(()=>[t.loading?(d(),U(l,{key:0,animated:"",rows:7})):(d(),_(H,{key:1},[a.value.length>0?(d(),_("ul",xB,[(d(!0),_(H,null,q(a.value,u=>(d(),_("li",{key:u.product_id},[o(A,{to:{name:"product_edit",params:{product_id:u.product_id}}},{default:r(()=>[i("div",UB,[i("div",EB,[u.media!==null?(d(),_("img",{key:0,src:u.media,alt:""},null,8,SB)):(d(),_("img",{key:1,src:s.getPlaceholderImage(),alt:""},null,8,QB))]),i("div",DB,[i("div",{class:"list-title-inner",title:u.product_name},h(u.product_name),9,$B),i("div",IB,"#"+h(p(Mt)(u.product_id)),1)])]),i("div",TB,[i("div",MB,h(p(Mt)(u.quantity_sold))+" "+h(p(f)(" Sold")),1),i("div",VB,h(p(xe).scaled(u.total_amount)),1)])]),_:2},1032,["to"])]))),128))])):(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no item!")},null,8,["text"]))],64))]),_:1},8,["card-options"])]),_:1})}}},LB={class:"fluent_dashboard fluent-cart-admin-pages fct-layout-width"},OB=["innerHTML"],HB={class:"flex items-center justify-start gap-1 mb-2 text-xs text-system-mid dark:text-system-light"},RB={class:"fc_dashboard_sidebar"},PB={class:"fct-congrats-dialog-content"},KB={class:"fct-congrats-dialog-content-inner"},NB={class:"fct-confetti-wrap pointer-events-none fixed left-0 top-0 w-full h-full flex justify-center items-center"},GB=Object.assign({name:"Dashboard"},{__name:"Dashboard",setup(t){const e=T(!1),a=T([]),s=T(!1);Li("dashboardTogglePageNotification",b=>{s.value=b});const l=()=>{const[b,g]=[Ce().subtract(1,"month").format("YYYY-MM-DD 00:00:00"),Ce().format("YYYY-MM-DD 23:59:59")],F={startDate:b,endDate:g,paymentStatus:"all"};Ht.getSalesGrowthChart({params:{...F,groupKey:"daily"}})},A=()=>{Ht.getRecentOrders({params:null})},u=()=>{const b={paymentStatus:"all"};Ht.getCountryHeatMap({params:{...b,groupKey:"daily"}})},c=()=>{const[b,g]=[Ce().subtract(1,"month").format("YYYY-MM-DD 00:00:00"),Ce().format("YYYY-MM-DD 23:59:59")],F={startDate:b,endDate:g};Ht.getTopSoldProducts({params:{...F}})},m=()=>{qr.getVueParams(),Ge.get("onboarding_congratulations","no")!=="yes"&&$e.get("total_products_count")==0&&(Ge.set("onboarding_congratulations","yes"),e.value=!0)},v=()=>$e.get("admin_url")+"settings/store-settings/pages_setup";return pe(()=>{window.addEventListener("getSalesGrowth",l),a.value=$e.get("dummy_product_info"),l(),u(),A(),m(),c()}),(b,g)=>{const F=y("el-col"),B=y("el-row"),w=y("el-button"),C=y("el-dialog");return d(),_("div",LB,[s.value?(d(),U(bs,{key:0,class:"mb-5",type:"warning",icon:"InformationFill"},{default:r(()=>[i("span",{innerHTML:p(f)("Set up your pages first to get started %s",'<a href="'+v()+'" target="_blank">'+p(f)("Set up your pages")+"</a>")},null,8,OB)]),_:1})):x("",!0),o(B,{gutter:20},{default:r(()=>[o(F,{lg:16},{default:r(()=>[o(H0),o(et,{permission:"dashboard_stats/view"},{default:r(()=>[i("div",HB,[o(Y,{name:"InformationFill",class:"w-4 h-4 text-system-light"}),M(" "+h(p(f)("Last %s Days",p(Mt)(30))),1)]),o(AB)]),_:1}),o(et,{permission:"reports/view"},{default:r(()=>[o(Ib,{chartData:p(Ht).data.salesGrowthChart,loading:p(Ht).isBusy.salesGrowthChart},null,8,["chartData","loading"])]),_:1}),o(B,{gutter:24},{default:r(()=>[o(et,{permission:"reports/view"},{default:r(()=>[o(F,{lg:12},{default:r(()=>[o(a0)]),_:1})]),_:1}),o(et,{permission:"reports/view"},{default:r(()=>[o(F,{lg:12,class:"mt-6 xl:mt-0"},{default:r(()=>[o(af,{data:p(Ht).topSoldProducts,loading:p(Ht).isBusy.topSoldProducts},null,8,["data","loading"])]),_:1})]),_:1}),o(et,{permission:"reports/view"},{default:r(()=>[o(F,{class:"mt-6"},{default:r(()=>[o(Hb,{data:p(Ht).data.countryHeatMap},null,8,["data"])]),_:1})]),_:1})]),_:1})]),_:1}),o(F,{lg:8},{default:r(()=>[i("div",RB,[o(x0)])]),_:1})]),_:1}),o(C,{class:"fct-congrats-dialog",modelValue:e.value,"onUpdate:modelValue":g[1]||(g[1]=k=>e.value=k),"append-to-body":!0,"close-on-click-modal":!1,"modal-class":"fct-congrats-modal",width:"800"},{default:r(()=>[i("div",PB,[i("div",KB,[g[2]||(g[2]=i("div",{class:"icon"},"",-1)),i("h3",null,h(p(f)("Congratulations!")),1),i("p",null,h(p(f)("You successfully finished your onboarding & your store is ready.")),1),o(w,{type:"primary",onClick:g[0]||(g[0]=k=>e.value=!1)},{default:r(()=>[M(h(p(f)("Let's go")),1)]),_:1})])]),i("div",NB,[o(p(BB),{particleCount:100,force:1})])]),_:1},8,["modelValue"])])}}}),jB={name:"FilterFields",props:{conditionals:{type:Object,required:!0,default:{}},fields:{type:Object,required:!0,default:{}},editorShortcodes:{type:Array,default:()=>[]},disabled:{type:Boolean,required:!0,default:!1},labels:{default:()=>({status_label:"Enable conditional logic",notification_if_start:"Send this notification if",notification_if_end:"of the following match:"})}},data(){return{defaultRules:{field:null,operator:"=",value:null},comingSoon:!1}},computed:{items(){return this.conditionals.conditions}},methods:{add(t){this.items.splice(t+1,0,{...this.defaultRules})},remove(t){this.items.splice(t,1)}},mounted(){this.conditionals.conditions.length||this.conditionals.conditions.push({...this.defaultRules})}},zB={key:2},YB=["onClick"],qB=["onClick"];function WB(t,e,a,s,n,l){const A=y("el-checkbox"),u=y("el-option"),c=y("el-select"),m=y("el-col"),v=y("el-option-group"),b=y("el-input"),g=y("el-row");return d(),_("div",null,[a.disabled?(d(),U(A,{key:1,disabled:"",onClick:e[1]||(e[1]=F=>n.comingSoon=!0)},{default:r(()=>[M(h(a.labels.status_label),1)]),_:1})):(d(),U(A,{key:0,modelValue:a.conditionals.status,"onUpdate:modelValue":e[0]||(e[0]=F=>a.conditionals.status=F)},{default:r(()=>[M(h(a.labels.status_label),1)]),_:1},8,["modelValue"])),a.conditionals.status?(d(),_("div",zB,[M(h(a.labels.notification_if_start)+" ",1),o(c,{class:"fluent_cart_inline_small",modelValue:a.conditionals.type,"onUpdate:modelValue":e[2]||(e[2]=F=>a.conditionals.type=F)},{default:r(()=>[(d(),_(H,null,q({all:"All",any:"Any"},(F,B)=>o(u,{key:B,value:B},{default:r(()=>[M(h(F),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),M(" "+h(a.labels.notification_if_end)+" ",1),(d(!0),_(H,null,q(l.items,(F,B)=>(d(),U(g,{key:B,style:{"margin-top":"15px"},gutter:10},{default:r(()=>[o(m,{md:8},{default:r(()=>[o(c,{size:"default",modelValue:l.items[B].field,"onUpdate:modelValue":w=>l.items[B].field=w,style:{width:"100%"},onChange:w=>l.items[B].value=""},{default:r(()=>[(d(!0),_(H,null,q(a.fields,(w,C)=>(d(),U(u,{key:C,label:w.admin_label,value:C},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),o(m,{md:5},{default:r(()=>[o(c,{size:"default",modelValue:l.items[B].operator,"onUpdate:modelValue":w=>l.items[B].operator=w},{default:r(()=>[o(v,{label:"General Operators"},{default:r(()=>[o(u,{value:"=",label:"equals"}),o(u,{value:"!=",label:"not equal"}),a.fields[F.field]&&!Object.keys(a.fields[F.field].options).length?(d(),_(H,{key:0},[o(u,{value:">",label:"greater than"}),o(u,{value:"<",label:"less than"}),o(u,{value:">=",label:"greater than or equal"}),o(u,{value:"<=",label:"less than or equal"}),o(u,{value:"contains",label:"contains"}),o(u,{value:"doNotContains",label:"do not contains"}),o(u,{value:"startsWith",label:"starts with"}),o(u,{value:"endsWith",label:"ends with"})],64)):x("",!0)]),_:2},1024),o(v,{label:"Advanced Operators"},{default:r(()=>[o(u,{value:"length_equal",label:"Equal to Data Length"}),o(u,{value:"length_less_than",label:"Less than to Data length"}),o(u,{value:"length_greater_than",label:"Greater than to Data Length"})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(m,{md:8},{default:r(()=>[l.items[B].operator=="length_equal"||l.items[B].operator=="length_less_than"||l.items[B].operator=="length_greater_than"?(d(),U(b,{key:0,size:"default",type:"number",step:"1",placeholder:"Enter length in number",modelValue:l.items[B].value,"onUpdate:modelValue":w=>l.items[B].value=w},null,8,["modelValue","onUpdate:modelValue"])):(d(),_(H,{key:1},[a.fields[F.field]&&Object.keys(a.fields[F.field].options).length?(d(),U(c,{key:0,size:"default",modelValue:l.items[B].value,"onUpdate:modelValue":w=>l.items[B].value=w,style:{width:"100%"}},{default:r(()=>[(d(!0),_(H,null,q(a.fields[F.field].options,(w,C)=>(d(),U(u,{key:C,label:w,value:C},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(d(),U(b,{key:1,size:"default",placeholder:"Enter a value",modelValue:l.items[B].value,"onUpdate:modelValue":w=>l.items[B].value=w},null,8,["modelValue","onUpdate:modelValue"]))],64))]),_:2},1024),o(m,{md:3,class:"action-btns"},{default:r(()=>[i("i",{class:"el-icon-plus",onClick:w=>l.add(B)},null,8,YB),l.items.length>1?(d(),_("i",{key:0,class:"el-icon-minus",onClick:w=>l.remove(B)},null,8,qB)):x("",!0)]),_:2},1024)]),_:2},1024))),128))])):x("",!0)])}const XB=ye(jB,[["render",WB]]),JB={name:"errorView",props:["field","errors"],computed:{Str(){return nt}}},ZB={key:0,class:"fct-inline-error ff"};function eC(t,e,a,s,n,l){return a.errors.has(a.field)?(d(),_("p",ZB,h(a.errors.errors[a.field].required?l.Str.headline(a.errors.errors[a.field].required):a.errors.errors[a.field]),1)):x("",!0)}const bl=ye(JB,[["render",eC]]),tC={name:"inputPopover",components:{Popover:Uu},props:{value:String,placeholder:{type:String,default:""},placement:{type:String,default:"bottom"},icon:{type:String,default:"el-icon-more"},fieldType:{type:String,default:"text"},data:Array,attrName:{type:String,default:"attribute_name"},defaultValue:{type:[String,Number,Boolean,Array],default:""}},data(){return{model:this.defaultValue}},watch:{model(){this.$emit("update:modelValue",this.model)}},methods:{insertShortcode(t){this.model==null&&(this.model=""),this.model+=t.replace(/param_name/,this.attrName)}}},aC={class:"flex-1"},sC={key:0,class:"input-textarea-value"};function nC(t,e,a,s,n,l){const A=y("el-input"),u=y("Popover");return d(),_("div",{class:ne(["input-popover",a.fieldType=="textarea"?"input-popover-textarea":""])},[i("div",aC,[a.fieldType=="textarea"?(d(),_("div",sC,[o(A,{placeholder:a.placeholder,type:"textarea",modelValue:n.model,"onUpdate:modelValue":e[0]||(e[0]=c=>n.model=c)},null,8,["placeholder","modelValue"])])):(d(),U(A,{key:1,placeholder:a.placeholder,modelValue:n.model,"onUpdate:modelValue":e[1]||(e[1]=c=>n.model=c),type:a.fieldType},null,8,["placeholder","modelValue","type"]))]),o(u,{class:ne(["popover-wrapper",{"popover-wrapper-plaintext":!1}]),data:a.data[0],onCommand:l.insertShortcode,btnType:"info",plain:!0},null,8,["data","onCommand"])],2)}const oC=ye(tC,[["render",nC]]),lC={name:"FieldGeneral",components:{inputPopover:oC},props:{value:[String,Number,Boolean,Array],editorShortcodes:Array,field_type:{type:String,default:"text"},defaultValue:{type:[String,Number],default:""}},data(){return{fieldValue:this.defaultValue}},watch:{fieldValue(){this.$emit("update:modelValue",this.fieldValue)}},methods:{onValueUpdated(t){this.fieldValue=t,this.$emit("onValueUpdated",this.fieldValue)}}},rC={class:"fct-field-general"};function iC(t,e,a,s,n,l){const A=y("input-popover");return d(),_("div",rC,[o(A,{fieldType:a.field_type,placeholder:t.$t("Select a Field or Type Custom value"),modelValue:n.fieldValue,"onUpdate:modelValue":e[0]||(e[0]=u=>n.fieldValue=u),icon:"el-icon-arrow-down",data:a.editorShortcodes,onOnValueUpdated:e[1]||(e[1]=function(u){l.onValueUpdated(u)}),defaultValue:n.fieldValue},null,8,["fieldType","placeholder","modelValue","data","defaultValue"])])}const Za=ye(lC,[["render",iC]]),AC={key:0,class:"fct-merge-fields"},dC={class:"fct-merge-fields-container"},uC={key:3},cC={name:"field_maps",components:{ErrorView:bl,FieldGeneral:Za},methods:{onValueUpdated(t,e){this.merge_model[e]=t}},props:["settings","merge_fields","field","errors","merge_model","inputs","editorShortcodes"],data(){return{appReady:!1}},mounted(){(Array.isArray(this.merge_model)||!this.merge_model)&&this.$emit("setMergeModelObj"),this.appReady=!0}},fC=Object.assign(cC,{setup(t){return(e,a)=>{const s=y("el-option"),n=y("el-select"),l=y("el-form-item");return e.appReady?(d(),_("div",AC,[i("div",dC,[(d(!0),_(H,null,q(t.field.primary_fileds,(A,u)=>(d(),_("div",{class:"fct-merge-fields-item",key:u},[o(l,{label:A.label,required:A.required},{default:r(()=>[A.input_options==="emails"?(d(),U(n,{key:0,modelValue:t.settings[A.key],"onUpdate:modelValue":c=>t.settings[A.key]=c,placeholder:e.$t("Select a Field"),clearable:"",class:ne(t.errors.errors[A.key]?"is-error":"")},{default:r(()=>[(d(!0),_(H,null,q(t.inputs,(c,m)=>(d(),_(H,{key:m},[(c==null?void 0:c.attributes.type)==="email"?(d(),U(s,{key:0,value:c==null?void 0:c.attributes.code,label:c==null?void 0:c.attributes.name},null,8,["value","label"])):x("",!0)],64))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","class"])):A.input_options==="all"?(d(),U(n,{key:1,modelValue:t.settings[A.key],"onUpdate:modelValue":c=>t.settings[A.key]=c,placeholder:e.$t("Select a Field"),clearable:""},{default:r(()=>[(d(!0),_(H,null,q(t.inputs,(c,m)=>(d(),U(s,{key:m,value:c.attributes.name,label:c.admin_label},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):(d(),U(Za,{key:2,editorShortcodes:t.editorShortcodes,defaultValue:t.settings[A.key],modelValue:t.settings[A.key],"onUpdate:modelValue":c=>t.settings[A.key]=c},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])),A.help_text?(d(),_("div",uC,h(A.help_text),1)):x("",!0),o(bl,{field:"fieldEmailAddress",errors:t.errors},null,8,["errors"])]),_:2},1032,["label","required"])]))),128)),t.field.default_fields?(d(!0),_(H,{key:0},q(t.field.default_fields,A=>(d(),_("div",{class:"fct-merge-fields-item",key:A.name},[o(l,{label:A.label,required:A.required},{default:r(()=>[o(Za,{editorShortcodes:t.editorShortcodes,defaultValue:t.settings[e.primary_field.key],modelValue:t.settings.default_fields[A.name],"onUpdate:modelValue":u=>t.settings.default_fields[A.name]=u},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"]),o(bl,{field:"default_fields",errors:t.errors},null,8,["errors"])]),_:2},1032,["label","required"])]))),128)):x("",!0),(d(!0),_(H,null,q(t.merge_fields,(A,u)=>(d(),_("div",{class:"fct-merge-fields-item",key:u},[o(l,{label:A},{default:r(()=>[o(Za,{editorShortcodes:t.editorShortcodes,defaultValue:t.merge_model[u],onOnValueUpdated:function(c){e.onValueUpdated(c,u)}},null,8,["editorShortcodes","defaultValue","onOnValueUpdated"])]),_:2},1032,["label"])]))),128))])])):x("",!0)}}}),pC={name:"ListSelectFilter",props:["settings","field"],computed:{listItems(){let t=this.settings[this.field.filter_by];this.field.parsedType=="number"&&(t=parseInt(t));let e=[];return ao(this.field.options,a=>{a.lists.indexOf(t)!=-1&&e.push({label:a.label,value:a.value})}),e}}},mC={class:"fluent_cart_list_select_filter"};function hC(t,e,a,s,n,l){const A=y("el-option"),u=y("el-select");return d(),_("div",mC,[o(u,{clearable:"",modelValue:a.settings[a.field.key],"onUpdate:modelValue":e[0]||(e[0]=c=>a.settings[a.field.key]=c),placeholder:a.field.placeholder},{default:r(()=>[(d(!0),_(H,null,q(l.listItems,c=>(d(),U(A,{key:c.label,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])}const _C=ye(pC,[["render",hC]]),gC={name:"DropdownLabelRepeater",props:["settings","field","inputs","errors","editorShortcodes"],components:{FieldGeneral:Za},data(){return{loading:!1}},methods:{addItemAfter(t){this.loading=!0,this.settings[this.field.key].splice(t+1,0,{item_value:"",label:""}),this.$nextTick(()=>{this.loading=!1})},removeItem(t){this.loading=!0,this.settings[this.field.key].splice(t,1),this.$nextTick(()=>{this.loading=!1})}}},vC={class:"dropdown_label_repeater"},yC={key:0,class:"fluent_cart-table"};function bC(t,e,a,s,n,l){const A=y("el-input"),u=y("field-general"),c=y("el-button"),m=y("el-button-group");return d(),_("div",vC,[n.loading?x("",!0):(d(),_("table",yC,[i("thead",null,[i("tr",null,[i("th",null,h(a.field.field_label||"Field Label"),1),i("th",null,h(a.field.value_label||"Field Value"),1),e[0]||(e[0]=i("th",null,null,-1))])]),i("tbody",null,[(d(!0),_(H,null,q(a.settings[a.field.key],(v,b)=>(d(),_("tr",{key:"item_"+b},[i("td",null,[o(A,{placeholder:a.field.field_label||"Field Label",modelValue:v.label,"onUpdate:modelValue":g=>v.label=g},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),i("td",null,[o(u,{editorShortcodes:a.editorShortcodes,modelValue:v.item_value,"onUpdate:modelValue":g=>v.item_value=g},null,8,["editorShortcodes","modelValue","onUpdate:modelValue"])]),i("td",null,[o(m,null,{default:r(()=>[o(c,{type:"success",onClick:g=>l.addItemAfter(b)},{default:r(()=>e[1]||(e[1]=[M("+",-1)])),_:2,__:[1]},1032,["onClick"]),o(c,{type:"danger",disabled:a.settings[a.field.key].length==1,onClick:g=>l.removeItem(b)},{default:r(()=>e[2]||(e[2]=[M("-",-1)])),_:2,__:[2]},1032,["disabled","onClick"])]),_:2},1024)])]))),128))])]))])}const wC=ye(gC,[["render",bC]]),BC={name:"DropdownManyFields",props:["settings","field","inputs","errors","editorShortcodes"],data(){return{test:"null",rendered_labels:{remote_text:this.field.remote_text||"Field Label",local_text:this.field.local_text||"Field Value"}}},components:{FieldGeneral:Za,DynamicIcon:Y,IconButton:Be},methods:{addNewItem(){this.settings[this.field.key].push({item_value:"",label:""})},removeItem(t){this.settings[this.field.key].length!==1&&this.settings[this.field.key].splice(t,1)}},mounted(){(!this.settings[this.field.key]||!this.settings[this.field.key].length)&&(this.settings[this.field.key]=[{item_value:this.field,label:""}])}},CC={class:"dropdown_label_repeater w-full"},kC={class:"fluent_cart-table w-full text-left"},FC={class:"action-btns"},xC={class:"dropdown_label_repeater_footer"};function UC(t,e,a,s,n,l){const A=y("el-option"),u=y("el-select"),c=y("field-general"),m=y("DynamicIcon"),v=y("IconButton"),b=y("el-button");return d(),_("div",CC,[i("table",kC,[e[1]||(e[1]=i("colgroup",null,[i("col",{width:"25%"}),i("col",{width:"70%"}),i("col",{width:"10%"})],-1)),i("thead",null,[i("tr",null,[i("th",null,h(n.rendered_labels.remote_text),1),i("th",null,h(n.rendered_labels.local_text),1),e[0]||(e[0]=i("th",null,null,-1))])]),i("tbody",null,[(d(!0),_(H,null,q(a.settings[a.field.key],(g,F)=>(d(),_("tr",{key:"item_"+F},[i("td",null,[o(u,{modelValue:g.label,"onUpdate:modelValue":B=>g.label=B},{default:r(()=>[(d(!0),_(H,null,q(a.field.options,(B,w)=>(d(),U(A,{key:w,label:B,value:w},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),i("td",null,[o(c,{editorShortcodes:a.editorShortcodes,defaultValue:typeof g.item_value=="object"?"":g.item_value,modelValue:g.item_value,"onUpdate:modelValue":B=>g.item_value=B},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])]),i("td",null,[i("div",FC,[o(v,{size:"x-small",tag:"button",onClick:Ke(B=>l.removeItem(F),["prevent"]),disabled:a.settings[a.field.key].length===1,class:"border-none"},{default:r(()=>[o(m,{name:"Delete"})]),_:2},1032,["onClick","disabled"])])])]))),128))])]),i("div",xC,[o(b,{text:"",onClick:Ke(l.addNewItem,["prevent"])},{default:r(()=>[o(m,{name:"Plus"}),M(" "+h(t.$t("Add More")),1)]),_:1},8,["onClick"])])])}const EC=ye(BC,[["render",UC]]),SC={name:"ChainedFields",props:["settings","field","value"],computed:{listItems(){}},watch:{"settings.list_id"(){this.field.require_list&&this.fetchSettings()}},data(){return{loading:!1,app_ready:!1,categories:[],subcategories:[],chained_settings:{category:"",sub_category:""},selected_subcategory:""}},methods:{fetchSettings(){this.loading=!0,this.$post("integration/feed/chained",{route:this.field.remote_url,settings:this.settings}).then(t=>{this.loading=!1,this.categories=t.data.categories,this.subcategories=t.data.subcategories,t.data.reset_values&&(this.chained_settings={category:"",sub_category:""})}).catch(t=>{console.log(t)})},handleCategoryChange(){this.$set(this.settings,this.field.key.category,this.selected_category),this.fetchSettings()}},mounted(){this.settings[this.field.key]?this.chained_settings=this.settings[this.field.key]:this.settings[this.field.key]=this.chained_settings,this.app_ready=!0,this.fetchSettings()}},QC={class:"fluent_cart_chained_filter"};function DC(t,e,a,s,n,l){const A=y("el-option"),u=y("el-select"),c=Et("loading");return At((d(),_("div",QC,[o(u,{onChange:e[0]||(e[0]=m=>l.handleCategoryChange()),clearable:"",modelValue:n.chained_settings.category,"onUpdate:modelValue":e[1]||(e[1]=m=>n.chained_settings.category=m),placeholder:a.field.category_label},{default:r(()=>[(d(!0),_(H,null,q(n.categories,m=>(d(),U(A,{key:m.value,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),At(o(u,{modelValue:n.chained_settings.sub_category,"onUpdate:modelValue":e[2]||(e[2]=m=>n.chained_settings.sub_category=m),clearable:"",placeholder:a.field.subcategory_label},{default:r(()=>[(d(!0),_(H,null,q(n.subcategories,m=>(d(),U(A,{key:m.value,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),[[nl,n.chained_settings.category]])])),[[c,n.loading]])}const $C=ye(SC,[["render",DC]]),IC={name:"ChainedSelects",props:["settings","field","value"],data(){return{app_ready:!1,loading:!1}},methods:{fetchSettings(){this.loading=!0,this.$get(this.field.remote_url,{settings:this.settings}).then(t=>{this.loading=!1;let e=t.data;ao(e,(a,s)=>{this.$set(this.field,s,a)})}).catch(t=>{console.log(t)})},handleSlectChange(t){t===this.field.primary_key&&(this.fetchSettings(),ao(this.value,(e,a)=>{a!=t&&(this.field.options_labels[a].type=="multi-select"?this.value[a]=[]:this.value[a]="")}))}},mounted(){this.fetchSettings(),this.app_ready=!0}},TC={class:"fluent_cart_chained_filter"};function MC(t,e,a,s,n,l){const A=y("el-option"),u=y("el-select"),c=y("el-col"),m=y("el-row"),v=Et("loading");return At((d(),_("div",TC,[o(m,{gutter:0},{default:r(()=>[(d(!0),_(H,null,q(a.field.fields_options,(b,g)=>(d(),U(c,{span:12,key:g,class:"fluent_carteach_filter"},{default:r(()=>[i("label",null,h(a.field.options_labels[g].label),1),o(u,{onChange:F=>l.handleSlectChange(g),filterable:"",clearable:"",placeholder:a.field.options_labels[g].placeholder,multiple:a.field.options_labels[g].type=="multi-select",modelValue:a.value[g],"onUpdate:modelValue":F=>a.value[g]=F},{default:r(()=>[(d(!0),_(H,null,q(b,(F,B)=>(d(),U(A,{key:B,value:B,label:F},null,8,["value","label"]))),128))]),_:2},1032,["onChange","placeholder","multiple","modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})])),[[v,n.loading]])}const VC=ye(IC,[["render",MC]]),LC={name:"RoutingFilterFields",components:{DynamicIcon:Y,IconButton:Be,FieldGeneral:Za},props:{routings:{type:Array,required:!0,default(){return[]}},fields:{type:Object,required:!0,default(){return{}}},disabled:{type:Boolean,required:!1,default:!1},labels:{default:()=>({input_label:"Send To",input_placeholder:"Email Address"})},input_type:{type:String,default:"text"},input_options:{type:Object,required:!1,default(){return{}}},editorShortcodes:{type:Object}},data(){return{defaultRules:{input_value:"",field:"",operator:"=",value:null},comingSoon:!1}},methods:{add(t){this.routings.splice(t+1,0,{...this.defaultRules})},remove(t){this.routings.splice(t,1)}},mounted(){(!this.routings||!this.routings.length)&&this.routings.push({...this.defaultRules})}},OC={class:"fluent_cart_routing_fields"},HC={key:0,class:"fluent_cart_routing_table"},RC={class:"fluent_cart_inline"},PC={class:"action-btns"};function KC(t,e,a,s,n,l){const A=y("el-input"),u=y("el-option"),c=y("el-select"),m=y("FieldGeneral"),v=y("DynamicIcon"),b=y("IconButton");return d(),_("div",OC,[a.disabled?x("",!0):(d(),_("table",HC,[i("tbody",null,[(d(!0),_(H,null,q(a.routings,(g,F)=>(d(),_("tr",{key:F},[i("td",null,[i("label",RC,h(a.labels.input_label),1),a.input_type=="text"?(d(),U(A,{key:0,placeholder:a.labels.input_placeholder,modelValue:g.input_value,"onUpdate:modelValue":B=>g.input_value=B},null,8,["placeholder","modelValue","onUpdate:modelValue"])):a.input_type=="select"?(d(),U(c,{key:1,modelValue:g.input_value,"onUpdate:modelValue":B=>g.input_value=B,placeholder:a.labels.input_placeholder},{default:r(()=>[(d(!0),_(H,null,q(a.input_options,(B,w)=>(d(),U(u,{key:w,label:B,value:w},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):x("",!0)]),e[0]||(e[0]=i("td",null,"If",-1)),i("td",null,[o(m,{editorShortcodes:a.editorShortcodes,modelValue:g.field,"onUpdate:modelValue":B=>g.field=B,defaultValue:g.field,onChange:B=>g.value=""},null,8,["editorShortcodes","modelValue","onUpdate:modelValue","defaultValue","onChange"])]),i("td",null,[o(c,{modelValue:g.operator,"onUpdate:modelValue":B=>g.operator=B,class:"w-[100px]"},{default:r(()=>[o(u,{value:"=",label:"equal"}),o(u,{value:"!=",label:"not equal"}),o(u,{value:">",label:"greater than"}),o(u,{value:"<",label:"less than"}),o(u,{value:">=",label:"greater than or equal"}),o(u,{value:"<=",label:"less than or equal"}),a.fields[g.field]&&!Object.keys(a.fields[g.field].options).length?(d(),_(H,{key:0},[o(u,{value:">",label:"greater than"}),o(u,{value:"<",label:"less than"}),o(u,{value:">=",label:"greater than or equal"}),o(u,{value:"<=",label:"less than or equal"}),o(u,{value:"contains",label:"contains"}),o(u,{value:"doNotContains",label:"do not contains"}),o(u,{value:"startsWith",label:"starts with"}),o(u,{value:"endsWith",label:"ends with"})],64)):x("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),i("td",null,[a.fields[g.field]&&Object.keys(a.fields[g.field].options).length?(d(),U(c,{key:0,modelValue:g.value,"onUpdate:modelValue":B=>g.value=B,style:{width:"100%"}},{default:r(()=>[(d(!0),_(H,null,q(a.fields[g.field].options,(B,w)=>(d(),U(u,{key:w,label:B,value:w},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(d(),U(A,{key:1,placeholder:"Enter a value",modelValue:g.value,"onUpdate:modelValue":B=>g.value=B},null,8,["modelValue","onUpdate:modelValue"]))]),i("td",null,[i("div",PC,[o(b,{size:"x-small",tag:"button",onClick:Ke(B=>l.add(F),["prevent"])},{default:r(()=>[o(v,{name:"Plus"})]),_:2},1032,["onClick"]),a.routings.length>1?(d(),U(b,{key:0,size:"x-small",tag:"button",onClick:Ke(B=>l.remove(F),["prevent"])},{default:r(()=>[o(v,{name:"Minus"})]),_:2},1032,["onClick"])):x("",!0)])])]))),128))])]))])}const NC=ye(LC,[["render",KC]]),GC={name:"SelectionRouting",props:["field","settings","inputs","editorShortcodes"],components:{RoutingFilterFields:NC,FiledGeneral:Za}},jC={class:"fluent_cart_field_routing"},zC={class:"mb-4"},YC={key:3};function qC(t,e,a,s,n,l){const A=y("el-checkbox"),u=y("el-option"),c=y("el-select"),m=y("el-input"),v=y("filed-general"),b=y("routing-filter-fields");return d(),_("div",jC,[i("div",zC,[o(A,{modelValue:a.settings[a.field.routing_key],"onUpdate:modelValue":e[0]||(e[0]=g=>a.settings[a.field.routing_key]=g),"true-value":"routing","false-value":"simple"},{default:r(()=>[M(h(a.field.labels.choice_label),1)]),_:1},8,["modelValue"])]),i("div",null,[a.field.simple_component=="select"?(d(),U(c,{key:0,disabled:a.settings[a.field.routing_key]!="simple",filterable:"",clearable:"",multiple:a.field.is_multiple,modelValue:a.settings[a.field.key],"onUpdate:modelValue":e[1]||(e[1]=g=>a.settings[a.field.key]=g),placeholder:a.field.placeholder},{default:r(()=>[(d(!0),_(H,null,q(a.field.options,(g,F)=>(d(),U(u,{key:F,value:F,label:g},null,8,["value","label"]))),128))]),_:1},8,["disabled","multiple","modelValue","placeholder"])):a.field.simple_component=="text"?(d(),U(m,{key:1,disabled:a.settings[a.field.routing_key]!="simple",modelValue:a.settings[a.field.key],"onUpdate:modelValue":e[2]||(e[2]=g=>a.settings[a.field.key]=g),placeholder:a.field.placeholder},null,8,["disabled","modelValue","placeholder"])):a.field.simple_component=="value_text"&&a.settings[a.field.routing_key]=="simple"?(d(),U(v,{key:2,editorShortcodes:a.editorShortcodes,modelValue:a.settings[a.field.key],"onUpdate:modelValue":e[3]||(e[3]=g=>a.settings[a.field.key]=g)},null,8,["editorShortcodes","modelValue"])):x("",!0),a.settings[a.field.routing_key]=="simple"&&a.field.inline_tip?(d(),_("p",YC,h(a.field.inline_tip),1)):x("",!0)]),a.settings[a.field.routing_key]=="routing"?(d(),U(b,{key:0,routings:a.settings[a.field.settings_key],input_type:a.field.routing_input_type,fields:a.inputs,labels:a.field.labels,input_options:a.field.options,editorShortcodes:a.editorShortcodes},null,8,["routings","input_type","fields","labels","input_options","editorShortcodes"])):x("",!0)])}const WC=ye(GC,[["render",qC]]),XC={name:"CustomComponentRender",props:{field:{type:Object,required:!0},settings:{type:Object,required:!0}},data(){return{message:"This is a custom component render"}},render(){if(this.field&&this.field.render_template){const t=`<div>${this.field.render_template}</div>`,e=up(t).bind(this);return zr(e,{settings:this.settings,app:this})}return null}},JC={name:"FeedHeader",props:{integration_name:String,settings:Object},computed:{ArrowRight(){return ma},prevRoute(){return this.$route.name==="product_integration_feed_editor"?{name:"product_integrations",params:{product_id:this.$route.params.product_id}}:{name:"integrations"}}}},ZC={class:"fct-feed-header mb-5"},e2={class:"mb-5 flex items-center justify-between"},t2={class:"capitalize"};function a2(t,e,a,s,n,l){const A=y("el-breadcrumb-item"),u=y("el-breadcrumb"),c=y("el-switch");return d(),_("div",ZC,[i("div",e2,[o(u,{"separator-icon":l.ArrowRight},{default:r(()=>[o(A,{to:l.prevRoute},{default:r(()=>[M(h(t.$t("Integrations")),1)]),_:1},8,["to"]),o(A,null,{default:r(()=>[i("span",t2,h(a.integration_name),1)]),_:1})]),_:1},8,["separator-icon"]),o(c,{modelValue:a.settings.enabled,"onUpdate:modelValue":e[0]||(e[0]=m=>a.settings.enabled=m),"active-value":"yes","inactive-value":"no","active-text":t.$t("Enable this Integration")},null,8,["modelValue","active-text"])])])}const s2=ye(JC,[["render",a2]]);class n2{constructor(){this.errors={}}get(e){if(this.errors[e])return this.errors[e]}first(e){if(this.errors[e]){let a=Object.keys(this.errors[e]);return a.length?this.errors[e][a[0]]:""}}has(e){return!!this.errors[e]}record(e){this.errors=e}clear(e){e?this.errors[e]=null:this.errors={}}}const o2={name:"RestSelector",props:["field","modelValue"],emits:["update:modelValue"],data(){return{model:this.modelValue,loading:!1,options:[]}},watch:{model(t){this.$emit("update:modelValue",t)}},methods:{fetchOptions(t){let e=this.field.option_key;this.field.extended_key&&(e+="_"+this.field.extended_key);let a="";if(this.field.cacheable){if(a+="_fcrm_ajax_cache_"+e,window[a]){this.options=window[a];return}}else if(this.field.experimental_cache&&(a+="_fcrm_ajax_cache_"+e+"_"+t+" "+JSON.stringify(this.model),this.field.sub_option_key&&(a+="_"+JSON.stringify(this.field.sub_option_key)),window[a])){this.options=window[a];return}if(this.doing_ajax)return!1;this.loading=!0;const s={search:t,values:this.model,option_key:e};this.field.sub_option_key&&(s.sub_option_key=this.field.sub_option_key),this.$get("integration/feed/dynamic_options",s).then(n=>{this.options=n.options,a&&n.options&&(window[a]=n.options)}).catch(n=>{this.handleError(n)}).finally(()=>{this.loading=!1})}},mounted(){this.fetchOptions("")}};function l2(t,e,a,s,n,l){const A=y("el-option"),u=y("el-select"),c=Et("loading");return At((d(),U(u,{modelValue:n.model,"onUpdate:modelValue":e[0]||(e[0]=m=>n.model=m),multiple:a.field.is_multiple,filterable:"",remote:!a.field.cacheable,clearable:a.field.clearable,disabled:a.field.disabled,"reserve-keyword":"","allow-create":a.field.creatable,size:a.field.size,placeholder:a.field.placeholder||t.$t("Please enter a keyword"),"remote-method":l.fetchOptions},{default:r(()=>[(d(!0),_(H,null,q(n.options,m=>(d(),U(A,{key:m.id,label:m.title,value:m.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","multiple","remote","clearable","disabled","allow-create","size","placeholder","remote-method"])),[[c,n.loading]])}const r2=ye(o2,[["render",l2]]),i2={name:"FeedEditor",components:{FilterFields:XB,MergeFieldMapper:fC,FiledGeneral:Za,ListSelectFilter:_C,DropDownLabelRepeater:wC,DropDownManyFields:EC,ChainedFields:$C,ChainedSelects:VC,SelectionRouting:WC,CardContainer:se,CardBody:ae,CardHeader:le,LabelHint:Ze,FeedHeader:s2,ErrorView:bl,CustomComponentRender:XC,RestSelector:r2},data(){return{loading_app:!1,loading_list:!1,errors:new n2,integration_id:parseInt(this.$route.params.integration_id),integration_name:this.$route.params.integration_name,saving:!1,merge_fields:{},settings:{},settings_fields:{},attachedForms:[],inputs:[],editorShortcodes:[],scope:"",product_variations:[]}},computed:{getTitle(){let t=this.settings_fields.integration_title||"";return this.integration_id?`Update ${t} Integration Feed`:`Add New ${t} Integration Feed`},maybeShowSaveButton(){let t=this.settings_fields,e=this.merge_fields;return t.button_require_list&&e||!t.button_require_list}},methods:{translate:f,loadIntegrationSettings(){if(this.$route.name==="product_integration_feed_editor"){this.loading_app=!0;const t=this.$route.params.product_id;this.$get(`products/${t}/integrations/${this.integration_name}/settings`,{integration_id:this.integration_id}).then(e=>{this.loading_app=!1,this.settings_fields=e.settings_fields,this.scope=e.scope,this.product_variations=e.product_variations,this.settings=e.settings,this.editorShortcodes=Object.values(e.shortcodes||{}),this.inputs=e.inputs,this.settings.name||(this.settings.name=e.settings_fields.integration_title+" Integration Feed"||""),this.merge_fields=e.merge_fields}).catch(e=>{var a;this.loading_app=!1,e.status_code=="422"?J.validationErrors(e):J.error((a=e.data)==null?void 0:a.message)})}else this.loading_app=!0,this.$get("integration/global-feeds/settings",{integration_id:this.integration_id,integration_name:this.integration_name}).then(t=>{this.loading_app=!1,this.settings_fields=t.settings_fields,this.settings=t.settings,this.editorShortcodes=Object.values(t.shortcodes),this.inputs=t.inputs,this.settings.name||(this.settings.name=t.settings_fields.integration_title+" Integration Feed"||""),this.merge_fields=t.merge_fields}).catch(t=>{var e,a;console.log(t),this.loading_app=!1,this.handleError(((a=(e=t.responseJSON)==null?void 0:e.data)==null?void 0:a.message)||"Failed to load integration settings")})},loadMergeFields(){this.loading_list=!0,this.fieldsLoaded=!1,this.$get("integration/feed/lists",{integration_id:this.integration_id,list_id:this.settings.list_id,integration_name:this.integration_name}).then(t=>{this.loading_list=!1,this.merge_fields=t.merge_fields,this.fieldsLoaded=!0}).catch(t=>{console.log(t)})},saveNotification(){if(this.errors.clear(),this.$route.name==="product_integration_feed_editor"){this.saving=!0;const t=this.$route.params.product_id;let e={integration_id:this.integration_id,integration_name:this.integration_name,integration:JSON.stringify(this.settings)};this.$post(`products/${t}/integrations`,e).then(a=>{a.feedData&&(this.settings=a.feedData),a.created&&this.$router.push({name:"product_integrations",params:{product_id:t}}),this.handleSuccess(a.message||"Integration saved successfully"),this.errors.clear()}).catch(a=>{var s;this.errors.record(((s=a==null?void 0:a.data)==null?void 0:s.errors)||{}),this.handleError(a)}).finally(()=>{this.saving=!1})}else{this.saving=!0;let t={integration_id:this.integration_id,integration_name:this.integration_name,integration:JSON.stringify(this.settings)};this.$post("integration/global-feeds/settings",t).then(e=>{e.created&&this.$router.push({name:"integrations"}),this.handleSuccess(e.message)}).catch(e=>{var a;this.errors.record(((a=e==null?void 0:e.data)==null?void 0:a.errors)||{}),this.handleError(e)}).finally(()=>{this.saving=!1})}},setMergeModel(t){this.settings[t.key]={}}},mounted(){this.loadIntegrationSettings()}},A2={class:"fct-integration-container fct-layout-width"},d2={class:"fct-add-integration py-7.5"},u2={class:"grid gap-5"},c2={key:0,class:"fct-setting-form-content"},f2=["innerHTML"],p2={class:"fct-setting-form-fields"},m2=["innerHTML"],h2=["innerHTML"],_2=["innerHTML"],g2={key:0,class:"fct-setting-form-row"},v2={class:"fct-setting-form-content"},y2={class:"fct-setting-form-content"},b2={class:"fct-setting-form-fields"},w2={class:"fct-inline-tip pl-6"},B2={key:0,class:"setting-save-action"};function C2(t,e,a,s,n,l){const A=y("el-skeleton-item"),u=y("el-skeleton"),c=y("FeedHeader"),m=y("LabelHint"),v=y("el-input"),b=y("error-view"),g=y("el-option"),F=y("el-select"),B=y("MergeFieldMapper"),w=y("el-checkbox"),C=y("el-checkbox-group"),k=y("el-option-group"),S=y("filter-fields"),E=y("filed-general"),V=y("list-select-filter"),$=y("drop-down-label-repeater"),O=y("drop-down-many-fields"),D=y("el-radio"),Q=y("el-radio-group"),I=y("el-input-number"),L=y("chained-fields"),K=y("chained-selects"),N=y("selection-routing"),W=y("rest-selector"),R=y("CardBody"),ee=y("CardContainer"),oe=y("el-button"),Ae=y("el-form"),ue=Et("loading");return d(),_("div",A2,[i("div",d2,[o(u,{loading:n.loading_app,class:"bg-white rounded p-6 mb-7.5 dark:bg-dark-700",animated:""},{template:r(()=>[o(A,{variant:"h3",class:"w-[150px] mb-5"}),i("div",u2,[i("div",null,[o(A,{variant:"h3",class:"w-[50px] mb-3"}),o(A,{variant:"p"})]),i("div",null,[o(A,{variant:"h3",class:"w-[50px] mb-3"}),o(A,{variant:"p"})])])]),_:1},8,["loading"]),n.loading_app?x("",!0):(d(),U(Ae,{key:0,"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(c,{settings:n.settings,integration_name:n.integration_name},null,8,["settings","integration_name"]),o(ee,null,{default:r(()=>[o(R,null,{default:r(()=>[(d(!0),_(H,null,q(n.settings_fields.fields,(P,G)=>(d(),_("div",{key:G,class:ne(["fct-setting-form-row",P.key])},[P.label?(d(),_("div",c2,[P.tips?(d(),U(m,{key:0,title:P.label,content:P.tips,placement:"top-start",required:P.required},null,8,["title","content","required"])):(d(),U(m,{key:1,title:P.label,required:P.required},null,8,["title","required"])),P.inline_tip?(d(),_("p",{key:2,class:"fct-inline-tip",innerHTML:P.inline_tip},null,8,f2)):x("",!0)])):x("",!0),i("div",p2,[P.component==="text"?(d(),_(H,{key:0},[o(v,{placeholder:P.placeholder,modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z,class:ne(n.errors.errors[P.key]?"is-error":"")},null,8,["placeholder","modelValue","onUpdate:modelValue","class"]),o(b,{field:P.key,errors:n.errors},null,8,["field","errors"])],64)):P.component==="list_ajax_options"?(d(),_(H,{key:1},[At((d(),U(F,{onChange:e[0]||(e[0]=z=>l.loadMergeFields()),modelValue:n.settings.list_id,"onUpdate:modelValue":e[1]||(e[1]=z=>n.settings.list_id=z),placeholder:P.placeholder,clearable:""},{default:r(()=>[(d(!0),_(H,null,q(P.options,(z,j)=>(d(),U(g,{key:j,value:j,label:z},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","placeholder"])),[[ue,n.loading_list]]),o(b,{field:P.key,errors:n.errors},null,8,["field","errors"])],64)):P.component==="map_fields"?(d(),U(B,{key:2,onSetMergeModelObj:z=>l.setMergeModel(P),errors:n.errors,inputs:n.inputs,field:P,settings:n.settings,editorShortcodes:n.editorShortcodes,merge_model:n.settings[P.key],merge_fields:n.merge_fields},null,8,["onSetMergeModelObj","errors","inputs","field","settings","editorShortcodes","merge_model","merge_fields"])):P.component==="select"?(d(),_(H,{key:3},[o(F,{filterable:"",clearable:"",multiple:P.is_multiple,modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z,placeholder:P.placeholder},{default:r(()=>[(d(!0),_(H,null,q(P.options,(z,j)=>(d(),U(g,{key:j,value:j,label:z},null,8,["value","label"]))),128))]),_:2},1032,["multiple","modelValue","onUpdate:modelValue","placeholder"]),o(b,{field:P.key,errors:n.errors},null,8,["field","errors"])],64)):P.component==="checkbox-single"?(d(),_(H,{key:4},[o(w,{modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z},{default:r(()=>[M(h(P.checkbox_label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),P.inline_tip?(d(),_("p",{key:0,class:"fct-inline-tip pl-6",innerHTML:P.inline_tip},null,8,m2)):x("",!0)],64)):P.component==="yes-no-checkbox"?(d(),_(H,{key:5},[o(w,{"true-value":"yes","false-value":"no",modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z},{default:r(()=>[M(h(P.checkbox_label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),P.inline_tip?(d(),_("p",{key:0,class:"fct-inline-tip pl-6",innerHTML:P.inline_tip},null,8,h2)):x("",!0)],64)):P.component==="checkbox-multiple"?(d(),U(C,{key:6,modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z},{default:r(()=>[(d(!0),_(H,null,q(P.options,(z,j)=>(d(),U(w,{key:j,label:Number(j)},{default:r(()=>[M(h(z),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):P.component==="selection_group"?(d(),_(H,{key:7},[o(F,{modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z,placeholder:P.placeholder,multiple:"",class:ne(n.errors.errors[P.key]?"is-error":"")},{default:r(()=>[(d(!0),_(H,null,q(P.options,(z,j)=>(d(),U(k,{key:j,label:z.label},{default:r(()=>[(d(!0),_(H,null,q(z.options,Z=>(d(),U(g,{key:Z.value,label:Z.label,value:Z.value},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","class"]),o(b,{field:P.key,errors:n.errors},null,8,["field","errors"])],64)):P.component==="conditional_block"?(d(),U(S,{key:8,fields:n.inputs,conditionals:n.settings[P.key],editorShortcodes:n.editorShortcodes},null,8,["fields","conditionals","editorShortcodes"])):P.component==="value_text"?(d(),U(E,{key:9,editorShortcodes:n.editorShortcodes,defaultValue:n.settings[P.key],modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])):P.component==="value_textarea"?(d(),U(E,{key:10,field_type:"textarea",editorShortcodes:n.editorShortcodes,defaultValue:n.settings[P.key],modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z,isIconBtn:""},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])):P.component==="list_select_filter"?(d(),U(V,{key:11,settings:n.settings,field:P},null,8,["settings","field"])):P.component==="dropdown_label_repeater"?(d(),U($,{key:12,errors:n.errors,inputs:n.inputs,field:P,settings:n.settings,editorShortcodes:n.editorShortcodes},null,8,["errors","inputs","field","settings","editorShortcodes"])):P.component==="dropdown_many_fields"?(d(),U(O,{key:13,errors:n.errors,inputs:n.inputs,field:P,settings:n.settings,editorShortcodes:n.editorShortcodes},null,8,["errors","inputs","field","settings","editorShortcodes"])):P.component==="radio_choice"?(d(),U(Q,{key:14,modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z},{default:r(()=>[(d(!0),_(H,null,q(P.options,(z,j)=>(d(),U(D,{key:j,label:j},{default:r(()=>[M(h(z),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):P.component==="number"?(d(),U(I,{key:15,size:"default",modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z},null,8,["modelValue","onUpdate:modelValue"])):P.component==="chained_fields"?(d(),U(L,{key:16,settings:n.settings,modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z,field:P},null,8,["settings","modelValue","onUpdate:modelValue","field"])):P.component==="chained_select"?(d(),U(K,{key:17,settings:n.settings,modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z,field:P},null,8,["settings","modelValue","onUpdate:modelValue","field"])):P.component==="html_info"?(d(),_("div",{key:18,innerHTML:P.html_info},null,8,_2)):P.component==="selection_routing"?(d(),U(N,{key:19,inputs:n.inputs,field:P,editorShortcodes:n.editorShortcodes,settings:n.settings},null,8,["inputs","field","editorShortcodes","settings"])):P.component==="rest_selector"?(d(),U(W,{key:20,field:P,modelValue:n.settings[P.key],"onUpdate:modelValue":z=>n.settings[P.key]=z},null,8,["field","modelValue","onUpdate:modelValue"])):P.component==="custom_component"?(d(),U(Oa("custom-component-render"),{key:21,field:P,settings:n.settings},null,8,["field","settings"])):x("",!0)])],2))),128)),n.scope==="product"&&n.product_variations.length?(d(),_("div",g2,[i("div",v2,[i("div",y2,[o(m,{title:l.translate("Run on Selected Variations Only")},null,8,["title"])])]),i("div",b2,[o(F,{filterable:"",clearable:"",multiple:!0,modelValue:n.settings.conditional_variation_ids,"onUpdate:modelValue":e[2]||(e[2]=P=>n.settings.conditional_variation_ids=P),placeholder:t.$t("Leave empty for all the variations")},{default:r(()=>[(d(!0),_(H,null,q(n.product_variations,P=>(d(),U(g,{key:P.id,value:P.id,label:P.title},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"]),i("p",w2,h(t.$t("Leave empty to run this feed for all variations")),1)])])):x("",!0)]),_:1})]),_:1}),l.maybeShowSaveButton?(d(),_("div",B2,[o(oe,{type:"primary",loading:n.saving,onClick:l.saveNotification},{default:r(()=>[M(h(n.integration_id?`Update ${n.settings_fields.integration_title} Feed`:`Create ${n.settings_fields.integration_title} Feed`),1)]),_:1},8,["loading","onClick"])])):x("",!0)]),_:1}))])])}const Vd=ye(i2,[["render",C2]]),k2={class:"setting-wrap"},F2={key:0,class:"integration-actions"},x2={key:0,class:"fct-empty-integration-wrap text-center max-w-[600px] mx-auto mb-5"},U2={class:"text-base"},E2={key:1,class:"fct-integrations-table-wrap"},S2={class:"fct-integration-logo-wrap"},Q2=["src","alt"],D2={class:"text-xs text-gray-700"},$2=["onClick"],I2={class:"fct-event-triggers"},T2={class:"fct-event-triggers"},M2={class:"fct-btn-group sm"},V2={key:2,class:"fct-integration-table-footer"},L2={target:"_blank",rel:"noopener",href:"https://docs.fluentcart.com"},O2={name:"GloablIntegration",props:["editorShortcodes"],data(){return{loading:!0,feeds:[],available_integrations:{},all_module_config_url:""}},computed:{hasActiveIntegrations(){return Object.values(this.available_integrations).some(t=>t.enabled)}},methods:{getFeeds(){this.loading=!0,this.$get("integration/global-feeds").then(t=>{this.available_integrations=t.available_integrations,this.feeds=t.feeds,this.all_module_config_url=t.all_module_config_url}).catch(t=>{this.loading=!1}).finally(()=>{this.loading=!1})},handleActive(t){let e={status:t.enabled};this.$post(`integration/global-feeds/change-status/${t.id}`,e).then(a=>{this.handleSuccess(a.message)}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})},removeFeed(t,e){let a=e.$index;this.$confirm("Are you sure you want to delete this integration?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",confirmButtonClass:"el-button--primary",cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{this.$del(`integration/global-feeds/${t}`).then(s=>{this.handleSuccess(s.message),this.feeds.splice(a,1)}).catch(s=>{var n;this.handleError(((n=s==null?void 0:s.data)==null?void 0:n.message)||"Failed to delete integration.")})}).catch(()=>{})},add(t){let e=this.available_integrations[t];e&&e.enabled?this.$router.push({name:"feed_editor",params:{integration_id:0,integration_name:t}}):this.$notify.error({message:this.$t("This integration is not enabled. Please enable it from the integration modules.")})},edit(t){this.$router.push({name:"feed_editor",params:{integration_id:t.id,integration_name:t.provider}})},isEmpty:qi},mounted(){this.getFeeds()}},H2=Object.assign(O2,{setup(t){return(e,a)=>{const s=y("el-button"),n=y("el-dropdown-item"),l=y("el-dropdown-menu"),A=y("el-dropdown"),u=y("el-skeleton"),c=y("el-switch"),m=y("el-table-column"),v=y("el-tag"),b=y("el-popover"),g=y("el-tooltip"),F=y("el-table"),B=Et("loading");return d(),_("div",k2,[o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{title:e.$t("Global Integrations Feeds"),text:e.$t("These integration feeds will be applied globally across all your orders and related actions.")},{action:r(()=>[e.hasActiveIntegrations?(d(),_("div",F2,[o(A,{onCommand:e.add,trigger:"click","popper-class":"fct-dropdown"},{dropdown:r(()=>[o(l,null,{default:r(()=>[(d(!0),_(H,null,q(e.available_integrations,(w,C)=>(d(),U(n,{key:C,command:C},{default:r(()=>[M(h(w.title),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:r(()=>[o(s,{type:"info",plain:"",size:"small"},{default:r(()=>[M(h(e.$t("Add Integration"))+" ",1),o(Y,{name:"ChevronDown"})]),_:1})]),_:1},8,["onCommand"])])):x("",!0)]),_:1},8,["title","text"]),o(ae,{class:"px-0 pb-0 pt-4"},{default:r(()=>[o(u,{class:"px-5 pb-5",loading:e.loading,animated:"",rows:6},null,8,["loading"]),e.loading?x("",!0):(d(),_(H,{key:0},[e.hasActiveIntegrations?(d(),_("div",E2,[At((d(),U(F,{data:e.feeds},{empty:r(()=>[o(Le,{icon:"Folder",text:e.$t("You did not add any integration actions yet.")},null,8,["text"])]),default:r(()=>[o(m,{label:e.$t("Enabled"),width:60},{default:r(w=>[o(c,{"active-value":"yes","inactive-value":"no",onChange:C=>e.handleActive(w.row),modelValue:w.row.enabled,"onUpdate:modelValue":C=>w.row.enabled=C},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),o(m,{width:120,label:e.$t("Integration")},{default:r(w=>{var C,k;return[i("div",S2,[(C=e.available_integrations[w.row.provider])!=null&&C.logo?(d(),_("img",{key:0,style:{"min-width":"24px"},class:"fct-integration-logo",src:e.available_integrations[w.row.provider].logo,alt:w.row.provider},null,8,Q2)):x("",!0),i("span",D2,h(((k=e.available_integrations[w.row.provider])==null?void 0:k.title)||w.row.provider),1)])]}),_:1},8,["label"]),o(m,{width:220,label:e.$t("Title")},{default:r(w=>[i("a",{class:"fct-action-link-btn",onClick:Ke(C=>e.edit(w.row),["prevent"]),href:"#"},h(w.row.name),9,$2)]),_:1},8,["label"]),o(m,{width:160,label:e.$t("Triggers")},{default:r(w=>[i("div",I2,[(d(!0),_(H,null,q((w.row.feed.event_trigger||[]).slice(0,2),(C,k)=>(d(),U(v,{key:C},{default:r(()=>[o(Y,{name:"Trigger"}),M(" "+h(p(nt).headline(C)),1)]),_:2},1024))),128)),(w.row.feed.event_trigger||[]).length>2?(d(),U(b,{key:0,placement:"bottom",width:"300",trigger:"hover"},{reference:r(()=>[o(v,{type:"info"},{default:r(()=>[M(" +"+h((w.row.feed.event_trigger||[]).length-2),1)]),_:2},1024)]),default:r(()=>[i("div",T2,[(d(!0),_(H,null,q((w.row.feed.event_trigger||[]).slice(2),(C,k)=>(d(),U(v,{key:C+k},{default:r(()=>[o(Y,{name:"Trigger"}),M(" "+h(p(nt).headline(C)),1)]),_:2},1024))),128))])]),_:2},1024)):x("",!0)])]),_:1},8,["label"]),o(m,{width:80},{default:r(w=>[i("div",M2,[o(g,{effect:"dark",content:e.$t("Edit"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(Be,{tag:"button",onClick:C=>e.edit(w.row),size:"x-small",hover:"primary"},{default:r(()=>[o(Y,{name:"Edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"]),o(g,{effect:"dark",content:e.$t("Delete"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(Be,{tag:"button",size:"x-small",onClick:C=>e.removeFeed(w.row.id,w),hover:"danger"},{default:r(()=>[o(Y,{name:"Delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])])]),_:1})]),_:1},8,["data"])),[[B,e.loading]])])):(d(),_("div",x2,[i("p",U2,h(e.$t("You don't have any integration module enabled. Please go to integration modules and enable and configured from available modules")),1),o(s,{tag:"a",type:"primary",href:e.all_module_config_url},{default:r(()=>[M(h(e.$t("Configure Modules")),1)]),_:1},8,["href"])])),e.feeds.length?x("",!0):(d(),_("div",V2,[i("a",L2,h(e.$t("View Documentations")),1)]))],64))]),_:1})]),_:1})])}}}),R2={name:"Integrations",components:{Badge:dt,FluidTabItem:ol,FluidTab:Oi,CardBody:ae,CardContainer:se,CardHeader:le,PageHeading:Ps,IconButton:Be,DynamicIcon:Y,Empty:Le,GlobalIntegrationFeeds:H2},data(){return{search:"",fetching:!1,addOns:{},module_type:"all",integrationTab:"global",modules:["all","crm","lms","core","marketing"],installationLoading:!1,admin_url:$e.get("admin_url"),installing:!1,installingAdding:""}},computed:{filteredAddons(){let t=this.addOns;if(this.search){let e={};ao(t,(a,s)=>{JSON.stringify(a).indexOf(this.search)!==-1&&(e[s]=a)}),t=e}if(this.module_type!="all"){let e={};ao(t,(a,s)=>{a.categories&&a.categories.includes(this.module_type)&&(e[s]=a)}),t=e}return t},is_no_modules(){return qi(this.filteredAddons)}},methods:{fetchAddons(){this.fetching=!0,this.$get("integration/addons").then(t=>{this.addOns=t.addons}).catch(t=>{this.handleError(t)}).finally(()=>{this.fetching=!1})},translate:f,changeModuleType(t){this.module_type=t},installAddon(t,e){this.installing=!0,this.installingAdding=e,this.$post("integration/feed/install-plugin",{addon:e}).then(a=>{this.$notify.success(a.message),window.location.reload()}).catch(a=>{this.handleError(a)}).finally(()=>{this.installing=!1,this.installingAdding=""})}},mounted(){this.fetchAddons()}},P2={class:"fct-integration-container fct-layout-width"},K2={style:{"margin-top":"100px"},class:"fct-integration-content"},N2={class:"fct-integration-content-head"},G2={class:"fct-card-header-title mb-1"},j2={class:"card-header-text mt-0"},z2={class:"flex items-center gap-3 justify-between py-5 mt-5 border border-solid border-gray-divider border-x-0 dark:border-dark-500 flex-col md:flex-row"},Y2={class:"fct-integration-search"},q2={key:1},W2={class:"fct-integration-card-content"},X2={class:"fct-integration-card-content-inner"},J2={class:"fct-integration-card-logo"},Z2=["src","alt"],ek={class:"title"},tk={class:"desc"},ak={key:0,class:"mt-2"};function sk(t,e,a,s,n,l){const A=y("PageHeading"),u=y("GlobalIntegrationFeeds"),c=y("DynamicIcon"),m=y("IconButton"),v=y("FluidTabItem"),b=y("FluidTab"),g=y("el-input"),F=y("el-skeleton"),B=y("Badge"),w=y("el-button"),C=y("Empty"),k=y("CardBody"),S=y("CardContainer");return d(),_("div",P2,[o(A,{title:t.$t("Integrations & Addons")},null,8,["title"]),o(u),i("div",K2,[o(S,null,{default:r(()=>[o(k,null,{default:r(()=>[i("div",N2,[o(m,{circle:"",size:"large"},{default:r(()=>[o(c,{name:"EqualizerLine"})]),_:1}),i("div",null,[i("h2",G2,h(t.$t("Integration Modules")),1),i("p",j2,h(t.$t("Configure your integrations and extend Webmakerr to enhance your store's functionality.")),1)])]),i("div",z2,[o(b,null,{default:r(()=>[(d(!0),_(H,null,q(n.modules,(E,V)=>(d(),U(v,{key:V,class:ne(["uppercase",E===n.module_type?"active":""]),onClick:$=>l.changeModuleType(E)},{default:r(()=>[M(h(E),1)]),_:2},1032,["onClick","class"]))),128))]),_:1}),i("div",Y2,[o(g,{placeholder:t.$t("Search..."),modelValue:n.search,"onUpdate:modelValue":e[0]||(e[0]=E=>n.search=E)},{prefix:r(()=>[o(c,{name:"Search"})]),_:1},8,["placeholder","modelValue"])])]),n.fetching?(d(),U(F,{key:0,loading:!0,animated:"",rows:4})):x("",!0),n.fetching?x("",!0):(d(),_("div",q2,[(d(!0),_(H,null,q(l.filteredAddons,(E,V)=>(d(),_("div",{key:V,class:ne(["fct-integration-card","addon-enabled-"+E.enabled])},[i("div",W2,[i("div",X2,[i("div",J2,[E.logo?(d(),_("img",{key:0,src:E.logo,alt:E.title},null,8,Z2)):x("",!0)]),i("div",null,[i("h5",ek,[M(h(E.title)+" ",1),o(B,{status:E.enabled?"active":"info",text:E.enabled?"enabled":"disabled"},null,8,["status","text"])]),i("p",tk,h(E.description),1),!E.enabled&&E.installable?(d(),_("div",ak,[o(w,{loading:n.installingAdding==V,disabled:n.installingAdding==V,onClick:$=>l.installAddon(E,V),type:"primary",size:"small"},{default:r(()=>[M(h(l.translate("Install %s",E.title)),1)]),_:2},1032,["loading","disabled","onClick"])])):x("",!0)])])])],2))),128))])),l.is_no_modules&&!n.fetching?(d(),U(C,{key:2,icon:"Folder",text:t.$t("Sorry! No modules found based on your filter.")},null,8,["text"])):x("",!0)]),_:1})]),_:1})])])}const nk=ye(R2,[["render",sk]]),ok={class:"fct-connect-details"},lk={key:0,class:"fct-connect-require"},rk={class:"flex items-center justify-between"},ik={key:0,class:"display-name"},Ak={name:"ConnectAccount",props:["connect","connect_config","mode","method","methodName","methodLabel"],data(){return{saving:!1}},methods:{disconnect(){this.saving=!0,this.$post("settings/payment-methods/disconnect",{method:this.method,mode:this.mode}).then(t=>{this.saving=!1,this.$emit("reload_settings",!0)})}}},Ld=Object.assign(Ak,{setup(t){return(e,a)=>{const s=y("el-button"),n=y("el-popconfirm");return d(),_("div",ok,[!t.connect||t.connect.error?(d(),_("div",lk,[i("h4",null,h(p(f)("Connect Your %s Account to your website to accept Payments",t.methodName)),1),o(s,{tag:"a",type:"info",plain:"",href:t.connect_config[t.mode+"_redirect"]},{default:r(()=>[o(Y,{name:"ArrowLeftRight"}),M(" "+h(p(f)("Connect with %s",t.methodLabel)),1)]),_:1},8,["href"])])):(d(),U(Oc,{key:1,title:p(f)("Your %s Account is Up & Running ",t.methodLabel)},{default:r(()=>{var l;return[i("div",rk,[i("div",null,[t.connect.display_name?(d(),_("p",ik,h(t.connect.display_name),1)):x("",!0),i("h4",null,h(e.$t("Administrator"))+" ("+h(e.$t("Owner"))+")",1)]),o(n,{width:"230","confirm-button-text":e.$t("Confirm"),"cancel-button-text":e.$t("No, Thanks"),icon:"el-icon-info","icon-color":"red",title:((l=t.connect_config)==null?void 0:l.disconnect_note)??e.$t("Are you sure to disconnect?"),position:"top",onConfirm:e.disconnect},{reference:r(()=>[o(s,{type:"danger",plain:""},{default:r(()=>[M(h(p(f)("Disconnect %s",t.methodLabel)),1)]),_:1})]),_:1},8,["confirm-button-text","cancel-button-text","title","onConfirm"])])]}),_:1},8,["title"]))])}}}),dk={__name:"Tabs",props:{fields:Object,settings:Object,tabs:Object,index:[String,Number]},setup(t){return(e,a)=>{const s=y("el-tab-pane"),n=y("el-tabs");return d(),U(n,{class:"demo-tabs",modelValue:t.settings[t.index],"onUpdate:modelValue":a[0]||(a[0]=l=>t.settings[t.index]=l)},{default:r(()=>[(d(!0),_(H,null,q(t.tabs.schema,(l,A)=>(d(),U(s,{label:l.label,name:l.value,key:A},{default:r(()=>[i("div",null,[o(cA,{fields:l.schema,settings:t.settings},null,8,["fields","settings"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])}}},uk={class:"setting-label"},ck=["innerHTML"],fk={key:0},pk={__name:"RadioSelectDependants",props:{fields:Object,settings:Object,index:[String,Number]},setup(t){return(e,a)=>{const s=y("el-icon"),n=y("el-tooltip"),l=y("el-radio"),A=y("el-radio-group");return d(),_(H,null,[i("p",uk,[M(h(t.fields[t.index].label)+" ",1),t.fields[t.index].tooltip?(d(),U(n,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:t.fields[t.index].tooltip},null,8,ck)]),default:r(()=>[o(s,null,{default:r(()=>[o(p(Aa))]),_:1})]),_:1})):x("",!0)]),o(A,{modelValue:t.settings[t.index],"onUpdate:modelValue":a[0]||(a[0]=u=>t.settings[t.index]=u)},{default:r(()=>[(d(!0),_(H,null,q(t.fields[t.index].options,(u,c)=>(d(),U(l,{label:u,value:c,key:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a[1]||(a[1]=i("br",null,null,-1)),a[2]||(a[2]=i("br",null,null,-1)),(d(!0),_(H,null,q(t.fields[t.index].dependants,(u,c)=>(d(),_("div",{key:c},[t.settings[t.index]===u.value?(d(),_("div",fk,[o(cA,{fields:u.schema,settings:t.settings,index:t.index},null,8,["fields","settings","index"])])):x("",!0)]))),128))],64)}}},mk={name:"PayPalWebhookSetup",data(){return{isLoading:!1,setupStatus:null,checkingWebhook:!1}},props:["mode","webhook_info","testConnect","liveConnect"],watch:{testConnect(){this.checkWebhookStatus()},liveConnect(){this.checkWebhookStatus()}},computed:{isConnected(){return this.mode==="test"&&this.testConnect||this.mode==="live"&&this.liveConnect}},components:{Notify:J},methods:{checkWebhookStatus(){this.isConnected&&(this.checkingWebhook=!0,this.$get("settings/payment-methods/paypal/webhook/check",{mode:this.mode}).then(t=>{this.checkingWebhook=!1}).catch(t=>{this.checkingWebhook=!1}))},setupWebhook(){this.isLoading=!0,this.$post("settings/payment-methods/paypal/webhook/setup",{mode:this.mode}).then(t=>{this.isLoading=!1,this.setupStatus="success",J.success(t.message),this.$emit("reload_settings",!0)}).catch(t=>{this.isLoading=!1,this.setupStatus="error",J.error(t.message),setTimeout(()=>{window.location.reload()},2e3)})}},mounted(){this.checkWebhookStatus()}},hk={key:0,class:"fluent_cart_paypal_webhook_setup"},_k={class:"fluent_cart_paypal_webhook_setup_title"},gk=["innerHTML"],vk={key:1};function yk(t,e,a,s,n,l){const A=y("el-button"),u=Et("loading");return l.isConnected?(d(),_("div",hk,[i("p",_k,"PayPal "+h(a.mode)+" webhook setup",1),a.webhook_info?At((d(),_("div",{key:0,"element-loading-text":"Checking webhook...",innerHTML:a.webhook_info},null,8,gk)),[[u,n.checkingWebhook]]):(d(),_("div",vk,[e[1]||(e[1]=i("p",{class:"fluent_cart_paypal_webhook_setup_description"}," Configure PayPal webhooks to receive real-time payment notifications ",-1)),e[2]||(e[2]=i("br",null,null,-1)),o(A,{type:t.text,loading:n.isLoading,onClick:l.setupWebhook,disabled:n.isLoading,class:"setup-button",size:"small"},{default:r(()=>e[0]||(e[0]=[i("span",null,"Setup Webhook",-1)])),_:1,__:[0]},8,["type","loading","onClick","disabled"])]))])):x("",!0)}const bk=ye(mk,[["render",yk],["__scopeId","data-v-b34bc5cb"]]),wk={key:0,class:"fct-col"},Bk=["innerHTML"],Ck={key:1,class:"fct-col"},kk={class:"font-bold p-6 mt-6 text-center bg-gray-200"},Fk={key:2,class:"fct-col"},xk={class:"text-red-700"},Uk={key:1},Ek={key:0},Sk={class:"flex items-center justify-between"},Qk={key:1,class:"flex items-center justify-between"},Dk={class:"text-red-700"},$k={key:3,class:"fct-col"},Ik={class:"setting-label"},Tk=["innerHTML"],Mk={key:0,class:"fct-settings-description"},Vk={key:4,class:"fct-col"},Lk=["innerHTML"],Ok={key:0,class:"fct-settings-description"},Hk={key:5,class:"fct-col"},Rk={class:"setting-label"},Pk=["innerHTML"],Kk={key:0,class:"fct-settings-description"},Nk={key:6,class:"fct-col"},Gk={class:"setting-label"},jk=["innerHTML"],zk={key:0,class:"fct-settings-description"},Yk={key:7,class:"fct-col"},qk={key:0},Wk=["innerHTML"],Xk={key:8,class:"fct-col"},Jk={class:"setting-label"},Zk={key:0,class:"fct-settings-description"},e8={key:9,class:"fct-col"},t8={class:"setting-label"},a8={key:0,class:"fct-settings-description"},s8={key:10,class:"fct-col"},n8={class:"setting-label"},o8={key:0,class:"fct-settings-description"},l8={key:11,class:"fct-col"},r8={class:"setting-label"},i8=["innerHTML"],A8={key:0,class:"fct-settings-description"},d8={key:12,class:"fct-col"},u8={class:"setting-label"},c8=["innerHTML"],f8={key:0,class:"fct-settings-description"},p8={key:13,class:"fct-col"},m8={class:"setting-label"},h8=["innerHTML"],_8={key:0,class:"fct-settings-description"},g8={key:14,class:"fct-col"},v8={class:"setting-label"},y8={key:0,class:"fct-settings-description"},b8={key:15,class:"fct-col"},w8=["innerHTML"],B8={key:16,class:"fct-col"},C8={key:0},k8={key:0},F8={class:"setting-label"},x8={class:"flex flex-wrap gap-2"},U8={class:"mt-4 text-gray-700 dark:text-gray-300"},E8=["href"],S8={key:1},Q8={class:"setting-label"},D8={class:"flex flex-wrap gap-2"},$8={class:"mt-4 text-gray-700 dark:text-gray-300"},I8=["href"],T8={key:17,class:"fct-col"},M8={key:18,class:"fct-col"},cA={__name:"Renderer",props:{fields:Object,settings:Object,route_name:String,methodName:String,methodTitle:String,methodLabel:String},emits:["onSettingsChange"],setup(t,{emit:e}){const a=Xe().ctx,s=T({}),n=T(null),l=T(null),A=T(!1),u=T({}),c=$e.get("shop.order_mode"),m=t,v=e,b=X(()=>{var w,C,k;return((w=m.settings)==null?void 0:w.payment_mode)==="test"?(C=m.settings)==null?void 0:C.define_test_keys:(k=m.settings)==null?void 0:k.define_live_keys});X(()=>{var w,C;return(w=m.fields)!=null&&w.payment_mode&&((C=m.settings)==null?void 0:C.payment_mode)!==c&&v("onSettingsChange",{...m.settings,payment_mode:c}),!0});const g=X(()=>{var w;return((w=m.settings)==null?void 0:w.payment_mode)==="test"?"test":"live"}),F=X(()=>Object.values(m.fields||{}).some(w=>w.type==="provider"&&w.value==="connect")),B=()=>{F.value&&(A.value=!0,a.$get("settings/payment-methods/connect/info",{method:m.route_name}).then(w=>{w&&(A.value=!1,s.value=w.connect_config,v("onSettingsChange",w.settings),n.value=w.live_account,l.value=w.test_account,n.value.error&&(u.value=n.value),l.value.error&&(u.value=l.value),A.value=!1)}).catch(w=>{A.value=!1,u.value=w}).finally(()=>{A.value=!1}))};return pe(()=>{F.value&&B()}),(w,C)=>{const k=y("el-skeleton-item"),S=y("el-skeleton"),E=y("el-icon"),V=y("el-tooltip"),$=y("el-switch"),O=y("el-checkbox"),D=y("el-option"),Q=y("el-select"),I=y("el-radio"),L=y("el-radio-group"),K=y("el-input"),N=y("el-input-number"),W=y("el-checkbox-group");return d(),_("div",{class:ne([g.value==="test"?"fct_test_mode":"fct_live_mode","grid grid-cols-1 gap-4"])},[(d(!0),_(H,null,q(t.fields,(R,ee)=>{var oe,Ae,ue,P,G,z;return d(),_("div",{class:"fct-setting-row fct-row",key:ee},[R.type==="notice"?(d(),_("div",wk,[i("p",{innerHTML:R.value},null,8,Bk)])):x("",!0),R.type==="upcoming"?(d(),_("div",Ck,[i("h1",kk,h(p(f)("Upcoming")),1)])):x("",!0),R.type==="provider"?(d(),_("div",Fk,[R.value=="connect"?(d(),_(H,{key:0},[t.settings.payment_mode=="test"?(d(),_(H,{key:0},[o(S,{loading:A.value,animated:""},{template:r(()=>[o(k,{variant:"h3",class:"w-[150px] mb-3"}),o(k,{variant:"p",class:"h-[50px]"})]),_:1},8,["loading"]),A.value?x("",!0):(d(),U(Ld,{key:0,onReload_settings:C[0]||(C[0]=j=>B()),method:t.route_name,methodName:t.methodName,methodLabel:t.methodLabel,connect_config:s.value,mode:"test",connect:l.value},null,8,["method","methodName","methodLabel","connect_config","connect"]))],64)):t.settings.payment_mode=="live"?(d(),_(H,{key:1},[A.value?x("",!0):(d(),U(Ld,{key:0,method:t.route_name,methodName:t.methodName,onReload_settings:C[1]||(C[1]=j=>B()),connect_config:s.value,mode:"live",methodLabel:t.methodLabel,connect:n.value},null,8,["method","methodName","connect_config","methodLabel","connect"]))],64)):x("",!0),C[3]||(C[3]=i("br",null,null,-1)),i("p",xk,h((oe=u.value)==null?void 0:oe.error),1)],64)):(d(),_("div",Uk,[b.value?(d(),_("div",Ek,[i("div",null,[o(Oc,{title:p(f)("Your API setup is Up & Running ")},{default:r(()=>[i("div",Sk,[i("div",null,[i("b",null,h(p(f)("Stripe API settings are enabled by the provided keys.")),1)])])]),_:1},8,["title"])])])):(d(),_("div",Qk,[i("div",null,[i("b",null,h(p(f)("Stripe API keys are required to enable payments.")),1),C[4]||(C[4]=i("br",null,null,-1)),i("p",null,h(p(f)("Add your publishable, secret, and webhook keys above to finish setup.")),1),i("p",Dk,h((Ae=u.value)==null?void 0:Ae.error),1)])]))]))])):x("",!0),R.type==="enable"?(d(),_("div",$k,[i("p",Ik,[M(h(R.label)+" ",1),R.tooltip?(d(),U(V,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:R.tooltip},null,8,Tk)]),default:r(()=>[o(E,null,{default:r(()=>[o(p(Aa))]),_:1})]),_:2},1024)):x("",!0)]),o($,{modelValue:t.settings[ee],"onUpdate:modelValue":j=>t.settings[ee]=j,"active-value":"yes","inactive-value":"no","active-text":p(f)("Active"),"inactive-text":p(f)("Inactive")},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"]),R.description?(d(),_("p",Mk,h(R.description),1)):x("",!0)])):x("",!0),R.type==="checkbox"?(d(),_("div",Vk,[o(O,{"true-value":"yes","false-value":"no",modelValue:t.settings[ee],"onUpdate:modelValue":j=>t.settings[ee]=j,disabled:R.disabled},{default:r(()=>[M(h(R.label)+" ",1),R.tooltip?(d(),U(V,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:R.tooltip},null,8,Lk)]),default:r(()=>[o(E,null,{default:r(()=>[o(p(Aa))]),_:1})]),_:2},1024)):x("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"]),R.description?(d(),_("p",Ok,h(R.description),1)):x("",!0)])):x("",!0),R.type==="select"?(d(),_("div",Hk,[i("p",Rk,[M(h(R.label)+" ",1),R.tooltip?(d(),U(V,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:R.tooltip},null,8,Pk)]),default:r(()=>[o(E,null,{default:r(()=>[o(p(Aa))]),_:1})]),_:2},1024)):x("",!0)]),o(Q,{placeholder:R.placeholder,modelValue:t.settings[ee],"onUpdate:modelValue":j=>t.settings[ee]=j,filterable:R.filterable!==!1},{default:r(()=>[(d(!0),_(H,null,q(R.options,(j,Z)=>(d(),U(D,{label:j.label,value:j.value,key:Z},null,8,["label","value"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","filterable"]),R.description?(d(),_("p",Kk,h(R.description),1)):x("",!0)])):x("",!0),R.type==="radio"?(d(),_("div",Nk,[i("p",Gk,[M(h(R.label)+" ",1),R.tooltip?(d(),U(V,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:R.tooltip},null,8,jk)]),default:r(()=>[o(E,null,{default:r(()=>[o(p(Aa))]),_:1})]),_:2},1024)):x("",!0)]),o(L,{modelValue:t.settings[ee],"onUpdate:modelValue":j=>t.settings[ee]=j},{default:r(()=>[(d(!0),_(H,null,q(R.options,(j,Z)=>(d(),U(I,{label:j,value:Z,key:Z},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),R.description?(d(),_("p",zk,h(R.description),1)):x("",!0)])):x("",!0),R.type==="webhook_info"&&((ue=t.settings)==null?void 0:ue.payment_mode)===R.mode?(d(),_("div",Yk,[t.route_name==="paypal"&&F.value&&!b.value?(d(),_("div",qk,[o(bk,{testConnect:l.value,liveConnect:n.value,webhook_info:R.info,onReload_settings:C[2]||(C[2]=j=>B()),mode:R==null?void 0:R.mode},null,8,["testConnect","liveConnect","webhook_info","mode"])])):R.info?(d(),_("div",{key:1,innerHTML:R.info},null,8,Wk)):x("",!0)])):x("",!0),R.type==="input"||R.type==="password"?(d(),_("div",Xk,[i("p",Jk,h(R.label),1),o(K,{type:R.type,placeholder:R.placeholder,modelValue:t.settings[ee],"onUpdate:modelValue":j=>t.settings[ee]=j,maxlength:R.max_length},null,8,["type","placeholder","modelValue","onUpdate:modelValue","maxlength"]),R.description?(d(),_("p",Zk,h(R.description),1)):x("",!0)])):x("",!0),R.type==="email"?(d(),_("div",e8,[i("p",t8,h(R.label),1),o(K,{type:"email",placeholder:R.placeholder,modelValue:t.settings[ee],"onUpdate:modelValue":j=>t.settings[ee]=j},null,8,["placeholder","modelValue","onUpdate:modelValue"]),R.description?(d(),_("p",a8,h(R.description),1)):x("",!0)])):x("",!0),R.type==="number"?(d(),_("div",s8,[i("p",n8,h(R.label),1),o(N,{placeholder:R.placeholder,modelValue:t.settings[ee],"onUpdate:modelValue":j=>t.settings[ee]=j,max:R.max,min:R.min},null,8,["placeholder","modelValue","onUpdate:modelValue","max","min"]),R.description?(d(),_("p",o8,h(R.description),1)):x("",!0)])):x("",!0),R.type==="text"?(d(),_("div",l8,[i("p",r8,[M(h(R.label)+" ",1),R.tooltip?(d(),U(V,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:R.tooltip},null,8,i8)]),default:r(()=>[o(E,null,{default:r(()=>[o(p(Aa))]),_:1})]),_:2},1024)):x("",!0)]),o(K,{type:"text",placeholder:R.placeholder,modelValue:t.settings[ee],"onUpdate:modelValue":j=>t.settings[ee]=j,disabled:R.disabled,maxlength:R.max_length},null,8,["placeholder","modelValue","onUpdate:modelValue","disabled","maxlength"]),R.description?(d(),_("p",A8,h(R.description),1)):x("",!0)])):x("",!0),R.type==="color"?(d(),_("div",d8,[i("p",u8,[M(h(R.label)+" ",1),R.tooltip?(d(),U(V,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:R.tooltip},null,8,c8)]),default:r(()=>[o(E,null,{default:r(()=>[o(p(Aa))]),_:1})]),_:2},1024)):x("",!0)]),o(iA,{modelValue:t.settings[ee],"onUpdate:modelValue":j=>t.settings[ee]=j,field:R},null,8,["modelValue","onUpdate:modelValue","field"]),R.description?(d(),_("p",f8,h(R.description),1)):x("",!0)])):x("",!0),R.type==="file"?(d(),_("div",p8,[i("p",m8,[M(h(R.label)+" ",1),R.tooltip?(d(),U(V,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:R.tooltip},null,8,h8)]),default:r(()=>[o(E,null,{default:r(()=>[o(p(Aa))]),_:1})]),_:2},1024)):x("",!0)]),o(Jl,{modelValue:t.settings[ee],"onUpdate:modelValue":j=>t.settings[ee]=j,icon:"Upload",title:p(f)("Upload")},null,8,["modelValue","onUpdate:modelValue","title"]),R.description?(d(),_("p",_8,h(R.description),1)):x("",!0)])):x("",!0),R.type==="checkbox_group"?(d(),_("div",g8,[i("p",v8,[M(h(R.title)+" ",1),R.tooltip?(d(),U(V,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",null,h(R.tooltip),1)]),default:r(()=>[o(E,null,{default:r(()=>[o(p(Aa))]),_:1})]),_:2},1024)):x("",!0)]),o(W,{modelValue:t.settings[ee],"onUpdate:modelValue":j=>t.settings[ee]=j},{default:r(()=>[(d(!0),_(H,null,q(R.options,(j,Z)=>(d(),U(O,{label:Z,key:Z},{default:r(()=>[M(h(j),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),R.description?(d(),_("p",y8,h(R.description),1)):x("",!0)])):x("",!0),R.type==="html_attr"?(d(),_("div",b8,[i("div",{innerHTML:R.value},null,8,w8)])):x("",!0),R.type==="active_methods"?(d(),_("div",B8,[(P=R.value)!=null&&P.activated_methods?(d(),_("div",C8,[t.settings.payment_mode==="live"&&ee==="live_active_methods"?(d(),_("div",k8,[i("p",F8,h(R.label),1),M(" "+h(w.active_methods)+" ",1),i("ul",x8,[(d(!0),_(H,null,q(R.value.activated_methods,(j,Z)=>(d(),_("li",{class:"bg-gray-50 dark:bg-gray-800 p-2 rounded text-sm text-gray-600 dark:text-gray-200 border border-gray-100 dark:border-gray-700",key:Z},h(j!=null&&j.name?j.name:j),1))),128))]),i("p",U8,[M(h(p(f)("You can configure methods ")),1),i("a",{href:(G=R.value)==null?void 0:G.configure_url,target:"_blank",class:"underline text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"},h(p(f)("here")),9,E8)])])):x("",!0),t.settings.payment_mode==="test"&&ee==="test_active_methods"?(d(),_("div",S8,[i("p",Q8,h(R.label),1),i("ul",D8,[M(h(w.active_methods)+" ",1),(d(!0),_(H,null,q(R.value.activated_methods,(j,Z)=>(d(),_("li",{class:"bg-gray-50 dark:bg-gray-800 p-2 rounded text-sm text-gray-600 dark:text-gray-200 border border-gray-100 dark:border-gray-700",key:Z},h(j!=null&&j.name?j.name:j),1))),128))]),i("p",$8,[M(h(p(f)("You can configure methods ")),1),i("a",{href:(z=R.value)==null?void 0:z.configure_url,target:"_blank",class:"underline text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"},h(p(f)("here")),9,I8)])])):x("",!0)])):x("",!0)])):x("",!0),R.type==="tabs"?(d(),_("div",T8,[o(dk,{fields:t.fields,settings:t.settings,index:ee,tabs:t.fields[ee]},null,8,["fields","settings","index","tabs"])])):x("",!0),R.type==="radio-select-dependants"?(d(),_("div",M8,[o(pk,{fields:t.fields,settings:t.settings,index:ee},null,8,["fields","settings","index"])])):x("",!0)])}),128))],2)}}},V8={class:"setting-wrap wm-container-enhanced"},L8={class:"mb-5 flex items-center justify-between"},O8={class:"setting-switcher"},H8={class:"setting-save-action"},R8={class:"edit-design-modal"},P8={name:"GlobalPaymentComponents",data(){return{fields:{},settings:{},saving:!1,fetching:!1,is_key_defined:!1,labelPosition:"top",webhook_url:"",fetchRoute:"",pages:[],route_name:"",ipn_url:"Blank",verifiedMessage:!1,verifiedStatus:!1,verifying:!1,methodName:"",methodTitle:"",methodLabel:"",editDesignModal:!1,mediaSelection:[],checkout_label:"",checkout_logo:"",checkout_instructions:""}},watch:{$route(t,e){this.getRoute(),this.getSettings(),this.getPageName()}},methods:{editDesign(){this.editDesignModal=!0},savePaymentDesign(){this.editDesignModal=!1,this.mediaSelection.length>0?this.checkout_logo=this.mediaSelection[0].url:this.checkout_logo="",this.$post("settings/payment-methods/design",{checkout_label:this.checkout_label,checkout_logo:this.checkout_logo,checkout_instructions:this.checkout_instructions,method:this.route_name}).then(t=>{this.saving=!1,ll("Settings updated!")})},getLogo(t){const e=t.replace(/_/g,"-");return Os.getUrl("images/payment-methods/"+e+"-icon.svg")},updateSettings(t){this.settings=t},getSettings(){this.fetching=!0,this.$get("settings/payment-methods",{method:this.route_name}).then(t=>{var e,a,s,n,l,A;this.fetching=!1,this.fields=t.fields,this.settings=t.settings,this.registerCopyAction(),this.checkout_label=(e=this.settings)!=null&&e.checkout_label?(a=this.settings)==null?void 0:a.checkout_label:this.methodTitle,this.checkout_logo=(s=this.settings)==null?void 0:s.checkout_logo,this.checkout_instructions=((n=this.settings)==null?void 0:n.checkout_instructions)||"",this.mediaSelection=(l=this.settings)!=null&&l.checkout_logo?{url:(A=this.settings)==null?void 0:A.checkout_logo,id:0,title:"Checkout Logo"}:""})},saveSettings(){this.saving=!0,this.$post("settings/payment-methods",{settings:this.settings,method:this.route_name}).then(t=>{this.saving=!1,ll("Settings updated!")}).catch(t=>{var e;this.saving=!1,Sp(((e=t==null?void 0:t.data)==null?void 0:e.message)||"Something went wrong!")})},verifyKeys(t,e){this.verifying=!0},getRoute(){var t,e,a,s,n,l,A,u,c;this.route_name=this.$route.name,this.methodName=(t=this.$route)==null?void 0:t.name,(a=(e=this.$route)==null?void 0:e.meta)!=null&&a.admin_title?this.methodTitle=(n=(s=this.$route)==null?void 0:s.meta)==null?void 0:n.admin_title:this.methodTitle=(A=(l=this.$route)==null?void 0:l.meta)==null?void 0:A.title,this.methodLabel=(c=(u=this.$route)==null?void 0:u.meta)==null?void 0:c.label,this.fetchRoute=`settings/payments/${this.$route.name}`},getPageName(){let t="";return this.$route.meta.title?t=this.$route.meta.title+" Settings":t=this.$route.name.charAt(0).toUpperCase()+this.$route.name.slice(1).toLowerCase()+" Settings",t}},mounted(){this.getRoute(),this.getSettings(),window.outerWidth<500&&(this.labelPosition="top")}},K8=Object.assign(P8,{setup(t){const e=Xe().ctx;return Ns().onSave(()=>{e.saveSettings()}),(s,n)=>{const l=y("el-breadcrumb-item"),A=y("el-breadcrumb"),u=y("el-switch"),c=y("Edit"),m=y("el-icon"),v=y("el-skeleton"),b=y("el-button"),g=y("el-input"),F=y("el-form-item"),B=y("el-form"),w=y("el-dialog");return d(),_(H,null,[i("div",V8,[i("div",L8,[o(A,{class:"mb-0","separator-icon":p(ma)},{default:r(()=>[o(l,{to:{path:"/settings/payments"}},{default:r(()=>[M(h(s.$t("Payment Settings")),1)]),_:1}),o(l,null,{default:r(()=>[i("span",null,h(s.methodTitle),1)]),_:1})]),_:1},8,["separator-icon"]),i("div",O8,[o(u,{modelValue:s.settings.is_active,"onUpdate:modelValue":n[0]||(n[0]=C=>s.settings.is_active=C),"active-value":"yes","inactive-value":"no","inactive-text":s.$t("Payment Activation")},null,8,["modelValue","inactive-text"])])]),o(se,null,{default:r(()=>[o(le,{title:s.methodTitle,border_bottom:""},{action:r(()=>[o(m,{class:"text-gray-500 cursor-pointer",onClick:s.editDesign},{default:r(()=>[o(c)]),_:1},8,["onClick"])]),_:1},8,["title"]),o(ae,{class:"pt-0"},{default:r(()=>[o(v,{loading:s.fetching,animated:"",rows:6,class:"pt-5"},null,8,["loading"]),s.fetching?x("",!0):(d(),U(cA,{key:0,onOnSettingsChange:s.updateSettings,route_name:s.route_name,methodName:s.methodName,methodTitle:s.methodTitle,methodLabel:s.methodLabel,fields:s.fields,settings:s.settings},null,8,["onOnSettingsChange","route_name","methodName","methodTitle","methodLabel","fields","settings"]))]),_:1})]),_:1}),i("div",H8,[o(b,{onClick:n[1]||(n[1]=C=>s.saveSettings()),type:"primary",loading:s.saving},{default:r(()=>[M(h(s.saving?s.$t("Saving"):s.$t("Save Settings")),1)]),_:1},8,["loading"])])]),o(w,{modelValue:s.editDesignModal,"onUpdate:modelValue":n[6]||(n[6]=C=>s.editDesignModal=C),title:s.$t("Edit Gateway Label"),width:"50%"},{default:r(()=>[i("div",R8,[o(B,{"label-position":"left"},{default:r(()=>[o(F,{label:s.$t("Checkout Label")},{default:r(()=>[o(g,{type:"text",modelValue:s.checkout_label,"onUpdate:modelValue":n[2]||(n[2]=C=>s.checkout_label=C)},null,8,["modelValue"])]),_:1},8,["label"]),o(F,{label:s.$t("Checkout Logo")},{default:r(()=>[o(Jl,{modelValue:s.mediaSelection,"onUpdate:modelValue":n[3]||(n[3]=C=>s.mediaSelection=C),icon:"Upload",title:s.$t("Upload Logo")},null,8,["modelValue","title"])]),_:1},8,["label"]),o(F,{label:s.$t("Checkout Instructions"),"label-position":"top"},{default:r(()=>[o(Ks,{modelValue:s.checkout_instructions,"onUpdate:modelValue":n[4]||(n[4]=C=>s.checkout_instructions=C),onUpdate:n[5]||(n[5]=C=>{s.checkout_instructions=C})},null,8,["modelValue"])]),_:1},8,["label"]),o(F,{class:"float-right"},{default:r(()=>[o(b,{type:"primary",onClick:s.savePaymentDesign},{default:r(()=>[M(h(s.$t("Update")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})])]),_:1},8,["modelValue","title"])],64)}}}),N8={class:"fct-integration-setting-content"},G8={class:"fct-integration-setting-head"},j8={class:"flex items-center gap-3 mb-2"},z8=["src"],Y8={class:"title"},q8=["innerHTML"],W8={key:0,class:"integration_success_state"},X8=["innerHTML"],J8={key:1,class:"fct-integration-setting-body"},Z8={class:"fct-integration-setting-body-inner"},eF=["innerHTML"],tF=["innerHTML"],aF=["target","href"],sF={key:0},nF={key:0,class:"fct-integration-setting-body-footer"},oF={key:2},lF={name:"generalIntegration",props:["settings_key"],components:{InfoFilled:Aa,Setting:Dp},data(){return{integration:{},loading:!1,saving:!1,settings:{},error_message:""}},watch:{settings_key(){this.integration={},this.settings={},this.getIntegrationSettings()}},methods:{save(){this.saving=!0,this.$post("integration/global-settings",{settings_key:this.settings_key,integration:this.integration}).then(t=>{if(this.saving=!1,this.handleSuccess(t.data.message),t.data.redirect_url){window.location.href=t.data.redirect_url;return}this.integration.status=t.data.status}).catch(t=>{this.integration.status=!1,t&&t.data.message?this.handleError(t.data.message):t&&t.responseJSON.data.message&&this.handleerror(t.responseJSON.data.message)})},getIntegrationSettings(){this.loading=!0,this.$get("integration/global-settings",{settings_key:this.settings_key}).then(t=>{this.loading=!1,this.integration=t.data.integration,this.settings=t.data.settings}).catch(t=>{this.error_message=t.responseJSON.data.message})},disconnect(t){this.integration=t,this.save()},authenticate(t,e){this.loading=!0,this.$post("integration/global-settings"+t,{settings_key:this.settings_key,integration:this.integration}).then(a=>{this.loading=!1,a.data.url?window.open(a.data.url,"_blank"):this.handleSuccess(a.data.message)}).catch(a=>{this.handleError(a.responseJSON.data.message)})}},mounted(){this.getIntegrationSettings()}},rF=Object.assign(lF,{setup(t){const e=Xe().ctx;return Ns().onSave(()=>{e.integration.status||e.save()}),(s,n)=>{const l=y("el-button"),A=y("el-icon"),u=y("el-tooltip"),c=y("el-option"),m=y("el-select"),v=y("el-input"),b=y("el-form-item"),g=y("el-form"),F=Et("loading");return d(),_("div",N8,[i("div",G8,[i("div",j8,[s.settings.logo?(d(),_("img",{key:0,class:"h-8",src:s.settings.logo,alt:""},null,8,z8)):x("",!0),i("h3",Y8,h(s.settings.menu_title),1)]),i("p",{class:"desc",innerHTML:s.settings.menu_description},null,8,q8)]),s.settings.hide_on_valid&&s.integration.status?(d(),_("div",W8,[i("p",{innerHTML:s.settings.discard_settings.section_description},null,8,X8),i("div",null,[o(l,{onClick:n[0]||(n[0]=B=>s.disconnect(s.settings.discard_settings.data)),type:"danger",plain:""},{default:r(()=>[M(h(s.settings.discard_settings.disconnect_button_text),1)]),_:1}),s.settings.discard_settings.show_verify?(d(),U(l,{key:0,onClick:n[1]||(n[1]=B=>s.save()),type:"primary"},{default:r(()=>[M(h(s.settings.discard_settings.verify_button_text),1)]),_:1})):x("",!0)])])):At((d(),_("div",J8,[i("div",Z8,[s.settings.config_instruction&&!s.integration.status?(d(),_("div",{key:0,class:"integration_instraction",innerHTML:s.settings.config_instruction},null,8,eF)):x("",!0),o(g,{"label-width":"205px","label-position":"top"},{default:r(()=>[(d(!0),_(H,null,q(s.settings.fields,(B,w)=>(d(),U(b,{key:w},{label:r(()=>[M(h(B.label)+" ",1),B.label_tips?(d(),U(u,{key:0,"popper-class":"fct-tooltip",placement:"top-start"},{content:r(()=>[i("div",{innerHTML:B.label_tips},null,8,tF)]),default:r(()=>[o(A,null,{default:r(()=>[o(p(Aa))]),_:1})]),_:2},1024)):x("",!0)]),default:r(()=>[B.type=="authenticate-button"?(d(),U(l,{key:0,onClick:C=>s.authenticate(B.end_point,B.params)},{default:r(()=>[M(h(B.button_text),1)]),_:2},1032,["onClick"])):B.type=="select"?(d(),U(m,{key:1,modelValue:s.integration[w],"onUpdate:modelValue":C=>s.integration[w]=C},{default:r(()=>[(d(!0),_(H,null,q(B.options,(C,k)=>(d(),U(c,{key:k,label:C,value:k},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):B.type=="link"?(d(),_(H,{key:2},[i("a",{target:B.target,class:ne(B.btn_class),href:B.link},h(B.link_text),11,aF),i("p",null,h(B.tips),1)],64)):(d(),_(H,{key:3},[o(v,{placeholder:B.placeholder,type:B.type,modelValue:s.integration[w],"onUpdate:modelValue":C=>s.integration[w]=C},null,8,["placeholder","type","modelValue","onUpdate:modelValue"]),B.tips?(d(),_("p",sF,h(B.tips),1)):x("",!0)],64))]),_:2},1024))),128))]),_:1})]),s.loading?x("",!0):(d(),_("div",nF,[o(l,{type:"primary",onClick:s.save},{default:r(()=>[M(h(s.settings.save_button_text),1)]),_:1},8,["onClick"])]))])),[[F,s.loading]]),s.error_message?(d(),_("p",oF,h(s.error_message),1)):x("",!0)])}}}),iF={class:"fct-integration-setting-container fct-layout-width"},AF={class:"single-page-header"},dF={class:"single-page-body"},uF={class:"fct-integration-setting-wrap"},cF={name:"IntegrationEditor"},fF=Object.assign(cF,{setup(t){return(e,a)=>{const s=y("el-breadcrumb-item"),n=y("el-breadcrumb");return d(),_("div",iF,[i("div",AF,[o(n,{"separator-icon":p(ma)},{default:r(()=>[o(s,{to:{name:"integrations"}},{default:r(()=>[M(h(e.$t("Integrations")),1)]),_:1}),o(s,null,{default:r(()=>[M(h(p(nt).capitalize(e.$route.params.integration_name)),1)]),_:1})]),_:1},8,["separator-icon"])]),i("div",dF,[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[i("div",uF,[o(rF,{settings_key:e.$route.params.integration_name},null,8,["settings_key"])])]),_:1})]),_:1})])])}}}),pF={class:"dialog-footer"},mF={__name:"CreatePageButton",props:{title:{default:f("Create Page")},content:{required:!0,type:String}},emits:["onPageCreated"],setup(t,{emit:e}){const a=t,s=e,n=T(!1),l=T(a.title),A=()=>{te.post("onboarding/create-page",{page_name:l.value,content:a.content}).then(u=>{s("onPageCreated",{value:u.page_id,label:`${l.value}( ${u.page_id})`,page_link:u.link}),l.value="",n.value=!1,J.success(f("The page created successfully."))}).catch(u=>{if(u&&u.hasOwnProperty("page_name")){const c=Object.entries(u.page_name).length;let m="",v=0;for(const b in u.page_name)m+=u.page_name[b],v!==c&&(m+=`
`),v++;J.error(m)}else J.error(f("Sorry, Unable To Create Page!!"))})};return(u,c)=>{const m=y("el-input"),v=y("el-form-item"),b=y("el-form"),g=y("el-button"),F=y("el-dialog");return d(),_(H,null,[o(Be,{onClick:c[0]||(c[0]=Ke(B=>n.value=!0,["prevent"])),tag:"button",bg:"info",outline:""},{default:r(()=>[o(Y,{name:"Plus"})]),_:1}),o(F,{modelValue:n.value,"onUpdate:modelValue":c[3]||(c[3]=B=>n.value=B),title:p(f)("Create %s Page",t.title),width:"35%",center:"","append-to-body":!0},{footer:r(()=>[i("div",pF,[o(g,{onClick:c[2]||(c[2]=B=>n.value=!1),type:"info",soft:""},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),o(g,{type:"primary",onClick:A},{default:r(()=>[M(h(p(f)("Create Page")),1)]),_:1})])]),default:r(()=>[o(b,{"require-asterisk-position":"right","label-position":"top",onSubmit:Ke(A,["prevent"])},{default:r(()=>[o(v,{label:p(f)("Page Name"),required:""},{default:r(()=>[o(m,{modelValue:l.value,"onUpdate:modelValue":c[1]||(c[1]=B=>l.value=B),placeholder:p(f)("Page Name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"])],64)}}},hF={class:"fct-form-group"},_F={class:"fct-form-group-inner"},gF={class:"input-prepend"},vF={class:"input-append"},yF={__name:"PageSelector",props:pa({title:{type:String,required:!0},pages:{type:Array,required:!0},modelId:{type:String,required:!0}},{modelValue:{},modelModifiers:{}}),emits:pa(["onPageCreated"],["update:modelValue"]),setup(t,{emit:e}){const a=ka(t,"modelValue",{get:A=>A?typeof A=="string"?Number(A):A:""}),s=e,n=T(!1),l=A=>{n.value=A};return(A,u)=>{const c=y("el-option"),m=y("el-select");return d(),_("div",hF,[i("label",null,h(t.title),1),i("div",_F,[i("div",{class:ne(["fct-input-group w-full",{focused:n.value}])},[i("div",gF,[o(m,{filterable:"",modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=v=>a.value=v),onFocus:u[1]||(u[1]=v=>l(!0)),onBlur:u[2]||(u[2]=v=>l(!1)),placeholder:p(f)("Select"),clearable:""},{default:r(()=>[(d(!0),_(H,null,q(t.pages,(v,b)=>(d(),U(c,{key:b,label:v.label,value:Number(v.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),i("div",vF,[o(mF,{title:t.title,onOnPageCreated:u[3]||(u[3]=v=>s("onPageCreated",v,t.modelId)),content:t.modelId},null,8,["title","content"])])],2)])])}}},bF={class:"fct-onboarding-wrap"},wF={key:0,class:"fct-onboarding-card"},BF={class:"fct-onboarding-card-body"},CF={class:"fct-onboarding-content-box"},kF={class:"fct-onboarding-card-head"},FF={class:"fct-onboarding-card-head-top"},xF=["src","alt"],UF={class:"fct-onboarding-steps-count"},EF={class:"fct-onboarding-card-title"},SF={class:"fct-onboarding-card-text"},QF={class:"fct-onboarding-content-box-inner"},DF={class:"fct-onboarding-form-body"},$F={class:"fct-form-group"},IF={for:"store-country"},TF={class:"fct-form-group"},MF={class:"fct-form-group"},VF={class:"fct-form-group"},LF={class:"fct-onboarding-form-body"},OF={class:"fct-onboarding-form-body-header"},HF={class:"left"},RF={class:"fct-onboarding-form-body-header__title"},PF={class:"fct-onboarding-form-body-header__desc"},KF={key:0,class:"fct-onboarding-form-body-header__action"},NF={class:"fct-form-group"},GF={class:"fct-onboarding-form-body"},jF={class:"fct-form-group"},zF={class:"marker"},YF={class:"label"},qF={class:"marker"},WF={key:0,class:"fct-onboarding-bottom"},XF={class:"fct-onboarding-bottom-left"},JF={class:"fct-onboarding-bottom-right"},ZF={key:0,class:"cmd"},e4=4,t4={__name:"Onboarding",setup(t){const e=Xe().ctx,a=T(1),s=T([]),n=T({});T(!1);const l=T(!1),A=T([]),u=T("start-from-scratch"),c=T(!1);T("auto-generate-pages"),T([1]);const m=T("Welcome aboard! Lets create your online store."),v=Os.getUrl("images/logo/webmakerr-logo-full-dark.svg"),b=Os.getUrl("images/logo/webmakerr-logo-full.svg"),g=T($e.get("asset_url")+"/images/logo/webmakerr-logo-full-dark.svg"),F=T(!1),B=T("Select Pages"),w=T("Select the pages you'd like from your website"),C=T(!1),k=Ns();Xe().ctx;const S=()=>{a.value!==1&&(a.value--,V())},E=()=>{a.value!==e4&&(a.value++,V())};k.onSave(()=>{a.value===3&&W()});const V=()=>{a.value===2?m.value=f("Setup Your Pages"):a.value===3?m.value=f("Setup Your Products"):a.value===4?m.value=f("Setup Your Payments"):m.value=f("Welcome aboard! Lets create your online store.")},$=()=>{l.value=!0,c.value=!0,e.$get("onboarding/",{}).then(P=>{s.value=P.pages,n.value=P.currencies,I.value=P.default_settings,l.value=!1,c.value=!1})},O=()=>{l.value=!0,c.value=!0,te.post("onboarding/create-pages",{}).then(P=>{s.value=P.pages,n.value=P.currencies,Object.keys(D).forEach(function(G){I.value[G]=P.default_settings[G]+""}),l.value=!1,c.value=!1,C.value=!0,B.value="Existing Pages",w.value="Select the pages you'd like from the list provided."})},D={checkout_page_id:"",cart_page_id:"",receipt_page_id:"",shop_page_id:"",customer_profile_page_id:""},Q=P=>{switch(P){case"checkout_page_id":return f("Checkout");case"cart_page_id":return f("Cart");case"receipt_page_id":return f("Receipt");case"shop_page_id":return f("Shop");case"customer_profile_page_id":return f("Customer Profile")}},I=T({store_name:"",store_logo:"",store_country:"",currency:"",category:"",...D}),L=T([]),K=(P,G)=>{s.value.push(P),I.value[G]=P.value},N=(P=0)=>{if(u.value===null||u.value==="start-from-scratch")return;const G=A.value[u.value];P>G.count-1||te.post("products/create-dummy",{category:G.category,index:P}).then(z=>{N(P+1)}).catch(z=>{z.code===400?console.log(z):N(P+1),J.error(z.message)})},W=()=>{var G;if(F.value=!0,N(),c.value===!0)return;c.value=!0;let P=JSON.parse(JSON.stringify(I.value));Array.isArray(P.store_logo)&&P.store_logo.length>0&&(P.store_logo=(G=P.store_logo)==null?void 0:G[0]),te.post("onboarding/",P).then(z=>{c.value=!1,J.success(z.message),setTimeout(()=>{F.value=!1,R()},300)}).catch(z=>{c.value=!1,J.error(z)})},R=()=>{if(window.location.href=$e.get("dashboard_url"),u.value!==null&&u.value!=="start-from-scratch"){const P={};P.import_product=u.value;const G=qr.appendToVueUrl(null,P);window.location.href=qr.appendQueryParams(G)}},ee=()=>{R()},oe=P=>{me.isDark()?g.value=b:g.value=v},Ae=()=>{L.value.length>0||te.get("address-info/countries").then(P=>{L.value=P.data}).catch(P=>{console.log(P,"errors")}).finally(()=>{})},ue=P=>{P!==""&&te.post("settings/store",{store_country:P,store_name:I.value.store_name,settings_name:"store_setup"}).then(G=>{}).catch(G=>{console.log(G,"errors")}).finally(()=>{})};return pe(()=>{window.addEventListener("onFluentCartThemeChange",oe),A.value=$e.get("dummy_product_info"),jQuery(".fca_admin_menu").hide(),jQuery(".fct_admin_menu_row").css({"padding-top":"16px","padding-bottom":"16px"}),jQuery("body").addClass("fct-onboarding-body"),$(),g.value=me.isDark()?b:v,Ae()}),je(()=>{window.removeEventListener("onFluentCartThemeChange",oe),jQuery(".fca_admin_menu").show(),jQuery(".fct_admin_menu_row").css({"padding-top":"0","padding-bottom":"0"}),jQuery("body").removeClass("fct-onboarding-body")}),(P,G)=>{const z=y("el-progress"),j=y("el-option"),Z=y("el-select"),_e=y("el-input"),he=y("el-button"),Qe=y("el-icon"),ge=y("el-radio-button"),De=y("el-radio-group"),Ue=Et("loading");return d(),_(H,null,[i("div",bF,[a.value<4?(d(),_("div",wF,[At((d(),_("div",BF,[i("div",CF,[i("div",kF,[i("div",FF,[i("img",{src:g.value,alt:p(f)("Webmakerr")},null,8,xF),i("div",UF,h(p(f)("Step %s of 3",a.value)),1),o(z,{percentage:a.value/3*100,"stroke-width":8,"show-text":!1,class:"fct-onboarding-progress"},null,8,["percentage"])]),i("h2",EF,h(m.value),1),i("p",SF,h(p(f)("You've successfully Installed The Plugin.")),1)]),i("div",QF,[i("div",{class:ne(`fct-onboarding-form-wrap ${a.value===1?"active":""}`)},[i("div",DF,[i("div",$F,[i("label",IF,h(p(f)("Store Country")),1),o(Z,{modelValue:I.value.store_country,"onUpdate:modelValue":G[0]||(G[0]=Ie=>I.value.store_country=Ie),placeholder:p(f)("Store Country"),onChange:ue,filterable:""},{default:r(()=>[(d(!0),_(H,null,q(L.value,(Ie,Ee)=>(d(),U(j,{key:Ee,label:Ie.name,value:Ie.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),i("div",TF,[i("label",null,h(p(f)("Shop Name")),1),o(_e,{modelValue:I.value.store_name,"onUpdate:modelValue":G[1]||(G[1]=Ie=>I.value.store_name=Ie)},null,8,["modelValue"])]),i("div",MF,[i("label",null,h(p(f)("Store Currency")),1),o(Z,{modelValue:I.value.currency,"onUpdate:modelValue":G[2]||(G[2]=Ie=>I.value.currency=Ie),filterable:"",placeholder:p(f)("Select")},{default:r(()=>[(d(!0),_(H,null,q(n.value,(Ie,Ee)=>(d(),U(j,{key:Ee,label:Ie.label,value:Ie.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),i("div",VF,[i("label",null,h(p(f)("Shop Image/Logo")),1),o(Jl,{modelValue:I.value.store_logo,"onUpdate:modelValue":G[3]||(G[3]=Ie=>I.value.store_logo=Ie),showSupported:"",icon:"Upload",title:p(f)("Upload")},null,8,["modelValue","title"])])])],2),i("div",{class:ne(`fct-onboarding-form-page-setup fct-onboarding-form-wrap ${a.value===2?"active":""}`)},[i("div",LF,[i("div",OF,[i("div",HF,[i("div",RF,h(B.value),1),i("div",PF,h(w.value),1)]),C.value?x("",!0):(d(),_("div",KF,[o(he,{onClick:O},{default:r(()=>[o(Y,{name:"MagicPen"}),M(" "+h(p(f)("Generate All Pages")),1)]),_:1})]))]),(d(),_(H,null,q(D,(Ie,Ee)=>i("div",NF,[o(yF,{title:Q(Ee),pages:s.value,modelId:Ee,modelValue:I.value[Ee],"onUpdate:modelValue":Ye=>I.value[Ee]=Ye,onOnPageCreated:K},null,8,["title","pages","modelId","modelValue","onUpdate:modelValue"])])),64))])],2),i("div",{class:ne(`fct-onboarding-form-wrap ${a.value===3?"active":""}`)},[i("div",GF,[i("div",jF,[o(De,{class:"fct-import-onboarding-products",modelValue:u.value,"onUpdate:modelValue":G[4]||(G[4]=Ie=>u.value=Ie),size:"large"},{default:r(()=>[o(ge,{value:"start-from-scratch"},{default:r(()=>[o(Y,{name:"Scratch"}),G[5]||(G[5]=i("span",{class:"label"},[M("Start "),i("br"),M("From scratch")],-1)),i("span",zF,[o(Qe,null,{default:r(()=>[o(p(rl))]),_:1})])]),_:1,__:[5]}),(d(!0),_(H,null,q(A.value,(Ie,Ee)=>(d(),U(ge,{key:Ee,value:Ee},{default:r(()=>[o(Y,{name:Ie.icon},null,8,["name"]),i("span",YF,h(Ie.title),1),i("span",qF,[o(Qe,null,{default:r(()=>[o(p(rl))]),_:1})])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])],2)])])])),[[Ue,l.value]])])):x("",!0)]),a.value<4?(d(),_("div",WF,[i("div",XF,[a.value>1?(d(),U(he,{key:0,text:"",onClick:ee},{default:r(()=>[M(h(p(f)("Skip All")),1)]),_:1})):x("",!0)]),i("div",JF,[o(he,{onClick:S,type:"info",plain:"",disabled:a.value===1},{default:r(()=>[M(h(p(f)("Go Back")),1)]),_:1},8,["disabled"]),a.value<3?(d(),U(he,{key:0,onClick:E,type:"primary"},{default:r(()=>[M(h(p(f)("Continue")),1)]),_:1})):x("",!0),a.value===3?(d(),U(he,{key:1,onClick:W,type:"primary",loading:F.value},{default:r(()=>[F.value?x("",!0):(d(),_("span",ZF,"s")),M(" "+h(F.value?p(f)("Saving"):p(f)("Save")),1)]),_:1},8,["loading"])):x("",!0)])])):x("",!0)],64)}}},a4={class:"fct-orders-route-wrap"},s4=Object.assign({name:"OrdersRoute"},{__name:"OrdersRoute",setup(t){return(e,a)=>{const s=y("router-view");return d(),_("div",a4,[o(s)])}}});/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Od(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Pa(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Od(Object(a),!0).forEach(function(s){n4(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Od(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Jo(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jo=function(e){return typeof e}:Jo=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jo(t)}function n4(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function as(){return as=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},as.apply(this,arguments)}function o4(t,e){if(t==null)return{};var a={},s=Object.keys(t),n,l;for(l=0;l<s.length;l++)n=s[l],!(e.indexOf(n)>=0)&&(a[n]=t[n]);return a}function l4(t,e){if(t==null)return{};var a=o4(t,e),s,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)s=l[n],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}var r4="1.14.0";function es(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var os=es(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),co=es(/Edge/i),Hd=es(/firefox/i),Yn=es(/safari/i)&&!es(/chrome/i)&&!es(/android/i),sf=es(/iP(ad|od|hone)/i),i4=es(/chrome/i)&&es(/android/i),nf={capture:!1,passive:!1};function We(t,e,a){t.addEventListener(e,a,!os&&nf)}function ze(t,e,a){t.removeEventListener(e,a,!os&&nf)}function wl(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function A4(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function La(t,e,a,s){if(t){a=a||document;do{if(e!=null&&(e[0]===">"?t.parentNode===a&&wl(t,e):wl(t,e))||s&&t===a)return t;if(t===a)break}while(t=A4(t))}return null}var Rd=/\s+/g;function ra(t,e,a){if(t&&e)if(t.classList)t.classList[a?"add":"remove"](e);else{var s=(" "+t.className+" ").replace(Rd," ").replace(" "+e+" "," ");t.className=(s+(a?" "+e:"")).replace(Rd," ")}}function Te(t,e,a){var s=t&&t.style;if(s){if(a===void 0)return document.defaultView&&document.defaultView.getComputedStyle?a=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(a=t.currentStyle),e===void 0?a:a[e];!(e in s)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),s[e]=a+(typeof a=="string"?"":"px")}}function pn(t,e){var a="";if(typeof t=="string")a=t;else do{var s=Te(t,"transform");s&&s!=="none"&&(a=s+" "+a)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(a)}function of(t,e,a){if(t){var s=t.getElementsByTagName(e),n=0,l=s.length;if(a)for(;n<l;n++)a(s[n],n);return s}return[]}function Ra(){var t=document.scrollingElement;return t||document.documentElement}function Dt(t,e,a,s,n){if(!(!t.getBoundingClientRect&&t!==window)){var l,A,u,c,m,v,b;if(t!==window&&t.parentNode&&t!==Ra()?(l=t.getBoundingClientRect(),A=l.top,u=l.left,c=l.bottom,m=l.right,v=l.height,b=l.width):(A=0,u=0,c=window.innerHeight,m=window.innerWidth,v=window.innerHeight,b=window.innerWidth),(e||a)&&t!==window&&(n=n||t.parentNode,!os))do if(n&&n.getBoundingClientRect&&(Te(n,"transform")!=="none"||a&&Te(n,"position")!=="static")){var g=n.getBoundingClientRect();A-=g.top+parseInt(Te(n,"border-top-width")),u-=g.left+parseInt(Te(n,"border-left-width")),c=A+l.height,m=u+l.width;break}while(n=n.parentNode);if(s&&t!==window){var F=pn(n||t),B=F&&F.a,w=F&&F.d;F&&(A/=w,u/=B,b/=B,v/=w,c=A+v,m=u+b)}return{top:A,left:u,bottom:c,right:m,width:b,height:v}}}function Pd(t,e,a){for(var s=hs(t,!0),n=Dt(t)[e];s;){var l=Dt(s)[a],A=void 0;if(A=n>=l,!A)return s;if(s===Ra())break;s=hs(s,!1)}return!1}function _n(t,e,a,s){for(var n=0,l=0,A=t.children;l<A.length;){if(A[l].style.display!=="none"&&A[l]!==Me.ghost&&(s||A[l]!==Me.dragged)&&La(A[l],a.draggable,t,!1)){if(n===e)return A[l];n++}l++}return null}function fA(t,e){for(var a=t.lastElementChild;a&&(a===Me.ghost||Te(a,"display")==="none"||e&&!wl(a,e));)a=a.previousElementSibling;return a||null}function ga(t,e){var a=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Me.clone&&(!e||wl(t,e))&&a++;return a}function Kd(t){var e=0,a=0,s=Ra();if(t)do{var n=pn(t),l=n.a,A=n.d;e+=t.scrollLeft*l,a+=t.scrollTop*A}while(t!==s&&(t=t.parentNode));return[e,a]}function d4(t,e){for(var a in t)if(t.hasOwnProperty(a)){for(var s in e)if(e.hasOwnProperty(s)&&e[s]===t[a][s])return Number(a)}return-1}function hs(t,e){if(!t||!t.getBoundingClientRect)return Ra();var a=t,s=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var n=Te(a);if(a.clientWidth<a.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||a.clientHeight<a.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!a.getBoundingClientRect||a===document.body)return Ra();if(s||e)return a;s=!0}}while(a=a.parentNode);return Ra()}function u4(t,e){if(t&&e)for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}function Dr(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var qn;function lf(t,e){return function(){if(!qn){var a=arguments,s=this;a.length===1?t.call(s,a[0]):t.apply(s,a),qn=setTimeout(function(){qn=void 0},e)}}}function c4(){clearTimeout(qn),qn=void 0}function rf(t,e,a){t.scrollLeft+=e,t.scrollTop+=a}function Af(t){var e=window.Polymer,a=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):a?a(t).clone(!0)[0]:t.cloneNode(!0)}var ua="Sortable"+new Date().getTime();function f4(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(n){if(!(Te(n,"display")==="none"||n===Me.ghost)){t.push({target:n,rect:Dt(n)});var l=Pa({},t[t.length-1].rect);if(n.thisAnimationDuration){var A=pn(n,!0);A&&(l.top-=A.f,l.left-=A.e)}n.fromRect=l}})}},addAnimationState:function(s){t.push(s)},removeAnimationState:function(s){t.splice(d4(t,{target:s}),1)},animateAll:function(s){var n=this;if(!this.options.animation){clearTimeout(e),typeof s=="function"&&s();return}var l=!1,A=0;t.forEach(function(u){var c=0,m=u.target,v=m.fromRect,b=Dt(m),g=m.prevFromRect,F=m.prevToRect,B=u.rect,w=pn(m,!0);w&&(b.top-=w.f,b.left-=w.e),m.toRect=b,m.thisAnimationDuration&&Dr(g,b)&&!Dr(v,b)&&(B.top-b.top)/(B.left-b.left)===(v.top-b.top)/(v.left-b.left)&&(c=m4(B,g,F,n.options)),Dr(b,v)||(m.prevFromRect=v,m.prevToRect=b,c||(c=n.options.animation),n.animate(m,B,b,c)),c&&(l=!0,A=Math.max(A,c),clearTimeout(m.animationResetTimer),m.animationResetTimer=setTimeout(function(){m.animationTime=0,m.prevFromRect=null,m.fromRect=null,m.prevToRect=null,m.thisAnimationDuration=null},c),m.thisAnimationDuration=c)}),clearTimeout(e),l?e=setTimeout(function(){typeof s=="function"&&s()},A):typeof s=="function"&&s(),t=[]},animate:function(s,n,l,A){if(A){Te(s,"transition",""),Te(s,"transform","");var u=pn(this.el),c=u&&u.a,m=u&&u.d,v=(n.left-l.left)/(c||1),b=(n.top-l.top)/(m||1);s.animatingX=!!v,s.animatingY=!!b,Te(s,"transform","translate3d("+v+"px,"+b+"px,0)"),this.forRepaintDummy=p4(s),Te(s,"transition","transform "+A+"ms"+(this.options.easing?" "+this.options.easing:"")),Te(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){Te(s,"transition",""),Te(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},A)}}}}function p4(t){return t.offsetWidth}function m4(t,e,a,s){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))*s.animation}var an=[],$r={initializeByDefault:!0},fo={mount:function(e){for(var a in $r)$r.hasOwnProperty(a)&&!(a in e)&&(e[a]=$r[a]);an.forEach(function(s){if(s.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),an.push(e)},pluginEvent:function(e,a,s){var n=this;this.eventCanceled=!1,s.cancel=function(){n.eventCanceled=!0};var l=e+"Global";an.forEach(function(A){a[A.pluginName]&&(a[A.pluginName][l]&&a[A.pluginName][l](Pa({sortable:a},s)),a.options[A.pluginName]&&a[A.pluginName][e]&&a[A.pluginName][e](Pa({sortable:a},s)))})},initializePlugins:function(e,a,s,n){an.forEach(function(u){var c=u.pluginName;if(!(!e.options[c]&&!u.initializeByDefault)){var m=new u(e,a,e.options);m.sortable=e,m.options=e.options,e[c]=m,as(s,m.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var A=this.modifyOption(e,l,e.options[l]);typeof A<"u"&&(e.options[l]=A)}},getEventProperties:function(e,a){var s={};return an.forEach(function(n){typeof n.eventProperties=="function"&&as(s,n.eventProperties.call(a[n.pluginName],e))}),s},modifyOption:function(e,a,s){var n;return an.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[a]=="function"&&(n=l.optionListeners[a].call(e[l.pluginName],s))}),n}};function h4(t){var e=t.sortable,a=t.rootEl,s=t.name,n=t.targetEl,l=t.cloneEl,A=t.toEl,u=t.fromEl,c=t.oldIndex,m=t.newIndex,v=t.oldDraggableIndex,b=t.newDraggableIndex,g=t.originalEvent,F=t.putSortable,B=t.extraEventProperties;if(e=e||a&&a[ua],!!e){var w,C=e.options,k="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!os&&!co?w=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(s,!0,!0)),w.to=A||a,w.from=u||a,w.item=n||a,w.clone=l,w.oldIndex=c,w.newIndex=m,w.oldDraggableIndex=v,w.newDraggableIndex=b,w.originalEvent=g,w.pullMode=F?F.lastPutMode:void 0;var S=Pa(Pa({},B),fo.getEventProperties(s,e));for(var E in S)w[E]=S[E];a&&a.dispatchEvent(w),C[k]&&C[k].call(e,w)}}var _4=["evt"],ta=function(e,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=s.evt,l=l4(s,_4);fo.pluginEvent.bind(Me)(e,a,Pa({dragEl:be,parentEl:_t,ghostEl:He,rootEl:ft,nextEl:Qs,lastDownEl:Zo,cloneEl:gt,cloneHidden:us,dragStarted:Ln,putSortable:Ot,activeSortable:Me.active,originalEvent:n,oldIndex:cn,oldDraggableIndex:Wn,newIndex:ia,newDraggableIndex:ds,hideGhostForTarget:ff,unhideGhostForTarget:pf,cloneNowHidden:function(){us=!0},cloneNowShown:function(){us=!1},dispatchSortableEvent:function(u){Jt({sortable:a,name:u,originalEvent:n})}},l))};function Jt(t){h4(Pa({putSortable:Ot,cloneEl:gt,targetEl:be,rootEl:ft,oldIndex:cn,oldDraggableIndex:Wn,newIndex:ia,newDraggableIndex:ds},t))}var be,_t,He,ft,Qs,Zo,gt,us,cn,ia,Wn,ds,Oo,Ot,dn=!1,Bl=!1,Cl=[],Es,Ea,Ir,Tr,Nd,Gd,Ln,sn,Xn,Jn=!1,Ho=!1,el,jt,Mr=[],Bi=!1,kl=[],tr=typeof document<"u",Ro=sf,jd=co||os?"cssFloat":"float",g4=tr&&!i4&&!sf&&"draggable"in document.createElement("div"),df=function(){if(tr){if(os)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),uf=function(e,a){var s=Te(e),n=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),l=_n(e,0,a),A=_n(e,1,a),u=l&&Te(l),c=A&&Te(A),m=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Dt(l).width,v=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+Dt(A).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&u.float&&u.float!=="none"){var b=u.float==="left"?"left":"right";return A&&(c.clear==="both"||c.clear===b)?"vertical":"horizontal"}return l&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||m>=n&&s[jd]==="none"||A&&s[jd]==="none"&&m+v>n)?"vertical":"horizontal"},v4=function(e,a,s){var n=s?e.left:e.top,l=s?e.right:e.bottom,A=s?e.width:e.height,u=s?a.left:a.top,c=s?a.right:a.bottom,m=s?a.width:a.height;return n===u||l===c||n+A/2===u+m/2},y4=function(e,a){var s;return Cl.some(function(n){var l=n[ua].options.emptyInsertThreshold;if(!(!l||fA(n))){var A=Dt(n),u=e>=A.left-l&&e<=A.right+l,c=a>=A.top-l&&a<=A.bottom+l;if(u&&c)return s=n}}),s},cf=function(e){function a(l,A){return function(u,c,m,v){var b=u.options.group.name&&c.options.group.name&&u.options.group.name===c.options.group.name;if(l==null&&(A||b))return!0;if(l==null||l===!1)return!1;if(A&&l==="clone")return l;if(typeof l=="function")return a(l(u,c,m,v),A)(u,c,m,v);var g=(A?u:c).options.group.name;return l===!0||typeof l=="string"&&l===g||l.join&&l.indexOf(g)>-1}}var s={},n=e.group;(!n||Jo(n)!="object")&&(n={name:n}),s.name=n.name,s.checkPull=a(n.pull,!0),s.checkPut=a(n.put),s.revertClone=n.revertClone,e.group=s},ff=function(){!df&&He&&Te(He,"display","none")},pf=function(){!df&&He&&Te(He,"display","")};tr&&document.addEventListener("click",function(t){if(Bl)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Bl=!1,!1},!0);var Ss=function(e){if(be){e=e.touches?e.touches[0]:e;var a=y4(e.clientX,e.clientY);if(a){var s={};for(var n in e)e.hasOwnProperty(n)&&(s[n]=e[n]);s.target=s.rootEl=a,s.preventDefault=void 0,s.stopPropagation=void 0,a[ua]._onDragOver(s)}}},b4=function(e){be&&be.parentNode[ua]._isOutsideThisEl(e.target)};function Me(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=as({},e),t[ua]=this;var a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return uf(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(A,u){A.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Me.supportPointer!==!1&&"PointerEvent"in window&&!Yn,emptyInsertThreshold:5};fo.initializePlugins(this,t,a);for(var s in a)!(s in e)&&(e[s]=a[s]);cf(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:g4,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?We(t,"pointerdown",this._onTapStart):(We(t,"mousedown",this._onTapStart),We(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(We(t,"dragover",this),We(t,"dragenter",this)),Cl.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),as(this,f4())}Me.prototype={constructor:Me,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(sn=null)},_getDirection:function(e,a){return typeof this.options.direction=="function"?this.options.direction.call(this,e,a,be):this.options.direction},_onTapStart:function(e){if(e.cancelable){var a=this,s=this.el,n=this.options,l=n.preventOnFilter,A=e.type,u=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(u||e).target,m=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,v=n.filter;if(E4(s),!be&&!(/mousedown|pointerdown/.test(A)&&e.button!==0||n.disabled)&&!m.isContentEditable&&!(!this.nativeDraggable&&Yn&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=La(c,n.draggable,s,!1),!(c&&c.animated)&&Zo!==c)){if(cn=ga(c),Wn=ga(c,n.draggable),typeof v=="function"){if(v.call(this,e,c,this)){Jt({sortable:a,rootEl:m,name:"filter",targetEl:c,toEl:s,fromEl:s}),ta("filter",a,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(v&&(v=v.split(",").some(function(b){if(b=La(m,b.trim(),s,!1),b)return Jt({sortable:a,rootEl:b,name:"filter",targetEl:c,fromEl:s,toEl:s}),ta("filter",a,{evt:e}),!0}),v)){l&&e.cancelable&&e.preventDefault();return}n.handle&&!La(m,n.handle,s,!1)||this._prepareDragStart(e,u,c)}}},_prepareDragStart:function(e,a,s){var n=this,l=n.el,A=n.options,u=l.ownerDocument,c;if(s&&!be&&s.parentNode===l){var m=Dt(s);if(ft=l,be=s,_t=be.parentNode,Qs=be.nextSibling,Zo=s,Oo=A.group,Me.dragged=be,Es={target:be,clientX:(a||e).clientX,clientY:(a||e).clientY},Nd=Es.clientX-m.left,Gd=Es.clientY-m.top,this._lastX=(a||e).clientX,this._lastY=(a||e).clientY,be.style["will-change"]="all",c=function(){if(ta("delayEnded",n,{evt:e}),Me.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Hd&&n.nativeDraggable&&(be.draggable=!0),n._triggerDragStart(e,a),Jt({sortable:n,name:"choose",originalEvent:e}),ra(be,A.chosenClass,!0)},A.ignore.split(",").forEach(function(v){of(be,v.trim(),Vr)}),We(u,"dragover",Ss),We(u,"mousemove",Ss),We(u,"touchmove",Ss),We(u,"mouseup",n._onDrop),We(u,"touchend",n._onDrop),We(u,"touchcancel",n._onDrop),Hd&&this.nativeDraggable&&(this.options.touchStartThreshold=4,be.draggable=!0),ta("delayStart",this,{evt:e}),A.delay&&(!A.delayOnTouchOnly||a)&&(!this.nativeDraggable||!(co||os))){if(Me.eventCanceled){this._onDrop();return}We(u,"mouseup",n._disableDelayedDrag),We(u,"touchend",n._disableDelayedDrag),We(u,"touchcancel",n._disableDelayedDrag),We(u,"mousemove",n._delayedDragTouchMoveHandler),We(u,"touchmove",n._delayedDragTouchMoveHandler),A.supportPointer&&We(u,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(c,A.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var a=e.touches?e.touches[0]:e;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){be&&Vr(be),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ze(e,"mouseup",this._disableDelayedDrag),ze(e,"touchend",this._disableDelayedDrag),ze(e,"touchcancel",this._disableDelayedDrag),ze(e,"mousemove",this._delayedDragTouchMoveHandler),ze(e,"touchmove",this._delayedDragTouchMoveHandler),ze(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,a){a=a||e.pointerType=="touch"&&e,!this.nativeDraggable||a?this.options.supportPointer?We(document,"pointermove",this._onTouchMove):a?We(document,"touchmove",this._onTouchMove):We(document,"mousemove",this._onTouchMove):(We(be,"dragend",this),We(ft,"dragstart",this._onDragStart));try{document.selection?tl(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,a){if(dn=!1,ft&&be){ta("dragStarted",this,{evt:a}),this.nativeDraggable&&We(document,"dragover",b4);var s=this.options;!e&&ra(be,s.dragClass,!1),ra(be,s.ghostClass,!0),Me.active=this,e&&this._appendGhost(),Jt({sortable:this,name:"start",originalEvent:a})}else this._nulling()},_emulateDragOver:function(){if(Ea){this._lastX=Ea.clientX,this._lastY=Ea.clientY,ff();for(var e=document.elementFromPoint(Ea.clientX,Ea.clientY),a=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ea.clientX,Ea.clientY),e!==a);)a=e;if(be.parentNode[ua]._isOutsideThisEl(e),a)do{if(a[ua]){var s=void 0;if(s=a[ua]._onDragOver({clientX:Ea.clientX,clientY:Ea.clientY,target:e,rootEl:a}),s&&!this.options.dragoverBubble)break}e=a}while(a=a.parentNode);pf()}},_onTouchMove:function(e){if(Es){var a=this.options,s=a.fallbackTolerance,n=a.fallbackOffset,l=e.touches?e.touches[0]:e,A=He&&pn(He,!0),u=He&&A&&A.a,c=He&&A&&A.d,m=Ro&&jt&&Kd(jt),v=(l.clientX-Es.clientX+n.x)/(u||1)+(m?m[0]-Mr[0]:0)/(u||1),b=(l.clientY-Es.clientY+n.y)/(c||1)+(m?m[1]-Mr[1]:0)/(c||1);if(!Me.active&&!dn){if(s&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<s)return;this._onDragStart(e,!0)}if(He){A?(A.e+=v-(Ir||0),A.f+=b-(Tr||0)):A={a:1,b:0,c:0,d:1,e:v,f:b};var g="matrix(".concat(A.a,",").concat(A.b,",").concat(A.c,",").concat(A.d,",").concat(A.e,",").concat(A.f,")");Te(He,"webkitTransform",g),Te(He,"mozTransform",g),Te(He,"msTransform",g),Te(He,"transform",g),Ir=v,Tr=b,Ea=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!He){var e=this.options.fallbackOnBody?document.body:ft,a=Dt(be,!0,Ro,!0,e),s=this.options;if(Ro){for(jt=e;Te(jt,"position")==="static"&&Te(jt,"transform")==="none"&&jt!==document;)jt=jt.parentNode;jt!==document.body&&jt!==document.documentElement?(jt===document&&(jt=Ra()),a.top+=jt.scrollTop,a.left+=jt.scrollLeft):jt=Ra(),Mr=Kd(jt)}He=be.cloneNode(!0),ra(He,s.ghostClass,!1),ra(He,s.fallbackClass,!0),ra(He,s.dragClass,!0),Te(He,"transition",""),Te(He,"transform",""),Te(He,"box-sizing","border-box"),Te(He,"margin",0),Te(He,"top",a.top),Te(He,"left",a.left),Te(He,"width",a.width),Te(He,"height",a.height),Te(He,"opacity","0.8"),Te(He,"position",Ro?"absolute":"fixed"),Te(He,"zIndex","100000"),Te(He,"pointerEvents","none"),Me.ghost=He,e.appendChild(He),Te(He,"transform-origin",Nd/parseInt(He.style.width)*100+"% "+Gd/parseInt(He.style.height)*100+"%")}},_onDragStart:function(e,a){var s=this,n=e.dataTransfer,l=s.options;if(ta("dragStart",this,{evt:e}),Me.eventCanceled){this._onDrop();return}ta("setupClone",this),Me.eventCanceled||(gt=Af(be),gt.draggable=!1,gt.style["will-change"]="",this._hideClone(),ra(gt,this.options.chosenClass,!1),Me.clone=gt),s.cloneId=tl(function(){ta("clone",s),!Me.eventCanceled&&(s.options.removeCloneOnHide||ft.insertBefore(gt,be),s._hideClone(),Jt({sortable:s,name:"clone"}))}),!a&&ra(be,l.dragClass,!0),a?(Bl=!0,s._loopId=setInterval(s._emulateDragOver,50)):(ze(document,"mouseup",s._onDrop),ze(document,"touchend",s._onDrop),ze(document,"touchcancel",s._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(s,n,be)),We(document,"drop",s),Te(be,"transform","translateZ(0)")),dn=!0,s._dragStartId=tl(s._dragStarted.bind(s,a,e)),We(document,"selectstart",s),Ln=!0,Yn&&Te(document.body,"user-select","none")},_onDragOver:function(e){var a=this.el,s=e.target,n,l,A,u=this.options,c=u.group,m=Me.active,v=Oo===c,b=u.sort,g=Ot||m,F,B=this,w=!1;if(Bi)return;function C(ue,P){ta(ue,B,Pa({evt:e,isOwner:v,axis:F?"vertical":"horizontal",revert:A,dragRect:n,targetRect:l,canSort:b,fromSortable:g,target:s,completed:S,onMove:function(z,j){return Po(ft,a,be,n,z,Dt(z),e,j)},changed:E},P))}function k(){C("dragOverAnimationCapture"),B.captureAnimationState(),B!==g&&g.captureAnimationState()}function S(ue){return C("dragOverCompleted",{insertion:ue}),ue&&(v?m._hideClone():m._showClone(B),B!==g&&(ra(be,Ot?Ot.options.ghostClass:m.options.ghostClass,!1),ra(be,u.ghostClass,!0)),Ot!==B&&B!==Me.active?Ot=B:B===Me.active&&Ot&&(Ot=null),g===B&&(B._ignoreWhileAnimating=s),B.animateAll(function(){C("dragOverAnimationComplete"),B._ignoreWhileAnimating=null}),B!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(s===be&&!be.animated||s===a&&!s.animated)&&(sn=null),!u.dragoverBubble&&!e.rootEl&&s!==document&&(be.parentNode[ua]._isOutsideThisEl(e.target),!ue&&Ss(e)),!u.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),w=!0}function E(){ia=ga(be),ds=ga(be,u.draggable),Jt({sortable:B,name:"change",toEl:a,newIndex:ia,newDraggableIndex:ds,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),s=La(s,u.draggable,a,!0),C("dragOver"),Me.eventCanceled)return w;if(be.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||B._ignoreWhileAnimating===s)return S(!1);if(Bl=!1,m&&!u.disabled&&(v?b||(A=_t!==ft):Ot===this||(this.lastPutMode=Oo.checkPull(this,m,be,e))&&c.checkPut(this,m,be,e))){if(F=this._getDirection(e,s)==="vertical",n=Dt(be),C("dragOverValid"),Me.eventCanceled)return w;if(A)return _t=ft,k(),this._hideClone(),C("revert"),Me.eventCanceled||(Qs?ft.insertBefore(be,Qs):ft.appendChild(be)),S(!0);var V=fA(a,u.draggable);if(!V||k4(e,F,this)&&!V.animated){if(V===be)return S(!1);if(V&&a===e.target&&(s=V),s&&(l=Dt(s)),Po(ft,a,be,n,s,l,e,!!s)!==!1)return k(),a.appendChild(be),_t=a,E(),S(!0)}else if(V&&C4(e,F,this)){var $=_n(a,0,u,!0);if($===be)return S(!1);if(s=$,l=Dt(s),Po(ft,a,be,n,s,l,e,!1)!==!1)return k(),a.insertBefore(be,$),_t=a,E(),S(!0)}else if(s.parentNode===a){l=Dt(s);var O=0,D,Q=be.parentNode!==a,I=!v4(be.animated&&be.toRect||n,s.animated&&s.toRect||l,F),L=F?"top":"left",K=Pd(s,"top","top")||Pd(be,"top","top"),N=K?K.scrollTop:void 0;sn!==s&&(D=l[L],Jn=!1,Ho=!I&&u.invertSwap||Q),O=F4(e,s,l,F,I?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,Ho,sn===s);var W;if(O!==0){var R=ga(be);do R-=O,W=_t.children[R];while(W&&(Te(W,"display")==="none"||W===He))}if(O===0||W===s)return S(!1);sn=s,Xn=O;var ee=s.nextElementSibling,oe=!1;oe=O===1;var Ae=Po(ft,a,be,n,s,l,e,oe);if(Ae!==!1)return(Ae===1||Ae===-1)&&(oe=Ae===1),Bi=!0,setTimeout(B4,30),k(),oe&&!ee?a.appendChild(be):s.parentNode.insertBefore(be,oe?ee:s),K&&rf(K,0,N-K.scrollTop),_t=be.parentNode,D!==void 0&&!Ho&&(el=Math.abs(D-Dt(s)[L])),E(),S(!0)}if(a.contains(be))return S(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ze(document,"mousemove",this._onTouchMove),ze(document,"touchmove",this._onTouchMove),ze(document,"pointermove",this._onTouchMove),ze(document,"dragover",Ss),ze(document,"mousemove",Ss),ze(document,"touchmove",Ss)},_offUpEvents:function(){var e=this.el.ownerDocument;ze(e,"mouseup",this._onDrop),ze(e,"touchend",this._onDrop),ze(e,"pointerup",this._onDrop),ze(e,"touchcancel",this._onDrop),ze(document,"selectstart",this)},_onDrop:function(e){var a=this.el,s=this.options;if(ia=ga(be),ds=ga(be,s.draggable),ta("drop",this,{evt:e}),_t=be&&be.parentNode,ia=ga(be),ds=ga(be,s.draggable),Me.eventCanceled){this._nulling();return}dn=!1,Ho=!1,Jn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ci(this.cloneId),Ci(this._dragStartId),this.nativeDraggable&&(ze(document,"drop",this),ze(a,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Yn&&Te(document.body,"user-select",""),Te(be,"transform",""),e&&(Ln&&(e.cancelable&&e.preventDefault(),!s.dropBubble&&e.stopPropagation()),He&&He.parentNode&&He.parentNode.removeChild(He),(ft===_t||Ot&&Ot.lastPutMode!=="clone")&&gt&&gt.parentNode&&gt.parentNode.removeChild(gt),be&&(this.nativeDraggable&&ze(be,"dragend",this),Vr(be),be.style["will-change"]="",Ln&&!dn&&ra(be,Ot?Ot.options.ghostClass:this.options.ghostClass,!1),ra(be,this.options.chosenClass,!1),Jt({sortable:this,name:"unchoose",toEl:_t,newIndex:null,newDraggableIndex:null,originalEvent:e}),ft!==_t?(ia>=0&&(Jt({rootEl:_t,name:"add",toEl:_t,fromEl:ft,originalEvent:e}),Jt({sortable:this,name:"remove",toEl:_t,originalEvent:e}),Jt({rootEl:_t,name:"sort",toEl:_t,fromEl:ft,originalEvent:e}),Jt({sortable:this,name:"sort",toEl:_t,originalEvent:e})),Ot&&Ot.save()):ia!==cn&&ia>=0&&(Jt({sortable:this,name:"update",toEl:_t,originalEvent:e}),Jt({sortable:this,name:"sort",toEl:_t,originalEvent:e})),Me.active&&((ia==null||ia===-1)&&(ia=cn,ds=Wn),Jt({sortable:this,name:"end",toEl:_t,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ta("nulling",this),ft=be=_t=He=Qs=gt=Zo=us=Es=Ea=Ln=ia=ds=cn=Wn=sn=Xn=Ot=Oo=Me.dragged=Me.ghost=Me.clone=Me.active=null,kl.forEach(function(e){e.checked=!0}),kl.length=Ir=Tr=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":be&&(this._onDragOver(e),w4(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],a,s=this.el.children,n=0,l=s.length,A=this.options;n<l;n++)a=s[n],La(a,A.draggable,this.el,!1)&&e.push(a.getAttribute(A.dataIdAttr)||U4(a));return e},sort:function(e,a){var s={},n=this.el;this.toArray().forEach(function(l,A){var u=n.children[A];La(u,this.options.draggable,n,!1)&&(s[l]=u)},this),a&&this.captureAnimationState(),e.forEach(function(l){s[l]&&(n.removeChild(s[l]),n.appendChild(s[l]))}),a&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,a){return La(e,a||this.options.draggable,this.el,!1)},option:function(e,a){var s=this.options;if(a===void 0)return s[e];var n=fo.modifyOption(this,e,a);typeof n<"u"?s[e]=n:s[e]=a,e==="group"&&cf(s)},destroy:function(){ta("destroy",this);var e=this.el;e[ua]=null,ze(e,"mousedown",this._onTapStart),ze(e,"touchstart",this._onTapStart),ze(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ze(e,"dragover",this),ze(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Cl.splice(Cl.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!us){if(ta("hideClone",this),Me.eventCanceled)return;Te(gt,"display","none"),this.options.removeCloneOnHide&&gt.parentNode&&gt.parentNode.removeChild(gt),us=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(us){if(ta("showClone",this),Me.eventCanceled)return;be.parentNode==ft&&!this.options.group.revertClone?ft.insertBefore(gt,be):Qs?ft.insertBefore(gt,Qs):ft.appendChild(gt),this.options.group.revertClone&&this.animate(be,gt),Te(gt,"display",""),us=!1}}};function w4(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Po(t,e,a,s,n,l,A,u){var c,m=t[ua],v=m.options.onMove,b;return window.CustomEvent&&!os&&!co?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=t,c.dragged=a,c.draggedRect=s,c.related=n||e,c.relatedRect=l||Dt(e),c.willInsertAfter=u,c.originalEvent=A,t.dispatchEvent(c),v&&(b=v.call(m,c,A)),b}function Vr(t){t.draggable=!1}function B4(){Bi=!1}function C4(t,e,a){var s=Dt(_n(a.el,0,a.options,!0)),n=10;return e?t.clientX<s.left-n||t.clientY<s.top&&t.clientX<s.right:t.clientY<s.top-n||t.clientY<s.bottom&&t.clientX<s.left}function k4(t,e,a){var s=Dt(fA(a.el,a.options.draggable)),n=10;return e?t.clientX>s.right+n||t.clientX<=s.right&&t.clientY>s.bottom&&t.clientX>=s.left:t.clientX>s.right&&t.clientY>s.top||t.clientX<=s.right&&t.clientY>s.bottom+n}function F4(t,e,a,s,n,l,A,u){var c=s?t.clientY:t.clientX,m=s?a.height:a.width,v=s?a.top:a.left,b=s?a.bottom:a.right,g=!1;if(!A){if(u&&el<m*n){if(!Jn&&(Xn===1?c>v+m*l/2:c<b-m*l/2)&&(Jn=!0),Jn)g=!0;else if(Xn===1?c<v+el:c>b-el)return-Xn}else if(c>v+m*(1-n)/2&&c<b-m*(1-n)/2)return x4(e)}return g=g||A,g&&(c<v+m*l/2||c>b-m*l/2)?c>v+m/2?1:-1:0}function x4(t){return ga(be)<ga(t)?1:-1}function U4(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,a=e.length,s=0;a--;)s+=e.charCodeAt(a);return s.toString(36)}function E4(t){kl.length=0;for(var e=t.getElementsByTagName("input"),a=e.length;a--;){var s=e[a];s.checked&&kl.push(s)}}function tl(t){return setTimeout(t,0)}function Ci(t){return clearTimeout(t)}tr&&We(document,"touchmove",function(t){(Me.active||dn)&&t.cancelable&&t.preventDefault()});Me.utils={on:We,off:ze,css:Te,find:of,is:function(e,a){return!!La(e,a,e,!1)},extend:u4,throttle:lf,closest:La,toggleClass:ra,clone:Af,index:ga,nextTick:tl,cancelNextTick:Ci,detectDirection:uf,getChild:_n};Me.get=function(t){return t[ua]};Me.mount=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];e[0].constructor===Array&&(e=e[0]),e.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(Me.utils=Pa(Pa({},Me.utils),s.utils)),fo.mount(s)})};Me.create=function(t,e){return new Me(t,e)};Me.version=r4;var Ft=[],On,ki,Fi=!1,Lr,Or,Fl,Hn;function S4(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(a){var s=a.originalEvent;this.sortable.nativeDraggable?We(document,"dragover",this._handleAutoScroll):this.options.supportPointer?We(document,"pointermove",this._handleFallbackAutoScroll):s.touches?We(document,"touchmove",this._handleFallbackAutoScroll):We(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){var s=a.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?ze(document,"dragover",this._handleAutoScroll):(ze(document,"pointermove",this._handleFallbackAutoScroll),ze(document,"touchmove",this._handleFallbackAutoScroll),ze(document,"mousemove",this._handleFallbackAutoScroll)),zd(),al(),c4()},nulling:function(){Fl=ki=On=Fi=Hn=Lr=Or=null,Ft.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,s){var n=this,l=(a.touches?a.touches[0]:a).clientX,A=(a.touches?a.touches[0]:a).clientY,u=document.elementFromPoint(l,A);if(Fl=a,s||this.options.forceAutoScrollFallback||co||os||Yn){Hr(a,this.options,u,s);var c=hs(u,!0);Fi&&(!Hn||l!==Lr||A!==Or)&&(Hn&&zd(),Hn=setInterval(function(){var m=hs(document.elementFromPoint(l,A),!0);m!==c&&(c=m,al()),Hr(a,n.options,m,s)},10),Lr=l,Or=A)}else{if(!this.options.bubbleScroll||hs(u,!0)===Ra()){al();return}Hr(a,this.options,hs(u,!1),!1)}}},as(t,{pluginName:"scroll",initializeByDefault:!0})}function al(){Ft.forEach(function(t){clearInterval(t.pid)}),Ft=[]}function zd(){clearInterval(Hn)}var Hr=lf(function(t,e,a,s){if(e.scroll){var n=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,A=e.scrollSensitivity,u=e.scrollSpeed,c=Ra(),m=!1,v;ki!==a&&(ki=a,al(),On=e.scroll,v=e.scrollFn,On===!0&&(On=hs(a,!0)));var b=0,g=On;do{var F=g,B=Dt(F),w=B.top,C=B.bottom,k=B.left,S=B.right,E=B.width,V=B.height,$=void 0,O=void 0,D=F.scrollWidth,Q=F.scrollHeight,I=Te(F),L=F.scrollLeft,K=F.scrollTop;F===c?($=E<D&&(I.overflowX==="auto"||I.overflowX==="scroll"||I.overflowX==="visible"),O=V<Q&&(I.overflowY==="auto"||I.overflowY==="scroll"||I.overflowY==="visible")):($=E<D&&(I.overflowX==="auto"||I.overflowX==="scroll"),O=V<Q&&(I.overflowY==="auto"||I.overflowY==="scroll"));var N=$&&(Math.abs(S-n)<=A&&L+E<D)-(Math.abs(k-n)<=A&&!!L),W=O&&(Math.abs(C-l)<=A&&K+V<Q)-(Math.abs(w-l)<=A&&!!K);if(!Ft[b])for(var R=0;R<=b;R++)Ft[R]||(Ft[R]={});(Ft[b].vx!=N||Ft[b].vy!=W||Ft[b].el!==F)&&(Ft[b].el=F,Ft[b].vx=N,Ft[b].vy=W,clearInterval(Ft[b].pid),(N!=0||W!=0)&&(m=!0,Ft[b].pid=setInterval((function(){s&&this.layer===0&&Me.active._onTouchMove(Fl);var ee=Ft[this.layer].vy?Ft[this.layer].vy*u:0,oe=Ft[this.layer].vx?Ft[this.layer].vx*u:0;typeof v=="function"&&v.call(Me.dragged.parentNode[ua],oe,ee,t,Fl,Ft[this.layer].el)!=="continue"||rf(Ft[this.layer].el,oe,ee)}).bind({layer:b}),24))),b++}while(e.bubbleScroll&&g!==c&&(g=hs(g,!1)));Fi=m}},30),mf=function(e){var a=e.originalEvent,s=e.putSortable,n=e.dragEl,l=e.activeSortable,A=e.dispatchSortableEvent,u=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(a){var m=s||l;u();var v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,b=document.elementFromPoint(v.clientX,v.clientY);c(),m&&!m.el.contains(b)&&(A("spill"),this.onSpill({dragEl:n,putSortable:s}))}};function pA(){}pA.prototype={startIndex:null,dragStart:function(e){var a=e.oldDraggableIndex;this.startIndex=a},onSpill:function(e){var a=e.dragEl,s=e.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var n=_n(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(a,n):this.sortable.el.appendChild(a),this.sortable.animateAll(),s&&s.animateAll()},drop:mf};as(pA,{pluginName:"revertOnSpill"});function mA(){}mA.prototype={onSpill:function(e){var a=e.dragEl,s=e.putSortable,n=s||this.sortable;n.captureAnimationState(),a.parentNode&&a.parentNode.removeChild(a),n.animateAll()},drop:mf};as(mA,{pluginName:"removeOnSpill"});Me.mount(new S4);Me.mount(mA,pA);function Q4(){return typeof window<"u"?window.console:global.console}const D4=Q4();function $4(t){const e=Object.create(null);return function(s){return e[s]||(e[s]=t(s))}}const I4=/-(\w)/g,Yd=$4(t=>t.replace(I4,(e,a)=>a?a.toUpperCase():""));function Rr(t){t.parentElement!==null&&t.parentElement.removeChild(t)}function qd(t,e,a){const s=a===0?t.children[0]:t.children[a-1].nextSibling;t.insertBefore(e,s)}function T4(t,e){return Object.values(t).indexOf(e)}function M4(t,e,a,s){if(!t)return[];const n=Object.values(t),l=e.length-s;return[...e].map((u,c)=>c>=l?n.length:n.indexOf(u))}function hf(t,e){this.$nextTick(()=>this.$emit(t.toLowerCase(),e))}function V4(t){return e=>{this.realList!==null&&this["onDrag"+t](e),hf.call(this,t,e)}}function L4(t){return["transition-group","TransitionGroup"].includes(t)}function O4(t){if(!t||t.length!==1)return!1;const[{type:e}]=t;return e?L4(e.name):!1}function H4(t,e){return e?{...e.props,...e.attrs}:t}const xi=["Start","Add","Remove","Update","End"],Ui=["Choose","Unchoose","Sort","Filter","Clone"],R4=["Move",...xi,...Ui].map(t=>"on"+t);let Pr=null;const P4={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:t=>t},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},xl=Ls({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...xi.map(t=>t.toLowerCase()),...Ui.map(t=>t.toLowerCase())],props:P4,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const t=this.$slots.default?this.$slots.default():null,e=H4(this.$attrs,this.componentData);return t?(this.transitionMode=O4(t),zr(this.getTag(),e,t)):zr(this.getTag(),e,[])},created(){this.list!==null&&this.modelValue!==null&&D4.error("list props are mutually exclusive! Please set one.")},mounted(){const t={};xi.forEach(n=>{t["on"+n]=V4.call(this,n)}),Ui.forEach(n=>{t["on"+n]=hf.bind(this,n)});const e=Object.keys(this.$attrs).reduce((n,l)=>(n[Yd(l)]=this.$attrs[l],n),{}),a=Object.assign({},e,t,{onMove:(n,l)=>this.onDragMove(n,l)});!("draggable"in a)&&(a.draggable=">*");const s=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new Me(s,a),s.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(t){this.updateOptions(t)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?y(this.component):this.tag},updateOptions(t){for(var e in t){const a=Yd(e);R4.indexOf(a)===-1&&this._sortable.option(a,t[e])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=M4(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(t){const e=T4(this.getChildrenNodes()||[],t);if(e===-1)return null;const a=this.realList[e];return{index:e,element:a}},emitChanges(t){this.$nextTick(()=>{this.$emit("change",t)})},alterList(t){if(this.list){t(this.list);return}const e=[...this.modelValue];t(e),this.$emit("update:modelValue",e)},spliceList(){const t=e=>e.splice(...arguments);this.alterList(t)},updatePosition(t,e){const a=s=>s.splice(e,0,s.splice(t,1)[0]);this.alterList(a)},getVmIndex(t){const e=this.visibleIndexes,a=e.length;return t>a-1?a:e[t]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(t){if(!this.noTransitionOnDrag||!this.transitionMode)return;var e=this.getChildrenNodes();e[t].data=null;const a=this.getComponent();a.children=[],a.kept=void 0},onDragStart(t){this.computeIndexes(),this.context=this.getUnderlyingVm(t.item),this.context&&(t.item._underlying_vm_=this.clone(this.context.element),Pr=t.item)},onDragAdd(t){const e=t.item._underlying_vm_;if(e===void 0)return;Rr(t.item);const a=this.getVmIndex(t.newIndex);this.spliceList(a,0,e),this.computeIndexes();const s={element:e,newIndex:a};this.emitChanges({added:s})},onDragRemove(t){if(qd(this.$el,t.item,t.oldIndex),t.pullMode==="clone"){Rr(t.clone);return}if(!this.context)return;const e=this.context.index;this.spliceList(e,1);const a={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:a})},onDragUpdate(t){Rr(t.item),qd(t.from,t.item,t.oldIndex);const e=this.context.index,a=this.getVmIndex(t.newIndex);this.updatePosition(e,a);const s={element:this.context.element,oldIndex:e,newIndex:a};this.emitChanges({moved:s})},updateProperty(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},onDragMove(t,e){const a=this.move;if(!a||!this.realList)return!0;const s=this.getRelatedContextFromMoveEvent(t),n=this.context,l=this.computeFutureIndex(s,t);Object.assign(n,{futureIndex:l});const A=Object.assign({},t,{relatedContext:s,draggedContext:n});return a(A,e)},onDragEnd(){this.computeIndexes(),Pr=null},getTrargetedComponent(t){return t.__draggable_component__},getRelatedContextFromMoveEvent({to:t,related:e}){const a=this.getTrargetedComponent(t);if(!a)return{component:a};const s=a.realList,n={list:s,component:a};if(t!==e&&s&&a.getUnderlyingVm){const l=a.getUnderlyingVm(e);if(l)return Object.assign(l,n)}return n},computeFutureIndex(t,e){const a=[...e.to.children].filter(A=>A.style.display!=="none");if(a.length===0)return 0;const s=a.indexOf(e.related),n=t.component.getVmIndex(s);return a.indexOf(Pr)!==-1||!e.willInsertAfter?n:n+1}}}),K4={class:"setting-wrap wm-container-enhanced"},N4={key:0,class:"payment-method-list fct-content-card-list"},G4={class:"flex items-start gap-3"},j4=["onClick"],z4=["src","alt"],Y4={key:0,class:"fct_payment_method_tag"},q4={class:"fct-content-card-list-content"},W4={class:"fct-content-card-list-action"},X4={key:3},J4={key:1},Z4={__name:"PaymentSettings",setup(t){const e=Xe().ctx,a=T(!1),s=T([]);Wt(),Fa();const n=T(null),l=T(null),A=X(()=>({animation:200,ghostClass:"ghost"})),u=F=>F===!0?"active":"inactive",c=()=>{a.value=!0,e.$get("settings/payment-methods/all",{}).then(F=>{s.value=F.gateways}).catch(F=>{console.error(F)}).finally(()=>{a.value=!1})},m=()=>{window.open("https://fluentcart.com/discount-deal","_blank")},v=()=>{const F=s.value.map(B=>B.route);e.$post("settings/payment-methods/reorder",{order:F}).then(()=>{}).catch(B=>{console.error("Failed to save payment method order:",B)})},b=F=>{F.addon_source&&(n.value=F.route,e.$post("settings/payment-methods/install-addon",{source_type:F.addon_source.type,source_link:F.addon_source.link,plugin_slug:F.addon_source.slug}).then(B=>{J.success(B.message||"Payment addon installed and activated successfully!"),c()}).catch(B=>{J.error(B.message||"Failed to install payment addon")}).finally(()=>{n.value=null}))},g=F=>{var B;(B=F.addon_status)!=null&&B.plugin_file&&(l.value=F.route,e.$post("settings/payment-methods/activate-addon",{plugin_file:F.addon_status.plugin_file}).then(w=>{J.success(w.message||"Payment addon activated successfully!"),c()}).catch(w=>{J.error(w.message||"Failed to activate payment addon")}).finally(()=>{l.value=null}))};return pe(()=>{c()}),(F,B)=>{const w=y("el-skeleton"),C=y("el-button");return d(),_("div",K4,[o(se,null,{default:r(()=>[o(le,{title:F.$t("Payment Settings"),border_bottom:""},null,8,["title"]),o(ae,null,{default:r(()=>[o(w,{loading:a.value,animated:"",rows:6},null,8,["loading"]),a.value?x("",!0):(d(),_("div",N4,[o(p(xl),ht(A.value,{list:s.value,"item-key":"route",handle:".drag-handle",onEnd:v}),{default:r(()=>[(d(!0),_(H,null,q(s.value,k=>{var S,E,V,$,O,D,Q;return d(),_("div",{key:k.route,class:ne(k!=null&&k.upcoming?"upcoming fct-content-card-list-item":"fct-content-card-list-item")},[i("div",G4,[B[1]||(B[1]=i("span",{class:"drag-handle cursor-move text-gray-400 hover:text-gray-600 mt-1 w-7.5 h-7.5",title:"Drag to reorder"},[i("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[i("path",{d:"M8 6h8v2H8V6zm0 4h8v2H8v-2zm0 4h8v2H8v-2z"})])],-1)),i("div",{onClick:()=>{var I;!((I=k==null?void 0:k.addon_status)!=null&&I.is_installed)&&(k!=null&&k.addon_source)||F.$router.push({name:k.route})},class:"cursor-pointer grid gap-2 flex-1"},[i("div",{class:ne(["fct-content-card-list-head",k.route])},[i("img",{src:k.icon,alt:k.admin_title||k.title},null,8,z4),k!=null&&k.tag?(d(),_("span",Y4,[o(dt,{size:"small",status:"info",text:k.tag},null,8,["text"])])):x("",!0),(k==null?void 0:k.upcoming)===!1&&!(k!=null&&k.requires_pro)&&!(k!=null&&k.is_addon)?(d(),U(dt,{key:1,size:"small",status:k.status?"active":"disabled","hide-icon":!0},{default:r(()=>[M(h(u(k.status)),1)]),_:2},1032,["status"])):x("",!0)],2),i("div",q4,[i("p",null,h(k.description),1)])],8,j4),i("div",W4,[k!=null&&k.is_addon?(d(),_(H,{key:0},[!((S=k==null?void 0:k.addon_status)!=null&&S.is_installed)&&(k!=null&&k.addon_source)||(E=k==null?void 0:k.addon_status)!=null&&E.is_active&&!((V=k==null?void 0:k.addon_status)!=null&&V.is_installed)?(d(),U(C,{key:0,class:"el-button--x-small el-button--primary",loading:n.value===k.route,onClick:()=>b(k)},{default:r(()=>[M(h(F.$t("Install & Activate")),1)]),_:2},1032,["loading","onClick"])):($=k==null?void 0:k.addon_status)!=null&&$.is_installed&&!((O=k==null?void 0:k.addon_status)!=null&&O.is_active)?(d(),U(C,{key:1,class:"el-button--x-small el-button--primary",loading:l.value===k.route,onClick:()=>g(k)},{default:r(()=>[M(h(F.$t("Activate")),1)]),_:2},1032,["loading","onClick"])):(D=k==null?void 0:k.addon_status)!=null&&D.is_active&&((Q=k==null?void 0:k.addon_status)!=null&&Q.is_plugin_installed)?(d(),U(dt,{key:2,size:"small",status:"active","hide-icon":!0},{default:r(()=>[M(h(F.$t("Active")),1)]),_:1})):(d(),_("div",X4,h(p(f)("Coming Soon!")),1))],64)):k!=null&&k.upcoming?(d(),_("div",J4,h(p(f)("Coming Soon!")),1)):k!=null&&k.requires_pro?(d(),U(C,{key:2,class:"el-button--x-small el-button--primary",onClick:B[0]||(B[0]=()=>m())},{default:r(()=>[M(h(F.$t("Upgrade to Pro")),1)]),_:1})):(d(),U(C,{key:3,class:"el-button--x-small",onClick:()=>F.$router.push({name:k.route})},{default:r(()=>[M(h(F.$t("Manage")),1)]),_:2},1032,["onClick"]))])])],2)}),128))]),_:1},16,["list"])]))]),_:1})]),_:1})])}}},ex={key:0,class:"fluent-cart-admin-validation-error-wrapper"},rt=Object.assign({name:"ValidationError"},{__name:"ValidationError",props:{validationErrors:Object,fieldKey:String},setup(t){const e=t,a=()=>{if(typeof e.validationErrors[e.fieldKey]!="object")return"";const[[n,l]]=Object.entries(e.validationErrors[e.fieldKey]);return{[n]:l}};return(s,n)=>t.validationErrors&&t.validationErrors.hasOwnProperty(t.fieldKey)?(d(),_("div",ex,[(d(!0),_(H,null,q(a(),(l,A)=>(d(),_("span",{class:"fluent-cart-admin-validation-error",key:l.toLowerCase().replace(/\s/g,"")},h(l),1))),128))])):x("",!0)}}),tx={class:"role-form"},ax={class:"select-use-option"},sx={class:"select-label"},nx={key:0,class:"select-desc"},ox={class:"dialog-footer"},lx={__name:"RoleAssignmentModal",props:{},emits:["fetchRoles"],setup(t,{expose:e,emit:a}){const s=T(!1),n=a,l=T(!1),A=T(null),u=T(null),c=T(!1),m=T(null),v=T(null),b=T({}),g=T(!1),F=E=>{if(!E){m.value=[];return}te.get("roles/user-list",{search:E}).then(V=>{m.value=V.users.data}).finally(()=>{})},B=()=>{te.get("roles").then(E=>{v.value=E.roles}).catch(E=>{if(E.message){J.error(E.message);return}console.log(E)}).finally(()=>{})},w=()=>{b.value={},l.value=!0,te.post("roles",{user_id:A.value,role_key:u.value}).then((E,V)=>{s.value=!1,J.success(E.message),n("fetchRoles")}).catch(E=>{var V;(V=E.data)!=null&&V.message?J.error(E.data.message):b.value=E.data}).finally(()=>{l.value=!1})},C=()=>{A.value=null,u.value=null,c.value=!1,b.value={},s.value=!1},k=T("");return e({openModal:(E,V,$,O=!1)=>{A.value=E,u.value=V,k.value=$,s.value=!0,c.value=O,B()}}),(E,V)=>{const $=y("el-option"),O=y("el-select"),D=y("el-form-item"),Q=y("el-form"),I=y("el-button"),L=y("el-dialog");return d(),U(L,{title:c.value?`Edit ${k.value}'s Role`:"Add Role",modelValue:s.value,"onUpdate:modelValue":V[4]||(V[4]=K=>s.value=K),onClosed:C},{footer:r(()=>[i("span",ox,[o(I,{onClick:C},{default:r(()=>[M(h(E.$t("Cancel")),1)]),_:1}),o(I,{type:"primary",onClick:w,loading:l.value,disabled:l.value},{default:r(()=>[M(h(c.value?E.$t("Update Role"):E.$t("Attach Role")),1)]),_:1},8,["loading","disabled"])])]),default:r(()=>[i("div",tx,[o(Q,{"label-position":"top"},{default:r(()=>[c.value?x("",!0):(d(),U(D,{key:0,label:E.$t("Select User")},{default:r(()=>[o(O,{modelValue:A.value,"onUpdate:modelValue":V[0]||(V[0]=K=>A.value=K),remote:!0,"remote-method":F,loading:g.value,filterable:"",clearable:"",placeholder:E.$t("Type to search user"),class:"w-full",onChange:V[1]||(V[1]=()=>{delete b.value.user_id})},{default:r(()=>[(d(!0),_(H,null,q(m.value,K=>(d(),U($,{key:K.ID,label:K.name,value:K.ID},{default:r(()=>[i("div",ax,[i("span",null,h(K.name),1),i("span",null,h(K.email),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading","placeholder"]),b.value.hasOwnProperty("user_id")?(d(),U(rt,{key:0,"validation-errors":b.value,"field-key":"user_id"},null,8,["validation-errors"])):x("",!0)]),_:1},8,["label"])),o(D,{label:E.$t("Select Role")},{default:r(()=>[o(O,{onChange:V[2]||(V[2]=K=>{delete b.value.role_key}),id:"role_key",modelValue:u.value,"onUpdate:modelValue":V[3]||(V[3]=K=>u.value=K),placeholder:E.$t("Select a role"),class:"w-full","popper-class":"fct-select-role-dropdown"},{default:r(()=>[(d(!0),_(H,null,q(v.value,(K,N)=>(d(),U($,{key:N,label:K.title,value:N},{default:r(()=>[i("div",sx,h(K.title),1),K.description?(d(),_("div",nx,h(K.description),1)):x("",!0)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),b.value.hasOwnProperty("role_key")?(d(),U(rt,{key:0,"validation-errors":b.value,"field-key":"role_key"},null,8,["validation-errors"])):x("",!0)]),_:1},8,["label"])]),_:1})])]),_:1},8,["title","modelValue"])}}},rx=ye(lx,[["__scopeId","data-v-bf72d770"]]),ix={class:"setting-wrap wm-container-enhanced"},Ax={class:"fct-role-settings"},dx={class:"fct-customer-card"},ux={class:"fct-customer-details"},cx={class:"fct-customer-name"},fx={class:"fct-customer-id"},px={class:"fct-customer-email"},mx={class:"role-title flex items-center gap-1 capitalize"},hx={class:"role-desc flex items-center gap-1 capitalize text-system-mid dark:text-system-light text-xs"},_x={class:"fct-role-settings-table-action fct-btn-group sm justify-end"},gx={__name:"RoleSettings",setup(t){const e=T(!1);T(!1);const a=T([]),s=T(),n=T(!1),l=$e.get("app_config.isProActive"),A=()=>{e.value=!0,te.get("roles/managers").then(c=>{a.value=c.managers}).finally(()=>{e.value=!1})},u=c=>{n.value=!0,te.delete("roles/"+c.shop_role,{user_id:c.id}).then(m=>{a.value=a.value.filter(v=>v.id!==c.id),J.success(m.message)}).catch(m=>{if(m.message)return J.error(m.message);console.log(m)}).finally(()=>{n.value=!1})};return pe(()=>{A()}),(c,m)=>{const v=y("el-button"),b=y("el-table-column"),g=y("el-popconfirm"),F=y("el-table"),B=Et("loading");return d(),_("div",ix,[o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{title:p(f)("Roles and Permissions")},ut({_:2},[p(l)?{name:"action",fn:r(()=>[o(v,{type:"primary",onClick:m[0]||(m[0]=()=>{var w;(w=s.value)==null||w.openModal()})},{default:r(()=>[M(h(p(f)("Add Role")),1)]),_:1})]),key:"0"}:void 0]),1032,["title"]),p(l)?(d(),U(ae,{key:0,class:"px-0 pb-0"},{default:r(()=>[i("div",Ax,[At((d(),U(F,{data:a.value},{empty:r(()=>[o(Le,{icon:"Empty/RoleAndPermission","has-dark":!0,text:p(f)("No roles found!")},null,8,["text"])]),default:r(()=>[o(b,{label:p(f)("User"),width:150},{default:r(w=>{var C,k,S;return[i("div",dx,[i("div",ux,[i("div",cx,[M(h(((C=w.row)==null?void 0:C.display_name)||p(f)("No Name"))+" ",1),i("span",fx,"#"+h((k=w.row)==null?void 0:k.id),1)]),i("div",px,h((S=w.row)==null?void 0:S.email),1)])])]}),_:1},8,["label"]),o(b,{prop:"shop_role",label:p(f)("Role Title"),width:100},{default:r(w=>[i("span",mx,h(p(nt).headline(w.row.shop_role)),1)]),_:1},8,["label"]),o(b,{prop:"description",label:p(f)("Roles"),width:100},{default:r(w=>[i("span",hx,h(w.row.description),1)]),_:1},8,["label"]),o(b,{width:100},{default:r(w=>[i("div",_x,[o(Be,{bg:"ghost",tag:"a",size:"x-small",hover:"primary",onClick:()=>{var C;(C=s.value)==null||C.openModal(w.row.id,w.row.shop_role,w.row.display_name,!0)}},{default:r(()=>[o(Y,{name:"Edit"})]),_:2},1032,["onClick"]),o(g,{width:235,"confirm-button-text":p(f)("Confirm"),"cancel-button-text":p(f)("No, Thanks"),"icon-color":"red",title:p(f)("Are you sure to delete this user?"),onConfirm:C=>u(w.row)},{reference:r(()=>[o(Be,{bg:"ghost",tag:"a",size:"x-small",hover:"danger"},{default:r(()=>[o(Y,{name:"Delete"})]),_:1})]),_:2},1032,["confirm-button-text","cancel-button-text","title","onConfirm"])])]),_:1})]),_:1},8,["data"])),[[B,e.value||n.value]])])]),_:1})):(d(),U(ae,{key:1,class:"px-0 pb-0"},{default:r(()=>[o(Hi,{class:"py-7.5",title:p(f)("Upgrade to Pro for Roles & Permission"),text:p(f)("This feature is only available in Webmakerr.")},null,8,["title","text"])]),_:1}))]),_:1}),o(rx,{ref_key:"roleModal",ref:s,onFetchRoles:A},null,512)])}}},vx={name:"Tab"},yx={class:"fct-tab-wrapper"};function bx(t,e,a,s,n,l){return d(),_("div",yx,[Nt(t.$slots,"default")])}const _f=ye(vx,[["render",bx]]),wx={name:"TabItems"},Bx={class:"fct-tab-item-wrapper"};function Cx(t,e,a,s,n,l){return d(),_("div",Bx,[Nt(t.$slots,"default")])}const gf=ye(wx,[["render",Cx]]),kx={name:"TabItem"},Fx={class:"fct-tab-item"};function xx(t,e,a,s,n,l){return d(),_("div",Fx,[Nt(t.$slots,"default")])}const Ul=ye(kx,[["render",xx]]),Ux={name:"TabLink",props:{to:{type:[Object,String]}}},Ex={key:1,class:"fct-tab-link"};function Sx(t,e,a,s,n,l){const A=y("router-link");return a.to?(d(),U(A,{key:0,to:a.to,class:"fct-tab-link"},{default:r(()=>[Nt(t.$slots,"default")]),_:3},8,["to"])):(d(),_("div",Ex,[Nt(t.$slots,"default")]))}const El=ye(Ux,[["render",Sx]]),Qx={name:"TabContent"},Dx={class:"fct-tab-content"};function $x(t,e,a,s,n,l){return d(),_("div",Dx,[Nt(t.$slots,"default")])}const Ix=ye(Qx,[["render",$x]]),Tx=["innerHTML"],hA={__name:"AdminNotice",props:{placement:{type:String,default:"top"}},setup(t){const e=$l("appVars"),a=Wt(),s=X(()=>{let A="notices fct-notices-wrap fct-layout-width ";return a.fullPath.includes("settings")?A+="settings":a.fullPath.includes("reports")&&(A+="reports"),A}),n=X(()=>e.admin_notices&&e.admin_notices.length>0),l=T(!1);return pe(()=>{de(()=>{l.value=!0})}),(A,u)=>n.value?(d(),_("div",{key:0,class:ne(s.value)},[(d(!0),_(H,null,q(p(e).admin_notices,c=>(d(),U(bs,{type:"warning",icon:"WarningFill"},{default:r(()=>[i("div",{innerHTML:c},null,8,Tx)]),_:2},1024))),256))],2)):x("",!0)}},Mx={class:"fct-setting-container setting-container wm-container-enhanced"},Vx={class:"fct-settings-menu-toggle"},Lx={class:"relative w-6 h-6"},Ox={class:"fct-tab-content-inner"},Hx=Object.assign({name:"SettingsView"},{__name:"SettingsView",setup(t){const e=Wt(),a=Fa();$e.config.get("isModuleTabEnabled");const s=T(!1),n=()=>{},l=()=>{document.body.style.overflow=""};eo.has("store/settings");const A=T([{name:f("Store Settings"),icon:"Gift",permission:["store/settings","store/sensitive"],url:"/settings/store-settings/",child:[{name:f("Store Setup"),url:"/settings/store-settings/"},{name:f("Pages Setup"),url:"/settings/store-settings/pages_setup"},{name:f("Product Page"),url:"/settings/store-settings/single_product_setup"},{name:f("Cart & Checkout"),url:"/settings/store-settings/cart_and_checkout"},{name:f("Checkout Fields"),url:"/settings/store-settings/checkout_fields"}]},{name:f("Payment Settings"),icon:"PaymentIcon",permission:["is_super_admin"],url:"/settings/payments"},{name:f("Invoice & Packing"),icon:"Invoice",permission:["is_super_admin"],url:"/settings/invoice-packing"},{name:f("Tax & Duties"),icon:"Tax",permission:["is_super_admin"],url:"/settings/tax_settings",child:[{name:f("Configuration & Classes"),url:"/settings/tax_settings"},{name:f("Rates"),url:"/settings/tax_settings/tax_rates"},{name:f("European Union"),url:"/settings/tax_settings/eu"}]},{name:f("Email Configuration"),icon:"Message",permission:["store/sensitive"],url:"/settings/email_mailing_settings",child:[{name:f("Mailing Settings"),url:"/settings/email_mailing_settings"},{name:f("Notifications"),url:"/settings/email_notifications"}]},{name:f("Roles and Permissions"),icon:"ShieldCheck",permission:["is_super_admin"],url:"/settings/roles"},{name:f("Storage Settings"),icon:"Database",permission:["is_super_admin"],url:"/settings/storage"}]);a.hasRoute("shipping")&&A.value.push({name:f("Shipping"),icon:"Truck",permission:["store/sensitive"],url:"/settings/shipping",child:[{name:f("Shipping Zones"),permission:["store/sensitive"],url:"/settings/shipping"},{name:f("Shipping Classes"),permission:["store/sensitive"],url:"/settings/shipping/shipping_classes"}]}),A.value.push({name:f("Features & addon"),icon:"Module",permission:["is_super_admin"],url:"/settings/addons"}),$e.get("app_config.isProActive")&&A.value.push({name:f("License Settings"),icon:"License",permission:"store/sensitive",url:"/settings/licensing"});const c=()=>{s.value=!s.value},m=b=>{const g=e.path;return!!(b.child&&b.child.length&&b.child.some(B=>g===B.url||g.includes(B.url))||g===b.url||g.includes(b.url))},v=(b,g,F)=>{const B=e.path;return B===b.url||B===F.url&&g===0};return(b,g)=>{const F=y("el-button"),B=y("router-view");return d(),_("div",Mx,[s.value?(d(),_("div",{key:0,class:"fct-settings-menu-overlay",onClick:c})):x("",!0),i("div",Vx,[o(F,{onClick:c},{default:r(()=>[i("div",Lx,[o(na,{visible:s.value,fade:""},{default:r(()=>[o(Y,{name:"Cross",class:"absolute justify-center inset-0 w-full h-full"})]),_:1},8,["visible"]),o(na,{visible:!s.value,fade:""},{default:r(()=>[o(Y,{name:"Setting",class:"absolute justify-center inset-0 w-full h-full"})]),_:1},8,["visible"])]),M(" "+h(p(f)("Settings")),1)]),_:1})]),o(_f,{onMouseenter:n,onMouseleave:l},{default:r(()=>[o(gf,{class:ne({"is-open":s.value})},{default:r(()=>[(d(!0),_(H,null,q(A.value,(w,C)=>(d(),U(Ul,{key:C,class:ne({"fct-tab-item-active":m(w)})},{default:r(()=>[p(eo).hasAny(w.permission)?(d(),U(El,{key:0,to:w.url},{default:r(()=>[o(Y,{name:w.icon},null,8,["name"]),M(" "+h(w.name)+" ",1),o(Y,{name:"ChevronRight",class:"tab-icon-right"})]),_:2},1032,["to"])):x("",!0),o(na,{visible:m(w)&&w.child,accordion:"",class:"fct-settings-menu-child-wrap"},{default:r(()=>[(d(!0),_(H,null,q(w.child,(k,S)=>(d(),U(Ul,{key:S,onClick:c,class:ne({"fct-tab-item-active":v(k,S,w)})},{default:r(()=>[o(El,{to:k.url},{default:r(()=>[M(h(k.name),1)]),_:2},1032,["to"])]),_:2},1032,["class"]))),128))]),_:2},1032,["visible"])]),_:2},1032,["class"]))),128))]),_:1},8,["class"]),o(Ix,null,{default:r(()=>[i("div",Ox,[o(hA),o(B)])]),_:1})]),_:1})])}}}),Rx={class:"min-h-[72px] px-2 pl-6 flex flex-col justify-center"},Px={__name:"CustomerOrdersLoader",props:{columns:{type:Array,default:()=>[]}},setup(t){const e=t,a=s=>e.columns.includes(s);return(s,n)=>{const l=y("el-table-column"),A=y("el-skeleton-item"),u=y("el-skeleton"),c=y("el-table");return d(),U(c,{class:"w-full compact-table responsive",data:[1,2,3,4,5,6,7,8,9,10]},{default:r(()=>[a("selection")?(d(),U(l,{key:0,type:"selection",width:"45"})):x("",!0),o(l,{width:140,label:p(f)("# Date")},{default:r(()=>[i("div",Rx,[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p",class:"w-3/5"})]),_:1}),o(u,{animated:""},{template:r(()=>[o(A,{varient:"p",class:"w-4/5"})]),_:1})])]),_:1},8,["label"]),a("order_items")?(d(),U(l,{key:1,"min-width":200,label:p(f)("Items")},{default:r(()=>[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"])):x("",!0),o(l,{width:150,label:p(f)("Total")},{default:r(()=>[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"]),o(l,{width:150,label:p(f)("Payment Status")},{default:r(()=>[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),a("status")?(d(),U(l,{key:2,width:120,label:p(f)("Status")},{default:r(()=>[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"])):x("",!0),a("type")?(d(),U(l,{key:3,width:140,label:p(f)("Order Type")},{default:r(()=>[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"])):x("",!0)]),_:1})}}},Kx={class:"select-use-option"},Nx={class:"dialog-footer"},vf={__name:"UserAttchModal",props:{customer:{}},setup(t){const e=t,a=T(!1),s=T([]),n=T(null),l=T({}),A=T(!1),u=()=>{l.value={},A.value=!0,te.post(`customers/${e.customer.id}/attachable-user`,{user_id:n.value}).then((v,b)=>{a.value=!1,J.success(v.message),e.customer.user_id=n.value}).catch(v=>{if(v.message)return J.error(v.message);l.value=v}).finally(()=>{A.value=!1})},c=()=>{n.value=null,l.value={},a.value=!1},m=()=>{te.get("customers/attachable-user").then(v=>{s.value=we.get(v,"users")})};return pe(()=>{m()}),(v,b)=>{y("el-link");const g=y("el-option"),F=y("el-select"),B=y("el-form-item"),w=y("el-form"),C=y("el-button"),k=y("el-dialog");return d(),_(H,null,[x("",!0),o(k,{modelValue:a.value,"onUpdate:modelValue":b[2]||(b[2]=S=>a.value=S),title:p(f)("Attach User"),onClosed:c},{footer:r(()=>[i("span",Nx,[o(C,{onClick:c},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),o(C,{type:"primary",onClick:u,loading:A.value,disabled:A.value},{default:r(()=>[M(h(p(f)("Attach User")),1)]),_:1},8,["loading","disabled"])])]),default:r(()=>[o(w,{"label-position":"top"},{default:r(()=>[o(B,{label:v.$t("Select User")},{default:r(()=>[o(F,{id:"user_id",modelValue:n.value,"onUpdate:modelValue":b[1]||(b[1]=S=>n.value=S),filterable:"",placeholder:v.$t("Select a user"),class:"w-full"},{default:r(()=>[(d(!0),_(H,null,q(s.value,S=>(d(),U(g,{key:S.ID,label:S.display_name,value:S.ID},{default:r(()=>[i("div",Kx,[i("span",null,h(S.display_name),1),i("span",null,h(S.user_email),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),l.value.hasOwnProperty("user_id")?(d(),U(rt,{key:0,"validation-errors":l.value,"field-key":"user_id"},null,8,["validation-errors"])):x("",!0)]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"])],64)}}},Gx={class:"more-btn"},jx={class:"fct-admin-sidebar-item"},zx={class:"fct-profile-card"},Yx={class:"fct-profile-image"},qx=["src","alt"],Wx={class:"fct-profile-details"},Xx={class:"title"},Jx={class:"text"},Zx={key:0},eU={class:"text"},tU={key:0,class:"flex items-center gap-2 mt-1.5"},aU={class:"user-info"},sU=["href"],nU={key:1},oU={class:"fct-admin-sidebar-item mt-5"},lU={class:"sidebar-title"},rU={class:"fct-contact-info-list"},iU={class:"flex items-center justify-between gap-2"},AU=["href"],dU={class:"fct-admin-sidebar-item mt-5"},uU={class:"sidebar-title"},cU={key:0,class:"fct-address-copy-wrap"},fU={class:"text"},pU={key:0,class:"pr-1"},mU=["innerHTML"],hU={key:0,class:"no-address-text"},_U={class:"fct-admin-sidebar-item mt-5"},gU={class:"sidebar-title"},vU={key:0,class:"fct-address-copy-wrap"},yU={class:"text"},bU={key:0,class:"pr-1"},wU=["innerHTML"],BU={key:0,class:"no-address-text"},CU={class:"fluent-cart-admin-pages"},kU={name:"CustomerInformations",props:["customer","customer_id"],components:{CustomerPurchaseValue:xp,NewCustomerModal:Ri,ManageAddressModal:yu,AddOrEditAddressModal:vu,DynamicIcon:Y,CopyToClipboard:Ca,UserAttchModal:vf,Back:zi},data(){return{addOrEditAddress:!1,shippingAddress:[],billingAddress:[],showAddressModal:!1,modalAction:{type:"billing",action:"create"},address:{},address_mock:{label:"",name:"",phone:"",email:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",is_primary:"0"},customerModalInfos:{showModal:!1,action:"edit",title:"Edit Customer Information",customer:{}},detaching:!1,shouldShowSetAsAlsoCheckbox:!0,closingModal:!1}},computed:{hasPrimaryBilling(){return this.billingAddress.findIndex(t=>t.is_primary=="1")},hasPrimaryShipping(){return this.shippingAddress.findIndex(t=>t.is_primary=="1")}},methods:{handleCustomerBulkCommand(t){t==="edit_customer_information"&&(this.customerModalInfos.showModal=!0),t==="manage_billing_address"&&this.manageAddress("billing"),t==="manage_shipping_address"&&this.manageAddress("shipping")},getCustomerTotalOrders(t){return t>0?t+" "+(t.toString()==="1"?this.$t("order"):this.$t("orders")):this.$t("No orders")},refresh(){this.addOrEditAddress=!1,this.fetch()},getTitle(){return this.modalAction.action==="create"?this.modalAction.type==="billing"?this.$t("Add new billing address"):this.$t("Add new shipping Address"):this.modalAction.type==="billing"?this.$t("Edit billing address"):this.$t("Edit shipping address")},addNewAddress(t="billing",e="create",a=[]){Object.keys(a).length>0?(this.address=JSON.parse(JSON.stringify(a)),this.shouldShowSetAsAlsoCheckbox=!1):this.address=JSON.parse(JSON.stringify(this.address_mock)),this.addOrEditAddress=!0,this.modalAction.type=t,this.modalAction.action=e,this.showAddressModal=!1},manageAddress(t="billing",e="edit"){this.showAddressModal=!0,this.modalAction.type=t,this.modalAction.action=e},fetch(){this.$emit("fetch")},handleDetachUser(){this.detaching=!0,Rest.post(`customers/${this.customer_id}/detach-user`,{user_id:this.customer.user_id}).then((t,e)=>{this.customer.user_id=0,Notify.success(t.message)}).catch(t=>{if(t.message)return Notify.error(t.message);console.log(t)}).finally(()=>{this.detaching=!1})}},mounted(){this.billingAddress=this.customer.billing_address,this.shippingAddress=this.customer.shipping_address,this.customerModalInfos.customer=this.customer,this.customerModalInfos.customer_id=this.customer.id}},yf=Object.assign(kU,{setup(t){return(e,a)=>{const s=y("el-dropdown-item"),n=y("el-dropdown-menu"),l=y("el-dropdown"),A=y("el-button"),u=y("el-popconfirm"),c=y("el-tag"),m=y("el-icon"),v=y("el-dialog"),b=Et("loading");return d(),_("div",null,[o(se,null,{default:r(()=>[o(le,{title:e.$t("Customer Information"),title_size:"small",border_bottom:""},{action:r(()=>[o(l,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:e.handleCustomerBulkCommand},{dropdown:r(()=>[o(n,null,{default:r(()=>[o(s,{command:"edit_customer_information"},{default:r(()=>[M(h(e.$t("Edit customer information")),1)]),_:1}),o(s,{command:"manage_shipping_address"},{default:r(()=>[M(h(e.$t("Manage shipping address")),1)]),_:1}),o(s,{command:"manage_billing_address"},{default:r(()=>[M(h(e.$t("Manage billing address")),1)]),_:1})]),_:1})]),default:r(()=>[i("span",Gx,[o(Y,{name:"More"})])]),_:1},8,["onCommand"])]),_:1},8,["title"]),o(ae,null,{default:r(()=>{var g,F,B,w,C,k;return[i("div",jx,[i("div",zx,[i("div",Yx,[i("img",{src:(g=t.customer)==null?void 0:g.photo,alt:(F=t.customer)==null?void 0:F.full_name},null,8,qx)]),i("div",Wx,[i("div",Xx,h((B=t.customer)==null?void 0:B.full_name),1),i("span",Jx,[t.customer.purchase_count>0?(d(),_("span",Zx,h(p(f)(t.customer.purchase_count)),1)):x("",!0),M(" "+h(e.$n("Order","Orders",t.customer.purchase_count??0,"No Order")),1)]),i("span",eU,h(p(st)((w=t.customer)==null?void 0:w.ltv,!0))+" "+h(p(f)("Lifetime Value")),1)])])]),i("div",null,[t.customer.user_id&&t.customer.user_id>0?(d(),_("div",tU,[i("div",aU,[a[6]||(a[6]=M(" WP User: ",-1)),i("a",{href:t.customer.user_link,target:"_blank",class:"inline-flex items-center gap-1 dark:text-gray-100 text-primary-500 focus:shadow-none hover:!underline"},[M(" #"+h(p(f)(t.customer.user_id))+" ",1),o(Y,{name:"Redirect",class:"w-2.5 h-2.5 text-primary-500 dark:text-gray-200"})],8,sU)]),x("",!0)])):(d(),_("div",nU,[o(vf,{customer:t.customer},null,8,["customer"])]))]),i("div",oU,[i("h4",lU,h(e.$t("Contact Information")),1),i("ul",rU,[i("li",null,[i("div",iU,[i("a",{class:"text",href:"mailto:"+((C=t.customer)==null?void 0:C.email)},h((k=t.customer)==null?void 0:k.email),9,AU),o(Ca,{text:t.customer.email,showMode:"basic_copy_btn",tooltipText:"Copy email"},null,8,["text"])])])])]),i("div",dU,[i("h4",uU,[M(h(e.$t("Shipping Address"))+" ",1),e.hasPrimaryShipping!=-1?(d(),U(c,{key:0,type:"info",round:""},{default:r(()=>[M(h(e.$t("Default")),1)]),_:1})):x("",!0)]),(d(!0),_(H,null,q(e.shippingAddress,(S,E)=>(d(),_(H,null,[S.is_primary==="1"?(d(),_("div",cU,[i("span",fU,[S.name?(d(),_("strong",pU,h(S.name),1)):x("",!0),i("span",{innerHTML:e.getOrderAddress(S,"shipping",!0)},null,8,mU)]),o(Ca,{text:e.getOrderAddress(S),showMode:"basic_copy_btn",tooltipText:"Copy address"},null,8,["text"])])):x("",!0)],64))),256)),e.hasPrimaryShipping==-1?(d(),_("p",hU,h(e.$t("No default address found.")),1)):x("",!0)]),i("div",_U,[i("h4",gU,[M(h(e.$t("Billing Address"))+" ",1),e.hasPrimaryBilling!=-1?(d(),U(c,{key:0,type:"info",round:""},{default:r(()=>[M(h(e.$t("Default")),1)]),_:1})):x("",!0)]),(d(!0),_(H,null,q(e.billingAddress,(S,E)=>(d(),_(H,null,[S.is_primary==="1"?(d(),_("div",vU,[i("span",yU,[S.name?(d(),_("strong",bU,h(S.name),1)):x("",!0),i("span",{innerHTML:e.getOrderAddress(S,"billing",!0)},null,8,wU)]),o(Ca,{text:e.getOrderAddress(S),showMode:"basic_copy_btn",tooltipText:e.$t("Copy address")},null,8,["text","tooltipText"])])):x("",!0)],64))),256)),e.hasPrimaryBilling===-1?(d(),_("p",BU,h(e.$t("No default address found.")),1)):x("",!0)])]}),_:1})]),_:1}),e.customerModalInfos.showModal?(d(),U(Ri,{key:0,"onUpdate:customerModal":e.fetch,customerModalInfos:e.customerModalInfos,customer_id:e.customerModalInfos.customer_id,customer:e.customerModalInfos.customer,onCloseModal:a[0]||(a[0]=g=>e.customerModalInfos.showModal=!1)},null,8,["onUpdate:customerModal","customerModalInfos","customer_id","customer"])):x("",!0),o(yu,{modalAction:e.modalAction,onRefreshAddress:e.refresh,"onUpdate:showAddressModal":a[1]||(a[1]=g=>e.showAddressModal=g),showAddressModal:e.showAddressModal,customer_id:t.customer_id,onAddNewAddress:e.addNewAddress},null,8,["modalAction","onRefreshAddress","showAddressModal","customer_id","onAddNewAddress"]),o(v,{"show-close":!0,modelValue:e.addOrEditAddress,"onUpdate:modelValue":a[4]||(a[4]=g=>e.addOrEditAddress=g),"append-to-body":!0,title:e.getTitle(),onClose:a[5]||(a[5]=()=>{e.closingModal=!0})},{default:r(()=>[i("div",CU,[o(A,{text:"",onClick:a[2]||(a[2]=()=>{e.showAddressModal=!0,e.addOrEditAddress=!1}),class:"mb-4"},{default:r(()=>[o(m,null,{default:r(()=>[o(p(zi))]),_:1}),M(" "+h(e.$t("Manage address")),1)]),_:1}),o(vu,{"onUpdate:refreshAddress":e.refresh,customer_id:t.customer_id,modalAction:e.modalAction,address:e.address,showAddressModal:e.addOrEditAddress,showSetAsAlsoCheckbox:e.shouldShowSetAsAlsoCheckbox,onCloseModal:a[3]||(a[3]=g=>e.addOrEditAddress=!1),closing_modal:e.closingModal},null,8,["onUpdate:refreshAddress","customer_id","modalAction","address","showAddressModal","showSetAsAlsoCheckbox","closing_modal"])])]),_:1},8,["modelValue","title"])])}}}),FU={class:"fct-single-customer-loader-wrap fct-layout-width"},xU={class:"single-page-header fct-page-loader-header flex items-start justify-between"},UU={class:"single-page-body"},EU={class:"fct-single-order"},SU={class:"fct-single-order-main"},QU={class:"fct-single-order-aside"},DU={class:"fct-admin-sidebar"},bf={__name:"SingleCustomerLoader",setup(t){return(e,a)=>{const s=y("el-skeleton-item"),n=y("el-skeleton");return d(),_("div",FU,[i("div",xU,[o(n,{animated:"",class:"flex items-start gap-2"},{template:r(()=>[(d(),_(H,null,q(3,l=>o(s,{key:l,class:"max-w-[100px]"})),64))]),_:1})]),i("div",UU,[i("div",EU,[i("div",SU,[o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{border_bottom:"",title_size:"small",title:e.$t("Orders")},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:5})]),_:1})]),_:1})]),i("div",QU,[i("div",DU,[o(se,null,{default:r(()=>[o(le,{title:e.$t("Customer Informations"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:5})]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{title:e.$t("Labels"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:1})]),_:1})]),_:1})])])])])])}}},$U={key:2},IU={key:0,class:"fct-single-customer-wrapper fct-layout-width"},TU={class:"single-page-header"},MU={class:"single-page-header-title-wrap"},VU={key:0},LU={key:0,class:"single-page-body"},OU={class:"fct-admin-sidebar"},HU={key:0},RU={name:"SingleCustomer",props:["customer_id"],components:{OrdersTable:Ni,IconButton:Be,Empty:Le,DynamicIcon:Y,Badge:dt,SaveBar:yn,CustomerInformation:yf,Labels:Tl,DynamicTemplates:Bn,ArrowDown:ji,ArrowRight:ma,CardContainer:se,CardHeader:le,CardBody:ae,LicenseTable:Pi,OrdersTableMobile:Gi,SubscriptionsTable:Bu,SingleCustomerLoader:bf,SubscriptionsTableMobile:wu},data(){return{changes_made:0,notFound:{show:!1,message:"",buttonText:"",route:""},loading:!1,customer:"",selection:!1,selectedOrders:[],editableOrderStatues:this.appVars.editable_order_statues,selectedLabels:[],licenses:[],subscriptions:[],customerOrders:[],paginate:{current_page:1,per_page:10,last_page:1,total:0,from:1,to:10},fetchingOrders:!1,search:"",showSearch:!1}},watch:{customer_id:{handler(t,e){this.fetch()}}},computed:{},methods:{getProductName(t){var e,a;return(e=t==null?void 0:t.product)!=null&&e.post_title?(a=t==null?void 0:t.product)==null?void 0:a.post_title:"n/a"},getProductVariationName(t){var e,a;return(e=t==null?void 0:t.product_variant)!=null&&e.variation_title?(a=t==null?void 0:t.product_variant)==null?void 0:a.variation_title:"n/a"},onChangeLabel(t){this.selectedLabels=t,this.changes_made++},update(){this.loading=!0,te.put("customers/"+this.customer_id+"/additional-info",{labels:this.selectedLabels}).then(t=>{J.success(t)}).catch(t=>{var e;t.status_code=="422"?J.validationErrors(t):J.error((e=t.data)==null?void 0:e.message)}).finally(()=>{this.loading=!1,this.changes_made=0})},discardChanges(){return window.location.reload()},fetch(){this.notFound.show=!1,this.loading=!0,this.selectedOrders=[],te.get("customers/"+this.customer_id,{with:["shipping_address","billing_address","labels","subscriptions"]}).then(t=>{this.changeTitle(f("Customer: %s",t.customer.full_name)),this.customer=t.customer,this.selectedLabels=t.customer.selected_labels,this.licenses=this.customer.licenses,this.subscriptions=this.customer.subscriptions}).catch(t=>{var e;t.code==="fluent_cart_entity_not_found"?(this.notFound.show=!0,this.notFound.buttonText=we.get(t,"data.buttonText"),this.notFound.message=we.get(t,"data.message"),this.notFound.route=we.get(t,"data.route")):t.status_code=="422"?J.validationErrors(t):J.error((e=t.data)==null?void 0:e.message)}).finally(()=>{this.loading=!1})},getCustomerOrders(){this.fetchingOrders=!0,te.get("customers/"+this.customer_id+"/orders",{per_page:this.paginate.per_page,page:this.paginate.current_page,with:["order_items"],search:this.search,order_by:"id",order_type:"DESC"}).then(t=>{this.customerOrders=t.orders,this.paginate.total=t.orders.total,this.paginate.per_page=t.orders.per_page,this.paginate.current_page=t.orders.current_page,this.paginate.last_page=t.orders.last_page,this.paginate.from=t.orders.from,this.paginate.to=t.orders.to}).catch(t=>{var e;t.status_code=="422"?J.validationErrors(t):J.error((e=t.data)==null?void 0:e.message)}).finally(()=>{this.fetchingOrders=!1})},onSelection(t){this.selection=!!t.length,this.selectedOrders=t,this.selectionCount=t.length},exportOrders(){location.href=window.ajaxurl+"?"+jQuery.param({action:"fluent_cart_admin_ajax",route:"export_orders",customer_id:this.customer_id,search:this.search,format:"csv"})}},mounted(){this.fetch(),this.getCustomerOrders()}},PU=Object.assign(RU,{setup(t){return(e,a)=>{const s=y("el-breadcrumb-item"),n=y("el-breadcrumb"),l=y("el-input"),A=y("el-col"),u=y("el-row");return d(),_(H,null,[e.loading?(d(),U(bf,{key:0})):x("",!0),e.notFound.show?(d(),U(Ll,{key:1,"button-text":e.notFound.buttonText,message:e.notFound.message,route:e.notFound.route},null,8,["button-text","message","route"])):x("",!0),e.notFound.show===!1?(d(),_("div",$U,[e.loading?x("",!0):(d(),_("div",IU,[o(yn,{isActive:e.changes_made>0?"is-active":"",onDiscard:e.discardChanges,onSave:e.update,loading:e.loading},null,8,["isActive","onDiscard","onSave","loading"]),i("div",TU,[i("div",MU,[o(n,{"separator-icon":p(ma)},{default:r(()=>[o(s,{to:{name:"customers"}},{default:r(()=>[M(h(p(f)("Customers")),1)]),_:1}),o(s,null,{default:r(()=>[e.customer?(d(),_("span",VU,h(e.customer.full_name),1)):x("",!0)]),_:1}),o(s,null,{default:r(()=>[M(h(p(f)("Overview")),1)]),_:1})]),_:1},8,["separator-icon"])])]),e.customer.id?(d(),_("div",LU,[o(u,{gutter:30},{default:r(()=>[o(A,{lg:17,xs:24},{default:r(()=>[o(p(se),{class:"overflow-hidden fct-customer-orders-items"},{default:r(()=>[o(p(le),{title:p(f)("Orders")+" ("+p(f)(e.customerOrders.total)+")",title_size:"small"},{action:r(()=>[o(l,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=c=>e.search=c),onKeyup:a[1]||(a[1]=fa(c=>e.getCustomerOrders(),["enter"])),placeholder:p(f)("Type and hit enter..."),clearable:"",onClear:a[2]||(a[2]=c=>e.getCustomerOrders()),class:ne(`w-[210px] ${e.showSearch?"":"search-input-hide-on-mobile"}`)},null,8,["modelValue","placeholder","class"]),o(Be,{tag:"button",size:"small",onClick:a[3]||(a[3]=c=>e.showSearch=!e.showSearch),class:"icon-button-show-on-mobile ml-2"},{default:r(()=>[e.showSearch?(d(),U(Y,{key:0,name:"Cross"})):(d(),U(Y,{key:1,name:"Search"}))]),_:1})]),_:1},8,["title"]),o(p(ae),{class:"px-0 pb-0"},{default:r(()=>[e.fetchingOrders?(d(),U(Px,{key:0,columns:["items","order_items","total","type","status"]})):(d(),_(H,{key:1},[o(Ni,{class:"hide-on-mobile",onFetch:e.getCustomerOrders,orders:e.customerOrders.data,columns:["items","order_items","total","type","status"]},null,8,["onFetch","orders"]),o(Gi,{class:"show-on-mobile",orders:e.customerOrders.data,columns:["items","order_items","total","type","status"]},null,8,["orders"])],64)),e.paginate.total>10?(d(),U(gu,{key:2,onFetch:e.getCustomerOrders,hide_on_single:!1,pagination:e.paginate},null,8,["onFetch","pagination"])):x("",!0)]),_:1})]),_:1}),e.customer.subscriptions?(d(),U(p(se),{key:0,class:"overflow-hidden"},{default:r(()=>[o(p(le),{title:p(f)("Subscriptions")+" ("+e.customer.subscriptions.length+")",title_size:"small"},null,8,["title"]),o(p(ae),{class:"px-0 pb-0"},{default:r(()=>[o(Bu,{class:"hide-on-mobile",subscriptions:e.customer.subscriptions,columns:["next_billing_date","collection_method","bills_count","order_id","payment_method","valid_till"]},null,8,["subscriptions"]),o(wu,{class:"show-on-mobile",subscriptions:e.customer.subscriptions,columns:["next_billing_date","collection_method","bills_count","order_id","payment_method","valid_till"]},null,8,["subscriptions"])]),_:1})]),_:1})):x("",!0),e.customer.licenses?(d(),U(p(se),{key:1,class:"overflow-hidden"},{default:r(()=>[o(p(le),{title:p(f)("Licenses")+" ("+p(f)(e.customer.licenses.length)+")",title_size:"small"},null,8,["title"]),o(p(ae),{class:"px-0 pb-0 fct-single-customer-license-table"},{default:r(()=>[o(Pi,{columns:["product","order_id"],licenses:e.customer.licenses},null,8,["licenses"])]),_:1})]),_:1})):x("",!0)]),_:1}),o(A,{lg:7,xs:24},{default:r(()=>[i("div",OU,[o(yf,{customer:e.customer,customer_id:t.customer_id,onFetch:e.fetch},null,8,["customer","customer_id","onFetch"]),o(Tl,{"bind-to-id":e.customer.id,"bind-to-type":"Customer",selectedLabels:e.selectedLabels,shouldEnableEditing:!0},null,8,["bind-to-id","selectedLabels"]),e.customer?(d(),_("div",HU,[o(Bn,{filter:"customer",widgetsQuery:{customer_id:e.customer.id},data:{customer:e.customer}},null,8,["widgetsQuery","data"])])):x("",!0)])]),_:1})]),_:1})])):x("",!0)]))])):x("",!0)],64)}}}),KU={components:{Empty:Le,Pagination:gu,Badge:dt,DynamicIcon:Y},props:["searchQueryParent","orderParent","order_id"],data(){return{loading:!1,searching:!1,orderAddModal:!1,availableProducts:[],selectedProducts:[],cartItems:[],paginate:{per_page:10,current_page:1,total:0,last_page:1},collapsedStates:null}},computed:{CurrencyFormatter(){return xe},Asset(){return Os},order:{get(){return this.orderParent},set(t){this.$emit("update:order",t)}},searchQuery:{get(){return this.searchQueryParent},set(t){this.$emit("update:searchQuery",t)}}},created(){this.initializeCollapsedStates()},methods:{translate:f,translateNumber:Mt,initializeCollapsedStates(){this.collapsedStates=Array.from({length:this.availableProducts.length},()=>!1)},handleToggleCollapse(t){this.collapsedStates[t]=!this.collapsedStates[t];for(let e=0;e<this.collapsedStates.length;e++)e!==t&&(this.collapsedStates[e]=!1)},hasSubscriptionProduct(t,e){return t.filter(s=>s.variants&&s.variants.other_info&&s.variants.other_info.payment_type===e?!0:!!(s.other_info.payment_type&&s.other_info.payment_type===e)).length>0},validateShouldAddProduct(t){var l;const e=this.order.order_items.map(A=>A.object_id),a=this.selectedProducts.map(A=>A.object_id),s=((l=t==null?void 0:t.other_info)==null?void 0:l.payment_type)==="onetime"?"subscription":"onetime",n=this.order.order_items.length===0;if(n&&this.selectedProducts.length===0)return!0;if(n&&a.includes(t.object_id))return!0;if(!n&&e.includes(t.object_id))return!0;if(n&&!this.hasSubscriptionProduct(this.selectedProducts,s)){if(!this.hasSubscriptionProduct(this.selectedProducts,"subscription"))return!0}else if(!n&&!this.hasSubscriptionProduct(this.order.order_items,s)&&!this.hasSubscriptionProduct(this.order.order_items,"subscription"))return!0;return!1},handleCheckboxChange(t,e){if(e.checked)if(this.validateShouldAddProduct(e))this.selectedProducts.push(e);else return e.checked=!1,J.error(f("You can purchase one subscription at a time."));else{const a=this.selectedProducts.findIndex(s=>s.id===e.id);if(a!==-1)return this.selectedProducts.splice(a,1)}},onCurrentPageChanged({page:t,currentPageCount:e}){this.paginate.current_page=t,this.doSearch()},onPerPageChanged(t){this.paginate.per_page=t,this.doSearch()},isAlreadyAdded(t){return this.order.order_items?this.order.order_items.some(e=>parseInt(e.object_id)===parseInt(t)):!1},isNotParentVariant(t){return!t.children||t.children.length<1},handleSelectionChanges(t){this.selectedProducts=t},processProducts(){let t={};this.order.order_items&&this.order.order_items.length&&this.order.order_items.forEach((a,s)=>{t[a.object_id]=a}),this.selectedProducts&&this.selectedProducts.forEach((a,s)=>{t[a.object_id]?t[a.object_id].quantity++:(a.tax_amount=parseInt(a.tax_amount)||0,a.shipping_charge=parseInt(a.shipping_charge)||0,a.discount_total=parseInt(a.discount_total)||0,a.quantity=parseInt(a.quantity)||1,t[a.object_id]=a),t[a.object_id].updated_stock=parseInt(a.available),t[a.object_id].total=parseInt(t[a.object_id].price)*parseInt(t[a.object_id].quantity),t[a.object_id].line_total=parseInt(t[a.object_id].total)-parseInt(t[a.object_id].discount_total)+parseInt(t[a.object_id].tax_amount)}),this.order.order_items=[];let e=0;for(const a in t)if(this.order.order_items.push(t[a]),e+=parseInt(t[a].line_total),t[a].payment_type==="subscription"&&t[a].other_info.manage_setup_fee==="yes"){let s=parseInt(t[a].other_info.signup_fee);t[a].other_info.setup_fee_per_item==="yes"&&(s=s*t[a].quantity),e+=s}return this.order.subtotal=e,this.order.total_amount=e+parseInt(this.order.tax_total)+parseInt(this.order.shipping_total)-parseInt(this.order.manual_discount_total),this.orderAddModal=!1,this.searchQuery="",this.selectedProducts=[],!0},fetchBySearch(){this.loading=!0,this.searching=!0,this.orderAddModal=!0;let t=this;de(()=>{setTimeout(()=>{t.$refs.fc_product_search_new.ref.focus()},50)}),clearTimeout(this.timeout);const e=this;this.timeout=setTimeout(function(){e.doSearch()},700)},doSearch(){this.loading=!0;let t={active_view:"publish",per_page:this.paginate.per_page,page:this.paginate.current_page,search:this.searchQuery,filter_type:"simple",sort_by:"ID",with:["detail.variants.media","categories"]};te.get("products/",{...t}).then(e=>{let a={...e.products};this.availableProducts=wp(a.data,this.order_id),delete a.data,this.paginate=a,this.searching=!1}).catch(e=>{var a;e.status_code=="422"?J.validationErrors(e):J.error((a=e.data)==null?void 0:a.message)}).finally(()=>{this.loading=!1})},formatCapitalized(t){return bp(t)}}},NU={class:"fluent-cart-admin-pages"},GU={class:"-mx-5 pb-5 border border-solid border-t-0 border-x-0 border-gray-divider dark:border-dark-400"},jU={class:"px-5"},zU={class:"fc_product_search_table",ref:"fc_product_search_table"},YU={class:"fct-collapsible-list"},qU={class:"fct-collapsible-list-item-inner"},WU={class:"fct-collapsible-item"},XU={class:"fct-collapsible-content-wrapper"},JU=["onClick"],ZU={key:1,class:"content-indent"},eE={class:"content-checkbox"},tE={class:"content-img"},aE=["src","alt"],sE={class:"content-title"},nE={class:"title"},oE={key:0,class:"text-gray-500 dark:text-gray-400"},lE={key:1,class:"text"},rE={key:0,class:"fct-collapsible-stock-wrapper"},iE={key:0},AE={key:1,class:"text-red-500"},dE={class:"fct-collapsible-value-wrapper"},uE={key:0},cE={key:1},fE={class:"fct-collapsible-item-child-inner"},pE={class:"fct-collapsible-item"},mE={class:"fct-collapsible-content-wrapper"},hE={class:"content-checkbox"},_E={class:"content-img"},gE=["src","alt"],vE={class:"content-title"},yE={class:"title"},bE={key:0,class:"text"},wE={key:0},BE={key:1,class:"text already-added"},CE={class:"fct-collapsible-stock-wrapper"},kE={key:0},FE={key:1,class:"text-red-500"},xE={class:"fct-collapsible-value-wrapper"},UE={class:"-mx-5 -mb-5 fc_product_search_pagination_wrap"},EE={class:"dialog-footer"};function SE(t,e,a,s,n,l){const A=y("DynamicIcon"),u=y("el-input"),c=y("el-skeleton"),m=y("el-checkbox"),v=y("Empty"),b=y("pagination"),g=y("el-button"),F=y("el-dialog");return d(),_("div",NU,[o(F,{class:"fct-add-product-item-modal",ref:"fc_product_search_container",onClose:e[3]||(e[3]=B=>l.searchQuery=""),modelValue:n.orderAddModal,"onUpdate:modelValue":e[4]||(e[4]=B=>n.orderAddModal=B),title:t.$t("Add Items")},{default:r(()=>[i("div",GU,[i("div",jU,[o(u,{placeholder:t.$t("Search products"),autofocus:"",ref:"fc_product_search_new",onInput:e[0]||(e[0]=B=>l.fetchBySearch()),modelValue:l.searchQuery,"onUpdate:modelValue":e[1]||(e[1]=B=>l.searchQuery=B),clearable:""},{prefix:r(()=>[o(A,{name:"Search"})]),_:1},8,["placeholder","modelValue"])])]),i("div",zU,[o(c,{class:"px-5 py-4",loading:n.loading,rows:5,animated:""},null,8,["loading"]),n.loading?x("",!0):(d(),_(H,{key:0},[i("ul",YU,[(d(!0),_(H,null,q(n.availableProducts,(B,w)=>{var C,k,S,E,V,$,O,D,Q;return d(),_("li",{class:"fct-collapsible-list-item",key:w},[i("div",qU,[i("div",WU,[i("div",XU,[((C=B==null?void 0:B.children)==null?void 0:C.length)>0?(d(),_("div",{key:0,class:ne(["content-collapsible-btn",{"is-collapsed":n.collapsedStates[w]}]),onClick:I=>l.handleToggleCollapse(w)},[o(A,{name:"CaretRight",class:"w-4 h-5"})],10,JU)):x("",!0),!((k=B==null?void 0:B.children)!=null&&k.length)>0?(d(),_("div",ZU)):x("",!0),i("div",eE,[o(m,{modelValue:B.checked,"onUpdate:modelValue":I=>B.checked=I,onChange:I=>l.handleCheckboxChange(w,B),disabled:B.disable===!0||l.isAlreadyAdded(B.object_id)},null,8,["modelValue","onUpdate:modelValue","onChange","disabled"])]),i("div",tE,[i("img",{src:B.featured_media!=null?B.featured_media:l.Asset.getUrl("images/placeholder-small.svg"),alt:B.title},null,8,aE)]),i("div",sE,[i("div",nE,h(B.post_title),1),((S=B==null?void 0:B.other_info)==null?void 0:S.payment_type)==="subscription"&&((E=B.other_info)==null?void 0:E.billing_summary)!==""?(d(),_("small",oE,h((V=B.other_info)==null?void 0:V.billing_summary),1)):x("",!0),l.isAlreadyAdded(B.object_id)?(d(),_("div",lE,h(t.$t("Item already added")),1)):x("",!0)])]),(($=B==null?void 0:B.children)==null?void 0:$.length)==0?(d(),_("div",rE,[B.stockStatus=="in-stock"?(d(),_("span",iE,h(B.available!==1/0?B.available+l.translate(" Available"):l.translate("Unlimited")),1)):x("",!0),B.stockStatus==="out-of-stock"?(d(),_("span",AE,h(l.formatCapitalized(B.stockStatus)),1)):x("",!0)])):x("",!0),i("div",dE,[((O=B==null?void 0:B.children)==null?void 0:O.length)>0?(d(),_("span",uE,h(B.min_price!=B.max_price?t.formatNumber(B.min_price)+" - "+t.formatNumber(B.max_price):t.formatNumber(B.min_price)),1)):(d(),_("span",cE,h(t.formatNumber(B.price)),1))])]),((D=B==null?void 0:B.children)==null?void 0:D.length)>0?(d(),_("div",{key:0,class:ne(["fct-collapsible-item-child-container",{"is-collapsed":n.collapsedStates[w]}])},null,2)):x("",!0),((Q=B==null?void 0:B.children)==null?void 0:Q.length)>0?(d(),_("div",{key:1,class:ne(["fct-collapsible-item-child-container",{"is-collapsed":n.collapsedStates[w]}])},[i("ul",fE,[(d(!0),_(H,null,q(B.children,(I,L)=>{var K,N,W,R,ee;return d(),_("li",{key:L},[i("div",pE,[i("div",mE,[i("div",hE,[o(m,{modelValue:I.checked,"onUpdate:modelValue":oe=>I.checked=oe,onChange:oe=>l.handleCheckboxChange(L,I),disabled:I.disable===!0||l.isAlreadyAdded(I.object_id)},null,8,["modelValue","onUpdate:modelValue","onChange","disabled"])]),i("div",_E,[i("img",{src:I.featured_media!=null?I.featured_media:t.appVars.asset_url+"images/placeholder-small.svg",alt:I.title},null,8,gE)]),i("div",vE,[i("div",yE,h(I.title),1),((K=I==null?void 0:I.other_info)==null?void 0:K.payment_type)==="subscription"&&((N=I.other_info)==null?void 0:N.billing_summary)!==""?(d(),_("small",bE,[M(h(l.CurrencyFormatter.currencySign)+" "+h((W=I.other_info)==null?void 0:W.billing_summary)+" ",1),((R=I.other_info)==null?void 0:R.trial_days)>0?(d(),_("span",wE,[e[5]||(e[5]=i("br",null,null,-1)),M(" "+h(l.translate("Trial Days"))+": "+h((ee=I.other_info)==null?void 0:ee.trial_days),1)])):x("",!0)])):x("",!0),l.isAlreadyAdded(I.object_id)?(d(),_("div",BE,h(l.translate("Item already added")),1)):x("",!0)])]),i("div",CE,[I.stockStatus=="in-stock"?(d(),_("span",kE,h(I.available!==1/0?l.translateNumber(I.available)+l.translate(" Available"):l.translate("Unlimited")),1)):x("",!0),I.stockStatus=="out-of-stock"?(d(),_("span",FE,h(l.formatCapitalized(I.stockStatus)),1)):x("",!0)]),i("div",xE,h(t.formatNumber(I.price)),1)])])}),128))])],2)):x("",!0)])])}),128))]),n.availableProducts.length===0?(d(),U(v,{key:0,icon:"Empty/ListView",text:l.translate("We could't find any products matching your search.")},null,8,["text"])):x("",!0)],64))],512),i("div",UE,[o(b,{pagerSizes:!1,hide_on_single:!1,pagination:n.paginate,onFetch:l.doSearch,onCurrentPageChanged:l.onCurrentPageChanged,onOnPerPageChanged:l.onPerPageChanged},null,8,["pagination","onFetch","onCurrentPageChanged","onOnPerPageChanged"])]),i("div",EE,[o(g,{onClick:e[2]||(e[2]=B=>n.orderAddModal=!1)},{default:r(()=>[M(h(l.translate("Cancel")),1)]),_:1}),o(g,{disabled:!this.selectedProducts.length,type:"primary",onClick:l.processProducts},{default:r(()=>[M(h(l.translate("Add Items")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["modelValue","title"])])}const wf=ye(KU,[["render",SE]]),QE={key:0,class:"fct-downloadable-variation-selector"},DE={class:"price-info"},$E={key:0},Sl={__name:"VariationSelector",props:{variant:{type:Object,required:!0}},setup(t){return(e,a)=>{var s;return t.variant?(d(),_("div",QE,[i("span",null,h(t.variant.variation_title),1),i("span",DE,[(s=t.variant.other_info)!=null&&s.repeat_interval?(d(),_("span",$E,h(p(nt).capitalize(t.variant.other_info.repeat_interval)),1)):x("",!0),i("span",null,h(p(st)(t.variant.item_price*100,!0)),1)])])):x("",!0)}}},IE={name:"Refund",components:{Badge:dt,VariationSelector:Sl,DynamicIcon:Y},props:["order_id","order","is_subscription","subscription_status","showRefundModal"],data(){return{transactions:{},maxRefundAmount:"",refundProcessing:!1,refundableTransactions:[],isShippingRefundable:!1,refund:{item_ids:[],transaction_id:"",amount:0,cancelSubscription:!0,reason:"",availableAmount:"",paymentMethod:"",manageStock:!1},totalPaid:0,refundNote:""}},computed:{CurrencyFormatter(){return xe},isAnyProductManageStock(){var t;for(const e of this.order.order_items)if(e!=null&&e.variants&&((t=e==null?void 0:e.variants)==null?void 0:t.manage_stock)==="1")return!0;return!1},isSubscriptionCancelable(){return this.is_subscription&&this.subscription_status!=="canceled"&&this.subscription_status!=="expired"},checkMaxRefundAmount(){this.refund.amount>this.maxRefundAmount&&(this.refund.amount=this.maxRefundAmount)},refundTableItems(){let t=[];return!this.refund.item_ids||this.refund.item_ids.length===0?t=this.order.order_items.filter(e=>e.payment_type!=="signup_fee"):t=this.order.order_items.filter(e=>this.refund.item_ids.includes(e.id)&&e.payment_type!=="signup_fee"),t.map(e=>({...e,restore_quantity:e.restore_quantity||0,refund_quantity:Number(e.refund_total)||0}))}},watch:{showRefundModal(t){this.refundNote=""},"order.order_items":{immediate:!0,handler(t){const e=t.filter(a=>Number(a.line_total)-Number(a.refund_total)>0);e.length===1?this.refund.item_ids=[e[0].id]:this.refund.item_ids=[]}}},methods:{translate:f,formatNumber:st,updateMaxRefund(){const t=this.refund.transaction_id;let e=this.refundableTransactions.find(n=>n.id===t);this.refund.amount=e.refundable?parseFloat(e.refundable/100):0,this.refund.paymentMethod=e.payment_method;const a=we.whereIn(this.order.order_items,"id",this.refund.item_ids),s=a.reduce((n,l)=>n+(l.line_total-l.refund_total)/100,0);this.refund.amount>s&&a.length>0&&(this.refund.amount=s),this.maxRefundAmount=this.refund.amount},updateRefundable(){this.refundableTransactions=this.transactions.filter(t=>t.status==="succeeded").map(t=>{var e;return{...t,refundable:t.total-(parseInt((e=t.meta)==null?void 0:e.refunded_total)||0)}}),this.refundableTransactions.length!==0&&(this.refund.transaction_id=this.refundableTransactions[0].id,this.refund.payment_method=this.refundableTransactions[0].payment_method,this.updateMaxRefund(this.refund.transaction_id))},processRefund(){if(this.refundProcessing=!0,!this.refund.amount)return this.refundProcessing=!1,this.handleMessage("Please add refund amount.","error");if(this.refund.amount>this.refund.availableAmount)return this.refundProcessing=!1,this.handleMessage(`Refund amount should not exceed: ${this.appVars.shop.currency_sign}${this.refund.availableAmount}`,"error");const t=this.refundTableItems.filter(e=>e.restore_quantity>0).map(e=>({id:e.id,variation_id:e.object_id,quantity:e.quantity,restore_quantity:e.restore_quantity}));this.refund.refunded_items=t,this.$post("orders/"+this.order_id+"/refund",{refund_info:this.refund,refunded_items:t}).then(e=>{this.refundNote=e}).catch(e=>{this.handleError(e)}).finally(()=>{this.updateRefundable(),this.refundProcessing=!1})}},mounted(){var t,e,a;this.refund.availableAmount=parseInt((t=this==null?void 0:this.order)==null?void 0:t.total_paid)-parseInt((e=this==null?void 0:this.order)==null?void 0:e.total_refund),this.transactions=(a=this.order)==null?void 0:a.transactions,this.transactions.length&&this.updateRefundable()}},TE={key:0,class:"fct-refund-note-list"},ME={class:"message"},VE={key:1},LE={class:"refund-item-info"},OE={class:"right"},HE={class:"price"},RE={class:"price light"},PE=["innerHTML"],KE={class:"form-note"},NE={style:{color:"#F04438","font-weight":"500"}},GE={class:"form-note form-note-tooltip"},jE={class:"dialog-footer is-border"},zE={key:0};function YE(t,e,a,s,n,l){const A=y("Badge"),u=y("el-option"),c=y("el-select"),m=y("el-form-item"),v=y("el-input"),b=y("el-checkbox"),g=y("el-col"),F=y("el-table-column"),B=y("el-input-number"),w=y("el-table"),C=y("DynamicIcon"),k=y("el-tooltip"),S=y("el-row"),E=y("el-form"),V=y("el-button");return d(),_("div",null,[n.refundNote?(d(),_("div",TE,[(d(!0),_(H,null,q(n.refundNote,($,O)=>(d(),_("div",{key:O,class:"fct-refund-note-item"},[i("span",ME,h($.message),1),o(A,{status:$.status},null,8,["status"])]))),128))])):(d(),_("div",VE,[o(E,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(S,{gutter:10},{default:r(()=>[o(g,{lg:24},{default:r(()=>[o(m,{label:t.$t("Refund with transaction"),required:""},{default:r(()=>[o(c,{modelValue:n.refund.transaction_id,"onUpdate:modelValue":e[0]||(e[0]=$=>n.refund.transaction_id=$),placeholder:t.$t("Select"),onChange:l.updateMaxRefund},{default:r(()=>[(d(!0),_(H,null,q(n.refundableTransactions,$=>(d(),U(u,{key:$.id,label:l.translate("#%1$s - Paid %2$s",$.id,l.CurrencyFormatter.formatNumber($.refundable,!0)),value:$.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])]),_:1},8,["label"]),o(m,{label:t.$t("Select Item/s")},{default:r(()=>[o(c,{modelValue:n.refund.item_ids,"onUpdate:modelValue":e[1]||(e[1]=$=>n.refund.item_ids=$),placeholder:t.$t("Select"),multiple:"",onChange:l.updateMaxRefund},{default:r(()=>[(d(!0),_(H,null,q(a.order.order_items,$=>(d(),U(u,{key:$.id,value:$.id,label:$.post_title+" - "+$.title+"  "+l.CurrencyFormatter.formatNumber($.line_total-$.refund_total),class:"refund-item",disabled:Number($.line_total)-Number($.refund_total)<=0},{default:r(()=>[i("div",LE,[i("p",null,[M(h($.post_title)+" ",1),i("span",null,"-"+h($.title),1)]),i("div",OE,[i("span",HE,h(l.translate("Refundable: %s",l.CurrencyFormatter.formatNumber($.line_total-$.refund_total))),1),i("span",RE,h(l.translate("Item price: %s",l.CurrencyFormatter.formatNumber($.line_total))),1)])])]),_:2},1032,["value","label","disabled"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])]),_:1},8,["label"]),o(g,{lg:24},{default:r(()=>[o(m,{label:t.$t("Refund amount"),required:""},{default:r(()=>[o(v,{type:"number",min:1,max:n.maxRefundAmount,modelValue:n.refund.amount,"onUpdate:modelValue":e[2]||(e[2]=$=>n.refund.amount=$),modelModifiers:{number:!0},onInput:l.checkMaxRefundAmount},{prefix:r(()=>[i("span",{innerHTML:l.CurrencyFormatter.currencySign},null,8,PE)]),_:1},8,["max","modelValue","onInput"]),i("div",KE,[i("p",null,[M(h(t.$t("Max refund amount for this transaction:"))+" ",1),i("span",NE,h(l.CurrencyFormatter.formatNumber(n.maxRefundAmount*100)),1)])])]),_:1},8,["label"]),l.isSubscriptionCancelable?(d(),U(g,{key:0,lg:24},{default:r(()=>[o(m,{label:t.$t("Subscription")},{default:r(()=>[o(b,{label:t.$t("Cancel Subscription (if any)"),modelValue:n.refund.cancelSubscription,"onUpdate:modelValue":e[3]||(e[3]=$=>n.refund.cancelSubscription=$)},null,8,["label","modelValue"])]),_:1},8,["label"])]),_:1})):x("",!0),l.isAnyProductManageStock?(d(),U(g,{key:1,lg:24},{default:r(()=>[o(m,null,{default:r(()=>[o(b,{modelValue:n.refund.manageStock,"onUpdate:modelValue":e[4]||(e[4]=$=>n.refund.manageStock=$)},{default:r(()=>[M(h(t.$t("Restock Quantity")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})):x("",!0),n.refund.manageStock?(d(),U(g,{key:2,lg:24},{default:r(()=>[o(w,{data:l.refundTableItems,border:"",style:{width:"100%","margin-top":"15px"}},{default:r(()=>[o(F,{prop:"post_title",label:t.$t("Product"),"min-width":"200"},{default:r(({row:$})=>[i("span",null,h($.post_title)+" - "+h($.title),1)]),_:1},8,["label"]),o(F,{prop:"quantity",label:t.$t("Quantity"),width:"120",align:"center"},{default:r(({row:$})=>[i("span",null,h($.quantity),1)]),_:1},8,["label"]),o(F,{label:t.$t("Restore Quantity"),width:"180",align:"center"},{default:r(({row:$})=>[o(B,{modelValue:$.restore_quantity,"onUpdate:modelValue":O=>$.restore_quantity=O,min:0,max:$.quantity},null,8,["modelValue","onUpdate:modelValue","max"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})):x("",!0),o(g,{lg:24},{default:r(()=>[o(m,{label:t.$t("Reason of refund")},{default:r(()=>[o(v,{modelValue:n.refund.reason,"onUpdate:modelValue":e[5]||(e[5]=$=>n.refund.reason=$)},null,8,["modelValue"]),i("div",GE,[i("p",null,[M(h(l.translate("Your customers can see this reason"))+" ",1),i("span",null,[o(k,{"popper-class":"fct-tooltip",placement:"top",content:l.translate("If set, possible values are duplicate fraudulent, and requested_by_customer If you believe the charge to be fraudulent, specifying fraudulent as the reason will add the associated card and email to your block lists")},{default:r(()=>[o(C,{name:"InformationFill"})]),_:1},8,["content"])])])])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i("div",jE,[o(V,{type:"primary",onClick:Ke(l.processRefund,["prevent"]),loading:n.refundProcessing,disabled:n.refund.amount<=0},{default:r(()=>[M(h(n.refundProcessing?l.translate("Processing"):l.translate("Refund"))+" ",1),n.refund.amount?(d(),_("span",zE)):x("",!0),M(h(l.CurrencyFormatter.formatNumber(n.refund.amount*100)),1)]),_:1},8,["onClick","loading","disabled"])])]))])}const qE=ye(IE,[["render",YE]]),WE={class:"fct-number-input"},XE=["disabled","min","max"],JE={class:"fct-number-input-buttons"},ZE=["disabled"],eS=["disabled"],tS={style:{color:"red"}},Bf={__name:"NumberInput",props:{min:{type:Number,default:1},max:{type:Number,default:999999},item:{type:Object,default:()=>({})},isDisabled:{type:Boolean,default:!1}},setup(t,{emit:e}){var k,S,E,V,$;const a=e,s=t,n=T(""),l=()=>{var O,D,Q,I;return(((O=s.item)==null?void 0:O.manage_stock)||((I=(Q=(D=s.item)==null?void 0:D.variants)==null?void 0:Q.product_detail)==null?void 0:I.manage_stock))==1},A=T(((k=s.item)==null?void 0:k.quantity)||s.min),u=T(A.value),c=T(l()?((S=s.item)==null?void 0:S.available)||((V=(E=s.item)==null?void 0:E.variants)==null?void 0:V.available):s.max),m=T(l()?($=s.item)==null?void 0:$.updated_stock:s.max);Xe().ctx;const v=X(()=>u.value<=s.min),b=X(()=>u.value>=m.value),g=()=>{n.value="",u.value<m.value&&(A.value++,u.value=A.value,a("update:value",A.value,m.value,s.item))},F=()=>{n.value="",u.value>s.min&&(A.value--,u.value=A.value,a("update:value",A.value,m.value,s.item))},B=(O,D)=>{n.value="",u.value=parseInt(u.value),(isNaN(u.value)||u.value==="")&&(A.value=1),u.value<s.min?(A.value=s.min,u.value=A.value):u.value>s.max?(A.value=s.min,u.value=A.value,n.value=f("Unable to adjust quantity")):u.value>m.value?(A.value=m.value,u.value=A.value,n.value=f("Available: %s in stock",m.value)):u.value>=s.min&&(u.value===m.value||u.value<m.value)&&(A.value=u.value,u.value=A.value),a("update:value",A.value,m.value,s.item)},w=O=>{O.key==="ArrowDown"&&u.value<=s.min&&O.preventDefault()},C=()=>{var O,D,Q,I,L;n.value="",A.value=((O=s.item)==null?void 0:O.quantity)||s.min,u.value=A.value,c.value=l()?((D=s.item)==null?void 0:D.available)||((I=(Q=s.item)==null?void 0:Q.variants)==null?void 0:I.available):s.max,m.value=l()?(L=s.item)==null?void 0:L.updated_stock:s.max};return Rs(()=>{C()}),ce(()=>s.item,O=>{C()},{deep:!0}),(O,D)=>(d(),_(H,null,[i("div",WE,[At(i("input",{disabled:t.isDisabled,"onUpdate:modelValue":D[0]||(D[0]=Q=>u.value=Q),type:"number",onInput:D[1]||(D[1]=Q=>{B()}),min:t.min,max:t.max,onKeydown:w},null,40,XE),[[cp,u.value,void 0,{number:!0}]]),i("div",JE,[i("button",{onClick:g,class:"increment-btn",disabled:b.value||t.isDisabled},[o(Y,{name:"ChevronUp"})],8,ZE),i("button",{onClick:F,class:"decrement-btn",disabled:v.value||t.isDisabled},[o(Y,{name:"ChevronDown"})],8,eS)])]),i("span",tS,h(n.value),1)],64))}},aS={name:"PaymentLink",props:["order","order_id"],data(){return{fetchLink:!1,selectedMethod:"stripe",business_email:"",buyer_email:"",selectedTransaction:"0",use_vendor_checkout:!1,vendor_url:null,transactionIds:[],actionName:"copy",paymentUrl:"",paymentMethods:[{value:"stripe",label:"Stripe"},{value:"paypal",label:"PayPal"}]}},computed:{DynamicIcon(){return Y},adminUrl(){return $e.get("admin_url")}},components:{IconButton:Be,DynamicIcon:Y,CopyToClipboard:Ca,InfoFilled:Aa},methods:{translate:f,updatePaymentLink(t){t?this.searchOldUrl():this.paymentUrl=this.order.custom_checkout_url},getPaymentLink(){this.fetchLink=!0,this.$get("orders/"+this.order_id+"/transactions/get_payment_link",{data:{method:this.selectedMethod,transaction:0,use_vendor_checkout:this.use_vendor_checkout,business_email:this.business_email,buyer_email:this.buyer_email}}).then(t=>{var e,a;this.vendor_url=(e=t==null?void 0:t.data)==null?void 0:e.redirect_to,this.paymentUrl=(a=t==null?void 0:t.data)==null?void 0:a.redirect_to,this.fetchLink=!1}).catch(t=>{this.handleError(t),this.fetchLink=!1,this.$emit("reload")})},makeSelectableId(){this.transactionIds=[],this.order.transactions.forEach(t=>{t.status!=="paid"&&this.transactionIds.push({label:t.id,value:t.id})})},searchOldUrl(){var e,a;this.selectedTransaction=this.transactionIds[this.transactionIds.length-1].value;const t=this.order.transactions.filter(s=>s.id==this.selectedTransaction&&s.payment_method==this.selectedMethod);this.paymentUrl=(a=(e=t[0])==null?void 0:e.meta)==null?void 0:a.payment_link},generatePaymentUrl(){this.paymentUrl=this.order.custom_checkout_url}},mounted(){this.makeSelectableId(),this.generatePaymentUrl()}},sS=["element-loading-text"],nS={class:"fct-payment-link-block"},oS={key:1,class:"fct-payment-link-block"};function lS(t,e,a,s,n,l){const A=y("CopyToClipboard"),u=y("el-button"),c=y("el-input"),m=y("el-form-item"),v=y("el-col"),b=y("el-row"),g=Et("loading");return At((d(),_("div",{class:"fct-payment-link grid gap-5","element-loading-text":l.translate("Please wait, Generating Payment link...")},[i("div",nS,[n.paymentUrl?(d(),U(A,{key:0,text:n.paymentUrl,tooltipText:l.translate("Copy Link"),placeholder:l.translate("No payment link available,Please setup custom checkout page!")},null,8,["text","tooltipText","placeholder"])):(d(),U(u,{key:1,target:"_blank",link:"",tag:"router-link",to:{name:"pages_setup"}},{default:r(()=>[M(h(l.translate("Create a custom checkout page to generate custom links.")),1)]),_:1}))]),n.selectedMethod==="paypal"&&n.use_vendor_checkout?(d(),U(b,{key:0,class:"el-form--label-top",gutter:20},{default:r(()=>[o(v,{md:24,lg:11},{default:r(()=>[o(m,{label:l.translate("PayPal Business/Seller Email")},{default:r(()=>[o(c,{modelValue:n.business_email,"onUpdate:modelValue":e[0]||(e[0]=F=>n.business_email=F),placeholder:"Enter your PayPal business/seller email"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(v,{md:24,lg:11},{default:r(()=>[o(m,{label:l.translate("PayPal Buyer Email (optional)")},{default:r(()=>[o(c,{modelValue:n.buyer_email,"onUpdate:modelValue":e[1]||(e[1]=F=>n.buyer_email=F),placeholder:"Enter The buyer email"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})):x("",!0),n.use_vendor_checkout?(d(),_("div",oS,[o(u,{type:"primary",onClick:l.getPaymentLink},{default:r(()=>[M(h(l.translate("Create new transaction & link")),1)]),_:1},8,["onClick"])])):x("",!0)],8,sS)),[[g,n.fetchLink]])}const rS=ye(aS,[["render",lS]]),iS={data(){return{showModal:!1,activity:{}}},components:{ConvertedTime:Vt,DynamicIcon:Y,IconButton:Be,Badge:dt},props:["activities","showManageActivity"],methods:{deleteModal(t){this.showModal=!0,this.activity=t},deleteActivity(){this.showModal=!1,this.$del("activity/"+this.activity.id,{}).then(t=>{var e;this.handleSuccess((e=t==null?void 0:t.data)==null?void 0:e.message),this.$emit("reload")})}}},AS={class:"fluent-cart-order-activity-list"},dS={class:"fluent-cart-order-activity-complete-icon"},uS={class:"fluent-cart-order-activity-details-container"},cS={class:"date-value"},fS={class:"event-title"},pS=["innerHTML"],mS={key:0,class:"delete-activity-button"},hS={key:0,class:"p-4 text-center"},_S={class:"fct-delete-activity-content-heading"},gS={class:"fct-delete-activity-content"},vS={class:"title"},yS={class:"text"},bS={class:"dialog-footer is-border"};function wS(t,e,a,s,n,l){const A=y("DynamicIcon"),u=y("ConvertedTime"),c=y("el-tag"),m=y("IconButton"),v=y("el-button"),b=y("el-dialog");return d(),_("div",AS,[(d(!0),_(H,null,q(a.activities,g=>(d(),_("div",{class:"fluent-cart-order-activity",key:g.id},[i("div",dS,[o(A,{name:"Check"})]),i("div",uS,[i("div",{class:ne(`fluent-cart-order-activity-details fluent-cart-order-activity-status-${g.status}`)},[i("span",cS,[o(u,{"date-time":g.created_at},null,8,["date-time"])]),i("div",fS,[i("span",null,h(t.$t(g.title)),1),o(c,{type:"info"},{default:r(()=>[M(h(g.created_by),1)]),_:2},1024)]),i("div",{class:"event-text",innerHTML:g.content},null,8,pS)],2),a.showManageActivity?(d(),_("div",mS,[o(m,{onClick:F=>l.deleteModal(g),size:"x-small",hover:"info"},{default:r(()=>[o(A,{name:"Delete"})]),_:2},1032,["onClick"])])):x("",!0)])]))),128)),a.activities.length?x("",!0):(d(),_("div",hS,h(t.$t("No activity found.")),1)),o(b,{title:t.$t("Delete Activity"),modelValue:n.showModal,"onUpdate:modelValue":e[1]||(e[1]=g=>n.showModal=g),"append-to-body":!0},{default:r(()=>[i("div",_S,h(t.$t("Are you sure, you want to delete this activity?")),1),i("div",gS,[i("div",vS,[M(" #"+h(this.activity.id)+" "+h(this.activity.title)+" ",1),i("span",null,"by"+h(n.activity.created_by),1)]),i("div",yS,h(this.activity.content),1)]),i("div",bS,[o(v,{onClick:e[0]||(e[0]=g=>n.showModal=!1),size:"small"},{default:r(()=>[M(h(t.$t("Cancel")),1)]),_:1}),o(v,{type:"primary",onClick:l.deleteActivity,size:"small"},{default:r(()=>[M(h(t.$t("Yes! Delete")),1)]),_:1},8,["onClick"])])]),_:1},8,["title","modelValue"])])}const Cf=ye(iS,[["render",wS]]),BS={class:"fct-single-order-loader-wrap fct-layout-width"},CS={class:"single-page-header fct-page-loader-header flex items-start justify-between"},kS={class:"single-page-body"},FS={class:"fct-single-order"},xS={class:"fct-single-order-main"},US={class:"fct-single-order-aside"},ES={class:"fct-admin-sidebar"},SS={__name:"SingleOrderLoader",setup(t){return(e,a)=>{const s=y("el-skeleton-item"),n=y("el-skeleton");return d(),_("div",BS,[i("div",CS,[o(n,{animated:"",class:"flex flex-col items-start gap-2"},{template:r(()=>[o(s,{class:"max-w-180"}),o(s,{class:"max-w-[100px]"})]),_:1}),o(n,{animated:"",class:"flex gap-2 max-w-180"},{template:r(()=>[o(s,{class:"w-1/4"}),o(s,{class:"w-3/4"})]),_:1})]),i("div",kS,[i("div",FS,[i("div",xS,[o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{border_bottom:"",title:e.$t("Order items")},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:3})]),_:1})]),_:1}),o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{border_bottom:"",title:e.$t("Payments")},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:3})]),_:1})]),_:1}),o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{border_bottom:"",title:e.$t("Transaction Details")},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:3})]),_:1})]),_:1}),o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{border_bottom:"",title:e.$t("Activity")},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:3})]),_:1})]),_:1})]),i("div",US,[i("div",ES,[o(se,null,{default:r(()=>[o(le,{title:e.$t("Notes"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:1})]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{title:e.$t("Customer Information"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:3})]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{title:e.$t("Labels"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:1})]),_:1})]),_:1})])])])])])}}},QS={name:"_Plans.vue",components:{Badge:dt},data(){return{}},props:["subscription","header","order","getOrderUrl"],computed:{subscriptionStatus(){var t;return(t=this.subscription)==null?void 0:t.status}},methods:{translate:f}},DS={class:"fct-subscription-plan-wrap"},$S={class:"fct-subs-status-wrap float-end"},IS={class:"fct-subs-title underline"},TS=["innerHTML"],MS={key:0,class:"cursor-pointer"};function VS(t,e,a,s,n,l){var c,m,v,b;const A=y("Badge"),u=y("router-link");return d(),_("div",DS,[i("div",$S,[o(A,{status:l.subscriptionStatus},null,8,["status"])]),o(u,{to:{name:"view_subscription",params:{subscription_id:(c=a.subscription)==null?void 0:c.id}}},{default:r(()=>{var g;return[i("p",IS,h(t.$t((g=a.subscription)==null?void 0:g.item_name)),1)]}),_:1},8,["to"]),i("p",{innerHTML:(m=a.subscription)==null?void 0:m.payment_info},null,8,TS),parseInt((v=a.order)==null?void 0:v.parent_id)?(d(),_("p",MS,[M(h(l.translate("Parent Order:"))+" ",1),i("a",{onClick:e[0]||(e[0]=g=>{var F;return a.getOrderUrl((F=a.order)==null?void 0:F.parent_id)})},"#"+h((b=a.order)==null?void 0:b.parent_id),1)])):x("",!0)])}const kf=ye(QS,[["render",VS]]),LS={name:"SubscriptionPlanItem",props:["subscription","order","orderId","index","getOrderUrl"],emits:["reload","fetchOrder","cancelSubscription"],components:{CardContainer:se,CardHeader:le,CardBody:ae,Plans:kf,Refresh:Yi,Delete:Ds,DynamicIcon:Y,CancelSubscription:Up},data(){return{loadingState:{pause:!1,resume:!1,cancel:!1,fetch:!1,reactivate:!1},cancelSubscriptionModal:!1,cancelReason:""}},computed:{permissions(){var a,s;const t=(((a=this.subscription)==null?void 0:a.status)||"").toLowerCase();let e=(s=this.subscription)==null?void 0:s.vendor_subscription_id;return{canFetch:!0,canPause:e&&!["canceled","paused","trialing","pending","intended","active(collection paused)"].includes(t),canResume:e&&["paused","active(collection paused)"].includes(t),canCancel:e&&!["canceled"].includes(t)}},paymentMethod(){var t;return((t=this.order)==null?void 0:t.payment_method)||""}},methods:{handleSubscriptionAction(t){t==="fetch_subscription"?this.confirmFetch():t==="pause_subscription"?this.confirmPause():t==="resume_subscription"?this.confirmResume():t==="cancel_subscription"&&this.confirmCancel()},confirmFetch(){var t;!this.subscription.vendor_subscription_id&&((t=this.order)==null?void 0:t.payment_method)!=="offline_payment"||cs.confirm("Fetch from remote and update the subscription?","Warning",{type:"warning",icon:Sn(Ds),cancelButtonText:"Back",confirmButtonText:"Fetch subscription!",beforeClose:async(e,a,s)=>{var n,l;if(e==="confirm")try{a.confirmButtonLoading=!0,this.loadingState.fetch=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/fetch`,{data:{vendor_charge_id:this.subscription.vendor_subscription_id}}),this.$notify({type:"success",title:"Success",message:"Subscription fetched successfully"}),this.$emit("reload")}catch(A){this.$notify({type:"error",title:"Error",message:f(((l=(n=A.response)==null?void 0:n.data)==null?void 0:l.message)||"Failed to fetch subscription")}),console.error(A)}finally{a.confirmButtonLoading=!1,this.loadingState.fetch=!1,s()}else s()}})},confirmPause(){this.subscription.vendor_subscription_id&&cs.prompt("Pause the active subscription?","Warning",{type:"warning",icon:Sn(Ds),inputPlaceholder:"Enter reason for pausing",inputPattern:/.+/,inputErrorMessage:"Reason is required",cancelButtonText:"Back",confirmButtonText:"Pause Subscription!",beforeClose:async(t,e,a)=>{var s,n;if(t==="confirm")try{e.confirmButtonLoading=!0,this.loadingState.pause=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/pause`,{data:{vendor_subscription_id:this.subscription.vendor_subscription_id,reason:e.inputValue}}),this.$notify({type:"success",title:"Success",message:"Subscription paused successfully"}),this.$emit("reload")}catch(l){this.$notify({type:"error",title:"Error",message:f(((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to pause subscription")}),console.error(l)}finally{e.confirmButtonLoading=!1,this.loadingState.pause=!1,a()}else a()}})},confirmResume(){this.subscription.vendor_subscription_id&&cs.prompt(f("Resume the paused subscription?"),f("Warning"),{type:"warning",icon:Sn(Ds),inputPlaceholder:f("Enter reason for resuming"),inputPattern:/.+/,inputErrorMessage:f("Reason is required"),cancelButtonText:f("Back"),confirmButtonText:f("Resume Subscription!"),beforeClose:async(t,e,a)=>{if(t==="confirm")try{e.confirmButtonLoading=!0,this.loadingState.resume=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/resume`,{data:{vendor_subscription_id:this.subscription.vendor_subscription_id,reason:e.inputValue}}),this.$notify({type:"success",title:"Success",message:"Subscription resumed successfully"}),this.$emit("reload")}catch(s){this.$notify({type:"error",title:"Error",message:"Failed to resume subscription"}),console.error(s)}finally{e.confirmButtonLoading=!1,this.loadingState.resume=!1,a()}else a()}})},confirmCancel(){this.subscription.vendor_subscription_id&&(this.cancelSubscriptionModal=!0)},confirmReactivate(){this.subscription.vendor_subscription_id&&cs.confirm("Reactivate the canceled subscription?","Warning",{type:"warning",icon:Sn(Ds),cancelButtonText:"Back",confirmButtonText:f("Reactivate Subscription!"),beforeClose:async(t,e,a)=>{var s,n;if(t==="confirm")try{e.confirmButtonLoading=!0,this.loadingState.reactivate=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/reactivate`,{data:{vendor_subscription_id:this.subscription.vendor_subscription_id}}),this.$notify({type:"success",title:"Success",message:"Subscription reactivated successfully"}),this.$emit("reload")}catch(l){this.$notify({type:"error",title:"Error",message:f(((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to reactivate subscription")}),console.error(l)}finally{e.confirmButtonLoading=!1,this.loadingState.reactivate=!1,a()}else a()}})}}},OS={class:"more-btn"},HS={class:"text-red-600"};function RS(t,e,a,s,n,l){const A=y("DynamicIcon"),u=y("refresh"),c=y("el-icon"),m=y("el-dropdown-item"),v=y("delete"),b=y("el-dropdown-menu"),g=y("el-dropdown"),F=y("CardHeader"),B=y("plans"),w=y("CardBody"),C=y("CardContainer"),k=y("CancelSubscription");return d(),_(H,null,[o(C,null,{default:r(()=>[o(F,{title:t.$t("Subscription Plan"),border_bottom:"",title_size:"small"},{default:r(()=>[l.permissions.canFetch||l.permissions.canPause||l.permissions.canResume||l.permissions.canCancel?(d(),U(g,{key:0,trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:e[0]||(e[0]=S=>l.handleSubscriptionAction(S))},{dropdown:r(()=>[o(b,null,{default:r(()=>[l.permissions.canFetch?(d(),U(m,{key:0,command:"fetch_subscription"},{default:r(()=>[o(c,null,{default:r(()=>[o(u)]),_:1}),M(" "+h(t.$t("Fetch subscription -"))+" "+h(l.paymentMethod),1)]),_:1})):x("",!0),l.permissions.canPause?(d(),U(m,{key:1,command:"pause_subscription"},{default:r(()=>[o(c,null,{default:r(()=>[o(u)]),_:1}),M(" "+h(t.$t("Pause subscription -"))+" "+h(l.paymentMethod),1)]),_:1})):x("",!0),l.permissions.canResume?(d(),U(m,{key:2,command:"resume_subscription"},{default:r(()=>[o(c,null,{default:r(()=>[o(u)]),_:1}),M(" "+h(t.$t("Resume subscription -"))+" "+h(l.paymentMethod),1)]),_:1})):x("",!0),l.permissions.canCancel?(d(),U(m,{key:3,command:"cancel_subscription"},{default:r(()=>[o(c,null,{default:r(()=>[o(v)]),_:1}),i("span",HS,h(t.$t("Cancel subscription")),1)]),_:1})):x("",!0)]),_:1})]),default:r(()=>[i("span",OS,[o(A,{name:"More"})])]),_:1})):x("",!0)]),_:1},8,["title"]),o(w,null,{default:r(()=>[o(B,{onReload:e[1]||(e[1]=S=>t.$emit("reload")),getOrderUrl:a.getOrderUrl,subscription:a.subscription,order:a.order,header:t.$t("Subscription Plans #")+(a.index+1)},null,8,["getOrderUrl","subscription","order","header"])]),_:1})]),_:1}),o(k,{subscription:a.subscription,orderId:a.orderId,onClose:e[2]||(e[2]=S=>n.cancelSubscriptionModal=!1),modelValue:n.cancelSubscriptionModal,"onUpdate:modelValue":e[3]||(e[3]=S=>n.cancelSubscriptionModal=S),onReload:e[4]||(e[4]=S=>t.$emit("reload")),onCancelSubscription:l.confirmCancel},null,8,["subscription","orderId","modelValue","onCancelSubscription"])],64)}const PS=ye(LS,[["render",RS]]),KS={class:"fct-admin-sidebar-item"},NS={class:"fct-admin-summary-item-list"},GS={class:"fct-admin-summary-item"},jS={class:"font-medium"},zS={__name:"TaxInformationWidget",props:{taxId:{type:[Number,String],default:0}},setup(t){return(e,a)=>(d(),U(se,null,{default:r(()=>[o(le,{title:p(f)("Tax Information"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[i("div",KS,[i("ul",NS,[i("li",GS,[i("span",jS,h(p(f)("Tax ID")),1),i("span",null,h(t.taxId||"--"),1)])])])]),_:1})]),_:1}))}},YS={name:"OrderBulkActions",components:{DynamicIcon:Y},emits:["reload","addItem","addProduct","enableItemEditing","disableItemEditing","handlePaymentActions"],props:["order","trigger_action","isEditingItem","mode","triggerMode","shouldShowRefund","warningMessage"],data(){return{selected_action:"",showModal:!1,status_data:{order_status:this.order.status,shipping_status:this.order.shipping_status,payment_status:this.order.payment_status},doing_actions:!1,manage_stock:!0,shouldDisableEditing:["completed","archived","canceled"].includes(this.order.status),isCancelled:["canceled"].includes(this.order.status),isCompleted:["completed"].includes(this.order.status),isUnshippable:["unshippable"].includes(this.order.shipping_status)}},methods:{translate:f,handleCommandAction(t){if(this.selected_action=t,t==="shipping_status")this.changeShipping();else if(t==="delete_order")this.confirmDeleteOrder();else if(t==="order_complete")this.selected_action="order_status",this.completeOrder();else if(t==="order_cancel")this.selected_action="order_status",this.cancelOrder();else if(t==="order_processing")this.selected_action="order_status",this.backToProcessing();else if(t==="order_receipt")this.showModal=!1;else if(t==="generate_missing_licenses")this.generateMissingLicenses();else if(t==="refund_order")this.$emit("handlePaymentActions","refund");else if(t.action==="order_edit")if(t.isEditingItem)this.$emit("disableItemEditing");else{if(this.shouldDisableEditing)return;this.$emit("enableItemEditing")}else this.showModal=!0},confirmDeleteOrder(){this.$confirm(f("Are you sure you want to delete this order? This action can not be undone!"),f("Confirm Deleting"),{confirmButtonText:f("Yes, Delete"),cancelButtonText:f("Cancel"),cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{this.deleteOrder()})},deleteOrder(){this.deleting=!0,this.$del("orders/"+this.order.id).then(t=>{ll(t.message),this.$router.push({name:"orders"})}).catch(t=>{t.status_code=="422"?J.validationErrors(t):J.error(t==null?void 0:t.data)}).finally(()=>{this.deleting=!1})},changeShipping(){this.showModal=!0},completeOrder(){this.$confirm(f("Are you sure you want to complete this order!"),f("Please confirm"),{confirmButtonText:f("Yes, Mark order as complete!"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{this.updateOrderStatuses({order_status:"completed"})})},generateMissingLicenses(){this.$confirm(f("Are you sure you want to generate missing licenses!"),f("Please confirm"),{confirmButtonText:f("Yes, Generate all missing licenses!"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{this.generateLicenses()})},generateLicenses(){this.doing_actions=!0,this.$post("orders/"+this.order.id+"/generate-missing-licenses",{}).then(t=>{J.success(t.message),this.$emit("reload")}).catch(t=>{var e;t.status_code=="422"?J.validationErrors(t):J.error((e=t.data)==null?void 0:e.message)}).finally(()=>{this.doing_actions=!1,this.showModal=!1})},backToProcessing(){this.$confirm(f("Are you sure you want to revert back processing this order!"),f("Please confirm"),{confirmButtonText:f("Yes, Mark order as processing!"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{this.updateOrderStatuses({order_status:"processing"})})},cancelOrder(){this.$confirm(f("Are you sure you want to change the order status to Cancel? This action is irreversible and cannot be undone."),f("Please confirm"),{confirmButtonText:f("Yes, Changed status to Cancel"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{this.manage_stock=!0,this.updateOrderStatuses({order_status:"canceled"})})},changeShippingStatus(){let t={};this.manage_stock=!0,t[this.selected_action]=this.status_data[this.selected_action],this.updateOrderStatuses(t)},updateOrderStatuses(t){this.doing_actions=!0,this.$put("orders/"+this.order.id+"/statuses",{action:"change_"+this.selected_action,statuses:t,manage_stock:this.manage_stock}).then(e=>{J.success(e.message),this.$emit("reload")}).catch(e=>{var a;e.status_code=="422"?J.validationErrors(e):J.error((a=e.data)==null?void 0:a.message)}).finally(()=>{this.doing_actions=!1,this.showModal=!1})}}},qS={class:"fct-order-bulk-action-modal"},WS={key:1,class:"more-btn"},XS={key:0},JS=["href"],ZS={class:"dialog-footer"};function e3(t,e,a,s,n,l){const A=y("DynamicIcon"),u=y("el-button"),c=y("el-dropdown-item"),m=y("el-tooltip"),v=y("el-dropdown-menu"),b=y("el-dropdown"),g=y("el-option"),F=y("el-select"),B=y("el-form-item"),w=y("el-form"),C=y("el-dialog");return d(),_("div",qS,[o(b,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:l.handleCommandAction},{dropdown:r(()=>[o(v,null,{default:r(()=>{var k,S;return[a.trigger_action!=="add"?(d(),_("div",XS,[!n.isCancelled&&((k=a.order)==null?void 0:k.fulfillment_type)==="physical"?(d(),U(c,{key:0,command:"shipping_status"},{default:r(()=>[o(A,{name:"ShipmentStatus"}),M(" "+h(l.translate("Change Shipping Status")),1)]),_:1})):x("",!0),n.isCancelled?(d(),U(c,{key:1,command:"delete_order",class:"item-destructive"},{default:r(()=>[o(A,{name:"Delete"}),M(" "+h(l.translate("Delete order")),1)]),_:1})):x("",!0),a.order.status==="processing"?(d(),U(c,{key:2,command:"order_complete"},{default:r(()=>[o(A,{name:"Check"}),M(" "+h(l.translate("Mark As Complete")),1)]),_:1})):x("",!0),n.isCancelled?x("",!0):(d(),U(c,{key:3,command:"order_cancel"},{default:r(()=>[o(A,{name:"Cross"}),M(" "+h(l.translate("Cancel Order")),1)]),_:1})),a.order.status==="completed"?(d(),U(c,{key:4,command:"order_processing"},{default:r(()=>[o(A,{name:"Refresh"}),M(" "+h(l.translate("Back to processing")),1)]),_:1})):x("",!0),o(c,{command:"order_receipt",class:"item-link"},{default:r(()=>[i("a",{target:"_blank",href:a.order.receipt_url},[o(A,{name:"External"}),M(" "+h(l.translate("Receipt")),1)],8,JS)]),_:1}),(S=a.order)!=null&&S.has_missing_licenses?(d(),U(c,{key:5,command:"generate_missing_licenses"},{default:r(()=>[o(A,{name:"Files"}),M(" "+h(l.translate("Generate missing licenses")),1)]),_:1})):x("",!0),a.shouldShowRefund?(d(),U(c,{key:6,command:"refund_order",class:"bulk-action-only-mobile"},{default:r(()=>[o(A,{name:"Money"}),M(" "+h(l.translate("Refund")),1)]),_:1})):x("",!0),o(c,{command:{action:"order_edit",isEditingItem:a.isEditingItem},class:"bulk-action-only-mobile",disabled:n.shouldDisableEditing},{default:r(()=>[o(A,{name:"Edit"}),a.isEditingItem?(d(),_(H,{key:1},[M(h(l.translate("Disable Editing")),1)],64)):(d(),_(H,{key:0},[n.shouldDisableEditing?(d(),U(m,{key:0,placement:"top","popper-class":"fct-tooltip fct-disabled-edit-order-tooltip"},{content:r(()=>[M(h(a.warningMessage),1)]),default:r(()=>[M(" "+h(l.translate("Edit")),1)]),_:1})):(d(),_(H,{key:1},[M(h(l.translate("Edit")),1)],64))],64))]),_:1},8,["command","disabled"])])):x("",!0)]}),_:1})]),default:r(()=>[a.triggerMode==="button"?(d(),U(u,{key:0},{default:r(()=>[M(h(l.translate("More Action"))+" ",1),o(A,{name:"ChevronDown"})]),_:1})):(d(),_("span",WS,[o(A,{name:"More"})]))]),_:1},8,["onCommand"]),o(C,{modelValue:n.showModal,"onUpdate:modelValue":e[2]||(e[2]=k=>n.showModal=k),title:l.translate("Update Shipping Status")},{default:r(()=>[o(w,{data:n.status_data,"label-position":"top"},{default:r(()=>[n.selected_action==="shipping_status"||n.selected_action==="all"?(d(),U(B,{key:0,label:l.translate("Shipping Status")},{default:r(()=>[o(F,{modelValue:n.status_data.shipping_status,"onUpdate:modelValue":e[0]||(e[0]=k=>n.status_data.shipping_status=k),placeholder:l.translate("Select Shipping Status")},{default:r(()=>[(d(!0),_(H,null,q(t.appVars.shipping_statuses,(k,S)=>(d(),U(g,{key:S,label:k,value:S},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"]),i("span",ZS,[o(u,{onClick:e[1]||(e[1]=k=>l.changeShippingStatus()),type:"primary"},{default:r(()=>[M(h(l.translate("Update")),1)]),_:1})])]),_:1},8,["modelValue","title"])])}const _A=ye(YS,[["render",e3]]),t3={name:"Transaction",computed:{Str(){return nt}},components:{ConvertedTime:Vt,ArrowDown:Sn(ji),Check:Fu,Badge:dt,DynamicIcon:Y},props:["transactions","transaction","header","transaction_data","order_id"],emits:["reload"],data(){return{visible:!1,doing_action:!1,disputeHandleModal:!1,disputeForm:{dispute_note:""},disputeTransaction:null,loadingDisputeAction:!1}},methods:{translate:f,getCardBrand:ku,translateNumber:Mt,handleDispute(t){this.disputeHandleModal=!0,this.disputeTransaction=t},handleDisputeSubmit(t){this.loadingDisputeAction=!0,this.$post("orders/"+this.order_id+"/transactions/"+this.disputeTransaction.id+"/accept-dispute",{dispute_note:this.disputeForm.dispute_note}).then(e=>{this.$notify.success(e.message),this.$emit("reload"),this.disputeHandleModal=!1}).catch(e=>{this.$notify.error(e.message)}).finally(()=>{this.disputeHandleModal=!1,this.loadingDisputeAction=!1})},hasDisputedTransaction(t){return t.some(e=>e.transaction_type=="dispute"&&e.status=="succeeded")}}},a3={key:0,class:"fct-transaction-details -mt-[1px]"},s3={class:"fct-table-wrap"},n3={class:"p-0 m-0 text-xs text-gray-500"},o3={key:0},l3=["href"],r3={class:"flex items-center gap-2.5"},i3={key:0,class:"w-7"},A3=["title","src","alt"],d3={key:1,class:"capitalize"},u3={key:2},c3={class:"text-sm"},f3={class:"text-sm text-gray-700"},p3={class:"text-sm flex gap-2"},m3=["href"];function h3(t,e,a,s,n,l){var k,S;const A=y("ConvertedTime"),u=y("el-table-column"),c=y("Badge"),m=y("el-tooltip"),v=y("el-button"),b=y("el-table"),g=y("el-form-item"),F=y("el-input"),B=y("el-form"),w=y("DynamicIcon"),C=y("el-dialog");return a.transactions.length>0?(d(),_("div",a3,[i("div",s3,[o(b,{data:a.transactions,class:"w-full"},{default:r(()=>[o(u,{label:l.translate("# Date"),width:"auto"},{default:r(E=>[i("div",null,[i("p",n3,"#"+h(l.translateNumber(E.row.id)),1),o(A,{"date-time":E.row.created_at},null,8,["date-time"])])]),_:1},8,["label"]),o(u,{label:l.translate("Gateway ID"),width:"160"},{default:r(E=>[E.row.vendor_charge_id==""?(d(),_("span",o3,"--")):(d(),_("a",{key:1,class:"text-primary-500 dark:text-gray-50 link",target:"_blank",href:E.row.url},h(E.row.vendor_charge_id),9,l3))]),_:1},8,["label"]),o(u,{label:l.translate("Payment Method"),width:"140"},{default:r(E=>[i("div",r3,[l.getCardBrand(E.row.card_brand,E.row.payment_method_type)?(d(),_("div",i3,[i("img",{class:"w-full",title:E.row.payment_method,src:l.getCardBrand(E.row.card_brand,E.row.payment_method_type),alt:E.row.card_brand},null,8,A3)])):(d(),_("span",d3,h(E.row.payment_method_type),1)),E.row.card_last_4&&E.row.card_last_4!="0"?(d(),_("span",u3,h("..."+E.row.card_last_4),1)):x("",!0)])]),_:1},8,["label"]),o(u,{label:l.translate("Total"),width:"auto"},{default:r(E=>[i("span",null,h(t.formatNumber(E.row.total)),1)]),_:1},8,["label"]),o(u,{label:l.translate("Status"),width:"120"},{default:r(E=>{var V,$,O,D,Q,I;return[E.row.transaction_type=="dispute"?(d(),U(m,{key:0,effect:"dark",placement:"top",content:"Transaction dispute, please resolve it from action menu. Reason: "+(($=(V=E.row)==null?void 0:V.meta)==null?void 0:$.dispute_reason),"popper-class":"fct-label-hint-popover fct-tooltip"},{default:r(()=>[o(c,{class:"m-2 b-red",status:"dispute"},{default:r(()=>e[3]||(e[3]=[M(" Dispute ",-1)])),_:1,__:[3]})]),_:2},1032,["content"])):x("",!0),(D=(O=E.row)==null?void 0:O.meta)!=null&&D.reason?(d(),U(m,{key:1,effect:"dark",placement:"top",content:l.translate((I=(Q=E.row)==null?void 0:Q.meta)==null?void 0:I.reason),"popper-class":"fct-label-hint-popover fct-tooltip"},{default:r(()=>{var L,K,N,W;return[((K=(L=E.row)==null?void 0:L.meta)==null?void 0:K.disputed)=="yes"&&((W=(N=E.row)==null?void 0:N.meta)==null?void 0:W.dispute_resolved)=="no"?(d(),U(c,{key:0,status:E.row.status},{default:r(()=>{var R;return[M(h(E.row.status)+" "+h((R=E==null?void 0:E.row)==null?void 0:R.transaction_type),1)]}),_:2},1032,["status"])):(d(),U(c,{key:1,status:E.row.status},{default:r(()=>[M(h(E.row.status),1)]),_:2},1032,["status"]))]}),_:2},1032,["content"])):(d(),U(c,{key:2,status:E.row.status},{default:r(()=>[M(h(E.row.status),1)]),_:2},1032,["status"]))]}),_:1},8,["label"]),l.hasDisputedTransaction(a.transactions)?(d(),U(u,{key:0,label:l.translate("Actions"),width:"140"},{default:r(E=>[E.row.transaction_type=="dispute"&&E.row.status=="succeeded"?(d(),U(v,{key:0,type:"warning",size:"small",onClick:V=>l.handleDispute(E.row)},{default:r(()=>[M(h(l.translate("Handle dispute")),1)]),_:2},1032,["onClick"])):x("",!0)]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])]),o(C,{modelValue:n.disputeHandleModal,"onUpdate:modelValue":e[2]||(e[2]=E=>n.disputeHandleModal=E),title:"Handle Dispute #"+((S=(k=n.disputeTransaction)==null?void 0:k.meta)==null?void 0:S.dispute_id),width:"800px"},{footer:r(()=>{var E,V,$,O,D,Q;return[i("a",{href:(E=n.disputeTransaction)==null?void 0:E.url,target:"_blank",class:"el-button el-button--warning is-link"},h(l.translate("See dispute on ")+((V=n.disputeTransaction)==null?void 0:V.payment_method)),9,m3),(O=($=n.disputeTransaction)==null?void 0:$.meta)!=null&&O.is_charge_refundable?(d(),U(v,{key:0,type:"primary",onClick:e[1]||(e[1]=()=>t.$emit("triggerRefundModal")),loading:n.loadingDisputeAction},{default:r(()=>[M(h(l.translate("Refund customer")),1)]),_:1},8,["loading"])):x("",!0),(Q=(D=n.disputeTransaction)==null?void 0:D.meta)!=null&&Q.is_dispute_actionable?(d(),U(v,{key:1,type:"primary",onClick:l.handleDisputeSubmit,loading:n.loadingDisputeAction},{default:r(()=>[M(h(l.translate("Accept Dispute")),1)]),_:1},8,["onClick","loading"])):x("",!0)]}),default:r(()=>{var E,V,$,O,D,Q;return[(V=(E=n.disputeTransaction)==null?void 0:E.meta)!=null&&V.dispute_reason?(d(),U(g,{key:0},{default:r(()=>{var I,L;return[i("div",c3," Dispute Reason: "+h((L=(I=n.disputeTransaction)==null?void 0:I.meta)==null?void 0:L.dispute_reason),1)]}),_:1})):x("",!0),o(g,null,{default:r(()=>[i("div",f3,h(l.translate("You may either counter the dispute by providing evidence to prove that the cardholder is the legitimate purchaser, or you can accept this dispute immediately to refund the cardholder and close the dispute.")),1)]),_:1}),(O=($=n.disputeTransaction)==null?void 0:$.meta)!=null&&O.is_dispute_actionable?(d(),U(B,{key:1,model:n.disputeForm,"label-position":"top"},{default:r(()=>[o(g,{label:l.translate("Note"),prop:"dispute_note"},{default:r(()=>[o(F,{modelValue:n.disputeForm.dispute_note,"onUpdate:modelValue":e[0]||(e[0]=I=>n.disputeForm.dispute_note=I),placeholder:"(optional)",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])):x("",!0),(Q=(D=n.disputeTransaction)==null?void 0:D.meta)!=null&&Q.is_charge_refundable?(d(),U(g,{key:2},{default:r(()=>[i("div",p3,[o(w,{class:"w-6 h-6",name:"Information"}),M(" "+h(l.translate("This dispute has refundable action, so you may refund the charge to the customer for a dispute resolution.")),1)])]),_:1})):x("",!0)]}),_:1},8,["modelValue","title"])])):x("",!0)}const gA=ye(t3,[["render",h3]]),vA=(t,e,a=0)=>{let s=0,n=0;return e&&(t.manual_discount_total=0),t.order_items&&t.order_items.forEach((l,A)=>{let u=l.updateStock||0;l.quantity<1?l.quantity=1:u!=0&&parseInt(l.quantity)>u&&(l.quantity=u),l.total=l.unit_price*l.quantity;let c=l.unit_price*l.quantity;if(l.subtotal=c-l.cost,t.manual_discount_total>0?l.discount_total=l.discount_total:e===!0?n+=l.discount_total:(!t.manual_discount_total===0?t.manual_discount_total-=l.discount_total:t.manual_discount_total=0,l.discount_total=0),l.line_total=c-l.discount_total+l.tax_amount,s+=c,l.payment_type=="subscription"&&l.other_info.manage_setup_fee=="yes"){let m=parseInt(l.other_info.signup_fee);l.other_info.setup_fee_per_item=="yes"&&(m=m*l.quantity),s+=m}}),t.subtotal=s,t.coupon_discount_total=n,(t.subtotal<=0||t.subtotal<=t.manual_discount_total)&&(t.manual_discount_total=t.coupon_discount_total=t.shipping_tax=t.shipping_total=t.tax_total=0),_3(t),t},Wd=(t,e)=>{if(e.value<0)return t;let a=e.value?e.value*100:0;e.label="",e.type==="percentage"&&(a=t.subtotal*e.value/100),Ff(e),a=parseInt(a),a>=0&&a<=parseInt(t.subtotal)&&(t.manual_discount_total=a);let s=t.subtotal*1+t.tax_total*1+t.shipping_total*1-t.manual_discount_total-t.coupon_discount_total;return s>=0&&(t.total_amount=s),t},_3=t=>(t.total_amount=t.subtotal*1+t.tax_total*1+t.shipping_tax*1+t.shipping_total*1-t.manual_discount_total-t.coupon_discount_total,t),Ff=t=>(t.type==="percentage"&&(t.label="(-"+t.value+"%)"),t),g3={name:"NoteModal",props:["note"],data(){return{notes:this.note}},watch:{note:{handler:function(t,e){this.notes=t},deep:!0}},methods:{saveNote(){this.$emit("whenNoteEditIsDone",this.notes,!1)},closeModal(){this.$emit("closeModal")}},mounted(){}},v3={class:"fct-note-modal"},y3={class:"dialog-footer"};function b3(t,e,a,s,n,l){const A=y("el-input"),u=y("el-form-item"),c=y("el-form"),m=y("el-button");return d(),_("div",v3,[o(c,{"label-position":"top"},{default:r(()=>[o(u,null,{default:r(()=>[o(A,{modelValue:n.notes,"onUpdate:modelValue":e[0]||(e[0]=v=>n.notes=v),autosize:{minRows:4},type:"textarea",minlength:"1",maxlength:"5000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),i("div",y3,[o(m,{type:"info",soft:"",onClick:l.closeModal},{default:r(()=>[M(h(t.$t("Cancel")),1)]),_:1},8,["onClick"]),o(m,{type:"primary",onClick:l.saveNote},{default:r(()=>[M(h(t.$t("Save")),1)]),_:1},8,["onClick"])])])}const xf=ye(g3,[["render",b3]]),w3={class:"fct-admin-sidebar-item"},B3={key:0},C3={name:"Notes",props:{note:{type:String,default:""},shouldEnableEditing:{type:Boolean,default:!0},orderId:{type:[String,Number]}},components:{IconButton:Be,NoteModal:xf,DynamicIcon:Y},data(){return{noteModalIsOpen:!1,isNoteExpanded:!1,noteCopy:this.note,loading:!1}},watch:{note:{handler(t,e){this.noteCopy=t},deep:!0,immediate:!0}},computed:{noteNeedsCollapse(){var t;return((t=this.noteCopy)==null?void 0:t.length)>355},noteTextToDisplay(){return this.isNoteExpanded||!this.noteNeedsCollapse?this.noteCopy:this.noteCopy.substring(0,355)+"..."}},methods:{saveNoteModal(t,e){this.loading=!0,this.noteModalIsOpen=e,this.$emit("whenNoteEditIsDone",t),this.orderId&&this.$post("notes/attach",{order_id:this.orderId,note:t}).then(a=>{J.success(a.message),this.noteCopy=t}).catch(a=>{J.error(a.message)}).finally(()=>{this.loading=!1})},toggleNoteText(){this.isNoteExpanded=!this.isNoteExpanded}},mounted(){}},ar=Object.assign(C3,{setup(t){return(e,a)=>{const s=y("el-skeleton-item"),n=y("el-skeleton"),l=y("el-button"),A=y("el-dialog");return d(),_("div",null,[t.orderId?(d(),U(se,{key:0},{default:r(()=>[o(le,{title:e.$t("Notes"),border_bottom:"",title_size:"small"},{action:r(()=>[t.shouldEnableEditing?(d(),U(Be,{key:0,size:"x-small",bg:"transparent",tag:"button",border:"transparent",onClick:a[0]||(a[0]=u=>e.noteModalIsOpen=!0)},{default:r(()=>[o(Y,{name:"Edit"})]),_:1})):x("",!0)]),_:1},8,["title"]),o(ae,{class:ne(e.noteNeedsCollapse?"pb-0":"")},{default:r(()=>[i("div",w3,[e.loading?(d(),U(n,{key:0,animated:""},{template:r(()=>[o(s,{variant:"p"})]),_:1})):(d(),_(H,{key:1},[i("span",null,h(e.noteCopy?e.noteTextToDisplay:e.$t("No notes")),1),e.noteNeedsCollapse?(d(),U(l,{key:0,class:"fct-show-more-button",onClick:e.toggleNoteText,text:""},{default:r(()=>[e.isNoteExpanded?(d(),_(H,{key:0},[M(h(e.$t("Show less"))+" ",1),o(Y,{name:"ChevronUp"})],64)):(d(),_(H,{key:1},[M(h(e.$t("Show more"))+" ",1),o(Y,{name:"ChevronDown"})],64))]),_:1},8,["onClick"])):x("",!0)],64))])]),_:1},8,["class"])]),_:1})):x("",!0),o(A,{"append-to-body":!0,width:"45%",modelValue:e.noteModalIsOpen,"onUpdate:modelValue":a[2]||(a[2]=u=>e.noteModalIsOpen=u),title:e.noteCopy?e.$t("Edit Note"):e.$t("Add Note")},{default:r(()=>[e.noteModalIsOpen?(d(),_("div",B3,[o(xf,{note:e.noteCopy,onWhenNoteEditIsDone:e.saveNoteModal,onCloseModal:a[1]||(a[1]=u=>e.noteModalIsOpen=!1)},null,8,["note","onWhenNoteEditIsDone"])])):x("",!0)]),_:1},8,["modelValue","title"])])}}}),k3={name:"Coupon",components:{IconButton:Be,DynamicIcon:Y},props:{order:{type:Object,default:()=>({})},appliedCouponsAttributes:{type:Array,default:()=>[]},hasCouponAttributes:{type:Boolean,default:!1},couponsAttributes:{type:Array,default:()=>[]},action:{type:String,default:""},shouldManageCoupon:{type:Boolean,default:!0}},data(){return{appliedCoupons:[...this.appliedCouponsAttributes],hasCoupon:this.hasCouponAttributes,availableCoupons:[],newCoupon:"",coupons:[...this.couponsAttributes]}},methods:{translate:f,searchCoupon(t,e){this.fetchCoupon(t,e)},fetchCoupon(t="",e=()=>{}){this.$get("coupons",{search:t,select:"code",scopes:["active"]}).then(a=>{var l;const s=(l=a.coupons)==null?void 0:l.data;this.availableCoupons=s.map(A=>A.code);const n=this.availableCoupons.filter(A=>A.toLowerCase().includes(t.toLowerCase())).map(A=>({value:A}));e(n)}).catch(a=>{var s;a.status_code=="422"?J.validationErrors(a):J.error((s=a.data)==null?void 0:s.message)}).finally(()=>{})},applyCoupon(){if(this.coupons&&this.coupons.find(t=>t.code===this.newCoupon)){J.error(this.translate("Coupon already applied"));return}this.$post("coupons/apply",{coupon_code:this.newCoupon,order_items:this.order.order_items,order_uuid:this.order.uuid,applied_coupons:this.appliedCoupons}).then(t=>{this.processCoupon(t),this.newCoupon=""}).catch(t=>{var e;t.status_code=="422"?J.validationErrors(t):J.error((e=t.data)==null?void 0:e.message)})},cancelCoupon(t,e){this.$post("coupons/cancel",{id:e.id,coupon_code:e.code,order_uuid:this.order.uuid,applied_coupons:this.appliedCoupons,order_items:this.order.order_items}).then(a=>{this.processCoupon(a)}).catch(a=>{var s;a.status_code=="422"?J.validationErrors(a):J.error((s=a.data)==null?void 0:s.message)}).finally(()=>{})},reApplyCoupon(){this.$post("coupons/re-apply",{order_items:this.order.order_items,order_uuid:this.order.uuid,applied_coupons:this.appliedCoupons}).then(t=>{this.processCoupon(t)}).catch(t=>{var e;t.status_code=="422"?J.validationErrors(t):J.error((e=t.data)==null?void 0:e.message)}).finally(()=>{})},processCoupon(t){this.coupons=[],this.appliedCoupons=[];for(let n in t.applied_coupons)this.coupons.push({id:t.applied_coupons[n].id,code:n,amount:t.applied_coupons[n].discount}),this.appliedCoupons.push(t.applied_coupons[n].id);let e=0,a=0;const s=Object.values(t.calculated_items);this.order.order_items.forEach((n,l)=>{const A=s.find(u=>u.id==n.object_id);A!=null&&(this.order.order_items[l].price=A.price,this.order.order_items[l].unit_price=A.unit_price,this.order.order_items[l].line_total=A.unit_price*A.quantity-A.discount_total,e+=this.order.order_items[l].line_total,a+=A.discount_total,this.order.order_items[l].line_total_formatted=A.line_total_formatted,this.order.order_items[l].discount_total=A.discount_total)}),this.order.applied_coupon=t.applied_coupons,this.hasCoupon=this.coupons.length>0,vA(this.order,this.hasCoupon,a),this.$emit("update:coupons",this.coupons,this.appliedCoupons,this.hasCoupon)}},mounted(){}},F3={colspan:"3"},x3={class:"fct-add-coupon-wrap"},U3={key:0,class:"fct-add-coupon-input-label"},E3={key:1,class:"fct-add-coupon-input-label"},S3={key:2,class:"fct-add-coupon-input-wrap"},Q3={class:"flex gap-0.5 items-center"};function D3(t,e,a,s,n,l){const A=y("el-autocomplete"),u=y("el-button"),c=y("el-alert"),m=y("DynamicIcon"),v=y("IconButton"),b=y("el-popconfirm");return d(),_(H,null,[i("tr",null,[i("td",F3,[i("div",x3,[a.action==="create_order"?(d(),_("div",U3,h(t.$t("Have a Coupon?")),1)):(d(),_("div",E3,h(a.shouldManageCoupon?t.$t("Have a Coupon?"):n.hasCoupon?t.$t("Coupons"):t.$t("")),1)),a.shouldManageCoupon?(d(),_("div",S3,[o(A,{modelValue:n.newCoupon,"onUpdate:modelValue":e[0]||(e[0]=g=>n.newCoupon=g),"fetch-suggestions":l.searchCoupon,"trigger-on-focus":!1,clearable:"",class:"w-full",placeholder:t.$t("Enter coupon code")},null,8,["modelValue","fetch-suggestions","placeholder"]),o(u,{onClick:l.applyCoupon,type:"info",soft:"",class:"el-button--x-small"},{default:r(()=>[M(h(t.$t("Apply")),1)]),_:1},8,["onClick"])])):x("",!0),!n.hasCoupon&&a.shouldManageCoupon?(d(),U(c,{key:3,title:t.$t("If you apply coupon, regular discounts for this order will be removed."),type:"warning","show-icon":""},null,8,["title"])):x("",!0),e[1]||(e[1]=i("span",null,null,-1))])])]),(d(!0),_(H,null,q(n.coupons,g=>(d(),_("tr",{key:g.id,class:"fct-coupons-applied-row"},[i("td",null,[i("div",Q3,[i("span",null,h(g.code),1),a.action==="create_order"?(d(),U(v,{key:0,bg:"transparent",border:"transparent",tag:"a",size:"x-small",onClick:Ke(F=>l.cancelCoupon(g.id,g),["prevent"]),class:"coupon-delete-btn"},{default:r(()=>[o(m,{name:"Delete"})]),_:2},1032,["onClick"])):x("",!0),a.action==="edit_order"?(d(),U(b,{key:1,icon:"InfoFilled","icon-color":"#626AEF",title:l.translate("Are you sure to cancel this coupon? This action is not recoverable"),onConfirm:F=>l.cancelCoupon(g.id,g),width:"250"},{reference:r(()=>[a.shouldManageCoupon?(d(),U(v,{key:0,bg:"transparent",border:"transparent",tag:"a",size:"x-small",class:"coupon-delete-btn"},{default:r(()=>[o(m,{name:"Delete"})]),_:1})):x("",!0)]),_:2},1032,["title","onConfirm"])):x("",!0)])]),e[2]||(e[2]=i("td",null,null,-1)),i("td",null,"- "+h(t.formatNumber(g.amount)),1)]))),128))],64)}const sr=ye(k3,[["render",D3]]),$3={name:"DiscountModal",props:["discount","showModal","totalAmount"],setup(t,{emit:e}){const a=Rn({...t.discount}),s=T([{label:f("Amount"),value:"amount"}]),n=T("");return{discountOptions:s,applyDiscount:()=>{const c=parseInt(a.value);isNaN(c)||c<1?a.value=1:e("whenDiscountEditIsDone",!1,{...a})},cancelDiscount:()=>{e("emitCancelDiscountModal")},initialDiscount:a,isDisabledApplyButton:()=>{n.value="";const c=parseInt(a.value);let m=c||0;const v=t.totalAmount/100;return a.type=="percentage"?(m=v*c/100,(c>100||m>v)&&(n.value=f("Discount should not exceed the full product price (100%).")),isNaN(c)||c<1||c>100):(m>v&&(n.value=f("Discount should not exceed the full product price (%s).",Bp(v))),isNaN(c)||c<1||m>v)},error:n}}},I3={class:"fct-discount-modal"},T3=["innerHTML"],M3={key:1},V3={style:{color:"red"}},L3={class:"form-note"},O3={class:"dialog-footer"};function H3(t,e,a,s,n,l){const A=y("el-option"),u=y("el-select"),c=y("el-form-item"),m=y("el-col"),v=y("el-input"),b=y("el-row"),g=y("el-form"),F=y("el-button");return d(),_("div",I3,[o(g,{"label-position":"top"},{default:r(()=>[o(b,{gutter:20},{default:r(()=>[o(m,{md:12,sm:12,xs:24},{default:r(()=>[o(c,{label:t.$t("Discount type")},{default:r(()=>[o(u,{modelValue:s.initialDiscount.type,"onUpdate:modelValue":e[0]||(e[0]=B=>s.initialDiscount.type=B),placeholder:t.$t("Select"),onChange:e[1]||(e[1]=B=>{s.error=""})},{default:r(()=>[(d(!0),_(H,null,q(s.discountOptions,B=>(d(),U(A,{key:B.value,label:B.label,value:B.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(m,{md:12,sm:12,xs:24},{default:r(()=>[o(c,{label:t.$t("Discount value")},{default:r(()=>[o(v,{type:"number",min:1,modelValue:s.initialDiscount.value,"onUpdate:modelValue":e[2]||(e[2]=B=>s.initialDiscount.value=B),modelModifiers:{number:!0},onKeyup:s.isDisabledApplyButton},{prefix:r(()=>[s.initialDiscount.type==="amount"?(d(),_("span",{key:0,innerHTML:t.appVars.shop.currency_sign},null,8,T3)):(d(),_("span",M3,"%"))]),_:1},8,["modelValue","onKeyup"]),i("span",V3,h(s.error),1)]),_:1},8,["label"])]),_:1})]),_:1}),o(b,null,{default:r(()=>[o(m,{md:24,sm:12,xs:24},{default:r(()=>[o(c,{label:t.$t("Reason for discount")},{default:r(()=>[o(v,{modelValue:s.initialDiscount.reason,"onUpdate:modelValue":e[3]||(e[3]=B=>s.initialDiscount.reason=B),minlength:"1",maxlength:"255","show-word-limit":""},null,8,["modelValue"]),i("div",L3,[i("p",null,h(t.$t("Customer can see this reason")),1)])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),i("div",O3,[o(F,{type:"info",onClick:s.cancelDiscount,soft:""},{default:r(()=>[M(h(t.$t("Cancel")),1)]),_:1},8,["onClick"]),o(F,{type:"primary",disabled:s.isDisabledApplyButton(),onClick:s.applyDiscount},{default:r(()=>[M(h(t.$t("Apply")),1)]),_:1},8,["disabled","onClick"])])])}const R3=ye($3,[["render",H3]]),P3={name:"CustomDiscount",components:{IconButton:Be,DynamicIcon:Y,DiscountModal:R3},props:{order:{type:Object,default:()=>({})},discountAttributes:{type:Object,default:()=>({type:"amount",label:"",reason:""})},hasCoupon:{type:Boolean,default:!1},shouldEnableEditing:{type:Boolean,default:!0}},data(){return{discountModalIsOpen:!1,discount:this.discountAttributes}},methods:{translate:f,getDiscountButtonLabel(){return!this.shouldEnableEditing&&this.order.order_items.length>0?f("Discount"):this.order.manual_discount_total!==0?f("Edit Discount"):f("Add Discount")},manageDiscount(){this.discount.action=parseInt(this.order.manual_discount_total)>0?"edit":"add",this.shouldEnableEditing&&!this.hasCoupon&&this.order.order_items.length>0&&(this.discountModalIsOpen=!0)},removeDiscount(){this.discount={},Wd(this.order,this.discount),this.$emit("update:custom-discount",this.discount)},applyDiscount(t,e){this.discount=e,Wd(this.order,this.discount),this.discountModalIsOpen=t,this.$emit("update:custom-discount",this.discount)}},mounted(){}},K3={key:0},N3={key:1},G3={key:2},j3={key:0};function z3(t,e,a,s,n,l){const A=y("DynamicIcon"),u=y("discount-modal"),c=y("el-dialog");return d(),_(H,null,[a.order.manual_discount_total>0||a.order.manual_discount_total===0&&a.shouldEnableEditing?(d(),_("tr",K3,[i("td",null,[a.shouldEnableEditing&&!a.hasCoupon&&a.order.order_items.length>0?(d(),_("a",{key:0,href:"#",onClick:e[0]||(e[0]=Ke(m=>l.manageDiscount(),["prevent"]))},[M(h(l.getDiscountButtonLabel())+" ",1),o(A,{name:"External"})])):(d(),_("span",N3,h(l.getDiscountButtonLabel()),1)),n.discount.label?(d(),_("span",G3,h(n.discount.label),1)):x("",!0),a.order.manual_discount_total&&a.shouldEnableEditing?(d(),_(H,{key:3},[e[4]||(e[4]=M(" | ",-1)),i("a",{href:"#",onClick:e[1]||(e[1]=Ke(m=>l.removeDiscount(),["prevent"]))},h(l.translate("Remove Discount")),1)],64)):x("",!0)]),i("td",null,h(n.discount.reason?n.discount.reason:"__"),1),i("td",null,[i("span",null,"- "+h(t.formatNumber(a.order.manual_discount_total)),1)])])):x("",!0),o(c,{"append-to-body":!0,width:"50%",modelValue:n.discountModalIsOpen,"onUpdate:modelValue":e[3]||(e[3]=m=>n.discountModalIsOpen=m),title:a.order.manual_discount_total===0?l.translate("Add discount"):l.translate("Edit discount")},{default:r(()=>[n.discountModalIsOpen?(d(),_("div",j3,[o(u,{discount:n.discount,totalAmount:a.order.subtotal,onWhenDiscountEditIsDone:l.applyDiscount,onEmitCancelDiscountModal:e[2]||(e[2]=m=>n.discountModalIsOpen=!1)},null,8,["discount","totalAmount","onWhenDiscountEditIsDone"])])):x("",!0)]),_:1},8,["modelValue","title"])],64)}const nr=ye(P3,[["render",z3]]),Y3={name:"ShippingModal",props:["shipping","shipping_type"],setup(t,{emit:e}){const a=T(t.shipping_type);return{availableOptions:T([{label:"Custom",value:"custom"}]),updatingIsDone:()=>parseInt(t.shipping.custom_price)<0?t.shipping.custom_price=0:(parseInt(t.shipping.custom_price)==0&&(t.shipping.custom_price=0),t.shipping.rate_name=t.shipping.rate_name==""||t.shipping.rate_name==null?"Custom":t.shipping.rate_name,t.shipping.type=a.value,e("whenShippingEditIsDone",!1)),removeShipping:()=>{t.shipping.type="",t.shipping.custom_price="",t.shipping.rate_name="",e("whenShippingEditIsDone",!1)},isDisabledApplyButton:()=>{const u=parseInt(t.shipping.custom_price);return isNaN(u)||u<0},shippingType:a}}},q3={class:"fct-shipping-modal"},W3=["innerHTML"],X3={class:"dialog-footer"};function J3(t,e,a,s,n,l){const A=y("el-radio"),u=y("el-radio-group"),c=y("el-form-item"),m=y("el-col"),v=y("el-row"),b=y("el-input"),g=y("el-form"),F=y("el-button");return d(),_("div",q3,[o(g,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(v,{gutter:20},{default:r(()=>[o(m,{md:24,sm:24,xs:24},{default:r(()=>[o(c,{label:t.$t(""),required:""},{default:r(()=>[o(u,{modelValue:s.shippingType,"onUpdate:modelValue":e[0]||(e[0]=B=>s.shippingType=B)},{default:r(()=>[(d(!0),_(H,null,q(s.availableOptions,(B,w)=>(d(),U(A,{label:B.value,key:w},{default:r(()=>[M(h(B.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),s.shippingType==="custom"?(d(),U(v,{key:0,gutter:15},{default:r(()=>[o(m,{md:12,sm:12,xs:24},{default:r(()=>[o(c,{label:t.$t("Name")},{default:r(()=>[o(b,{type:"text",modelValue:a.shipping.rate_name,"onUpdate:modelValue":e[1]||(e[1]=B=>a.shipping.rate_name=B)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(m,{md:12,sm:12,xs:24},{default:r(()=>[o(c,{label:t.$t("Price")},{default:r(()=>[o(b,{type:"number",min:1,modelValue:a.shipping.custom_price,"onUpdate:modelValue":e[2]||(e[2]=B=>a.shipping.custom_price=B),modelModifiers:{number:!0},onKeyup:s.isDisabledApplyButton},{prefix:r(()=>[i("span",{innerHTML:t.appVars.shop.currency_sign},null,8,W3)]),_:1},8,["modelValue","onKeyup"])]),_:1},8,["label"])]),_:1})]),_:1})):x("",!0)]),_:1}),i("div",X3,[a.shipping.type?(d(),U(F,{key:0,type:"danger",onClick:s.removeShipping},{default:r(()=>[M(h(t.$t("Remove Shipping")),1)]),_:1},8,["onClick"])):x("",!0),o(F,{type:"primary",onClick:s.updatingIsDone,disabled:s.isDisabledApplyButton()},{default:r(()=>[M(h(t.$t("Apply")),1)]),_:1},8,["onClick","disabled"])])])}const Z3=ye(Y3,[["render",J3]]),eQ={name:"Shipping",components:{IconButton:Be,DynamicIcon:Y,ShippingModal:Z3},props:{order:{type:Object,default:()=>({})},shippingAttributes:{type:Object,default:()=>({id:""})},shouldEnableEditing:{type:Boolean,default:!0},shippingMethodsProps:{type:Array,default:()=>[]},otherShippingMethodsProps:{type:Array,default:()=>[]}},data(){return{shippingModalIsOpen:!1,shipping:this.shippingAttributes,currency:$e.get("shop.currency_sign"),shippingMethods:this.shippingMethodsProps,otherShippingMethods:this.otherShippingMethodsProps,total_shipping:this.order.shipping_total/100}},watch:{shippingMethodsProps:{handler:function(t,e){this.shippingMethods=t},deep:!0},otherShippingMethodsProps:{handler:function(t,e){this.otherShippingMethods=t},deep:!0},order:{handler:function(t,e){this.total_shipping=t.shipping_total/100},deep:!0}},methods:{formatNumber:st,translate:f,showShippingModal(){this.shippingModalIsOpen=!0},hasFreeShipping(){return Object.keys(this.shipping).length>0&&parseInt(this.shipping.custom_price)==0},getShippingButtonLabel(){return!this.shouldEnableEditing&&this.order.order_items.length>0?f("Shipping"):this.shipping.id!==0?f("Edit Shipping"):f("Add Shipping")},getShippingTitle(){if(this.shipping.id==0)return"__";const t=this.shippingMethods.find(e=>e.id==this.shipping.id);return t?t.title:"__"},updateShipping(){this.shippingModalIsOpen=!1;const t=[];this.order.order_items.length>0&&this.order.order_items.forEach(e=>{t.push({id:e.object_id,quantity:e.quantity,unit_price:e.unit_price,discount_total:e.discount_total})}),te.post("orders/calculate-shipping",{shipping_id:this.shipping.id,order_items:t}).then(e=>{this.order.shipping_total=e.shipping_charge;const a={order_items:e.order_items,shipping_total:e.shipping_charge};this.total_shipping=this.order.shipping_total/100,this.$emit("update:shipping",a.order_items,a.shipping_total)}).catch(e=>{var a;e.status_code=="422"?J.validationErrors(e):J.error((a=e.data)==null?void 0:a.message)}).finally(()=>{this.shippingModalIsOpen=!1})},getShippingMethodsNotFoundMessage(){const t=this.$router.resolve({name:"shipping"}).href;return f("No shipping methods found. You can add shipping methods from %1$s here %2$s",`<a href="${t}" target="_blank" class="link-text">`,"</a>")}},mounted(){}},tQ={key:1},aQ={key:0},sQ={key:1,class:"max-w-[120px] block ml-auto text-right"},nQ={key:2},oQ={key:0},lQ={key:0,class:"fct-shipping-methods-list-wrap"},rQ={key:0,class:"charge"},iQ={key:1,class:"fct-other-shipping-methods-list-wrap"},AQ={key:0,class:"charge"},dQ={key:1,class:"fct-no-shipping-methods-found"},uQ=["innerHTML"];function cQ(t,e,a,s,n,l){const A=y("DynamicIcon"),u=y("el-input"),c=y("el-radio"),m=y("el-radio-group"),v=y("el-button"),b=y("el-dialog");return d(),_(H,null,[i("tr",null,[i("td",null,[a.shouldEnableEditing&&a.order.order_items.length>0?(d(),_("a",{key:0,href:"#",onClick:e[0]||(e[0]=Ke(g=>l.showShippingModal(),["prevent"]))},[M(h(l.getShippingButtonLabel())+" ",1),o(A,{name:"External"})])):(d(),_("span",tQ,h(l.getShippingButtonLabel()),1))]),i("td",null,h(l.getShippingTitle()),1),i("td",null,[l.hasFreeShipping()?(d(),_("span",aQ,[i("del",null,h(l.formatNumber(a.order.shipping_total)),1),M(" "+h(l.translate("Free")),1)])):x("",!0),a.shouldEnableEditing&&!l.hasFreeShipping()?(d(),_("span",sQ,[o(u,{modelValue:n.total_shipping,"onUpdate:modelValue":e[1]||(e[1]=g=>n.total_shipping=g),onChange:e[2]||(e[2]=g=>{a.order.shipping_total=g*100}),type:"number"},{prefix:r(()=>[M(h(n.currency),1)]),_:1},8,["modelValue"])])):(d(),_("span",nQ,h(l.formatNumber(a.order.shipping_total)),1))])]),o(b,{"append-to-body":!0,width:"50%",modelValue:n.shippingModalIsOpen,"onUpdate:modelValue":e[6]||(e[6]=g=>n.shippingModalIsOpen=g),title:t.$t("Shipping and delivery options")},ut({default:r(()=>[n.shippingModalIsOpen?(d(),_("div",oQ,[n.shippingMethods.length||n.otherShippingMethods.length?(d(),_(H,{key:0},[n.shippingMethods.length?(d(),_("div",lQ,[i("h3",null,h(l.translate("Shipping Methods")),1),o(m,{modelValue:n.shipping.id,"onUpdate:modelValue":e[3]||(e[3]=g=>n.shipping.id=g),class:"fct-shipping-methods-radio"},{default:r(()=>[(d(!0),_(H,null,q(n.shippingMethods,(g,F)=>(d(),U(c,{label:g.id,key:F},{default:r(()=>[M(h(g.title)+" ",1),g.shipping_charge?(d(),_("span",rQ,h(l.formatNumber(g.shipping_charge)),1)):x("",!0)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])):x("",!0),n.otherShippingMethods.length?(d(),_("div",iQ,[i("h3",null,h(l.translate("Other Shipping Methods")),1),o(m,{modelValue:n.shipping.id,"onUpdate:modelValue":e[4]||(e[4]=g=>n.shipping.id=g),class:"fct-shipping-methods-radio"},{default:r(()=>[(d(!0),_(H,null,q(n.otherShippingMethods,(g,F)=>(d(),U(c,{label:g.id,key:F},{default:r(()=>[M(h(g.title)+" ",1),g.shipping_charge?(d(),_("span",AQ,h(l.formatNumber(g.shipping_charge)),1)):x("",!0)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])):x("",!0)],64)):(d(),_("div",dQ,[i("span",{innerHTML:l.getShippingMethodsNotFoundMessage()},null,8,uQ)]))])):x("",!0)]),_:2},[n.shippingMethods.length||n.otherShippingMethods.length?{name:"footer",fn:r(()=>[o(v,{onClick:e[5]||(e[5]=g=>n.shippingModalIsOpen=!1)},{default:r(()=>[M(h(l.translate("Cancel")),1)]),_:1}),o(v,{type:"primary",onClick:l.updateShipping},{default:r(()=>[M(h(l.translate("Apply")),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","title"])],64)}const yA=ye(eQ,[["render",cQ]]),fQ={key:0},pQ={class:"fct-admin-sidebar-item"},mQ={class:"fct-admin-summary-item-list"},hQ={class:"fct-admin-summary-item"},_Q={class:"font-medium"},gQ={key:0,class:"fct-admin-summary-item"},vQ={class:"font-medium"},yQ={key:1,class:"fct-admin-summary-item"},bQ={class:"font-medium"},wQ={key:2,class:"fct-admin-summary-item"},BQ={class:"font-medium"},CQ={key:3,class:"fct-admin-summary-item"},kQ={class:"font-medium"},FQ={key:4,class:"fct-admin-summary-item"},xQ={class:"font-medium"},UQ={key:5,class:"fct-admin-summary-item"},EQ={class:"font-medium"},SQ={class:"fct-admin-summary-item"},QQ={class:"font-medium"},DQ={name:"UtmDetails",props:{order_operation:{type:Object}}},Uf=Object.assign(DQ,{setup(t){return(e,a)=>t.order_operation?(d(),_("div",fQ,[o(se,null,{default:r(()=>[o(le,{title:e.$t("UTM Details"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[i("div",pQ,[i("ul",mQ,[i("li",hQ,[i("span",_Q,h(e.$t("UTM Campaign")),1),i("span",null,h(t.order_operation.utm_campaign||"--"),1)]),t.order_operation.utm_medium?(d(),_("li",gQ,[i("span",vQ,h(e.$t("UTM Medium")),1),i("span",null,h(t.order_operation.utm_medium||"--"),1)])):x("",!0),t.order_operation.utm_source?(d(),_("li",yQ,[i("span",bQ,h(e.$t("UTM Source")),1),i("span",null,h(t.order_operation.utm_source||"--"),1)])):x("",!0),t.order_operation.utm_content?(d(),_("li",wQ,[i("span",BQ,h(e.$t("UTM Content")),1),i("span",null,h(t.order_operation.utm_content||"--"),1)])):x("",!0),t.order_operation.utm_id?(d(),_("li",CQ,[i("span",kQ,h(e.$t("UTM ID")),1),i("span",null,h(t.order_operation.utm_id||"--"),1)])):x("",!0),t.order_operation.utm_term?(d(),_("li",FQ,[i("span",xQ,h(e.$t("UTM Term")),1),i("span",null,h(t.order_operation.utm_term||"--"),1)])):x("",!0),t.order_operation.refer_url?(d(),_("li",UQ,[i("span",EQ,h(e.$t("Refer Url")),1),i("span",null,h(t.order_operation.refer_url||"--"),1)])):x("",!0),Array.isArray(t.order_operation.meta)?(d(!0),_(H,{key:6},q(t.order_operation.meta,(s,n)=>(d(),_("li",SQ,[i("span",QQ,h(n),1),i("span",null,h(s||"--"),1)]))),256)):x("",!0)])])]),_:1})]),_:1})])):x("",!0)}}),$Q={name:"Transaction",components:{ConvertedTime:Vt,Badge:dt},computed:{Str(){return nt}},props:{transactions:{type:Array,required:!0},order_id:{type:Number,required:!0}},emits:["reload"],methods:{translate:f,getCardBrand:ku}},IQ={class:"fct-table-mobile-wrap fct-transaction-details-mobile-wrap"},TQ={class:"fct-table-mobile-header"},MQ={class:"fct-table-mobile-header-left"},VQ={class:"fct-table-status-col"},LQ={class:"fct-table-date-col"},OQ={class:"id"},HQ={class:"fct-table-price-col"},RQ={class:"fct-table-mobile-body"},PQ={class:"fct-table-mobile-body-list"},KQ={class:"fct-table-mobile-method-col"},NQ={class:"label"},GQ={class:"value"},jQ={class:"flex items-center gap-2.5"},zQ={key:0,class:"w-7"},YQ=["title","src","alt"],qQ={key:1,class:"capitalize"},WQ={key:2},XQ={class:"fct-table-mobile-gateway-col"},JQ={class:"label"},ZQ={class:"value"},eD={key:0},tD=["href"];function aD(t,e,a,s,n,l){const A=y("Badge"),u=y("el-tooltip"),c=y("ConvertedTime");return d(),_("div",IQ,[(d(!0),_(H,null,q(a.transactions,(m,v)=>{var b,g;return d(),_("div",{class:"fct-table-mobile-row",key:v},[i("div",TQ,[i("div",MQ,[i("div",VQ,[(b=m==null?void 0:m.meta)!=null&&b.reason?(d(),U(u,{key:0,effect:"dark",placement:"top",content:l.translate((g=m==null?void 0:m.meta)==null?void 0:g.reason),"popper-class":"fct-label-hint-popover fct-tooltip"},{default:r(()=>{var F,B;return[((F=m==null?void 0:m.meta)==null?void 0:F.disputed)==="yes"&&((B=m==null?void 0:m.meta)==null?void 0:B.dispute_resolved)==="no"?(d(),U(A,{key:0,status:m.status},{default:r(()=>[M(h(m.status==="paid"?"Completed":m.status),1)]),_:2},1032,["status"])):(d(),U(A,{key:1,status:m.status},{default:r(()=>[M(h(m.status==="paid"?"Completed":m.status),1)]),_:2},1032,["status"]))]}),_:2},1032,["content"])):(d(),U(A,{key:1,status:m.status},{default:r(()=>[M(h(m.status==="paid"?"Completed":m.status),1)]),_:2},1032,["status"]))]),i("div",LQ,[i("span",OQ,"#"+h(m.id),1),e[0]||(e[0]=i("span",{class:"bullet"},"",-1)),o(c,{"date-time":m.created_at},null,8,["date-time"])])]),i("div",HQ,h(t.formatNumber(m.total)),1)]),i("div",RQ,[i("ul",PQ,[i("li",KQ,[i("div",NQ,h(l.translate("Payment Method:")),1),i("div",GQ,[i("div",jQ,[l.getCardBrand(m.card_brand,m.payment_method_type)?(d(),_("div",zQ,[i("img",{class:"w-full",title:m.payment_method,src:l.getCardBrand(m.card_brand,m.payment_method_type),alt:m.card_brand},null,8,YQ)])):(d(),_("span",qQ,h(m.payment_method_type),1)),m.card_last_4&&m.card_last_4!="0"?(d(),_("span",WQ,h("..."+m.card_last_4),1)):x("",!0)])])]),i("li",XQ,[i("div",JQ,h(l.translate("Gateway ID:")),1),i("div",ZQ,[m.vendor_charge_id===""?(d(),_("span",eD,"--")):(d(),_("a",{key:1,class:"link",target:"_blank",href:m.url},h(m.vendor_charge_id),9,tD))])])])])])}),128))])}const Ef=ye($Q,[["render",aD]]),sD={key:1,class:"fct-single-order-page"},nD={key:1,class:"fct-single-order-wrapper fct-layout-width"},oD={class:"single-page-header flex items-start justify-between"},lD={class:"single-page-header-title-wrap"},rD={class:"single-page-header-status-wrap"},iD={class:"single-page-header-text"},AD={class:"capitalize"},dD={class:"fct-btn-group sm"},uD={class:"single-page-body"},cD={class:"fct-single-order"},fD={class:"fct-single-order-main"},pD={class:"fct-card-header-title is-small"},mD={key:0,class:"fct-browse-product-form-group pb-5"},hD={class:"fct-ordered-product-list-container"},_D={key:0,class:"fct-ordered-product-list-wrapper"},gD={class:"fct-media-content-list -mt-4"},vD={key:0,class:"fct-media-content-list-item px-0"},yD={class:"product-thumbnail"},bD=["src","alt"],wD={class:"product-details"},BD={class:"product-details-content-row"},CD={class:"product-details-content-first flex flex-col"},kD={class:"product-title m-0"},FD={class:"product-variation-title m-0"},xD={key:0,class:"product-subscription-info"},UD=["innerHTML"],ED=["innerHTML"],SD={key:1,class:"product-details-quantity"},QD={key:2,class:"product-details-price-mobile"},DD={class:"product-details-quantity"},$D={key:0,class:"del"},ID={key:0,class:"product-details-content-second shrink-0 grow-0 basis-[90px]"},TD={class:"product-details-quantity"},MD={key:0,class:"del"},VD={class:"product-details-content-third shrink-0 grow-0 flex flex-row justify-end gap-2 basis-[100px]"},LD={key:0},OD={key:1},HD={key:0},RD={key:1},PD={key:0,class:"product-details-action-row"},KD=["onClick"],ND=["onClick"],GD={key:1,class:"m-0 text-center"},jD={class:"fct-card-header-title is-small"},zD={class:"fct-table-border fct-table-order-details"},YD={key:0},qD={key:2},WD={key:3},XD={class:"total-amount-tr"},JD={class:"payment-tr"},ZD={key:4,class:"payment-tr"},e$={key:5,class:"payment-tr"},t$={class:"font-semibold"},a$={key:6,class:"payment-tr"},s$={class:"font-semibold"},n$={key:7,class:"payment-tr total-refund-owed-tr"},o$={class:"flex flex-end m-0 items-center"},l$={class:"font-semibold"},r$={class:"fct-single-order-aside"},i$={class:"fct-admin-sidebar"},A$={key:0},d$={class:"fct-adjust-quantity-modal-content"},u$={class:"title"},c$={class:"fct-form-group"},f$={class:"dialog-footer"},p$={key:0},m$={name:"SingleOrder",props:["order_id"],components:{OrderBulkActions:_A,Alert:bs,Transaction:gA,Plans:kf,Badge:dt,Refresh:Yi,ElMessageBox:cs,CopyToClipboard:Ca,Notes:ar,Coupon:sr,CustomDiscount:nr,OrderCustomerInformation:Ml,ShippingComponent:yA,UtmDetails:Uf,OrderUpDownIndicator:bu,TransactionMobile:Ef},data(){return{notFound:{show:!1,message:"",buttonText:"",route:""},warningMessage:"",loading:!1,calculating:!1,customModal:!1,canceling_subscription:!1,reactivate_subscription:!1,fetching_subscription:!1,pausing_subscription:!1,resuming_subscription:!1,processing_refund:!1,nextInvoiceModal:!1,cartItems:{},discount:{},shippingSettings:{},customItem:{item_name:"",item_price:0,quantity:1,is_physical:"yes"},transactionMedium:!1,otherData:{payment_method:"offline_payment",mark_paid_note:"",vendor_charge_id:""},paymentMethodOption:[{name:"Others",value:"others"}],timeout:"",widgets:[],order:!1,searching:!1,orderSettings:!1,orderAddModal:!1,availableProducts:[],selectedProducts:[],deletedItems:[],searchQuery:"",actionableActivities:[],isSubscription:!1,subscriptionStatus:"",showManageActivity:!1,change_order_infos:!1,change_payment_infos:!1,changes_made:0,createProductModal:!1,showRefundModal:!1,isEditingItem:!1,shouldDisableEditing:!1,adjustQuantityModal:!1,adjustItem:[],selectedLabels:[],tmpAdjustedItem:{},coupons:[],appliedCoupons:[],hasCoupon:!1,shippingMethods:[],otherShippingMethods:[],uniqueItemsCount:0,markingOrderAsPaid:!1,isMobile:window.innerWidth<768,taxId:0}},watch:{order:{handler(t,e){this.changes_made++},deep:!0},order_id:{handler(t,e){this.changeTitle("Order #"+t),this.changes_made=0,this.fetch()}}},computed:{transactionType(){return this.order.order_items.some(t=>t.payment_type==="subscription")?"subscription":"charge"},placeholderImage(){return`${$e.get("asset_url")}images/empty-image.svg`}},methods:{handleResize(){this.isMobile=window.innerWidth<768},getDueRefund(){var t;return this.formatNumber(Math.abs(parseFloat(this.order.total_amount-((t=this.order)==null?void 0:t.total_paid))+parseFloat(this.order.total_refund)))},triggerRefundModal(){this.showRefundModal=!0},getNetPayment(){var t;return this.formatNumber(this.order.total_paid-((t=this.order)==null?void 0:t.total_refund))},getTotalDue(){var t;return this.formatNumber(Math.abs(this.order.total_amount-((t=this.order)==null?void 0:t.total_paid)))},markOrderAsPaid(){this.markingOrderAsPaid||(this.markingOrderAsPaid=!0,te.post("orders/"+this.order_id+"/mark-as-paid",{...this.otherData,transaction_type:this.transactionType}).then(()=>{this.markingOrderAsPaid=!1,this.transactionMedium=!1,this.reloadOrder()}).catch(t=>{var e;this.markingOrderAsPaid=!1,t.status_code=="422"?J.validationErrors(t):J.error((e=t.data)==null?void 0:e.message)}))},handleCommand(t){t==="custom-payment-link"?this.nextInvoiceModal=!0:this.transactionMedium=!0},shouldSkipAdjustmentItem(t){return!(this.order.order_items.some(a=>a.payment_type==="subscription")&&t.payment_type==="adjustment")},handleAdjustQuantityModal(t){this.adjustItem={},this.adjustQuantityModal=!0,this.adjustItem=t},getImageUrl(t){var s,n,l,A;const e=(s=t==null?void 0:t.variants)==null?void 0:s.media;if(e&&Array.isArray(e.meta_value)&&((n=e.meta_value[0])!=null&&n.url))return e.meta_value[0].url;const a=(A=(l=t==null?void 0:t.variants)==null?void 0:l.product_detail)==null?void 0:A.featured_media;return!e&&a&&typeof a=="object"&&a!==null?a.url:this.placeholderImage},getClass(t){let e=null;return t.featured_media!=null&&(e=this.getImageUrl(t)),{"w-full":!0,"border border-solid border-gray-divider rounded":e&&e!==null&&e!==void 0}},shouldShowRefund(){var e;if(!this.order||(e=this.order.config)!=null&&e.upgraded_to)return!1;const t=parseInt(this.order.total_paid/100);return this.order.payment_status!=="refunded"&&t>0&&t>=parseInt(this.order.total_refund/100)},enableItemEditing(){this.isEditingItem=!0,this.fetchShippingMethods()},disableItemEditing(){this.isEditingItem=!1},handlePaymentActions(t){this.changes_made=0,t==="refund"?this.showRefundModal=!0:t==="create_next_invoice"&&(this.nextInvoiceModal=!0)},getOrderUrl(t){const e=$e.get("dashboard_url")+"/orders/"+t+"/view";window.location=e},resetUnsaved(){this.changes_made=0},updateCustomModal(t){this.customModal=t},updateProductModal(t){this.createProductModal=t},updateSearchQuery(t){this.searchQuery=t,this.calculateLine()},updateQuantity(t,e,a){this.tmpAdjustedItem={quantity:t,updatedStock:e,item:a}},saveAdjustedProductQuantity(t){this.adjustQuantityModal=!1,Object.keys(t).length>0&&(parseInt(t.updatedStock)<0?J.error(f("You have exceeded the stock limit! Current stock is : %s",t.updatedStock)):t.item.quantity=t.quantity,t.item.updated_stock=t.updatedStock,this.calculateLine())},calculateLine(){return this.hasCoupon?this.$refs.reApplyCouponRef.reApplyCoupon():vA(this.order,this.hasCoupon)},deleteProduct(t,e){e.id&&this.deletedItems.push(e.id),this.order.order_items.splice(t,1),this.calculateLine()},processCustom(t){t.order_id=this.order_id,this.order.order_items.unshift(t),this.customModal=!1,this.calculateLine()},update(){this.loading=!0;const t={...this.order};delete t.note,te.post("orders/"+this.order_id,{...t,deletedItems:this.deletedItems,discount:this.discount,shipping:this.shippingSettings}).then(e=>{J.success(e.message),this.fetch()}).catch(e=>{var a;e.status_code=="422"?J.validationErrors(e):J.error((a=e.data)==null?void 0:a.message)}).finally(()=>{this.loading=!1})},fetch(){this.notFound.show=!1,this.loading=!0,te.get("orders/"+this.order_id,{with:["widgets"]}).then(t=>{var e,a,s,n,l;this.coupons=t.order.applied_coupons||[],this.hasCoupon=this.coupons.length>0,this.appliedCoupons=this.coupons.map(A=>A.coupon_id),this.order=t.order,this.isSubscription=((e=this.order)==null?void 0:e.subscriptions)&&this.order.subscriptions.length>0,this.isSubscription&&(this.subscriptionStatus=(a=this.order.subscriptions[0])==null?void 0:a.status),this.shouldDisableEditing=["completed","archived","canceled"].includes(this.order.status)||this.isSubscription||this.order.payment_status==="paid",["completed","archived","canceled"].includes(this.order.status)&&(this.warningMessage=f("Order cannot be edited once it is %s",this.order.status)),this.order.payment_status==="paid"&&(this.warningMessage=f("Order cannot be edited once paid.")),this.isSubscription&&(this.warningMessage=f("Subscription Order cannot be edited.")),this.orderSettings=t.orderSettings,this.widgets=t.widgets,this.selectedProducts=this.availableProducts=[],this.discount.value=((s=t.discount_meta)==null?void 0:s.value)||0,this.discount.reason=((n=t.discount_meta)==null?void 0:n.reason)||"",this.discount.type=((l=t.discount_meta)==null?void 0:l.type)||"amount",this.selectedLabels=t.selected_labels||[],this.uniqueItemsCount=Cp(t.order),t.shipping_meta&&t.shipping_meta.type&&(this.shippingSettings=t.shipping_meta),this.taxId=t.tax_id,Ff(this.discount),this.order.order_items.find(A=>A.payment_type==="subscription"),this.order.order_items=this.order.order_items.map(A=>{var u;return{...A,quantity:Number(A.quantity),updated_stock:parseInt((A==null?void 0:A.available)||((u=A==null?void 0:A.variants)==null?void 0:u.available))+parseInt(A.quantity)}}),this.resetUnsaved(),this.renderActionables(),de(()=>{this.changes_made=0})}).catch(t=>{var e;t.code==="fluent_cart_entity_not_found"?(this.notFound.show=!0,this.notFound.buttonText=we.get(t,"data.buttonText"),this.notFound.message=we.get(t,"data.message"),this.notFound.route=we.get(t,"data.route")):t.status_code=="422"?J.validationErrors(t):J.error((e=t.data)==null?void 0:e.message)}).finally(()=>{this.loading=!1,(["completed","archived","canceled"].includes(this.order.status)||["unshippable"].includes(this.order.shipping_status))&&this.disableItemEditing()})},updateCustomDiscount(t){this.discount=t,this.changes_made++},updateCoupons(t,e,a){this.coupons=t,this.appliedCoupons=e,this.hasCoupon=a},updateShipping(t){this.shippingSettings=t,this.changes_made++},reloadOrder(){return window.location.reload()},addProduct(){this.createProductModal=!this.createProductModal},clearActivityAction(t){te.put("activity/"+t.id+"/mark-read",{id:t.id,status:"read"}).then(e=>{this.actionableActivities=this.actionableActivities.filter(a=>a.id!==t.id),this.handleSuccess(e==null?void 0:e.message)}).catch(e=>{var a;e.status_code=="422"?J.validationErrors(e):J.error((a=e.data)==null?void 0:a.message)})},renderActionables(){var a;let t=(a=this==null?void 0:this.order)==null?void 0:a.activities;const e=["warning","error"];this.actionableActivities=t==null?void 0:t.filter(s=>(s==null?void 0:s.read_status)==="unread"&&e.includes(s==null?void 0:s.status))},getCustomerTotalOrders(t){return t>0?t+" "+(t==1?this.$t("order"):this.$t("orders")):this.$t("No orders")},onChangeLabel(t){this.selectedLabels=t,this.changes_made++},saveNoteModal(t){this.order.note=t},hasSubscriptionProduct(t,e){return t.filter(s=>s.variants&&s.variants.other_info&&s.variants.other_info.payment_type===e?!0:!!(s.payment_type&&s.payment_type===e)).length>0},fetchShippingMethods(){const t=[];this.order.order_items.length>0&&this.order.order_items.forEach(e=>{t.push({id:e.object_id,quantity:e.quantity,unit_price:e.unit_price,discount_total:e.discount_total})}),te.get("orders/shipping_methods",{country_code:this.order.customer.country,order_items:t}).then(e=>{this.shippingMethods=e.shipping_methods,this.otherShippingMethods=e.other_shipping_methods}).finally(()=>{})}},mounted(){this.changeTitle("Order #"+this.order_id),this.fetch(),window.onbeforeunload=()=>{if(this.changes_made>1)return!0},($e.get("payment_routes")??[]).filter(e=>!(e!=null&&e.upcoming)).forEach(e=>{var a;this.paymentMethodOption.unshift({name:(a=e==null?void 0:e.meta)==null?void 0:a.title,value:e==null?void 0:e.path})}),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)}},h$=Object.assign(m$,{setup(t){const e=T(),a=()=>e.value.fetchBySearch(),s=()=>{a()};return(n,l)=>{var Q,I;const A=y("el-breadcrumb-item"),u=y("el-breadcrumb"),c=y("el-button"),m=y("el-tooltip"),v=y("el-input"),b=y("router-link"),g=y("el-icon"),F=y("el-dropdown-item"),B=y("el-dropdown-menu"),w=y("el-dropdown"),C=y("el-option"),k=y("el-select"),S=y("el-form-item"),E=y("el-form"),V=y("el-dialog"),$=y("el-skeleton-item"),O=y("el-skeleton"),D=Et("loading");return d(),_(H,null,[n.notFound.show?(d(),U(Ll,{key:0,"button-text":n.notFound.buttonText,message:n.notFound.message,route:n.notFound.route},null,8,["button-text","message","route"])):x("",!0),n.notFound.show===!1?(d(),_("div",sD,[o(yn,{isActive:n.changes_made>=1&&!n.showRefundModal?"is-active":"",onDiscard:n.reloadOrder,onSave:n.update,loading:n.loading,saveButtonText:p(f)("Update"),loadingText:p(f)("Updating")},null,8,["isActive","onDiscard","onSave","loading","saveButtonText","loadingText"]),n.loading?(d(),U(SS,{key:0})):x("",!0),n.order?(d(),_("div",nD,[!n.loading&&n.order?(d(),_(H,{key:0},[i("div",oD,[i("div",null,[i("div",lD,[o(u,{"separator-icon":p(ma)},{default:r(()=>{var L;return[o(A,{to:{name:"orders"}},{default:r(()=>[M(h(p(f)("Orders")),1)]),_:1}),(L=n.order)!=null&&L.parent_id&&n.order.parent_id!="0"?(d(),U(A,{key:0,to:{name:"view_order",params:{}}},{default:r(()=>[i("a",{onClick:l[0]||(l[0]=K=>{var N;return n.getOrderUrl((N=n.order)==null?void 0:N.parent_id)})}," #"+h(n.order.parent_id),1)]),_:1})):x("",!0),o(A,null,{default:r(()=>[M(" #"+h(t.order_id),1)]),_:1})]}),_:1},8,["separator-icon"]),i("div",rD,[o(dt,{status:n.order.status},null,8,["status"]),o(bu,{order:n.order},null,8,["order"])])]),i("div",iD,[o(Vt,{"date-time":n.order.created_at,"with-time":""},null,8,["date-time"]),l[23]||(l[23]=i("span",{class:"fct_separator"},null,-1)),n.order.invoice_no?(d(),_(H,{key:0},[i("span",null,h(n.order.invoice_no),1),l[22]||(l[22]=i("span",{class:"fct_separator"},null,-1))],64)):x("",!0),i("span",AD,h(n.order.type),1)])]),i("div",dD,[n.shouldShowRefund()?(d(),U(c,{key:0,onClick:l[1]||(l[1]=L=>n.handlePaymentActions("refund")),class:"bulk-action-hide-only-mobile"},{default:r(()=>[M(h(p(f)("Refund")),1)]),_:1})):x("",!0),n.isEditingItem?(d(),U(c,{key:2,onClick:n.disableItemEditing,class:"bulk-action-hide-only-mobile"},{default:r(()=>[M(h(p(f)("Disable Editing")),1)]),_:1},8,["onClick"])):(d(),U(c,{key:1,onClick:n.enableItemEditing,disabled:n.shouldDisableEditing,class:"bulk-action-hide-only-mobile"},{default:r(()=>[n.shouldDisableEditing?(d(),U(m,{key:0,placement:"top","popper-class":"fct-tooltip fct-disabled-edit-order-tooltip"},{content:r(()=>[M(h(n.warningMessage),1)]),default:r(()=>[M(" "+h(p(f)("Edit")),1)]),_:1})):(d(),_(H,{key:1},[M(h(p(f)("Edit")),1)],64))]),_:1},8,["onClick","disabled"])),o(_A,{onReload:l[2]||(l[2]=L=>n.reloadOrder()),onAddItem:a,onAddProduct:n.addProduct,onEnableItemEditing:n.enableItemEditing,onDisableItemEditing:n.disableItemEditing,onHandlePaymentActions:n.handlePaymentActions,"is-editing-item":n.isEditingItem,order:n.order,triggerMode:n.isMobile?"":"button",shouldShowRefund:n.shouldShowRefund(),warningMessage:n.warningMessage},null,8,["onAddProduct","onEnableItemEditing","onDisableItemEditing","onHandlePaymentActions","is-editing-item","order","triggerMode","shouldShowRefund","warningMessage"])])]),i("div",uD,[(d(!0),_(H,null,q(n.actionableActivities,L=>(d(),U(bs,{class:"mb-5",type:"error",key:L.id,content:L==null?void 0:L.content,closable:"",onClose:K=>n.clearActivityAction(L)},null,8,["content","onClose"]))),128)),i("div",cD,[i("div",fD,[o(se,{class:"overflow-hidden fct-order-items-card"},{default:r(()=>[o(le,{border_bottom:""},{title:r(()=>{var L,K;return[i("h2",pD,[M(h(p(f)("Order items"))+" ",1),((L=n.order)==null?void 0:L.fulfillment_type)==="physical"?(d(),U(dt,{key:0,status:(K=n.order)==null?void 0:K.shipping_status},{default:r(()=>{var N;return[M(h((N=n.order)==null?void 0:N.shipping_status),1)]}),_:1},8,["status"])):x("",!0)])]}),_:1}),o(ae,null,{default:r(()=>[n.isEditingItem?(d(),_("div",mD,[o(v,{placeholder:p(f)("Search products..."),onKeyup:l[3]||(l[3]=L=>a()),modelValue:n.searchQuery,"onUpdate:modelValue":l[4]||(l[4]=L=>n.searchQuery=L)},{prefix:r(()=>[o(Y,{name:"Search"})]),_:1},8,["placeholder","modelValue"]),o(c,{onClick:s,type:"info",soft:"",class:"el-button--x-small"},{default:r(()=>[M(h(p(f)("Browse")),1)]),_:1})])):x("",!0),i("div",hD,[n.order.order_items.length>0?(d(),_("div",_D,[i("div",gD,[(d(!0),_(H,null,q(n.order.order_items,(L,K)=>{var N,W,R,ee,oe,Ae,ue;return d(),_(H,{key:K},[L.payment_type!=="signup_fee"&&((N=L==null?void 0:L.other_info)==null?void 0:N.item_status)!=="adjusted"&&n.shouldSkipAdjustmentItem(L)?(d(),_("div",vD,[i("div",yD,[o(b,{class:"link",to:{name:"product_edit",params:{product_id:L==null?void 0:L.post_id}}},{default:r(()=>[i("img",{src:L.featured_media!=null?L.featured_media:n.getImageUrl(L),alt:L.title,class:ne(n.getClass(L))},null,10,bD)]),_:2},1032,["to"])]),i("div",wD,[i("div",BD,[i("div",CD,[i("div",kD,[o(b,{class:"link",to:{name:"product_edit",params:{product_id:L==null?void 0:L.post_id}}},{default:r(()=>[M(h(L==null?void 0:L.post_title),1)]),_:2},1032,["to"])]),i("div",FD,"  "+h(L==null?void 0:L.title),1),(L==null?void 0:L.payment_type)==="subscription"?(d(),_("div",xD,[i("span",{innerHTML:L==null?void 0:L.payment_info},null,8,UD),((W=L==null?void 0:L.other_info)==null?void 0:W.manage_setup_fee)==="yes"?(d(),_("span",{key:0,innerHTML:L==null?void 0:L.setup_info},null,8,ED)):x("",!0)])):x("",!0),n.isEditingItem?(d(),_("div",SD,[i("span",null,h(n.formatNumber(L.unit_price)),1),l[24]||(l[24]=i("span",null,"x",-1)),i("span",null,h(L.quantity),1)])):x("",!0),n.isEditingItem?x("",!0):(d(),_("div",QD,[i("div",DD,[((R=L==null?void 0:L.variants)==null?void 0:R.length)>0?(d(),_("span",$D,h(n.formatNumber(L.variants.compare_price)),1)):x("",!0),i("span",null,h(n.formatNumber(L.unit_price)),1),l[25]||(l[25]=i("span",null,"x",-1)),i("span",null,h(L.quantity),1)])]))]),n.isEditingItem?x("",!0):(d(),_("div",ID,[i("div",TD,[((ee=L==null?void 0:L.variants)==null?void 0:ee.length)>0?(d(),_("span",MD,h(n.formatNumber(L.variants.compare_price)),1)):x("",!0),i("span",null,h(n.formatNumber(L.unit_price)),1),l[26]||(l[26]=i("span",null,"x",-1)),i("span",null,h(L.quantity),1)])])),i("div",VD,[((oe=L==null?void 0:L.other_info)==null?void 0:oe.item_status)!=="adjusted"?(d(),_("span",LD,h(n.formatNumber(L.line_total)),1)):x("",!0),L.payment_type==="subscription"&&((Ae=L==null?void 0:L.other_info)==null?void 0:Ae.manage_setup_fee)==="yes"?(d(),_("div",OD,[l[27]||(l[27]=i("span",null,"+ ",-1)),((ue=L==null?void 0:L.other_info)==null?void 0:ue.setup_fee_per_item)==="yes"?(d(),_("span",HD,[i("span",null,h(n.formatNumber(L.other_info.signup_fee*L.quantity)),1)])):(d(),_("span",RD,h(n.formatNumber(L.other_info.signup_fee)),1))])):x("",!0)])]),n.isEditingItem?(d(),_("div",PD,[i("a",{href:"#",onClick:Ke(P=>n.handleAdjustQuantityModal(L),["prevent"])},h(p(f)("Adjust Quantity")),9,KD),i("a",{href:"#",onClick:Ke(P=>n.deleteProduct(K,L),["prevent"])},h(p(f)("Remove Item")),9,ND)])):x("",!0)])])):x("",!0)],64)}),128))])])):x("",!0),n.order.order_items.length==0?(d(),_("p",GD,h(p(f)("No items found.")),1)):x("",!0)])]),_:1})]),_:1}),o(se,{class:"fct-order-payment-card"},{default:r(()=>[o(le,{border_bottom:""},{title:r(()=>[i("h2",jD,[i("span",null,h(p(f)("Payment")),1),o(dt,{status:n.order.payment_status,size:"small"},null,8,["status"])])]),_:1}),o(ae,null,{default:r(()=>{var L,K,N,W,R,ee,oe;return[i("table",zD,[i("tbody",null,[i("tr",null,[i("td",null,h(p(f)("Subtotal")),1),i("td",null,[n.order.order_items.length>0?(d(),_("span",YD,h(p(Mt)(n.uniqueItemsCount))+" "+h(p(Zn)("item","items",n.uniqueItemsCount)),1)):x("",!0)]),i("td",null,h(n.formatNumber(n.order.subtotal)),1)]),o(yA,{order:n.order,shippingAttributes:n.shippingSettings,shouldEnableEditing:n.isEditingItem,"onUpdate:shipping":n.updateShipping,shippingMethodsProps:n.shippingMethods,otherShippingMethodsProps:n.otherShippingMethods},null,8,["order","shippingAttributes","shouldEnableEditing","onUpdate:shipping","shippingMethodsProps","otherShippingMethodsProps"]),n.order.order_items.length>0&&(n.isEditingItem||n.hasCoupon)?(d(),U(sr,{key:0,order:n.order,couponsAttributes:n.coupons,hasCouponAttributes:n.hasCoupon,appliedCouponsAttributes:n.appliedCoupons,action:"edit_order",shouldManageCoupon:n.isEditingItem,"onUpdate:coupons":n.updateCoupons,ref:"reApplyCouponRef"},null,8,["order","couponsAttributes","hasCouponAttributes","appliedCouponsAttributes","shouldManageCoupon","onUpdate:coupons"])):x("",!0),n.hasCoupon?x("",!0):(d(),U(nr,{key:1,order:n.order,discountAttributes:n.discount,hasCoupon:n.hasCoupon,shouldEnableEditing:n.isEditingItem,"onUpdate:customDiscount":n.updateCustomDiscount},null,8,["order","discountAttributes","hasCoupon","shouldEnableEditing","onUpdate:customDiscount"])),n.order.tax_total?(d(),_("tr",qD,[i("td",null,h(p(f)("Tax"))+" "+h(parseInt(n.order.tax_behavior)==2?p(f)("(Included)"):p(f)("(Excluded)")),1),l[28]||(l[28]=i("td",null,null,-1)),i("td",null,h(n.formatNumber(n.order.tax_total)),1)])):x("",!0),n.order.shipping_tax?(d(),_("tr",WD,[i("td",null,h(p(f)("Shipping Tax"))+" "+h(parseInt(n.order.tax_behavior)==2?p(f)("(Included)"):p(f)("(Excluded)")),1),l[29]||(l[29]=i("td",null,null,-1)),i("td",null,h(n.formatNumber(n.order.shipping_tax)),1)])):x("",!0),i("tr",XD,[i("td",null,h(p(f)("Total")),1),l[30]||(l[30]=i("td",null,null,-1)),i("td",null,h(n.formatNumber(n.order.total_amount)),1)]),i("tr",JD,[i("td",null,h(p(f)("Total Paid")),1),l[31]||(l[31]=i("td",null,null,-1)),i("td",null,h(n.formatNumber((L=n.order)==null?void 0:L.total_paid)),1)]),((K=n.order)==null?void 0:K.total_refund)>0?(d(),_("tr",ZD,[i("td",null,h(p(f)("Total Refund")),1),l[32]||(l[32]=i("td",null,null,-1)),i("td",null,"- "+h(n.formatNumber((N=n.order)==null?void 0:N.total_refund)),1)])):x("",!0),n.order.total_paid-((W=n.order)==null?void 0:W.total_refund)!=0?(d(),_("tr",e$,[i("td",null,h(p(f)("Net Payment")),1),l[33]||(l[33]=i("td",null,null,-1)),i("td",t$,h(n.getNetPayment()),1)])):x("",!0),n.order.total_amount-((R=n.order)==null?void 0:R.total_paid)>0?(d(),_("tr",a$,[i("td",null,h(p(f)("Total Due")),1),l[34]||(l[34]=i("td",null,null,-1)),i("td",s$,h(n.getTotalDue()),1)])):x("",!0),n.order.total_amount-(((ee=n.order)==null?void 0:ee.total_paid)-((oe=n.order)==null?void 0:oe.total_refund))<0?(d(),_("tr",n$,[i("td",null,[i("p",o$,[o(p($p),{class:"w-6 text-amber-500 mr-2"}),M(" "+h(p(f)("Total Refund Owed")),1)])]),l[35]||(l[35]=i("td",null,null,-1)),i("td",l$,h(n.getTotalDue()),1)])):x("",!0)])])]}),_:1})]),_:1}),n.order.transactions&&n.order.transactions.length?At((d(),U(se,{key:0,"element-loading-text":"Cancelling in progress...",class:"overflow-hidden"},{default:r(()=>[o(le,{title:p(f)("Transaction Details"),border_bottom:"",title_size:"small"},{action:r(()=>{var L;return[n.order.total_amount-((L=n.order)==null?void 0:L.total_paid)>0&&n.order.status!=="canceled"&&n.markingOrderAsPaid===!1?(d(),U(w,{key:0,trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:n.handleCommand},{dropdown:r(()=>[o(B,null,{default:r(()=>[o(F,{command:"custom-payment-link"},{default:r(()=>[M(h(p(f)("Custom Payment Link"))+" ",1),o(m,{effect:"dark",content:p(f)("Due amount is remaining, Get a custom payment link to send to the customer."),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(g,null,{default:r(()=>[o(p(Aa))]),_:1})]),_:1},8,["content"])]),_:1}),o(F,{command:"mark-order-paid"},{default:r(()=>[M(h(p(f)("Mark order as paid")),1)]),_:1})]),_:1})]),default:r(()=>[o(c,{size:"small"},{default:r(()=>[M(h(p(f)("Collect Payments"))+" ",1),o(Y,{name:"ChevronDown"})]),_:1}),o(Y,{name:"More"})]),_:1},8,["onCommand"])):x("",!0)]}),_:1},8,["title"]),o(ae,{class:"p-0"},{default:r(()=>[o(gA,{onReload:l[5]||(l[5]=L=>n.reloadOrder()),onTriggerRefundModal:n.triggerRefundModal,transactions:n.order.transactions,order_id:n.order.id},null,8,["onTriggerRefundModal","transactions","order_id"]),o(Ef,{onReload:l[6]||(l[6]=L=>n.reloadOrder()),transactions:n.order.transactions,order_id:n.order.id},null,8,["transactions","order_id"])]),_:1})]),_:1})),[[D,n.canceling_subscription]]):x("",!0),o(V,{title:p(f)("Mark as paid"),modelValue:n.transactionMedium,"onUpdate:modelValue":l[10]||(l[10]=L=>n.transactionMedium=L)},{footer:r(()=>[At((d(),U(c,{plan:"",type:"primary",onClick:n.markOrderAsPaid,disabled:n.markingOrderAsPaid},{default:r(()=>[M(h(p(f)("Mark Paid")),1)]),_:1},8,["onClick","disabled"])),[[D,n.markingOrderAsPaid]])]),default:r(()=>[i("div",null,[o(E,{"label-position":"top"},{default:r(()=>[o(S,{"label-position":"top",label:p(f)("Payment method")},{default:r(()=>[o(k,{modelValue:n.otherData.payment_method,"onUpdate:modelValue":l[7]||(l[7]=L=>n.otherData.payment_method=L)},{default:r(()=>[(d(!0),_(H,null,q(n.paymentMethodOption,L=>(d(),U(C,{key:L.value,label:L.name,value:L.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(S,{"label-position":"top",label:p(f)("Vendor charge id")},{default:r(()=>[o(v,{modelValue:n.otherData.vendor_charge_id,"onUpdate:modelValue":l[8]||(l[8]=L=>n.otherData.vendor_charge_id=L)},null,8,["modelValue"])]),_:1},8,["label"]),o(S,{"label-position":"top",label:p(f)("Notes")},{default:r(()=>[o(v,{rows:2,type:"textarea",placeholder:p(f)("Please enter the payment note..."),modelValue:n.otherData.mark_paid_note,"onUpdate:modelValue":l[9]||(l[9]=L=>n.otherData.mark_paid_note=L)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1})])]),_:1},8,["title","modelValue"]),n.order.licenses?(d(),U(se,{key:1,class:"overflow-hidden"},{default:r(()=>[o(le,{title:p(f)("Licenses"),title_size:"small"},null,8,["title"]),o(ae,{class:"px-0 pb-0"},{default:r(()=>[o(Pi,{licenses:n.order.licenses,columns:["product"]},null,8,["licenses"])]),_:1})]),_:1})):x("",!0),o(se,{class:"overflow-hidden mb-0"},{default:r(()=>[o(le,{title:p(f)("Activity"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(Cf,{onReload:n.reloadOrder,activities:n.order.activities||[],showManageActivity:n.showManageActivity},null,8,["onReload","activities","showManageActivity"])]),_:1})]),_:1})]),i("div",r$,[i("div",i$,[(d(!0),_(H,null,q(n.order.subscriptions,(L,K)=>(d(),U(PS,{key:L.id,subscription:L,order:n.order,orderId:t.order_id,index:K,onFetchOrder:l[11]||(l[11]=N=>n.$emit("fetch")),onReload:l[12]||(l[12]=N=>n.reloadOrder()),getOrderUrl:n.getOrderUrl},null,8,["subscription","order","orderId","index","getOrderUrl"]))),128)),n.order.customer?(d(),U(Ml,{key:0,order:n.order,shouldEnableEditing:!0},null,8,["order"])):x("",!0),o(ar,{orderId:n.order.id,note:n.order.note,shouldEnableEditing:!0},null,8,["orderId","note"]),o(Tl,{"bind-to-id":n.order.id,"bind-to-type":"Order",selectedLabels:n.selectedLabels,shouldEnableEditing:!0,"onUpdate:updateLabel":()=>{}},null,8,["bind-to-id","selectedLabels"]),(Q=n.order)!=null&&Q.order_operation?(d(),U(Uf,{key:1,order_operation:(I=n.order)==null?void 0:I.order_operation},null,8,["order_operation"])):x("",!0),o(zS,{taxId:n.taxId},null,8,["taxId"])]),n.order?(d(),_("div",A$,[o(Bn,{filter:"single_order_page","widgets-query":{order_id:n.order.uuid},data:{order:n.order}},null,8,["widgets-query","data"])])):x("",!0)])]),o(V,{modelValue:n.adjustQuantityModal,"onUpdate:modelValue":l[15]||(l[15]=L=>n.adjustQuantityModal=L),title:p(f)("Adjust Quantity"),width:"35%","align-center":"","append-to-body":!0,class:"fct-adjust-quantity-modal",onClose:l[16]||(l[16]=()=>{n.adjustQuantityModal=!1,n.adjustItem={},n.tmpAdjustedItem={}})},{footer:r(()=>[i("div",f$,[o(c,{onClick:l[13]||(l[13]=L=>n.adjustQuantityModal=!1),type:"info",soft:""},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),o(c,{type:"primary",onClick:l[14]||(l[14]=L=>n.saveAdjustedProductQuantity(n.tmpAdjustedItem))},{default:r(()=>[M(h(p(f)("Done")),1)]),_:1})])]),default:r(()=>[i("div",d$,[i("div",u$,[l[36]||(l[36]=M(" Adjust the quantity for ",-1)),i("strong",null,h(n.adjustItem.title),1)]),i("div",c$,[i("label",null,h(p(f)("Quantity")),1),n.isEditingItem?(d(),U(Bf,{key:0,item:n.adjustItem,"onUpdate:value":n.updateQuantity},null,8,["item","onUpdate:value"])):x("",!0)])])]),_:1},8,["modelValue","title"]),o(wf,{ref_key:"productItemModal",ref:e,order_id:t.order_id,searchQueryParent:n.searchQuery,orderParent:n.order,"onUpdate:searchQuery":n.updateSearchQuery},null,8,["order_id","searchQueryParent","orderParent","onUpdate:searchQuery"]),o(V,{"append-to-body":!0,width:"40%",modelValue:n.createProductModal,"onUpdate:modelValue":l[17]||(l[17]=L=>n.createProductModal=L),title:p(f)("Add New Product")},{default:r(()=>[n.createProductModal?(d(),_("div",p$,[o(Wl,{customModal:"order_modal","onUpdate:createProductModal":n.updateProductModal,onProcess_custom:n.processCustom},null,8,["onUpdate:createProductModal","onProcess_custom"])])):x("",!0)]),_:1},8,["modelValue","title"]),o(V,{"append-to-body":!0,modelValue:n.showRefundModal,"onUpdate:modelValue":l[19]||(l[19]=L=>n.showRefundModal=L),title:p(f)("Refund Transaction"),onClose:l[20]||(l[20]=()=>{n.changes_made=0,n.showRefundModal=!1,n.fetch()})},{default:r(()=>[At(o(qE,{"element-loading-text":p(f)("Refund initiating on remote..."),order_id:t.order_id,order:n.order,showRefundModal:n.showRefundModal,onProcessing_refund:l[18]||(l[18]=L=>n.processing_refund=L),subscription:n.subscription,is_subscription:n.isSubscription,subscription_status:n.subscriptionStatus},null,8,["element-loading-text","order_id","order","showRefundModal","subscription","is_subscription","subscription_status"]),[[D,n.processing_refund]])]),_:1},8,["modelValue","title"]),n.loading?(d(),U(O,{key:0,animated:""},{default:r(()=>[o($),o($),o($)]),_:1})):x("",!0),o(V,{modelValue:n.nextInvoiceModal,"onUpdate:modelValue":l[21]||(l[21]=L=>n.nextInvoiceModal=L),title:p(f)("Custom payment link")},{default:r(()=>[o(rS,{order_id:t.order_id,order:n.order,onReload:n.fetch},null,8,["order_id","order","onReload"])]),_:1},8,["modelValue","title"])])],64)):x("",!0)])):x("",!0)])):x("",!0)],64)}}}),_$={class:"fct-create-order-wrapper fct-layout-width"},g$={class:"single-page-header"},v$={class:"single-page-header-title-wrap"},y$={class:"single-page-body"},b$={class:"fct-create-order"},w$={class:"fct-create-order-main"},B$={class:"fct-browse-product-form-group pb-5 mx-5"},C$={key:0,class:"fct-table-wrap fct-table-transparent-header"},k$={class:"fct-product-info-card"},F$={class:"fct-product-info-media"},x$=["src","alt"],U$={class:"fct-product-info-details"},E$={class:"fct-product-info-name"},S$={class:"product-sub-name"},Q$={class:"mt-1"},D$={key:0,class:"line-through mr-3"},$$={key:1},I$={key:0},T$={class:"fct-input-number-wrap"},M$={key:0},V$={key:0},L$={key:1},O$={class:"fct-table-border fct-table-order-details"},H$={key:0},R$={key:3},P$={class:"fct-create-order-aside"},K$={class:"fct-admin-sidebar"},N$={key:0},G$={name:"CreateOrder",components:{OrderBulkActions:_A,Transaction:gA,Badge:dt,IconButton:Be,CopyToClipboard:Ca,Notes:ar,Coupon:sr,CustomDiscount:nr,OrderCustomerInformation:Ml,Shipping:yA},data(){return{loading:!1,calculating:!1,customModal:!1,cartItems:{},discount:{},shippingSettings:{},customItem:{title:"",price:0,quantity:1,is_physical:"yes"},timeout:"",widgets:[],order:{applied_coupon:[],customer_id:"",customer:{id:null,full_name:"",email:"",phone:""},status:"processing",subtotal:0,manual_discount_total:0,shipping_tax:0,shipping_total:0,tax_total:0,total_amount:0,order_items:[],payment_status:"pending",payment_method:"offline_payment",shipping_status:"unshipped"},searching:!1,orderSettings:!1,orderAddModal:!1,availableProducts:[],selectedProducts:[],deletedItems:[],searchQuery:"",change_order_infos:!1,change_payment_infos:!1,changes_made:0,createProductModal:!1,coupons:[],appliedCoupons:[],hasCoupon:!1,selectedLabels:[],selectedCustomerCountry:"",shippingMethods:[],otherShippingMethods:[]}},watch:{order:{handler(){this.changes_made++},deep:!0}},computed:{beforeRouteLeave(t,e,a){this.redirectRouteName=t.name,this.changes_made?this.outerVisible=!0:a()}},methods:{getImageUrl(t,e){return t&&t!==null&&t!==void 0?t:e+"images/empty-image.svg"},getClass(t){return{"w-full":!0,"border border-solid border-gray-divider rounded":t&&t!==null&&t!==void 0}},resetUnsaved(){this.changes_made=0},updateCustomModal(t){this.customModal=t},updateProductModal(t){this.createProductModal=t},updateSearchQuery(t){this.searchQuery=t,this.calculateLine()},updateQuantity(t,e,a){parseInt(e)<0?this.handleError(`You have exceeded the stock limit! Current stock is :  ${e}`):a.quantity=t,a.updated_stock=e,this.calculateLine()},calculateLine(){return this.hasCoupon?this.$refs.reApplyCouponRef.reApplyCoupon():vA(this.order,this.hasCoupon)},deleteProduct(t,e){e.id&&this.deletedItems.push(e.id),this.order.order_items.splice(t,1),this.calculateLine()},processCustom(t){t.order_id=this.order_id,this.order.order_items.unshift(t),this.customModal=!1,this.calculateLine()},update(){delete this.order.customer.orders,this.loading=!0,te.post("orders",{...this.order,discount:this.discount,shipping:this.shippingSettings,labels:this.selectedLabels,user_tz:Ce.tz.guess(),trigger:"on_admin_create"}).then(t=>{J.success(t.message),setTimeout(()=>{this.$router.push({name:"view_order",params:{order_id:t==null?void 0:t.order_id}})},300)}).catch(t=>{var e,a;((e=t.data)==null?void 0:e.status_code)=="422"?J.validationErrors(t):J.error((a=t.data)==null?void 0:a.message)}).finally(()=>{this.loading=!1,this.changes_made=0})},reloadOrder(){return window.location.reload()},addProduct(){this.createProductModal=!this.createProductModal},onChangeLabel(t){this.selectedLabels=t},saveNoteModal(t){this.order.note=t},updateCustomDiscount(t){this.discount=t,this.changes_made++},updateCoupons(t,e,a){this.coupons=t,this.appliedCoupons=e,this.hasCoupon=a},updateShipping(t,e){var a;(a=this.order)==null||a.order_items.forEach((s,n)=>{s.shipping_charge=we.get(t,`${s.id}.shipping_charge`)}),this.order.shipping_total=e,this.changes_made++},isDisabled(t){var e;return((e=t==null?void 0:t.other_info)==null?void 0:e.payment_type)==="subscription"},fetchShippingMethods(){const t=[];this.order.order_items.length>0&&this.order.order_items.forEach(e=>{t.push({id:e.object_id,quantity:e.quantity,unit_price:e.unit_price,discount_total:e.discount_total})}),te.get("orders/shipping_methods",{country_code:this.selectedCustomerCountry,order_items:t}).then(e=>{this.shippingMethods=e.shipping_methods,this.otherShippingMethods=e.other_shipping_methods}).finally(()=>{})}},mounted(){this.fetchShippingMethods(),window.onbeforeunload=()=>{if(this.changes_made>0)return!0}}},j$=Object.assign(G$,{setup(t){const e=T(),a=T(!0),s=()=>e.value.fetchBySearch(),n=()=>{s()};return(l,A)=>{const u=y("el-breadcrumb-item"),c=y("el-breadcrumb"),m=y("el-input"),v=y("el-button"),b=y("router-link"),g=y("el-table-column"),F=y("el-table"),B=y("el-dialog"),w=Et("loading");return d(),_("div",_$,[o(yn,{isActive:l.changes_made>0?"is-active":"",onDiscard:l.reloadOrder,onSave:l.update,loading:l.loading},null,8,["isActive","onDiscard","onSave","loading"]),i("div",g$,[i("div",v$,[o(c,{"separator-icon":p(ma)},{default:r(()=>[o(u,{to:{name:"orders"}},{default:r(()=>[M(h(l.$t("Orders")),1)]),_:1}),o(u,null,{default:r(()=>[M(h(l.$t("Create Order")),1)]),_:1})]),_:1},8,["separator-icon"])])]),i("div",y$,[i("div",b$,[i("div",w$,[o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{title:l.$t("Products"),title_size:"small",border_bottom:""},null,8,["title"]),o(ae,{class:"px-0 pb-0"},{default:r(()=>[i("div",B$,[o(m,{placeholder:l.$t("Search products..."),onKeyup:A[0]||(A[0]=C=>s()),modelValue:l.searchQuery,"onUpdate:modelValue":A[1]||(A[1]=C=>l.searchQuery=C)},{prefix:r(()=>[o(Y,{name:"Search"})]),_:1},8,["placeholder","modelValue"]),o(v,{onClick:n,type:"info",soft:"",class:"el-button--x-small"},{default:r(()=>[M(h(l.$t("Browse")),1)]),_:1})]),l.order.order_items.length>0?(d(),_("div",C$,[At((d(),U(F,{data:l.order.order_items,class:"fct-table w-full","row-key":"id","default-expand-all":"","element-loading-text":l.$t("Recalculating with product latest info...")},{default:r(()=>[o(g,{"min-width":"450",label:l.$t("Product")},{default:r(C=>{var k,S,E,V;return[i("div",k$,[i("div",F$,[o(b,{class:"link",to:{name:"product_edit",params:{product_id:C.row.post_id}}},{default:r(()=>[i("img",{src:l.getImageUrl(C.row.featured_media,l.appVars.asset_url),alt:C.row.title,class:ne(l.getClass(C.row.featured_media))},null,10,x$)]),_:2},1032,["to"])]),i("div",U$,[i("div",E$,[o(b,{class:"link",to:{name:"product_edit",params:{product_id:C.row.post_id}}},{default:r(()=>[M(h(C.row.post_title)+" ",1),i("span",S$,"- "+h(C.row.title),1)]),_:2},1032,["to"])]),i("div",Q$,[M(h(l.formatNumber(C.row.price))+" ",1),parseInt(C.row.unit_price)>parseInt(C.row.price)?(d(),_("span",D$,h(l.formatNumber(C.row.unit_price)),1)):x("",!0),C.row.payment_type==="subscription"&&((S=(k=C.row)==null?void 0:k.other_info)==null?void 0:S.manage_setup_fee)==="yes"?(d(),_("div",$$,[i("span",null,h(C.row.other_info.signup_fee_name)+" : "+h(l.formatNumber(C.row.other_info.signup_fee)),1),((V=(E=C.row)==null?void 0:E.other_info)==null?void 0:V.setup_fee_per_item)=="yes"?(d(),_("span",I$,[A[6]||(A[6]=i("span",null,"x",-1)),i("span",null,h(C.row.quantity),1)])):x("",!0)])):x("",!0)])])])]}),_:1},8,["label"]),o(g,{width:"120",label:l.$t("Quantity")},{default:r(C=>[i("div",T$,[o(Bf,{item:C.row,"onUpdate:value":l.updateQuantity,isDisabled:l.isDisabled(C.row),min:1},null,8,["item","onUpdate:value","isDisabled"])])]),_:1},8,["label"]),o(g,{width:120,label:l.$t("Total")},{default:r(C=>{var k,S,E,V;return[i("div",null,h(l.formatNumber(C.row.line_total)),1),C.row.payment_type=="subscription"&&((S=(k=C.row)==null?void 0:k.other_info)==null?void 0:S.manage_setup_fee)=="yes"?(d(),_("div",M$,[A[7]||(A[7]=i("span",null,"+",-1)),((V=(E=C.row)==null?void 0:E.other_info)==null?void 0:V.setup_fee_per_item)=="yes"?(d(),_("span",V$,[i("span",null,h(l.formatNumber(C.row.other_info.signup_fee*C.row.quantity)),1)])):(d(),_("span",L$,h(l.formatNumber(C.row.other_info.signup_fee)),1))])):x("",!0)]}),_:1},8,["label"]),o(g,{width:50},{default:r(C=>[o(Be,{bg:"transparent",border:"transparent",tag:"a",size:"x-small",onClick:Ke(k=>l.deleteProduct(C.$index,C.row),["prevent"])},{default:r(()=>[o(Y,{name:"Delete"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","element-loading-text"])),[[w,l.calculating]])])):x("",!0)]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{border_bottom:"",title:l.$t("Payment"),title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[i("table",O$,[i("tbody",null,[i("tr",null,[i("td",null,h(l.$t("Subtotal")),1),i("td",null,[l.order.order_items.length>0?(d(),_("span",H$,h(p(Mt)(l.order.order_items.length))+" "+h(l.order.order_items.length===1?l.$t("item"):l.$t("items")),1)):x("",!0)]),i("td",null,h(l.formatNumber(l.order.subtotal)),1)]),l.order.order_items.length>0&&!l.discount.value?(d(),U(sr,{key:0,order:l.order,couponsAttributes:[],hasCouponAttributes:!1,appliedCouponsAttributes:[],action:"create_order",shouldManageCoupon:!0,"onUpdate:coupons":l.updateCoupons,ref:"reApplyCouponRef"},null,8,["order","onUpdate:coupons"])):x("",!0),l.hasCoupon?x("",!0):(d(),U(nr,{key:1,order:l.order,hasCoupon:l.hasCoupon,"onUpdate:customDiscount":l.updateCustomDiscount},null,8,["order","hasCoupon","onUpdate:customDiscount"])),x("",!0),l.order.tax_total?(d(),_("tr",R$,[i("td",null,h(l.$t("Estimated tax")),1),i("td",null,h(l.$t("Not Calculated")),1),i("td",null,h(l.formatNumber(l.order.tax_total)),1)])):x("",!0)]),i("tfoot",null,[i("tr",null,[i("td",null,h(l.$t("Total")),1),A[8]||(A[8]=i("td",null,null,-1)),i("td",null,h(l.formatNumber(l.order.total_amount)),1)])])])]),_:1})]),_:1})]),i("div",P$,[i("div",K$,[o(ar,{note:l.order.note,onWhenNoteEditIsDone:A[2]||(A[2]=C=>{l.saveNoteModal(C)})},null,8,["note"]),o(Ml,{order:l.order,onOnAddressSelected:A[3]||(A[3]=C=>{if(l.fetchShippingMethods(),C===null){l.selectedCustomerCountry="";return}l.selectedCustomerCountry=C.country,C.type==="shipping"?l.order.shipping_address_id=C.id:l.order.billing_address_id=C.id}),onOnAddressRemove:A[4]||(A[4]=()=>{l.selectedCustomerCountry="",l.fetchShippingMethods()})},null,8,["order"]),o(Tl,{selectedLabels:l.selectedLabels,"onUpdate:updateLabel":l.onChangeLabel},null,8,["selectedLabels","onUpdate:updateLabel"])])])]),o(wf,{ref_key:"productItemModal",ref:e,searchQueryParent:l.searchQuery,orderParent:l.order,"onUpdate:searchQuery":l.updateSearchQuery},null,8,["searchQueryParent","orderParent","onUpdate:searchQuery"]),o(B,{"append-to-body":!0,modelValue:l.createProductModal,"onUpdate:modelValue":A[5]||(A[5]=C=>l.createProductModal=C),title:l.$t("Add New Product")},{default:r(()=>[l.createProductModal?(d(),_("div",N$,[o(Wl,{customModal:"order_modal","onUpdate:createProductModal":l.updateProductModal,onProcess_custom:l.processCustom},null,8,["onUpdate:createProductModal","onProcess_custom"])])):x("",!0)]),_:1},8,["modelValue","title"])])])}}});class z$ extends Xt{constructor(){super(...arguments);fe(this,"data",{form:dA()})}get controllerKey(){return"Customer"}}function Sf(){return z$.init()}const Y$={class:"setting-wrap wm-container-enhanced"},q$={key:0,class:"bg-white rounded p-6 dark:bg-dark-700"},W$={class:"grid gap-3 mb-6"},X$={class:"grid gap-3 mb-6"},J$={class:"grid gap-3 mb-6"},Z$={class:"grid gap-3"},e5={key:0,class:"form-section-save-action-top"},t5={key:0,class:"cmd block leading-none"},Ko=Object.assign({name:"StoreSettings"},{__name:"StoreSettings",setup(t){const e=Sf(),{form:a}=e.data,s=ro(),n=T([]),l=T([]),A=T(!0),u=T(!1),c=T(!0),m=T({}),v=Wt(),b=()=>{var k;u.value=!0;let C=a.values;Array.isArray(C.store_logo)&&C.store_logo.length>0&&(C.store_logo=(k=C.store_logo)==null?void 0:k[0]),C.settings_name=g.value,te.post("settings/store",{...C}).then(S=>{J.success(f("Settings saved successfully")),g.value==="store_setup"&&setTimeout(()=>{window.location.reload()},300)}).catch(S=>{var E;S.status_code=="422"?J.validationErrors(S):J.error((E=S.data)==null?void 0:E.message),a.setValidationErrors(S),m.value=S}).finally(()=>{u.value=!1,c.value=!1,A.value=!1})},g=T(v.name);ce(()=>v.name,(C,k)=>{g.value=C,B()});const F=T(!1),B=()=>{A.value=!0,F.value=!1,te.get("settings/store",{settings_name:g.value}).then(C=>{a.setSchema(C.fields).setDefaults(C.settings).initForm(),n.value=C.settings,l.value=C.fields,A.value=!1,c.value=!1,u.value=!1}).catch(C=>{F.value=!0,A.value=!1,c.value=!1,u.value=!1})},w=()=>{s.bind(["mod+s"],C=>{C.preventDefault(),b()})};return ce(()=>v.name,(C,k)=>{s.unbind("mod+s"),w()}),pe(()=>{w(),B()}),_u(()=>{s.unbind("mod+s")}),(C,k)=>{const S=y("el-skeleton-item"),E=y("el-skeleton"),V=y("el-button"),$=y("el-form");return d(),_("div",Y$,[F.value?(d(),U(se,{key:1},{default:r(()=>[o(ae,null,{default:r(()=>k[1]||(k[1]=[i("p",null,"There is an error in the form fields. Please try reloading the page.",-1)])),_:1,__:[1]})]),_:1})):(d(),_(H,{key:0},[c.value?(d(),_("div",q$,[o(E,{loading:c.value,animated:""},{template:r(()=>[i("div",W$,[o(S,{variant:"p",class:"w-[20%]"}),o(S,{variant:"p"})]),i("div",X$,[o(S,{variant:"p",class:"w-[20%]"}),o(S,{variant:"p"})]),i("div",J$,[o(S,{variant:"p",class:"w-[20%]"}),o(S,{variant:"p"})]),i("div",Z$,[o(S,{variant:"p",class:"w-[20%]"}),o(S,{variant:"p"})])]),_:1},8,["loading"])])):x("",!0),c.value?x("",!0):(d(),_(H,{key:1},[p(a).isReady?(d(),U($,{key:0,class:"relative"},{default:r(()=>[A.value?x("",!0):(d(),_("div",e5,[p(v).name!=="addons"?(d(),U(V,{key:0,onClick:b,type:"primary",loading:u.value},{default:r(()=>[u.value?x("",!0):(d(),_("span",t5,"s")),M(" "+h(u.value?p(f)("Saving"):p(f)("Save")),1)]),_:1},8,["loading"])):x("",!0)])),A.value?(d(),U(se,{key:1},{default:r(()=>[o(ae,null,{default:r(()=>[o(E,{rows:5,animated:""},{default:r(()=>[o(S),o(S,{variant:"text"}),o(S,{variant:"text"})]),_:1})]),_:1})]),_:1})):x("",!0),A.value?x("",!0):(d(),U(er,{key:2,form:p(a),showSubmitButton:!0,onOnSubmitButtonClick:b,submitButtonText:p(f)("Save"),loading:u.value,onOnChange:k[0]||(k[0]=O=>{}),"validation-errors":m.value},null,8,["form","submitButtonText","loading","validation-errors"]))]),_:1})):x("",!0)],64))],64))])}}}),a5={};function s5(t,e){const a=y("router-view");return d(),_("div",null,[o(a)])}const n5=ye(a5,[["render",s5]]),o5={class:"setting-wrap wm-container-enhanced"},l5={key:0,class:"fluent_cart_configure_integration_body"},r5={key:0,class:"fct-license-box-content"},i5=["href"],A5={class:"fct-license-box-content-details"},d5={class:"label"},u5={class:"license-key"},c5={class:"label"},f5={key:1,class:"w-full items-start"},p5={key:1,class:"fct-license-box-content"},m5={class:"fct-license-box-content-details"},h5={key:0},_5={class:"label"},g5={class:"license-key"},v5={class:"label"},y5={key:2,class:"fct-license-box-content"},b5={key:0},w5=["href"],B5=["innerHTML"],C5={name:"licensing",props:["disabled"],components:{Lock:Ip,Refresh:Yi,CircleCheck:Vl},data(){return{loading:!0,verifying:!1,licenseData:{},licenseKey:"",showNewLicenseInput:!1,errorMessage:""}},computed:{purchaseLink(){return $e.get("purchase_fluent_cart_link")}},methods:{getSettings(){this.errorMessage="",this.loading=!0,te.get("settings/license",{verify:!0}).then(t=>{this.licenseData=t}).catch(t=>{J.error(t)}).finally(()=>{this.loading=!1})},verifyLicense(){if(!this.licenseKey){J.error(f("Please provide a license key")),this.errorMessage=f("Please provide a license key");return}this.verifying=!0,this.errorMessage="",te.post("settings/license",{license_key:this.licenseKey}).then(t=>{this.licenseData=t}).catch(t=>{var e;t.status_code=="422"?J.validationErrors(t):J.error((e=t.data)==null?void 0:e.data)}).finally(()=>{this.verifying=!1})},deactivateLicense(){this.verifying=!0,te.delete("settings/license").then(t=>{this.licenseData=t}).catch(t=>{J.error(t)}).finally(()=>{this.verifying=!1})},maskLicense(t){if(!t)return"";const e=t.slice(0,4),a=t.slice(-4),s="*".repeat(t.length-8);return`${e}${s}${a}`}},mounted(){this.disabled||this.getSettings()}},k5=Object.assign(C5,{setup(t){return(e,a)=>{const s=y("el-skeleton"),n=y("el-input"),l=y("el-button"),A=Et("loading");return d(),_("div",o5,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Licensing"),border_bottom:""},null,8,["title"]),o(ae,null,{default:r(()=>[o(s,{loading:e.loading,animated:"",rows:6},null,8,["loading"]),i("div",null,[!t.disabled&&!e.loading?At((d(),_("div",l5,[i("div",{class:ne(["fluent_cart_license_box","fct_license_"+e.licenseData.status])},[e.licenseData.status=="expired"?(d(),_("div",r5,[e.showNewLicenseInput?(d(),_("div",f5,[i("h3",null,h(p(f)("Your License Key")),1),o(n,{modelValue:e.licenseKey,"onUpdate:modelValue":a[1]||(a[1]=u=>e.licenseKey=u),placeholder:p(f)("License Key")},null,8,["modelValue","placeholder"])])):(d(),_(H,{key:0},[o(Y,{name:"GradientWarningCircle"}),i("h3",null,h(p(f)("Looks like your license key has been Expired!")),1),i("p",null,[M(h(p(f)("Have a new license Key?"))+" ",1),i("a",{onClick:a[0]||(a[0]=Ke(u=>e.showNewLicenseInput=!e.showNewLicenseInput,["prevent"])),href:"#"},h(p(f)("Click here")),1),a[7]||(a[7]=M()),e.licenseData.renew_url?(d(),_(H,{key:0},[a[6]||(a[6]=M("or ",-1)),i("a",{href:e.licenseData.renew_url,target:"_blank"},h(p(f)("Purchase a new license")),9,i5)],64)):x("",!0)]),i("div",A5,[i("p",null,[i("span",d5,h(p(f)("License Key")),1),i("span",u5,[M(h(e.maskLicense(e.licenseData.license_key))+" ",1),o(Ca,{text:e.licenseData.license_key,showMode:"basic_copy_btn",tooltipText:p(f)("Copy License")},null,8,["text","tooltipText"])])]),i("p",null,[i("span",c5,h(p(f)("Expired At")),1),M(" "+h(p(ws)(e.licenseData.expires,!0)),1)])])],64))])):e.licenseData.status=="valid"?(d(),_("div",p5,[o(Y,{name:"GradientCheckCircle"}),i("h3",null,h(p(f)("Congratulations! Your license key is valid and activated")),1),i("p",null,[M(h(p(f)("Want to deactivate this license?"))+" ",1),i("a",{onClick:a[2]||(a[2]=Ke(u=>e.deactivateLicense(),["prevent"])),href:"#"},h(p(f)("Click here")),1)]),i("div",m5,[e.licenseData.license_key?(d(),_("p",h5,[i("span",_5,h(p(f)("License Key")),1),i("span",g5,h(e.maskLicense(e.licenseData.license_key)),1)])):x("",!0),i("p",null,[i("span",v5,h(p(f)("Expires")),1),M(" "+h(e.licenseData.expires!=="lifetime"?p(ws)(e.licenseData.expires,!0):e.licenseData.expires),1)])])])):(d(),_("div",y5,[i("h3",null,h(p(f)("Please Provide a license key of"))+" Webmakerr ",1),o(n,{modelValue:e.licenseKey,"onUpdate:modelValue":a[3]||(a[3]=u=>e.licenseKey=u),placeholder:p(f)("License Key")},null,8,["modelValue","placeholder"]),e.showNewLicenseInput?x("",!0):(d(),_("p",b5,[M(h(p(f)("Don't have a license key?"))+" ",1),i("a",{target:"_blank",href:e.purchaseLink},[M(h(p(f)("Purchase one here"))+" ",1),o(Y,{name:"External",class:"w-4 h-4"})],8,w5)]))])),i("p",{class:"fluent_cart_warning",innerHTML:e.errorMessage},null,8,B5),e.licenseData.status==="expired"&&e.showNewLicenseInput?(d(),U(l,{key:3,type:"primary",onClick:a[4]||(a[4]=u=>e.verifyLicense())},{default:r(()=>[o(Y,{name:"Lock",class:"w-5 h-5"}),M(" "+h(p(f)("Click Here to Renew your License")),1)]),_:1})):["valid","expired"].includes(e.licenseData.status)?x("",!0):(d(),U(l,{key:4,type:"primary",onClick:a[5]||(a[5]=u=>e.verifyLicense())},{default:r(()=>[o(Y,{name:"Lock",class:"w-5 h-5"}),M(" "+h(p(f)("Verify License")),1)]),_:1}))],2)])),[[A,e.verifying]]):x("",!0)])]),_:1})]),_:1})])}}}),F5={class:"fct-single-order-loader-wrap fct-layout-width"},x5={class:"single-page-header fct-page-loader-header flex items-start justify-between"},U5={class:"single-page-body"},E5={class:"fct-single-order"},S5={class:"fct-single-order-main"},Q5={class:"fct-single-order-aside"},D5={class:"fct-admin-sidebar"},$5={__name:"SingleProductLoader",setup(t){return(e,a)=>{const s=y("el-skeleton-item"),n=y("el-skeleton");return d(),_("div",F5,[i("div",x5,[o(n,{animated:"",class:"flex flex-col items-start gap-2"},{template:r(()=>[o(s,{class:"max-w-180"}),o(s,{class:"max-w-[100px]"})]),_:1}),o(n,{animated:"",class:"flex gap-2 max-w-[100px]"},{template:r(()=>[o(s,{class:"w-2/4"}),o(s,{class:"w-2/4"})]),_:1})]),i("div",U5,[i("div",E5,[i("div",S5,[o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{border_bottom:"",title_size:"small",title:e.$t("Title")},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:5})]),_:1})]),_:1}),o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{border_bottom:"",title_size:"small",title:e.$t("Pricing")},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:5})]),_:1})]),_:1}),o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{border_bottom:"",title_size:"small",title:e.$t("Inventory Management")},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:6})]),_:1})]),_:1}),o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{border_bottom:"",title_size:"small",title:e.$t("Downloadable Asset(s)")},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p"})]),_:1})]),_:1})]),_:1})]),i("div",Q5,[i("div",D5,[o(se,null,{default:r(()=>[o(le,{title:e.$t("Publishing"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:1})]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{title:e.$t("Media"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"image",class:"rounded w-full h-[138px] mb-2"}),o(s,{variant:"image",class:"rounded w-[90px] h-[90px]"})]),_:1})]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{title:e.$t("Group By"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:1})]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{title:e.$t("Product Organizer"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:"",rows:3})]),_:1})]),_:1})])])])])])}}},I5={class:"fct-product-route-wrap"},T5={__name:"ProductRoute",props:{product_id:{type:[String,Number],required:!0}},setup(t){const e=t,a=Rn({show:!1,message:"",buttonText:"",route:""}),s=T(!1),n=T(!1),l=T(!1),A=Wt(),u=T(!0),c=()=>{l.value=!0,a.show=!1,te.get("products/"+e.product_id+"/pricing",{with:["product_menu"]}).then(g=>{s.value=g.product,s.value.variants=m(s.value.variants),n.value=g.taxonomies,s.value.post_date=Ce.utc(s.value.post_date).local().format("YYYY-MM-DDTHH:mm:ssZ"),u.value&&jQuery("#fct_admin_menu_holder").append(g.product_menu),v(!0)}).catch(g=>{var F;(g==null?void 0:g.code)==="fluent_cart_entity_not_found"?(a.show=!0,a.buttonText=we.get(g,"data.buttonText"),a.message=we.get(g,"data.message"),a.route=we.get(g,"data.route"),jQuery(".fct-admin-product-header").remove()):g.status_code=="422"?J.validationErrors(g):J.error((F=g.data)==null?void 0:F.message)}).finally(()=>{l.value=!1})},m=g=>{let F={};return g.forEach((B,w)=>{B.item_price=B.item_price?st(B.item_price,!1):0,B.item_cost=B.item_cost?st(B.item_cost,!1):0,B.compare_price=B.compare_price?st(B.compare_price,!1):"",B.other_info&&(B.other_info.signup_fee=B.other_info.signup_fee?st(B.other_info.signup_fee,!1):0),B.rowId=w,F[B.id]=B}),g},v=(g=!1)=>{let F=jQuery(".fct-admin-product-menu"),B=A.name;F.length&&(F.find("li").removeClass("active-menu"),F.find(`li.fct_menu_${B}`).addClass("active-menu")),g&&s.value&&(jQuery("#wp-admin-bar-root-default .fct_view_link").remove(),jQuery("#wp-admin-bar-root-default").append('<li class="fct_view_link" id="wp-admin-bar-view"><a class="ab-item" href="'+s.value.guid+'" target="_blank">View Product</a></li>'))};return ce(()=>e.product_id,(g,F)=>{g!==F&&c()}),pe(()=>{c(),v(),window.addEventListener("hashchange",v)}),ks(()=>{jQuery(".fct-admin-product-header").remove(),window.removeEventListener("hashchange",v)}),Li("reload",()=>{u.value=!1,c()}),(g,F)=>{const B=y("router-view");return d(),_("div",I5,[p(A).name==="product_edit"&&l.value?(d(),U($5,{key:0})):x("",!0),a.show?(d(),U(Ll,{key:1,"button-text":a.buttonText,message:a.message,route:a.route},null,8,["button-text","message","route"])):x("",!0),s.value&&a.show==!1?(d(),U(B,{key:2,product:s.value,taxonomies:n.value},null,8,["product","taxonomies"])):x("",!0)])}}};class M5 extends gn{setupInitialData(){super.setupInitialData(),this.data.sorting.sortBy="ID"}getTabs(){return{all:f("All"),publish:f("Published"),draft:f("Draft"),physical:f("Physical"),digital:f("Digital"),subscribable:f("Subscribable")}}getToggleableColumns(){return[{label:f("Type"),value:"product_type"},{label:f("Variation"),value:"variation_type"},{label:f("Stock"),value:"stock_availability"},{label:f("Price"),value:"item_price"},{label:f("Status"),value:"post_status"},{label:f("Date"),value:"post_date"}]}getSortableColumns(){return[{label:f("Product ID"),value:"ID"},{label:f("Title"),value:"post_title"},{label:f("Created at"),value:"post_date"}]}getSearchHint(){return f("Search by Id, product title or variation title")}getFetchUrl(){return"products"}parseResponse(e){return e.products}getTableName(){return"product_table"}getAdvanceFilterOptions(){return we.get(window,"fluentCartAdminApp.filter_options.product_filter_options.advance")}getSearchGuideOptions(){return we.get(window,"fluentCartAdminApp.filter_options.product_filter_options.guide")}getCustomColumns(){return we.get(window,"fluentCartAdminApp.filter_options.product_filter_options.columns")||{}}with(){return["detail","variants:post_id,available"]}}function Qf(t){return M5.init(t)}const V5={key:0,class:"fct-dummy-product-content"},L5={key:0,class:"title"},O5={class:"text"},H5={class:"fct-dummy-product-loading"},R5={class:"fct-loading-bars"},P5=["id"],K5={key:1,class:"fct-form-group"},N5={class:"required"},G5={class:"dialog-footer"},j5={__name:"CreateDummyProduct",props:{products:{}},emits:["onProductCreated"],setup(t,{emit:e}){const a=e,s=Xe().ctx,n=T(!1),l=T([]),A=T(null),u=T(0),c=T(!1),m=T(null),v=T(0),b=B=>{n.value=B},g=(B=0)=>{if(A.value===null){F();return}c.value=!0;const w=l.value[A.value];if(m.value=w,B>w.count-1){setTimeout(()=>{F(),n.value=!1,a("onProductCreated")},1e3);return}u.value=B,s.$post("products/create-dummy",{category:w.category,index:B}).then(C=>{v.value=parseFloat(((B+1)/w.count*100).toFixed(0)),g(B+1)}).catch(C=>{C.code===400?F():g(B+1),s.handleError(C)})},F=()=>{v.value=0,u.value=0,c.value=!1,m.value=null};return pe(()=>{l.value=$e.get("dummy_product_info")}),(B,w)=>{const C=y("el-button"),k=y("el-progress"),S=y("el-option"),E=y("el-select"),V=y("el-dialog");return d(),_(H,null,[o(C,{onClick:w[0]||(w[0]=$=>b(!0))},{default:r(()=>[o(Y,{name:"Stars",class:"hidden lg:inline"}),M(" "+h(B.$t("Add Dummy Product")),1)]),_:1}),o(V,{modelValue:n.value,"onUpdate:modelValue":w[4]||(w[4]=$=>n.value=$),title:B.$t("Create Dummy Product"),"append-to-body":!0},ut({default:r(()=>[c.value?(d(),_("div",V5,[m.value!=null?(d(),_("div",L5,h(p(f)("Inserting %1$s of %2$s %3$s Product",u.value+1,m.value.count,m.value.title)),1)):x("",!0),i("div",O5,[M(h(B.$t("Can close the window - product will continue to insert."))+" ",1),i("div",H5,[i("div",R5,[(d(),_(H,null,q(8,$=>i("div",{key:$,class:"bar-block",id:`bar-block-${$+1}`},null,8,P5)),64))]),M(" "+h(p(f)("Uploading... %s%",v.value)),1)])]),o(k,{percentage:v.value,"striped-flow":"","stroke-width":6,striped:"","show-text":!1},null,8,["percentage"])])):(d(),_("div",K5,[i("label",N5,h(B.$t("Product Category")),1),o(E,{modelValue:A.value,"onUpdate:modelValue":w[1]||(w[1]=$=>A.value=$),clearable:"",placeholder:B.$t("Select a Product Category")},{default:r(()=>[(d(!0),_(H,null,q(l.value,($,O)=>(d(),U(S,{key:O,label:$.title,value:O},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]))]),_:2},[c.value?void 0:{name:"footer",fn:r(()=>[i("div",G5,[o(C,{onClick:w[2]||(w[2]=$=>b(!1))},{default:r(()=>[M(h(B.$t("Cancel")),1)]),_:1}),o(C,{type:"primary",onClick:w[3]||(w[3]=()=>{g()}),disabled:!A.value},{default:r(()=>[M(h(B.$t("Create Products")),1)]),_:1},8,["disabled"])])]),key:"0"}]),1032,["modelValue","title"])],64)}}},z5={class:"table-cell"},Y5={class:"fct-product-info-card w-full"},q5={class:"fct-product-info-media"},W5={class:"fct-product-info-details grow-0 shrink-0 basis-[calc(100%-52px)]",style:{overflow:"hidden"}},X5={class:"fct-product-info-name flex flex-col items-start gap-3"},J5={class:"table-cell"},Z5={class:"table-cell"},eI={class:"table-cell"},tI={class:"table-cell"},aI={class:"table-cell"},sI={class:"table-cell"},nI={class:"table-cell"},oI={__name:"ProductsLoader",props:{nextPageCount:{type:Number,default:0},productTable:{type:Object,default:()=>({})}},setup(t){const e=t,a=Array.from({length:e.nextPageCount},(s,n)=>n+1);return(s,n)=>{const l=y("el-table-column"),A=y("el-skeleton-item"),u=y("el-table"),c=y("el-skeleton");return d(),U(c,{animated:""},{template:r(()=>[o(u,{data:p(a),class:"w-full compact-table responsive"},{empty:r(()=>n[0]||(n[0]=[])),default:r(()=>[x("",!0),o(l,{label:s.$t("Products"),width:"380"},{default:r(()=>[i("div",z5,[i("div",Y5,[i("div",q5,[o(A,{varient:"image",class:"w-10 h-10.5 flex-none"})]),i("div",W5,[i("div",X5,[o(A,{varient:"p",class:"max-w-[190px]"}),o(A,{varient:"p",class:"max-w-[100px]"})])])])])]),_:1},8,["label"]),t.productTable.isColumnVisible("product_type")?(d(),U(l,{key:1,label:s.$t("Type"),width:"100"},{default:r(()=>[i("div",J5,[o(A,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),t.productTable.isColumnVisible("variation_type")?(d(),U(l,{key:2,label:s.$t("Variation"),width:"150"},{default:r(()=>[i("div",Z5,[o(A,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),t.productTable.isColumnVisible("item_price")?(d(),U(l,{key:3,label:s.$t("Price"),width:"130"},{default:r(()=>[i("div",eI,[o(A,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),t.productTable.isColumnVisible("stock_availability")?(d(),U(l,{key:4,label:s.$t("Stock"),width:"100"},{default:r(()=>[i("div",tI,[o(A,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),t.productTable.isColumnVisible("post_status")?(d(),U(l,{key:5,label:s.$t("Status"),width:"130"},{default:r(()=>[i("div",aI,[o(A,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),t.productTable.isColumnVisible("post_date")?(d(),U(l,{key:6,label:s.$t("Created At"),width:"120"},{default:r(()=>[i("div",sI,[o(A,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),o(l,{label:s.$t("Actions"),width:"80",align:"right"},{default:r(()=>[i("div",nI,[o(A,{varient:"p",class:"w-3/5"})])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})}}},lI={},rI={class:"px-4 py-3"},iI={class:"flex items-center justify-between mb-3"},AI={class:"grid grid-cols-3 gap-5 mt-5"};function dI(t,e){const a=y("el-skeleton-item"),s=y("el-skeleton");return d(),U(s,{animated:""},{template:r(()=>[i("div",rI,[i("div",iI,[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})]),i("div",AI,[(d(),_(H,null,q(3,n=>i("div",{key:n},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const uI=ye(lI,[["render",dI]]),cI={class:"fct-product-action show-on-mobile absolute right-0 top-1"},fI={class:"more-btn pr-3"},pI={key:0},mI={key:1},hI={key:0},_I={key:1},gI={key:0},vI={key:1},yI={key:0},bI={key:1},wI={class:"flex items-center gap-0.5"},BI={key:0},CI={key:1},kI=["innerHTML"],FI=["innerHTML"],xI={class:"fct-product-id hidden",title:"Product ID"},UI={class:"more-btn pr-3"},EI={__name:"ProductsTable",props:{productTable:{type:Object,required:!0}},emits:["delete"],setup(t,{emit:e}){const a=e,s=u=>{u.action==="delete"&&Pt(f("Are you sure you want to delete this product : %s ?",u.product.post_title),f("Confirm Delete!"),{confirmButtonText:f("Yes, Delete!"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{a("delete",u.product.ID)}).catch(c=>{console.log(c," handle product delete errors")})},n=u=>u.min_price===u.max_price?st(u.min_price,!0):`${st(u.min_price,!0)} - ${st(u.max_price,!0)}`,l=u=>{switch(u){case"physical":return f("Physical");case"digital":return f("Digital");default:nt.headline(u)}},A=u=>{switch(u){case"simple":return f("Simple");case"simple_variations":return f("Simple Variations");default:nt.headline(u)}};return(u,c)=>{const m=y("el-table-column"),v=y("router-link"),b=y("el-dropdown-item"),g=y("el-dropdown-menu"),F=y("el-dropdown"),B=y("el-tooltip"),w=y("el-table");return d(),U(w,{data:t.productTable.getTableData(),class:"w-full compact-table"},{empty:r(()=>[o(Le,{icon:"Empty/ListView","has-dark":!0,text:t.productTable.emptyMessage},null,8,["text"])]),default:r(()=>[x("",!0),o(m,{label:p(f)("Products"),width:"380"},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:C.row.ID}}},{default:r(()=>[o(Ki,{product:C.row,class:"fct-product-table-product-info"},null,8,["product"])]),_:2},1032,["to"]),i("div",cI,[o(F,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:r(()=>[o(g,null,{default:r(()=>[C.row.ID?(d(),U(b,{key:0,class:"item-link"},{default:r(()=>[o(v,{to:{name:"product_edit",params:{product_id:C.row.ID}}},{default:r(()=>[o(Y,{name:"Edit"}),M(" "+h(p(f)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):x("",!0),o(b,{command:{action:"delete",product:C.row},class:"item-destructive"},{default:r(()=>[o(Y,{name:"Delete"}),M(" "+h(p(f)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[i("span",fI,[o(Y,{name:"More"})])]),_:2},1024)])]),_:1},8,["label"]),t.productTable.isColumnVisible("product_type")?(d(),U(m,{key:1,label:p(f)("Type"),width:"100"},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:C.row.ID}}},{default:r(()=>[C.row.detail?(d(),_("span",pI,h(l(C.row.detail.fulfillment_type)),1)):(d(),_("span",mI,h(p(f)("N/A")),1))]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),t.productTable.isColumnVisible("variation_type")?(d(),U(m,{key:2,label:p(f)("Variation"),width:"150"},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:C.row.ID}}},{default:r(()=>[C.row.detail?(d(),_("span",hI,h(A(C.row.detail.variation_type)),1)):(d(),_("span",_I,h("N/A")))]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),t.productTable.isColumnVisible("item_price")?(d(),U(m,{key:3,label:p(f)("Price"),width:"130"},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:C.row.ID}}},{default:r(()=>[C.row.detail?(d(),_("span",gI,h(n(C.row.detail)),1)):(d(),_("span",vI,h(p(f)("Set Price")),1))]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),t.productTable.isColumnVisible("stock_availability")?(d(),U(m,{key:4,label:p(f)("Stock"),width:"100"},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:C.row.ID}}},{default:r(()=>[C.row.detail?(d(),_("span",yI,[C.row.detail.manage_stock.toString()==="0"?(d(),_(H,{key:0},[M(h(p(f)("Unlimited")),1)],64)):(d(),_(H,{key:1},[M(h(p(Mt)(p(we).sum(C.row.variants,"available"))),1)],64))])):(d(),_("span",bI,h("")))]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),t.productTable.isColumnVisible("post_status")?(d(),U(m,{key:5,label:p(f)("Status"),width:"130"},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:C.row.ID}}},{default:r(()=>[i("div",wI,[(d(),U(dt,{key:C.row.ID,status:C.row.post_status==="future"?"scheduled":C.row.post_status},null,8,["status"])),C.row.post_status==="future"?(d(),U(B,{key:0,effect:"dark",placement:"top","popper-class":"fct-label-hint-popover fct-tooltip","show-after":400,"hide-after":0},{content:r(()=>[M(h(p(f)("Publishes On: %s",p(ws)(C.row.post_date,!0))),1)]),default:r(()=>[o(Y,{name:"InformationFill",class:"w-4 h-4 flex-none"})]),_:2},1024)):x("",!0)])]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),t.productTable.isColumnVisible("post_date")?(d(),U(m,{key:6,label:p(f)("Date"),width:"120"},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:C.row.ID}}},{default:r(()=>[o(Vt,{"date-time":C.row.post_date,"with-time":!1},null,8,["date-time"])]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),(d(!0),_(H,null,q(t.productTable.getCustomColumns(),C=>(d(),U(m,{label:C.label},{default:r(k=>[C.render_template?(d(),_("div",BI,[(d(),U(Oa(Cu),{templateContent:C.template,data:{column:C,product:k.row,index:k.$index}},null,8,["templateContent","data"]))])):(d(),_("div",CI,[C.as_link!==!1?(d(),U(vt,{key:0,class:"hover:no-underline",to:{name:"product_edit",params:{product_id:k.row.ID}}},{default:r(()=>[i("div",{innerHTML:p(we).get(k.row,C.accessor)},null,8,kI)]),_:2},1032,["to"])):(d(),_("div",{key:1,innerHTML:p(we).get(k.row,C.accessor)},null,8,FI))]))]),_:2},1032,["label"]))),256)),o(m,{label:p(f)("Actions"),width:"80",align:"right"},{default:r(C=>[i("span",xI,"ID: "+h(C.row.ID),1),o(F,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:r(()=>[o(g,null,{default:r(()=>[C.row.ID?(d(),U(b,{key:0,class:"item-link"},{default:r(()=>[o(v,{to:{name:"product_edit",params:{product_id:C.row.ID}}},{default:r(()=>[o(Y,{name:"Edit"}),M(" "+h(p(f)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):x("",!0),o(b,{command:{action:"delete",product:C.row},class:"item-destructive"},{default:r(()=>[o(Y,{name:"Delete"}),M(" "+h(p(f)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[i("span",UI,[o(Y,{name:"More"})])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])}}},SI={class:"fct-product-table-mobile-wrap"},QI={class:"fct-product-table-mobile-header"},DI={key:0,class:"fct-product-table-post-status-col"},$I={class:"flex items-center gap-1.5"},II={class:"fct-product-action"},TI={class:"more-btn"},MI=["onClick"],VI={class:"fct-product-table-mobile-body-header"},LI={class:"fct-product-table-date-col"},OI={class:"invoice-no",title:"Product ID"},HI={key:0,class:"fct-product-table-price-col"},RI={key:0},PI={key:1},KI={class:"fct-product-table-product-col"},NI=["onClick"],GI={key:0,class:"fct-product-table-product-type"},jI={class:"title"},zI={key:0,class:"value"},YI={key:1,class:"value"},qI={key:1,class:"fct-product-table-variation-col"},WI={class:"title"},XI={key:0,class:"value"},JI={key:1,class:"value"},ZI={key:2,class:"fct-product-table-stock-col"},eT={class:"title"},tT={key:0,class:"value"},aT={key:1},sT={key:0,class:"fct-product-table-mobile-footer"},nT={class:"fct-product-table-stock-col"},oT={key:0,class:"title"},lT=["innerHTML"],rT=["innerHTML"],iT={__name:"ProductsTableMobile",props:{productTable:{type:Object,required:!0}},emits:["delete"],setup(t,{emit:e}){const a=e,s=u=>{u.action==="delete"&&Pt(f("Are you sure you want to delete this product : %s ?",u.product.post_title),f("Confirm Delete!"),{confirmButtonText:f("Yes, Delete!"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{a("delete",u.product.ID)}).catch(c=>{console.log(c," handle product delete errors")})},n=u=>u.min_price===u.max_price?st(u.min_price,!0):`${st(u.min_price,!0)} - ${st(u.max_price,!0)}`,l=u=>{switch(u){case"physical":return f("Physical");case"digital":return f("Digital");default:nt.headline(u)}},A=u=>{switch(u){case"simple":return f("Simple");case"simple_variations":return f("Simple Variations");default:nt.headline(u)}};return(u,c)=>{const m=y("el-tooltip"),v=y("router-link"),b=y("el-dropdown-item"),g=y("el-dropdown-menu"),F=y("el-dropdown");return d(),_("div",SI,[(d(!0),_(H,null,q(t.productTable.getTableData(),(B,w)=>(d(),_("div",{key:B.id,class:"fct-product-table-mobile-row"},[i("div",QI,[t.productTable.isColumnVisible("post_status")?(d(),_("div",DI,[i("div",$I,[(d(),U(dt,{key:B.ID,status:B.post_status,onClick:C=>u.$router.push({name:"product_edit",params:{product_id:B.ID}})},null,8,["status","onClick"])),B.post_status==="future"?(d(),U(m,{key:0,effect:"dark",placement:"top","popper-class":"fct-label-hint-popover fct-tooltip","show-after":400,"hide-after":0},{content:r(()=>[M(h(p(f)("Publishes On: %s",p(ws)(B.post_date,!0))),1)]),default:r(()=>[o(Y,{name:"InformationFill",class:"w-4 h-4"})]),_:2},1024)):x("",!0)])])):x("",!0),i("div",II,[o(F,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:r(()=>[o(g,null,{default:r(()=>[B.ID?(d(),U(b,{key:0,class:"item-link"},{default:r(()=>[o(v,{to:{name:"product_edit",params:{product_id:B.ID}}},{default:r(()=>[o(Y,{name:"Edit"}),M(" "+h(p(f)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):x("",!0),o(b,{command:{action:"delete",product:B},class:"item-destructive"},{default:r(()=>[o(Y,{name:"Delete"}),M(" "+h(p(f)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[i("span",TI,[o(Y,{name:"More"})])]),_:2},1024)])]),i("div",{class:"fct-product-table-mobile-body",onClick:C=>u.$router.push({name:"product_edit",params:{product_id:B.ID}})},[i("div",VI,[i("div",LI,[t.productTable.isColumnVisible("post_date")?(d(),_(H,{key:0},[o(Vt,{class:"date","date-time":B.post_date,"with-time":!1},null,8,["date-time"]),c[0]||(c[0]=i("span",{class:"bullet"},"",-1))],64)):x("",!0),i("span",OI,"#"+h(B.ID),1)]),t.productTable.isColumnVisible("item_price")?(d(),_("div",HI,[B.detail?(d(),_("span",RI,h(n(B.detail)),1)):(d(),_("span",PI,h(p(f)("Set Price")),1))])):x("",!0)]),i("div",KI,[o(Ki,{product:B},null,8,["product"])])],8,MI),i("div",{class:"fct-product-table-mobile-footer",onClick:C=>u.$router.push({name:"product_edit",params:{product_id:B.ID}})},[t.productTable.isColumnVisible("product_type")?(d(),_("div",GI,[i("div",jI,h(p(f)("Type")),1),B.detail?(d(),_("span",zI,h(l(B.detail.fulfillment_type)),1)):(d(),_("span",YI,h("N/A")))])):x("",!0),t.productTable.isColumnVisible("variation_type")?(d(),_("div",qI,[i("div",WI,h(p(f)("Variation")),1),B.detail?(d(),_("span",XI,h(A(B.detail.variation_type)),1)):(d(),_("span",JI,h("N/A")))])):x("",!0),t.productTable.isColumnVisible("stock_availability")?(d(),_("div",ZI,[i("div",eT,h(p(f)("Stock")),1),B.detail?(d(),_("span",tT,[B.detail.manage_stock.toString()==="0"?(d(),_(H,{key:0},[M(h(p(f)("Unlimited")),1)],64)):(d(),_(H,{key:1},[M(h(p(Mt)(p(we).sum(B.variants,"available"))),1)],64))])):(d(),_("span",aT,h("")))])):x("",!0)],8,NI),t.productTable.getCustomColumns()?(d(),_("div",sT,[(d(!0),_(H,null,q(t.productTable.getCustomColumns(),C=>(d(),_("div",nT,[C.label?(d(),_("div",oT,h(C.label),1)):x("",!0),C.render_template?(d(),U(Oa(Cu),{key:1,templateContent:C.template,data:C,column:C,row:B},null,8,["templateContent","data","column","row"])):(d(),_(H,{key:2},[C.as_link!==!1?(d(),U(vt,{key:0,class:"hover:no-underline",to:{name:"product_edit",params:{product_id:B.ID}}},{default:r(()=>[i("div",{innerHTML:p(we).get(B,C.accessor)},null,8,lT)]),_:2},1032,["to"])):(d(),_("div",{key:1,innerHTML:p(we).get(B,C.accessor)},null,8,rT))],64))]))),256))])):x("",!0)]))),128))])}}},AT={class:"fct-all-products-page fct-layout-width"},dT={class:"fct-all-products-wrap"},uT={key:1},cT={__name:"AllProducts",setup(t){const e=Qf({instance:Xe()}),a=T(!1),s=T(!1),n=()=>{s.value=window.innerWidth<768},l=A=>{te.delete(`products/${A}`).then(u=>{J.success(u),e.fetch()}).catch(u=>{var c;u.status_code.toString()==="422"?J.validationErrors(u):J.error((c=u.data)==null?void 0:c.message)})};return pe(()=>{n(),window.addEventListener("resize",n)}),je(()=>{window.removeEventListener("resize",n)}),(A,u)=>{const c=y("el-button"),m=y("el-dialog");return d(),_("div",AT,[o(Ps,{title:p(f)("Products")},{action:r(()=>[o(et,{permission:"products/create"},{default:r(()=>[o(j5,{onOnProductCreated:u[0]||(u[0]=v=>p(e).fetch()),products:p(e).getTableData()},null,8,["products"]),o(c,{type:"primary",onClick:u[1]||(u[1]=()=>{a.value=!0})},{default:r(()=>[M(h(p(f)("Add Product")),1)]),_:1})]),_:1})]),_:1},8,["title"]),o(et,{permission:"products/view"},{default:r(()=>[i("div",dT,[o(vn,{table:p(e),classicTabStyle:!0,"has-mobile-slot":!0},{mobile:r(()=>[p(e).isLoading()?(d(),U(uI,{key:0})):x("",!0),o(iT,{"product-table":p(e),onDelete:l},null,8,["product-table"])]),default:r(()=>[p(e).isLoading()?(d(),U(oI,{key:0,productTable:p(e),"next-page-count":p(e).nextPageCount},null,8,["productTable","next-page-count"])):(d(),_("div",uT,[o(EI,{"product-table":p(e),onDelete:l},null,8,["product-table"])]))]),_:1},8,["table"])])]),_:1}),o(et,{permission:"products/create"},{default:r(()=>[o(m,{"append-to-body":!0,modelValue:a.value,"onUpdate:modelValue":u[2]||(u[2]=v=>a.value=v),title:p(f)("Add New Product")},{default:r(()=>[a.value?(d(),U(Wl,{key:0})):x("",!0)]),_:1},8,["modelValue","title"])]),_:1})])}}};class fT extends Xt{constructor(){super(...arguments);fe(this,"data",{options:{status:[{title:"Published",value:"published"},{title:"Draft",value:"draft"}],fulfilment:[{title:"Physical",value:"physical"},{title:"Digital",value:"digital"}],variation:[{title:"Simple",value:"simple"},{title:"Simple Variations",value:"simple_variations"}]},dummies:{productDetail:{variation_type:"simple",manage_stock:1,fulfillment_type:"physical",stock_availability:"in-stock"},variation:{variation_title:"",item_price:0,compare_price:0,serial_index:1,fulfillment_type:"",manage_stock:1,total_stock:100,available:100,committed:0,on_hold:0,stock_status:"in-stock"},variationDetail:{description:"",payment_type:"onetime",times:"",repeat_interval:"",billing_summary:"",manage_setup_fee:"no",signup_fee_name:"",signup_fee:"",setup_fee_per_item:"no"},variationImage:{id:"",url:"",title:""},gallery:{id:"",url:"",title:""},downloadableFile:{title:"",type:"",driver:"",file_name:"",file_path:"",file_url:"",settings:"",serial:1}}});fe(this,"ensureProductVariantIsArray",a=>{Array.isArray(a.variants)||(a.variants=[])})}getDummyVariation(a){var l;const s=a==null?void 0:a.variants,n={...this.data.dummies.variation};return n.serial_index=Array.isArray(s)?s.length+1:1,n.fulfillment_type=(l=a==null?void 0:a.detail)==null?void 0:l.fulfillment_type,n.other_info={...this.data.dummies.variationDetail},n.media=[],n}addVariationToProduct(a){this.ensureProductVariantIsArray(a),a.variants.push(this.getDummyVariation(a))}handleVariationChanged(a,s){s==="simple_variations"?this.addVariationToProduct(a):a.variants=[]}get downloadableFileSchema(){return{product_variation_id:[],title:"",type:"",driver:"",file_name:"",file_path:"",file_url:"",settings:{download_limit:"",download_expiry:"",bucket:""},serial:""}}addDummyDownloadableFiles(a){const s=a;Array.isArray(s.downloadable_files)||(s.downloadable_files=[]),s.downloadable_files.push(this.downloadableFileSchema)}}class pT{constructor(){fe(this,"confirmBox",cs.confirm);fe(this,"promptBox",cs.prompt)}confirm(e,a,s){return this.confirmBox(e,a,s)}ofDelete(e=null,a=null,s){return e===null&&(e=f("Are you sure you want to delete this?. This action is not recoverable")),a===null&&(a=f("Confirm Delete!")),s={confirmButtonText:f("Yes, Delete!"),cancelButtonText:f("Cancel"),confirmButtonClass:"el-button--primary",type:"warning",...s??{}},this.confirm(e,a,s)}confirmWithInput(e,a,s){return this.promptBox(e,a,s)}confirmDeleteWithInput(e,a=null,s=null,n){a===null&&(a=f("Are you sure you want to delete this?. This action is not recoverable"));const l=f('You must type "%s" exactly to proceed',`<span >${e}</span>`);return a=`<label for=""><p>${a}</p>
        <p>${l}</p></label>`,s===null&&(s=f("Confirm Delete!")),n={confirmButtonText:f("Yes, Delete!"),cancelButtonText:f("Cancel"),confirmButtonClass:"el-button--primary",inputPattern:new RegExp(`^${e}$`),inputErrorMessage:f("You must type %s exactly to proceed",e),dangerouslyUseHTMLString:!0,type:"warning",...n??{}},this.confirmWithInput(a,s,n)}}const bA=new pT;class mT extends fT{constructor(){super(...arguments);fe(this,"data",{product:{},original_product:{},product_changes:{},validationErrors:{},excerptWordCount:0,maxExcerptWordCount:0,hasChange:!1,saving:!1,product_snapshot:{},savedVariationLength:0,productDownloadableModel:null,metaValue:null,hasChangeLongDescEditor:!1,reloader:()=>{}});fe(this,"router",Fa());fe(this,"addDummyVariant",()=>({post_id:this.product.detail.post_id,serial_index:this.variantsLength()+1,variation_title:"",item_price:"",compare_price:"",manage_cost:"yes",item_cost:"",profit:"--",profit_margin:"--",manage_stock:this.product.detail.manage_stock,stock_status:"in-stock",total_stock:1,on_hold:0,committed:0,available:1,fulfillment_type:this.product.detail.fulfillment_type,media:[],other_info:{description:"",payment_type:"onetime",times:"",repeat_interval:"yearly",billing_summary:"",manage_setup_fee:"no",signup_fee_name:"",signup_fee:"",setup_fee_per_item:"no"},downloadable:"true"}));fe(this,"formatPricing",a=>{let s={};return a.forEach((n,l)=>{n.item_price=n.item_price?st(n.item_price,!1):0,n.item_cost=n.item_cost?st(n.item_cost,!1):0,n.compare_price=n.compare_price?st(n.compare_price,!1):0,n.other_info.signup_fee=n.other_info.signup_fee?st(n.other_info.signup_fee,!1):0,n.rowId=l,s[n.id]=n}),a});fe(this,"onChangePricing",(a,s,n)=>{this.ensureVariationIndex(s),this.product.variants[s][a]=n,a==="item_price"&&this.onChangePricingPayment(this.product.variants[s],n,s),this.data.product_changes.detail||(this.data.product_changes.detail.id=this.product.detail.id),this.data.product_changes.variants[s][a]=n,this.data.product_changes.variants[s].id=this.product.variants[s].id,this.setHasChange(!0)});fe(this,"updateLongDescEditorChange",a=>{this.setHasChangeLongDescEditor(!0),te.post(`products/${this.product.ID}/update-long-desc-editor-mode`,{active_editor:a??"wp-editor"}).then(s=>{J.success(s.message)}).catch(s=>{s&&s.message&&J.error(s)}).finally(()=>{this.setHasChangeLongDescEditor(!1)})});fe(this,"onChangePricingPayment",(a,s,n)=>{var l;if(a.item_price!==""&&a.other_info.repeat_interval!==""){let A=parseInt(a.other_info.times)?f("for %s Times",(l=a==null?void 0:a.other_info)==null?void 0:l.times):f("Until Cancel");return this.data.product_changes.variants[n].billing_summary=`${a.item_price} ${a.other_info.repeat_interval} ${A}`,this.data.product_changes.variants[n].id=a.id,this.data.product_changes.detail.id=this.product.detail.id,a.other_info.billing_summary=`${a.item_price} ${a.other_info.repeat_interval} ${A}`}return this.data.product_changes.variants[n].billing_summary="",this.data.product_changes.variants[n].id=a.id,this.data.product_changes.detail.id=this.product.detail.id,a.other_info.billing_summary=""});fe(this,"onUploadPricingMedia",(a,s,n)=>{this.product.variants[s][a]=[],this.product.variants[s][a]=[...this.product.variants[s][a],...n];const l=this.product.variants[s].id;te.post(`products/variants/${l}/setMedia`,{media:this.product.variants[s].media}).then(A=>{J.success(A.message)}).catch(A=>{var u;A.status_code=="422"?J.validationErrors(A):J.error((u=A.data)==null?void 0:u.message)}).finally(()=>{})});fe(this,"afterCreatingOrUpdatingPricing",(a,s)=>{s.created_at=s.created_at??new Date().toLocaleDateString()+""+new Date().toLocaleTimeString(),a!==void 0&a!=null?this.product.variants[a]=s:(s.rowId=this.variantsLength()>0?this.data.product.variants[this.variantsLength()-1].rowId+1:this.variantsLength(),this.data.product.variants.push(s),a=this.variantsLength()-1),this.data.productDownloadableModel.setDownloadableFiles(this.data.product.downloadable_files)});fe(this,"createOrUpdatePricing",a=>{this.setSaving(!0),this.setValidationErrors({});let s="";return a.id!=null?s=te.post(`products/variants/${a.id}`,{variants:a}):s=te.post("products/variants",{variants:a}),s.then(n=>(J.success(n.message),n)).catch(n=>{var l;n.status_code=="422"?(J.validationErrors(n),this.setValidationErrors(n.data)):J.error((l=n.data)==null?void 0:l.message)}).finally(()=>{this.setSaving(!1)})});fe(this,"updatePricingValue",(a,s,n,l,A)=>{n.includes(".")&&(n=n.split(".").pop()),this.ensureVariationIndex(n),n!==void 0&&this.clearValidationError(`${n}.${a}`),l[a]=s,a==="item_price"&&this.onChangePricingPayment(l,s,n),a==="item_cost"&&(l.item_cost=s<0?0:s),parseInt(l.item_cost)>parseInt(l.item_price)&&(l.item_cost=0),this.data.product_changes.variants[n][a]=s,this.data.product_changes.variants[n].id=l.id,this.data.product_changes.detail.id=this.product.detail.id,this.product.detail.variation_type==="simple"&&(this.product.variants[0]=l,this.setHasChange(!0))});fe(this,"updatePricingOtherValue",(a,s,n=null,l,A="")=>{this.ensureVariationIndex(n),["payment_type","times","repeat_interval","manage_setup_fee","signup_fee_name","signup_fee","billing_summary","setup_fee_per_item","purchasable"].includes(a)&&(n!==void 0&&this.clearValidationError(`${n}.other_info.${a}`),l.other_info[a]=s,this.data.product_changes.variants||(this.data.product_changes.variants=[]),this.data.product_changes.variants[n].other_info||(this.data.product_changes.variants[n].other_info={}),this.data.product_changes.variants[n].other_info[a]=s,l.other_info.payment_type==="subscription"&&(a==="times"&&parseInt(s)<0&&(l.other_info.times=0),l.other_info.times=l.other_info.times??"",l.other_info.repeat_interval=l.other_info.repeat_interval??"",l.other_info.trial_days=l.other_info.trial_days??0,l.other_info.billing_summary=l.other_info.billing_summary??"",l.other_info.manage_setup_fee=l.other_info.manage_setup_fee??"no",l.other_info.signup_fee_name=l.other_info.signup_fee_name??"",l.other_info.signup_fee=l.other_info.signup_fee??"",l.other_info.setup_fee_per_item=l.other_info.setup_fee_per_item??"no"),this.data.product_changes.variants[n].other_info=l.other_info,this.data.product_changes.variants[n].id=l.id,this.data.product_changes.detail.id=this.product.detail.id,this.onChangePricingPayment(l,s,n)),["media"].includes(a)&&(l.media=[],l.media=[...l.media,...s],this.data.product_changes.variants[n].media=l.media,this.data.product_changes.variants[n].id=l.id,this.data.product_changes.detail.id=this.product.detail.id),["description"].includes(a)&&(n!==void 0&&this.clearValidationError(`${n}.other_info.${a}`),this.data.product_changes.variants[n].other_info||(this.data.product_changes.variants[n].other_info={}),l.other_info[a]=s,this.data.product_changes.variants[n].other_info[a]=s,this.data.product_changes.variants[n].id=l.id,this.data.product_changes.detail.id=this.product.detail.id),this.product.detail.variation_type==="simple"&&(this.product.variants[0]=l,this.data.product_changes.variants=[],this.data.product_changes.variants[0]=l,this.data.product_changes.variants[0].id=l.id,this.data.product_changes.detail.id=this.product.detail.id),A==="add"&&this.setHasChange(!0)});fe(this,"afterDeletingPricing",a=>{this.product.variants.splice(a,1)});fe(this,"deletePricing",(a,s)=>{bA.ofDelete(f("Are you sure, you want to delete this price?")).then(()=>{a!==void 0&&te.delete(`products/variants/${a}`).then(n=>{J.success(n.message),this.afterDeletingPricing(s)}).catch(n=>{n.status_code=="422"?J.validationErrors(n):J.error(n==null?void 0:n.data)})}).catch(()=>{})});fe(this,"getDownloadableHeaderClass",()=>{var s;const a=this.product.downloadable_files&&Array.isArray(this.product.downloadable_files)&&this.product.downloadable_files.length>0;return{"!border-0":((s=this.product.detail)==null?void 0:s.manage_downloadable)=="0"||!a}});fe(this,"onChangeInventoryStatus",a=>{this.product.variants.filter(s=>s.manage_stock=a),this.setHasChange(!0)});fe(this,"ensureVariationIndex",a=>{var s;(s=this.data.product_changes)!=null&&s.detail||(this.data.product_changes.detail={}),this.data.product_changes.variants||(this.data.product_changes.variants=[]),this.data.product_changes.variants[a]||(this.data.product_changes.variants[a]={})});fe(this,"onChangeNewStock",(a,s,n)=>{this.product.variants[n]||(this.data.product_changes.variants=[]),this.ensureVariationIndex(n),s===""&&(this.product.variants[n].new_stock=0,this.data.product_changes.variants[n].new_stock=0);let l=this.product.variants[n].total_stock??0,A=this.product.variants[n].new_stock??0,u=parseInt(A.toString())-parseInt(l);this.product.variants[n].adjusted_quantity=u,this.data.product_changes.variants[n].adjusted_quantity=u,this.data.product_changes.variants[n].id=this.product.variants[n].id});fe(this,"onChangeAdjustedQuantity",(a,s,n)=>{this.ensureVariationIndex(n),s===""&&(s=0);let l=this.product.variants[n].total_stock+parseInt(s);this.product.variants[n].new_stock=l<0?0:l});fe(this,"onChangeInputField",(a,s,n=!0)=>{var l,A,u,c,m;if(a==="post_title"&&this.product.detail.variation_type==="simple"&&Array.isArray(this.product.variants)&&this.variantsLength()>0&&(this.product.variants[0].variation_title=s,(l=this.data.product_changes)!=null&&l.variants||(this.data.product_changes.variants=[]),this.ensureVariationIndex(0),this.data.product_changes.variants[0].variation_title=s,this.data.product_changes.variants[0].id=this.product.variants[0].id),a==="post_date"&&(this.product[a]=Ce(s).format("YYYY-MM-DDTHH:mm:ssZ"),this.data.product_changes[a]=this.product[a]),a==="default_variation_id"&&(this.data.product_changes.detail||(this.data.product_changes.detail={}),this.product.detail||(this.product.detail={}),this.data.product_changes.detail.default_variation_id=s),a==="shipping_class"&&(this.data.product_changes.detail||(this.data.product_changes.detail={}),this.product.detail||(this.product.detail={}),(A=this.product.detail)!=null&&A.other_info||(this.product.detail.other_info={}),this.product.detail.other_info[a]=s,(u=this.data.product_changes.detail)!=null&&u.other_info||(this.data.product_changes.detail.other_info={}),this.data.product_changes.detail.other_info[a]=s,this.product.variants.forEach((v,b)=>{this.product.variants[b].shipping_class=s,this.ensureVariationIndex(b),this.data.product_changes.variants[b].shipping_class=s,this.data.product_changes.variants[b].id=v.id})),["tax_class","group_pricing_by","use_pricing_table","active_editor","sold_individually","custom_sections","disclaimer","reviews"].includes(a)&&(this.ensureVariationIndex(0),this.data.product_changes.detail||(this.data.product_changes.detail={}),(c=this.product.detail)!=null&&c.other_info||(this.product.detail.other_info={}),(m=this.data.product_changes.detail)!=null&&m.other_info||(this.data.product_changes.detail.other_info={}),this.product.detail.other_info[a]=s,this.data.product_changes.detail.other_info[a]=s,this.product.detail.variation_type==="simple"&&(this.data.product_changes.detail.id=this.product.detail.id,this.data.product_changes.variants[0].id=this.product.variants[0].id)),a==="post_excerpt"){this.product[a]=s,this.data.product_changes.detail||(this.data.product_changes.detail={}),this.data.product_changes.detail.id=this.product.detail.id,this.data.product_changes[a]=this.product[a];const v=s.trim();v.length===0?this.setExcerptWordCount(0):this.setExcerptWordCount(v.split(" ").length)}else this.product[a]=s,this.data.product_changes[a]=s,this.data.product_changes.detail||(this.data.product_changes.detail={}),this.data.product_changes.detail.id=this.product.detail.id;n&&this.setHasChange(!0)});fe(this,"hasValidationError",a=>this.validationErrors&&this.validationErrors.hasOwnProperty(a));fe(this,"clearValidationError",a=>{this.validationErrors&&this.validationErrors.hasOwnProperty(a)&&delete this.validationErrors[a]});fe(this,"discard",()=>window.location.reload());fe(this,"update",async(a=null)=>{var A,u,c,m,v;let s=this.data.product_changes;if(s={...this.product},s.metaValue=this.data.metaValue,this.data.product_changes.post_status||(this.data.product_changes.post_status=this.product.post_status),this.data.product_changes.post_title||(this.data.product_changes.post_title=this.product.post_title),this.data.product_changes.detail?((A=this.data.product_changes.detail)!=null&&A.fulfillment_type||(this.data.product_changes.detail.fulfillment_type=this.product.detail.fulfillment_type),(u=this.data.product_changes.detail)!=null&&u.variation_type||(this.data.product_changes.detail.variation_type=this.product.detail.variation_type)):(this.data.product_changes.detail={},this.data.product_changes.detail.fulfillment_type=this.product.detail.fulfillment_type,this.data.product_changes.detail.variation_type=this.product.detail.variation_type),s=this.data.product_changes,s.metaValue=this.data.metaValue,this.setValidationErrors({}),this.setSaving(!0),((c=s.detail)==null?void 0:c.variation_type)==="simple"&&(s.variants||(s.variants=[]),(!Array.isArray(s.variants)||s.variants.length===0)&&(s.variants[0]={variation_title:s.post_title,item_price:"",post_id:s.ID})),delete s.taxonomies,delete s.product_terms,delete s.variantOptions,delete s.downloadable_files,((m=s.detail)==null?void 0:m.variation_type)!=="simple"&&s.variants){let b=[];s.variants.forEach(g=>{b.push({id:g.id,variation_title:g.variation_title,item_price:g.item_price,compare_price:g.compare_price,other_info:g.other_info,manage_stock:g.manage_stock,serial_index:g.serial_index,total_stock:g.total_stock,available:g.available,committed:g.committed,on_hold:g.on_hold,stock_status:g.stock_status,sold_individually:g.sold_individually})}),s.variants=b}((v=s.downloadable_files)==null?void 0:v.length)<1&&(s.variantOptions=[]);const n=te.post(`products/${this.product.ID}/pricing`,s);let l=document.querySelector(".fct-admin-product-info .badge");n.then(b=>{J.success(a||b.message),this.setHasChange(!1),l.innerText=b.data.post_status,this.product.view_url=b.data.viewUrl,b.data.post_status==="publish"&&(l.classList.remove("warning"),l.classList.add("success")),b.data.post_status==="future"&&(l.innerText=f("Publishes on: %s",ws(b.data.post_date,!0)),l.classList.remove("success"),l.classList.add("warning")),b.data.post_status==="draft"?(l.classList.remove("success"),l.classList.add("info")):(l.classList.remove("info"),l.classList.add("success")),this.product.detail.variation_type==="simple"&&Array.isArray(b.data.variants)&&b.data.variants.length>0&&(this.product.variants[0].id=b.data.variants[0].id,this.product.variants[0].created_at=b.data.variants[0].created_at),this.product.variants=this.product.variants.filter((g,F,B)=>F===B.findIndex(w=>w.id===g.id)),this.data.product_changes={}}).catch(b=>{var g;b.status_code.toString()==="422"?(J.validationErrors(b),this.setValidationErrors(b)):J.error((g=b.data)==null?void 0:g.message)}).finally(async()=>{this.setSaving(!1)})});fe(this,"delete",()=>{Pt(f("Are you sure you want to delete this product?"),f("Confirm Delete!"),{confirmButtonText:f("Yes, Delete!"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{this.setHasChange(!1),te.delete(`products/${this.product.ID}`).then(a=>{J.success(a.message),this.router.push({name:"products"})}).catch(a=>{var s;a.status_code=="422"?J.validationErrors(a):J.error((s=a.data)==null?void 0:s.message)})}).catch(()=>{})});fe(this,"updateVariationType",(a,s)=>{var A,u;this.product.detail[a]=s;let n={variation_type:s,variation_ids:[(u=(A=this.product)==null?void 0:A.variants[0])==null?void 0:u.id]};te.post(`products/detail/${this.product.detail.id}`,n).then(c=>{J.info(c.message),a==="variation_type"&&s==="simple"&&(this.product.variants=this.product.variants.slice(0,1),this.variantsLength()>0&&(this.product.variants[0].manage_stock=this.product.detail.manage_stock))}).catch(c=>{var m;c.status_code=="422"?J.validationErrors(c):J.error((m=c.data)==null?void 0:m.message)}).finally(()=>{})});fe(this,"getMaxExcerptWordCount",()=>{te.get("products/get-max-excerpt-word-count").then(a=>{this.setMaxExcerptWordCount(a.count)}).catch(a=>{})});fe(this,"shouldShowShippingMethodAlert",()=>$e.get("available_shipping_method_count").toString()!=="0"?!1:this.hasPhysicalVariation());fe(this,"hasDigitalVariation",()=>this.product.variants.some(a=>a.fulfillment_type==="digital"));fe(this,"isAllDigitalVariation",()=>this.product.variants.every(a=>a.fulfillment_type==="digital"));fe(this,"hasPhysicalVariation",()=>this.product.variants.some(a=>a.fulfillment_type==="physical"));fe(this,"isTaxEnabled",()=>$e.get("is_tax_enabled"));fe(this,"isAllPhysicalVariation",()=>this.product.variants.every(a=>a.fulfillment_type==="physical"));fe(this,"shippingSettingsUrl",()=>$e.get("admin_url")+"settings/shipping")}setProductDownloadableModel(a){this.data.productDownloadableModel=a}setReloader(a){this.data.reloader=a}saveSnapshot(){this.data.product_snapshot=this.data.product}restoreSnapshot(){this.data.product_snapshot=this.data.product}get product(){return this.data.product}get validationErrors(){return this.data.validationErrors}get excerptWordCount(){return this.data.excerptWordCount}get maxExcerptWordCount(){return this.data.maxExcerptWordCount}get hasChange(){return this.data.hasChange}get hasChangeLongDescEditor(){return this.data.hasChangeLongDescEditor}get saving(){return this.data.saving}beforeInit(){this.data.product={ID:"",post_title:"",post_name:"",post_content:"",post_excerpt:"",post_status:"publish",post_date:new Date,comment_status:"close",variants:!1},this.vueInstance=Xe().ctx}setProduct(a){let s=document.querySelector(".fct-admin-product-info .badge");a.post_status==="future"&&(s.innerText=f("Publishes on: %s",ws(a.post_date,!0)),s.classList.add("warning")),this.data.product=a,this.data.original_product={...a}}setValidationErrors(a){this.data.validationErrors=a}setExcerptWordCount(a){this.data.excerptWordCount=a}setMaxExcerptWordCount(a){this.data.maxExcerptWordCount=a}setHasChange(a){this.data.hasChange=a}setHasChangeLongDescEditor(a){this.data.hasChangeLongDescEditor=a}setSaving(a){this.data.saving=a}isInDraft(){return this.product.post_status==="draft"}viewUrl(){return this.product.view_url??""}variantsLength(){return this.product.variants.length??0}updateVariantSerialIndexes(a){var s;a.forEach((n,l)=>{n.serial_index=l+1}),(s=this.data.product_changes)!=null&&s.variants||(this.data.product_changes.variants=[]),this.data.product_changes.variants=a.map(n=>({id:n.id,serial_index:n.serial_index})),this.setHasChange(!0)}addDummyDownloadableFile(){super.addDummyDownloadableFiles(this.product),this.setHasChange(!0)}updateMedia(a,s){this.product[a]=s,this.data.product_changes[a]=s,this.setHasChange(!0)}}function hT(){return mT.init()}function _T(){pe(()=>{document.addEventListener("keydown",e)}),ks(()=>{document.removeEventListener("keydown",e)});let t;function e(s){(s.ctrlKey||s.metaKey)&&s.shiftKey&&s.keyCode===83&&(s.preventDefault(),typeof t=="function"&&t())}function a(s){t=s}return{onSave:a}}const gT={id:"gt",class:"fct-custom-gutenberg-editor-wrap w-full",style:{height:"400px",position:"relative"}},vT={key:0,class:"iframe-loader"},yT=["src"],bT={class:"iframe-controls"},wT={class:"dialog-header"},BT={id:"gt",class:"fct-custom-gutenberg-editor-wrap",style:{position:"relative"}},CT={key:0,class:"iframe-loader"},kT=["src"],FT={__name:"GutenbergEditor",props:{post_id:{required:!0},product:{type:Object},reload:Function,productEditModel:Object},setup(t){const e=t,a=T(!1),s=T(!0),n=T(!0),l=T(),A=T(null),u=T(null);Wt();const c=()=>{const C=window.location.origin;l.value=C+"/wp-admin"},m=()=>{setTimeout(()=>{s.value=!1},500)},v=()=>{n.value=!1,setTimeout(()=>{},500)},b=()=>{a.value=!0,n.value=!0},g=()=>{n.value=!1,a.value=!1,e.productEditModel.data.reloader()},F=()=>{s.value=!0,A.value&&(A.value.src=A.value.src.toString())},B=()=>{n.value=!0,u.value&&(u.value.src=u.value.src.toString())},w=C=>{const{type:k,content:S}=C.data;k==="gutenbergContentChanged"&&F()};return pe(()=>{c(),window.addEventListener("message",w)}),(C,k)=>{const S=y("el-icon"),E=y("el-button"),V=y("el-breadcrumb-item"),$=y("el-breadcrumb"),O=y("el-dialog");return d(),_(H,null,[i("div",gT,[k[2]||(k[2]=i("div",{class:"fct-custom-gutenberg-editor-wrap-overlay"},null,-1)),s.value?(d(),_("div",vT,[i("span",null,[M(h(p(f)("Loading preview..."))+" ",1),o(S,{class:"is-loading"},{default:r(()=>[o(p(il))]),_:1})])])):x("",!0),i("iframe",{ref_key:"previewIframeRef",ref:A,class:"scrollbar-none preview-iframe",src:`${l.value}/post.php?post=${t.post_id}&action=edit&custom-editor=true&is-preview-mode=true`,width:"100%",height:"400px",onLoad:m,style:sa({visibility:s.value?"hidden":"visible"})},null,44,yT)]),i("div",bT,[o(E,{onClick:b},{default:r(()=>[M(h(p(f)("Show Content Editor")),1)]),_:1})]),o(O,{"append-to-body":!0,"show-close":!1,"modal-class":"fct-custom-gutenberg-editor-dialog",width:"800px",modelValue:a.value,"onUpdate:modelValue":k[0]||(k[0]=D=>a.value=D),onClose:g,onOpen:k[1]||(k[1]=()=>{B()})},{header:r(()=>[i("div",wT,[o($,{separator:"/"},{default:r(()=>[o(V,null,{default:r(()=>[i("span",{class:"fct-custom-gutenberg-editor-product-title",onClick:g},h(t.product.post_title),1)]),_:1}),o(V,null,{default:r(()=>k[3]||(k[3]=[M("Editor",-1)])),_:1,__:[3]})]),_:1}),n.value?x("",!0):(d(),U(E,{key:0,class:"fct-custom-gutenberg-editor-close-btn",onClick:g},{default:r(()=>[o(Y,{name:"Cross"}),M(" "+h(p(f)("Close")),1)]),_:1}))])]),default:r(()=>[i("div",BT,[n.value?(d(),_("div",CT,[i("span",null,[M(h(p(f)("Loading editor..."))+" ",1),o(S,{class:"is-loading"},{default:r(()=>[o(p(il))]),_:1})])])):x("",!0),i("iframe",{ref_key:"dialogIframeRef",ref:u,class:"dialog-iframe",src:`${l.value}/post.php?post=${t.post_id}&action=edit&custom-editor=true`,width:"100%",height:"700px",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-top-navigation",onLoad:v,style:sa({visibility:n.value?"hidden":"visible"})},null,44,kT)])]),_:1},8,["modelValue"])],64)}}},xT={class:"fct-product-info-wrap"},UT={class:"fct-admin-input-wrapper"},ET={class:"fct-admin-input-wrapper"},ST={class:"form-note"},QT={class:"mt-[7px]"},DT={class:"editor-tabs-nav"},$T={class:"fct-custom-long-desc-wrap fct-admin-input-wrapper"},IT={class:"custom-wp-editor-wrapper relative"},TT={class:"relative rounded overflow-hidden"},MT={class:"editor-tab-content"},VT={class:"editor-tab-content"},LT={__name:"ProductInfo",props:{product:Object,productEditModel:Object,reload:Function},setup(t){const e=t,a=T(!1),s=T("wp-editor");T("#gt"),Wt();const n=T(),l=A=>{e.productEditModel.updateLongDescEditorChange(A),s.value=A};return pe(()=>{var A,u,c,m,v,b;a.value=!0,e.productEditModel.getMaxExcerptWordCount(),((A=e.product)==null?void 0:A.post_excerpt)!==void 0&&((u=e.product)==null?void 0:u.post_excerpt.toString().length)>0&&e.productEditModel.setExcerptWordCount((c=e.product)==null?void 0:c.post_excerpt.toString().split(" ").length),(b=(v=(m=e.product)==null?void 0:m.detail)==null?void 0:v.other_info)!=null&&b.active_editor&&(s.value=e.product.detail.other_info.active_editor)}),(A,u)=>{const c=y("el-input"),m=y("el-form-item"),v=y("el-form"),b=Et("loading");return d(),_("div",xT,[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(v,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[i("div",UT,[o(m,{label:p(f)("Title"),required:""},{default:r(()=>[o(c,{class:ne(t.productEditModel.hasValidationError("post_title")?"is-error":""),id:"post_title",placeholder:p(f)("Title"),type:"text",modelValue:t.product.post_title,"onUpdate:modelValue":u[0]||(u[0]=g=>t.product.post_title=g),onInput:u[1]||(u[1]=g=>{t.productEditModel.onChangeInputField("post_title",g)}),onFocus:u[2]||(u[2]=g=>t.productEditModel.clearValidationError("post_title"))},null,8,["class","placeholder","modelValue"]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":"post_title"},null,8,["validation-errors"])]),_:1},8,["label"])]),i("div",ET,[o(m,{label:p(f)("Short description")},{default:r(()=>[o(c,{onInput:u[3]||(u[3]=g=>{t.productEditModel.onChangeInputField("post_excerpt",g)}),modelValue:t.product.post_excerpt,"onUpdate:modelValue":u[4]||(u[4]=g=>t.product.post_excerpt=g),rows:2,type:"textarea",onFocus:u[5]||(u[5]=g=>t.productEditModel.clearValidationError("post_excerpt"))},null,8,["modelValue"]),i("div",null,[i("div",ST,[i("p",QT,h(p(f)("%1$s Words of %2$s",p(f)(t.productEditModel.data.excerptWordCount),p(f)(t.productEditModel.maxExcerptWordCount))),1)]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":"post_excerpt"},null,8,["validation-errors"])])]),_:1},8,["label"])])]),_:1})]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{title:p(f)("Long Description")},{action:r(()=>[At((d(),_("div",DT,[o(Oi,null,{default:r(()=>[o(ol,{label:p(f)("Classic Editor"),class:ne(s.value==="wp-editor"?"active":""),onClick:u[6]||(u[6]=g=>l("wp-editor"))},null,8,["label","class"]),o(ol,{label:p(f)("Builder"),class:ne(s.value==="gutenberg"?"active":""),onClick:u[7]||(u[7]=g=>l("gutenberg"))},null,8,["label","class"])]),_:1})])),[[b,t.productEditModel.hasChangeLongDescEditor]])]),_:1},8,["title"]),o(ae,null,{default:r(()=>[o(v,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[i("div",$T,[o(m,null,{default:r(()=>[i("div",IT,[i("div",TT,[At(i("div",MT,[o(Ks,{ref_key:"wpEditor",ref:n,modelValue:t.product.post_content,onUpdate:u[8]||(u[8]=g=>{t.productEditModel.onChangeInputField("post_content",g)})},null,8,["modelValue"])],512),[[nl,s.value==="wp-editor"]]),At(i("div",VT,[o(FT,{post_id:t.product.ID,product:t.product,reload:t.reload,productEditModel:t.productEditModel},null,8,["post_id","product","reload","productEditModel"])],512),[[nl,s.value==="gutenberg"]])])])]),_:1})])]),_:1})]),_:1})]),_:1})])}}},OT={class:"fct-product-pricing-form-wrap"},HT={key:0,class:"fct-admin-input-wrapper"},RT={class:"fct-select-payment-type-block"},PT={class:"payment-type-block-head"},KT={class:"title"},NT={class:"text"},GT={key:0,class:"fct-product-variation-select"},jT={class:"payment-type-block-body"},zT={class:"fct-admin-input-wrapper"},YT=["innerHTML"],qT={key:0},WT={class:"fct-admin-input-wrapper"},XT=["innerHTML"],JT={class:"fct-admin-input-wrapper"},ZT=["src"],e6=["innerHTML"],t6={key:0,class:"fct-admin-input-wrapper"},a6=["innerHTML"],s6={class:"fct-admin-input-wrapper"},n6={key:0},o6=["src"],l6={class:"fct-admin-input-wrapper"},r6={class:"fct-admin-input-wrapper"},i6=["innerHTML"],A6={class:"fct-admin-input-wrapper"},d6={class:"fct-admin-input-wrapper"},u6=["innerHTML"],c6={class:"fct-admin-input-wrapper"},f6={class:"fct-admin-input-wrapper"},p6={class:"fct-admin-input-wrapper"},m6={class:"fct-admin-input-wrapper"},h6={key:0,class:"dialog-footer"},Df={__name:"ProductPricingForm",props:{modeType:String,index:Number,fieldKey:String,product:Object,productEditModel:Object},emits:["createOrUpdateVariant","closeModal"],setup(t,{emit:e}){const a=t,s=T({}),n=T(),l=e,A=ro(),u=T(0),c=T(0),m=S=>{a.productEditModel.updatePricingOtherValue("manage_setup_fee",S,a.fieldKey,s.value,a.modeType),S==="no"?(c.value=Number(s.value.other_info.signup_fee),a.productEditModel.updatePricingOtherValue("signup_fee","0",a.fieldKey,s.value,a.modeType)):a.productEditModel.updatePricingOtherValue("signup_fee",c.value,a.fieldKey,s.value,a.modeType)},v=X(()=>$e.get("fulfillment_types")??{}),b=X(()=>{var S;return((S=window.fluentCartAdminApp)==null?void 0:S.subscription_intervals)??[]}),g=T(),F=(S,E,V,$)=>{a.productEditModel.updatePricingOtherValue(S,E,V,$,a.modeType)};let B=a.product.variants.length>0;pe(()=>{setTimeout(()=>{var S,E,V,$;if(((S=a.product.detail)==null?void 0:S.variation_type)==="simple")Array.isArray(a.product.variants)&&a.product.variants.length===0?(s.value=a.productEditModel.addDummyVariant(),((E=a.product.detail)==null?void 0:E.variation_type)==="simple"&&(s.value.variation_title=a.product.post_title)):s.value=a.product.variants[0];else if(a.modeType==="create")s.value=a.productEditModel.addDummyVariant();else if(a.modeType==="update"){const O=JSON.stringify(a.product.variants[a.index]);s.value=JSON.parse(O)}else if(a.modeType==="duplicate"){const O=JSON.stringify(a.product.variants[a.index]);s.value=JSON.parse(O),s.value.serial_index=a.productEditModel.variantsLength()+1,delete s.value.id}g.value=s.value.item_price*((($=(V=s==null?void 0:s.value)==null?void 0:V.other_info)==null?void 0:$.times)??1)},100)});const w=()=>{var S,E,V;return((S=s==null?void 0:s.value)==null?void 0:S.other_info)&&["subscription"].includes((V=(E=s==null?void 0:s.value)==null?void 0:E.other_info)==null?void 0:V.payment_type)},C=async(S,E)=>{try{a.modeType==="duplicate"&&(E=a.productEditModel.variantsLength(),S.rowId=S.rowId+1);let V=await a.productEditModel.createOrUpdatePricing(S);S.id=V.data.id,a.productEditModel.afterCreatingOrUpdatingPricing(E,S),l("createOrUpdateVariant"),u.value=0}catch(V){console.log(V),u.value=0}},k=$e.get("app_config.isProActive");return ce(s,()=>{u.value++},{deep:!0}),A.bind(["mod+s"],S=>{S.preventDefault(),u.value&&C(s.value,a.index)}),(S,E)=>{const V=y("el-input"),$=y("el-form-item"),O=y("el-col"),D=y("el-option"),Q=y("el-select"),I=y("el-row"),L=y("el-button"),K=y("el-dropdown-item"),N=y("el-dropdown-menu"),W=y("el-dropdown"),R=y("el-checkbox"),ee=y("el-tooltip"),oe=y("el-switch"),Ae=y("el-form");return d(),_("div",OT,[o(Ae,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>{var ue,P;return[((ue=t.product.detail)==null?void 0:ue.variation_type)==="simple_variations"?(d(),_("div",HT,[o(I,{gutter:15},{default:r(()=>[o(O,{lg:16},{default:r(()=>[o($,{required:"",class:"has-tooltip-and-required"},{default:r(()=>[o(Ze,{title:p(f)("Title"),placement:"bottom",content:p(f)("Name this pricing variant (e.g., size, type, color) for clear customer selection."),style:{"margin-bottom":"8px"}},null,8,["title","content"]),o(V,{class:ne(t.productEditModel.hasValidationError(`${a.fieldKey}.variation_title`)?"is-error":""),id:`${a.fieldKey}.variation_title`,placeholder:p(f)("Title"),type:"text",modelValue:s.value.variation_title,"onUpdate:modelValue":E[0]||(E[0]=G=>s.value.variation_title=G),onInput:E[1]||(E[1]=G=>{t.productEditModel.updatePricingValue("variation_title",G,a.fieldKey,s.value,t.modeType)})},null,8,["class","id","placeholder","modelValue"]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.variation_title`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),o(O,{lg:8},{default:r(()=>[o($,{required:"",class:"has-tooltip-and-required"},{default:r(()=>[o(Ze,{title:p(f)("Type"),placement:"bottom",content:p(f)("Choosing the Type will impact your order status change flow upon successful payment. For physical items, the status changes from On-Hold to Processing, while for digital items, it changes from On-Hold to Completed."),style:{"margin-bottom":"8px"}},null,8,["title","content"]),o(Q,{modelValue:s.value.fulfillment_type,"onUpdate:modelValue":E[2]||(E[2]=G=>s.value.fulfillment_type=G),placeholder:p(f)("Select")},{default:r(()=>[(d(!0),_(H,null,q(v.value,(G,z)=>(d(),U(D,{label:G,value:z},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1})])):x("",!0),i("div",RT,[i("div",PT,[i("div",null,[i("h4",KT,h(p(f)("Select Payment Term")),1),i("p",NT,h(p(f)("Select your referenced Payment.")),1)]),(P=s.value)!=null&&P.other_info?(d(),_("div",GT,[o(W,{trigger:"click",onCommand:E[3]||(E[3]=G=>{t.productEditModel.updatePricingOtherValue("payment_type",G,null,s.value,t.modeType),s.value.other_info.repeat_interval="",G=="subscription"&&de(()=>{s.value.other_info.repeat_interval="yearly",s.value.other_info.times==""&&n.value.focus()})}),"popper-class":"fct-dropdown"},{dropdown:r(()=>[o(N,null,{default:r(()=>[o(K,{command:"onetime",class:ne({active:s.value.other_info.payment_type==="onetime"})},{default:r(()=>[M(h(p(f)("One Time")),1)]),_:1},8,["class"]),o(K,{command:"subscription",class:ne({active:s.value.other_info.payment_type==="subscription"})},{default:r(()=>[M(h(p(f)("Subscription")),1)]),_:1},8,["class"])]),_:1})]),default:r(()=>[o(L,{plain:"",size:"small"},{default:r(()=>[M(h(s.value.other_info.payment_type==="onetime"?p(f)("One Time"):p(f)("Subscription"))+" ",1),o(Y,{name:"ChevronDown"})]),_:1})]),_:1})])):x("",!0)]),i("div",jT,[o(I,{gutter:15},{default:r(()=>{var G;return[o(O,{lg:12},{default:r(()=>{var z,j;return[i("div",zT,[o($,{label:((j=(z=s.value)==null?void 0:z.other_info)==null?void 0:j.installment)==="yes"?p(f)("Installment Price"):p(f)("Price"),required:""},{default:r(()=>{var Z,_e;return[o(V,{class:ne(t.productEditModel.hasValidationError(`${a.fieldKey}.item_price`)?"is-error":""),id:`${a.fieldKey}.item_price`,placeholder:((_e=(Z=s.value)==null?void 0:Z.other_info)==null?void 0:_e.installment)==="yes"?p(f)("Installment Price"):p(f)("Price"),min:1,modelValue:s.value.item_price,"onUpdate:modelValue":E[4]||(E[4]=he=>s.value.item_price=he),modelModifiers:{number:!0},onInput:E[5]||(E[5]=he=>{t.productEditModel.updatePricingValue("item_price",he,a.fieldKey,s.value,t.modeType),g.value=he*(s.value.other_info.times??1)})},{prefix:r(()=>[i("span",{innerHTML:S.appVars.shop.currency_sign},null,8,YT)]),suffix:r(()=>{var he,Qe,ge,De;return[((Qe=(he=s.value)==null?void 0:he.other_info)==null?void 0:Qe.installment)==="yes"?(d(),_("span",qT,"x "+h((De=(ge=s.value)==null?void 0:ge.other_info)==null?void 0:De.times),1)):x("",!0)]}),_:1},8,["class","id","placeholder","modelValue"]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.item_price`},null,8,["validation-errors","field-key"])]}),_:1},8,["label"])])]}),_:1}),o(O,{lg:12},{default:r(()=>[i("div",WT,[o($,null,{label:r(()=>[o(Ze,{title:p(f)("Compare at price"),content:p(f)("Set a higher price to show with a strike-through, highlighting a discount for sales")},null,8,["title","content"])]),default:r(()=>[o(V,{class:ne(t.productEditModel.hasValidationError(`${a.fieldKey}.compare_price`)?"is-error":""),id:`${a.fieldKey}.compare_price`,placeholder:p(f)("Compare at price"),min:0,modelValue:s.value.compare_price,"onUpdate:modelValue":E[6]||(E[6]=z=>s.value.compare_price=z),onInput:E[7]||(E[7]=z=>{t.productEditModel.updatePricingValue("compare_price",z,a.fieldKey,s.value,t.modeType)})},{prefix:r(()=>[i("span",{innerHTML:S.appVars.shop.currency_sign},null,8,XT)]),_:1},8,["class","id","placeholder","modelValue"]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.compare_price`},null,8,["validation-errors","field-key"])]),_:1})])]),_:1}),w()?(d(),_(H,{key:0},[o(O,{lg:12},{default:r(()=>[i("div",JT,[o($,{label:p(f)("Interval"),required:""},{default:r(()=>[o(Q,{class:ne(["fct-repeat-payment-every-select",t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.repeat_interval`)?"is-error":""]),id:`${a.fieldKey}.other_info.repeat_interval`,modelValue:s.value.other_info.repeat_interval,"onUpdate:modelValue":E[8]||(E[8]=z=>s.value.other_info.repeat_interval=z),placeholder:p(f)("Interval"),onChange:E[9]||(E[9]=z=>{t.productEditModel.updatePricingOtherValue("repeat_interval",z,a.fieldKey,s.value,t.modeType)})},{default:r(()=>[(d(!0),_(H,null,q(b.value,z=>(d(),U(D,{key:z.value,label:z.label,value:z.value},null,8,["label","value"]))),128))]),_:1},8,["class","id","modelValue","placeholder"]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.repeat_interval`},null,8,["validation-errors","field-key"])]),_:1},8,["label"])])]),_:1}),o(O,{lg:12},{default:r(()=>[o($,{class:"has-tooltip"},{label:r(()=>[o(Ze,{title:p(f)("Trial Days"),content:p(f)("Enter the number of days the free trial will last. The trial period cannot exceed 365 days.")},null,8,["title","content"])]),default:r(()=>[o(V,{class:ne(t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.trial_days`)?"is-error":""),id:`${a.fieldKey}.other_info.trial_days`,placeholder:p(f)("Trial Days"),type:"number",min:1,max:365,modelValue:s.value.other_info.trial_days,"onUpdate:modelValue":E[10]||(E[10]=z=>s.value.other_info.trial_days=z),modelModifiers:{number:!0},autofocus:"",ref_key:"inputSubscriptionTimesRef",ref:n,onInput:E[11]||(E[11]=z=>{t.productEditModel.updatePricingOtherValue("trial_days",z,a.fieldKey,s.value,t.modeType)})},null,8,["class","id","placeholder","modelValue"]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.trial_days`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),o(O,{lg:24},{default:r(()=>[o($,null,{default:r(()=>[o(R,{"true-value":"yes","false-value":"no",label:p(f)("Enable installment payment"),class:ne(t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.installment`)?"is-error":""),id:`${a.fieldKey}.other_info.installment`,placeholder:p(f)("Occurrence"),type:"number",modelValue:s.value.other_info.installment,"onUpdate:modelValue":E[12]||(E[12]=z=>s.value.other_info.installment=z),modelModifiers:{number:!0},disabled:!p(k),onChange:E[13]||(E[13]=z=>{if(F("installment",z,a.fieldKey,s.value),z==="no"){F("times",0,a.fieldKey,s.value);return}s.value.other_info.times?g.value=s.value.item_price*s.value.other_info.times:(F("times",1,a.fieldKey,s.value),g.value=s.value.item_price)}),autofocus:"",ref_key:"inputSubscriptionTimesRef",ref:n},null,8,["label","class","id","placeholder","modelValue","disabled"]),p(k)?x("",!0):(d(),U(ee,{key:0,"popper-class":"fct-tooltip"},{content:r(()=>[M(h(p(f)("This feature is available in pro version only.")),1)]),default:r(()=>{var z;return[i("img",{src:((z=S.appVars)==null?void 0:z.asset_url)+"images/crown.svg",alt:"pro feature",class:"pro-feature-icon"},null,8,ZT)]}),_:1})),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.times`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),o(na,{visible:((G=s.value.other_info)==null?void 0:G.installment)==="yes",accordion:""},{default:r(()=>[o(I,{gutter:12},{default:r(()=>{var z;return[o(O,{lg:12},{default:r(()=>[o($,{required:"",class:"has-tooltip-and-required"},{label:r(()=>[o(Ze,{title:p(f)("Installment Count"),content:p(f)("Number of payments to split the price over the installment period.")},null,8,["title","content"])]),default:r(()=>[o(V,{class:ne(t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.times`)?"is-error":""),id:`${a.fieldKey}.other_info.times`,placeholder:p(f)("Installment Count"),type:"number",min:1,modelValue:s.value.other_info.times,"onUpdate:modelValue":E[14]||(E[14]=j=>s.value.other_info.times=j),modelModifiers:{number:!0},onInput:E[15]||(E[15]=j=>{F("times",j,a.fieldKey,s.value),g.value=s.value.item_price*(s.value.other_info.times??1)}),autofocus:"",ref_key:"inputSubscriptionTimesRef",ref:n},null,8,["class","id","placeholder","modelValue"]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.times`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),((z=s.value.other_info)==null?void 0:z.installment)==="yes"?(d(),U(O,{key:0,lg:12},{default:r(()=>[o($,null,{label:r(()=>[o(Ze,{title:p(f)("Total Price"),content:p(f)("Final price after all installments, excluding any fees.")},null,8,["title","content"])]),default:r(()=>[o(V,{class:ne(t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.times`)?"is-error":""),id:`${a.fieldKey}.other_info.times`,type:"number",min:1,disabled:"",modelValue:g.value,"onUpdate:modelValue":E[16]||(E[16]=j=>g.value=j),onInput:F,autofocus:"",ref_key:"inputSubscriptionTimesRef",ref:n},{prefix:r(()=>[i("span",{innerHTML:S.appVars.shop.currency_sign},null,8,e6)]),_:1},8,["class","id","modelValue"]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.times`},null,8,["validation-errors","field-key"])]),_:1})]),_:1})):x("",!0)]}),_:1})]),_:1},8,["visible"])],64)):x("",!0)]}),_:1})])]),o(I,{gutter:15,style:{display:"none"}},{default:r(()=>[o(O,{lg:16},{default:r(()=>[s.value&&s.value.other_info?(d(),_("div",t6,[o($,{label:p(f)("Billing summary")},{default:r(()=>[o(V,{type:"text",modelValue:s.value.other_info.billing_summary,"onUpdate:modelValue":E[17]||(E[17]=G=>s.value.other_info.billing_summary=G),onInput:E[18]||(E[18]=G=>{t.productEditModel.updatePricingOtherValue("billing_summary",G,a.fieldKey,s.value,t.modeType)}),disabled:!0},{prefix:r(()=>[i("span",{innerHTML:S.appVars.shop.currency_sign},null,8,a6)]),_:1},8,["modelValue"])]),_:1},8,["label"])])):x("",!0)]),_:1})]),_:1}),w()?(d(),U(I,{key:1,gutter:15},{default:r(()=>{var G,z;return[o(O,{lg:24},{default:r(()=>[i("div",s6,[o($,null,{default:r(()=>[o(oe,{disabled:!p(k),modelValue:s.value.other_info.manage_setup_fee,"onUpdate:modelValue":E[19]||(E[19]=j=>s.value.other_info.manage_setup_fee=j),"active-value":"yes","inactive-value":"no",onChange:m,"active-text":p(f)("Setup fee")},null,8,["disabled","modelValue","active-text"]),p(k)?x("",!0):(d(),_("span",n6,[o(ee,{"popper-class":"fct-tooltip"},{content:r(()=>[M(h(p(f)("This feature is available in pro version only.")),1)]),default:r(()=>{var j;return[i("img",{src:((j=S.appVars)==null?void 0:j.asset_url)+"images/crown.svg",alt:"pro feature",class:"pro-feature-icon"},null,8,o6)]}),_:1})]))]),_:1})])]),_:1}),o(na,{visible:((z=(G=s.value)==null?void 0:G.other_info)==null?void 0:z.manage_setup_fee)=="yes",accordion:""},{default:r(()=>[o(I,{gutter:15,class:"fct-setup-fee-wrap px-[7.5px]"},{default:r(()=>[o(O,{lg:12},{default:r(()=>[i("div",l6,[o($,{required:"",class:"has-tooltip-and-required"},{label:r(()=>[o(Ze,{title:p(f)("Setup fee label"),content:p(f)("Name the one-time setup fee (e.g., Initial Setup)")},null,8,["title","content"])]),default:r(()=>[o(V,{class:ne(t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.signup_fee_name`)?"is-error":""),id:`${a.fieldKey}.other_info.signup_fee_name`,placeholder:p(f)("Setup fee name"),type:"text",modelValue:s.value.other_info.signup_fee_name,"onUpdate:modelValue":E[20]||(E[20]=j=>s.value.other_info.signup_fee_name=j),onInput:E[21]||(E[21]=j=>{t.productEditModel.updatePricingOtherValue("signup_fee_name",j,a.fieldKey,s.value,t.modeType)})},null,8,["class","id","placeholder","modelValue"]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.signup_fee_name`},null,8,["validation-errors","field-key"])]),_:1})])]),_:1}),o(O,{lg:12},{default:r(()=>[i("div",r6,[o($,{required:"",class:"has-tooltip-and-required"},{label:r(()=>[o(Ze,{title:p(f)("Setup fee amount"),content:p(f)("Set the one-time setup fee amount (e.g., $50) per order. This fee does not apply to quantity.")},null,8,["title","content"])]),default:r(()=>[o(V,{class:ne(t.productEditModel.hasValidationError(`${a.fieldKey}.other_info.signup_fee`)?"is-error":""),id:`${a.fieldKey}.other_info.signup_fee`,placeholder:p(f)("Setup fee amount"),modelValue:s.value.other_info.signup_fee,"onUpdate:modelValue":E[22]||(E[22]=j=>s.value.other_info.signup_fee=j),modelModifiers:{number:!0},min:1,onInput:E[23]||(E[23]=j=>{t.productEditModel.updatePricingOtherValue("signup_fee",j,a.fieldKey,s.value,t.modeType)})},{prefix:r(()=>[i("span",{innerHTML:S.appVars.shop.currency_sign},null,8,i6)]),_:1},8,["class","id","placeholder","modelValue"]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.signup_fee`},null,8,["validation-errors","field-key"]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.setup_fee_per_item`},null,8,["validation-errors","field-key"])]),_:1})])]),_:1})]),_:1})]),_:1},8,["visible"])]}),_:1})):x("",!0),o(I,{gutter:15},{default:r(()=>{var G;return[s.value.manage_cost?(d(),U(O,{key:0,lg:24},{default:r(()=>[i("div",A6,[o($,null,{default:r(()=>[o(oe,{modelValue:s.value.manage_cost,"onUpdate:modelValue":E[24]||(E[24]=z=>s.value.manage_cost=z),"active-value":"true","inactive-value":"false",onChange:E[25]||(E[25]=z=>{p(B)&&t.productEditModel.updatePricingOtherValue("manage_cost",z,a.fieldKey,s.value,t.modeType),fp(B)?B.value=!0:B=!0}),"active-text":p(f)("Calculate profit/cost")},null,8,["modelValue","active-text"])]),_:1})])]),_:1})):x("",!0),o(na,{visible:s.value.manage_cost==="true",accordion:""},{default:r(()=>[o(I,{gutter:15,class:"fct-cost-profit-wrap px-[7.5px]"},{default:r(()=>{var z,j,Z;return[o(O,{lg:((z=t.product.detail)==null?void 0:z.variation_type)==="simple_variations"?12:8},{default:r(()=>[i("div",d6,[o($,null,{label:r(()=>[o(Ze,{title:p(f)("Cost per item"),content:p(f)("Customers won't see this")},null,8,["title","content"])]),default:r(()=>[o(V,{class:ne(t.productEditModel.hasValidationError(`${a.fieldKey}.item_cost`)?"is-error":""),id:`${a.fieldKey}.item_cost`,placeholder:p(f)("Cost per item"),min:0,modelValue:s.value.item_cost,"onUpdate:modelValue":E[26]||(E[26]=_e=>s.value.item_cost=_e),modelModifiers:{number:!0},onChange:E[27]||(E[27]=_e=>{t.productEditModel.updatePricingValue("item_cost",_e,a.fieldKey,s.value,t.modeType)})},{prefix:r(()=>[i("span",{innerHTML:S.appVars.shop.currency_sign},null,8,u6)]),_:1},8,["class","id","placeholder","modelValue"]),o(rt,{"validation-errors":t.productEditModel.validationErrors,"field-key":`${a.fieldKey}.item_cost`},null,8,["validation-errors","field-key"])]),_:1})])]),_:1},8,["lg"]),o(O,{lg:((j=t.product.detail)==null?void 0:j.variation_type)==="simple_variations"?6:8},{default:r(()=>[i("div",c6,[o($,{label:p(f)("Profit")},{default:r(()=>[o(V,{disabled:"",placeholder:p(kp)(s.value)},null,8,["placeholder"])]),_:1},8,["label"])])]),_:1},8,["lg"]),o(O,{lg:((Z=t.product.detail)==null?void 0:Z.variation_type)==="simple_variations"?6:8},{default:r(()=>[i("div",f6,[o($,{label:p(f)("Margin")},{default:r(()=>[o(V,{disabled:"",placeholder:p(Fp)(s.value)},null,8,["placeholder"])]),_:1},8,["label"])])]),_:1},8,["lg"])]}),_:1})]),_:1},8,["visible"]),o(O,{lg:24},{default:r(()=>[i("div",p6,[(s.value.other_info,x("",!0))])]),_:1}),((G=t.product.detail)==null?void 0:G.variation_type)==="simple_variations"?(d(),U(O,{key:1,lg:24},{default:r(()=>[i("div",m6,[o($,{label:p(f)("Image")},{default:r(()=>[o(vl,{multiple:!0,attachments:s.value.media,onMediaUploaded:E[30]||(E[30]=z=>{t.productEditModel.updatePricingOtherValue("media",z,a.fieldKey,s.value,t.modeType)}),onRemoveImage:E[31]||(E[31]=z=>{s.value.media.splice(z,1),t.modeType==="add"&&t.productEditModel.setHasChange()})},null,8,["attachments"])]),_:1},8,["label"])])]),_:1})):x("",!0)]}),_:1})]}),_:1}),t.modeType!=="add"?(d(),_("span",h6,[o(L,{onClick:E[32]||(E[32]=()=>{l("closeModal")})},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),o(L,{disabled:t.productEditModel.saving,onClick:E[33]||(E[33]=()=>C(s.value,t.index)),type:"primary"},{default:r(()=>[M(h(typeof s.value.id>"u"?p(f)("Save"):p(f)("Update")),1)]),_:1},8,["disabled"])])):x("",!0)])}}},_6={class:"fct-product-button-and-drawer-wrap"},g6={key:0,class:"fct-product-add-more-price-wrap text-right pr-6"},v6={key:1,class:"fct-btn-group sm"},y6={class:"more-btn"},Kr={__name:"ProductPricingActions",props:{modeType:String,index:Number,variant:{type:Object,default:{}},product:Object,productEditModel:Object},setup(t){const e=t,a=T(!1);let s=T(null);const n=T(1),l=T("");T(!1),pe(()=>{s.value=e.index});const A=u=>{u==="duplicate_pricing"?(s.value=null,l.value="duplicate",a.value=!0):u==="delete_variant"&&(l.value="delete",e.productEditModel.deletePricing(e.variant.id,e.index))};return(u,c)=>{const m=y("el-button"),v=y("el-checkbox"),b=y("el-dropdown-item"),g=y("el-dropdown-menu"),F=y("el-dropdown"),B=y("el-drawer");return d(),_("div",_6,[e.modeType=="add"?(d(),_("div",g6,[t.product.detail.variation_type!=="simple"?(d(),U(m,{key:0,text:"",type:"primary",onClick:c[0]||(c[0]=()=>{l.value="create",a.value=!0})},{default:r(()=>[o(Y,{name:"Plus"}),M(" "+h(t.product.variants.length>0?u.$t("Add more"):u.$t("Add Pricing")),1)]),_:1})):x("",!0)])):x("",!0),e.modeType=="action"?(d(),_("div",v6,[o(Be,{class:"hide-on-mobile",size:"small",tag:"button",onClick:c[1]||(c[1]=()=>{l.value="update",a.value=!0})},{default:r(()=>[o(Y,{name:"Edit"})]),_:1}),o(F,{class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:A,trigger:"click"},{dropdown:r(()=>[o(g,null,{default:r(()=>[t.product.detail&&t.product.detail.manage_stock=="1"?(d(),U(b,{key:0,class:"item-checkbox"},{default:r(()=>[o(v,{modelValue:t.variant.manage_stock,"onUpdate:modelValue":c[2]||(c[2]=w=>t.variant.manage_stock=w),onChange:c[3]||(c[3]=w=>{t.productEditModel.onChangePricing("manage_stock",p(s),w)}),"true-value":"0","false-value":"1"},{default:r(()=>[M(h(u.$t("Skip inventory")),1)]),_:1},8,["modelValue"])]),_:1})):x("",!0),o(b,{class:"show-on-mobile",onClick:c[4]||(c[4]=()=>{l.value="update",a.value=!0})},{default:r(()=>[o(Y,{name:"Edit"}),M(" "+h(u.$t("Edit")),1)]),_:1}),t.product.detail&&t.product.detail.variation_type!=="simple"?(d(),U(b,{key:1,command:"duplicate_pricing"},{default:r(()=>[o(Y,{name:"Duplicate"}),M(" "+h(u.$t("Duplicate")),1)]),_:1})):x("",!0),o(b,{disabled:t.product.post_status!=="publish"&&t.variant.id!=""},{default:r(()=>{var w;return[t.product.post_status==="publish"&&t.variant.id?(d(),U(Ca,{key:0,class:"fct-copy-wrap-inline",text:((w=u.appVars)==null?void 0:w.frontend_url)+"=instant_checkout&item_id="+t.variant.id+"&quantity=1",showMode:"icon_with_text",buttonText:u.$t("Direct Checkout"),tooltipContent:u.$t("Share direct checkout link to let customers buy this variation directly.")},null,8,["text","buttonText","tooltipContent"])):(d(),_(H,{key:1},[o(Y,{name:"Copy"}),M(" "+h(u.$t("Direct Checkout"))+" ",1),o(Ze,{content:u.$t("This product is currently in draft. You can't share direct checkout link")},null,8,["content"])],64))]}),_:1},8,["disabled"]),t.productEditModel.variantsLength()>n.value?(d(),U(b,{key:2,command:"delete_variant",class:"item-destructive"},{default:r(()=>[o(Y,{name:"Delete"}),M(" "+h(u.$t("Delete")),1)]),_:1})):x("",!0)]),_:1})]),default:r(()=>[i("span",y6,[o(Y,{name:"More"})])]),_:1})])):x("",!0),o(B,{"show-close":!0,modelValue:a.value,"onUpdate:modelValue":c[7]||(c[7]=w=>a.value=w),title:u.$t("Pricing"),size:"500px","append-to-body":!0,"close-on-click-modal":!0,"close-on-press-escape":!1,"destroy-on-close":!0,onBeforeClose:()=>{},class:"fct-variant-drawer"},{default:r(()=>[o(Df,{index:e.index,modeType:l.value,fieldKey:"variants",product:t.product,productEditModel:t.productEditModel,onCreateOrUpdateVariant:c[5]||(c[5]=w=>a.value=!1),onCloseModal:c[6]||(c[6]=()=>{t.productEditModel.setValidationErrors({}),a.value=!1})},null,8,["index","modeType","product","productEditModel"])]),_:1},8,["modelValue","title"])])}}},b6={class:"fct-product-pricing-table-wrap"},w6={class:"fct-table-draggable hide-on-mobile"},B6={class:"is-right"},C6={key:0,class:"fct-drag-handle drag-icon"},k6={class:"fct-product-pricing-table-item"},F6={class:"media relative"},x6={class:"absolute top-0 left-0 w-full h-full z-10 rounded opacity-0"},U6={key:0,class:"absolute top-0 left-0 w-full h-full z-0 rounded"},E6=["src","alt"],S6=["src"],Q6={class:"fct-product-pricing-table-item"},D6={key:0,class:"fct-variant-badge"},$6={class:"fct-product-pricing-table-item"},I6=["innerHTML"],T6={key:0,class:"fct-variant-badge"},M6={class:"fct-product-pricing-table-item"},V6=["innerHTML"],L6={class:"is-right"},O6={class:"fct-product-pricing-table-item"},H6={class:"fct-table-draggable fct-product-pricing-table-mobile-wrap"},R6={key:0,class:"fct-drag-handle drag-icon"},P6={class:"fct-product-pricing-table-mobile-item-inner"},K6={class:"fct-product-pricing-table-item"},N6={class:"media relative"},G6={class:"absolute top-0 left-0 w-full h-full z-10 rounded opacity-0"},j6={key:0,class:"absolute top-0 left-0 w-full h-full z-0 rounded"},z6=["src","alt"],Y6=["src"],q6={class:"fct-product-pricing-table-item-content"},W6={class:"title"},X6={key:0,class:"fct-variant-badge"},J6={key:0,class:"compare-price"},Z6=["innerHTML"],e9={class:"price"},t9=["innerHTML"],a9={key:0,class:"capitalize"},s9={class:"fct-product-pricing-table-item-action"},n9={__name:"ProductPricingTable",props:{product:Object,productEditModel:Object},setup(t){const e=t;pe(()=>{setTimeout(()=>{document.querySelectorAll(".el-input__wrapper input[type='number']").forEach(n=>{n.addEventListener("wheel",l=>{document.activeElement===n&&l.preventDefault()})}),e.product.variants.filter(n=>{const l=n.media?n.media.meta_value||[]:[];return n.media=l})},50)});const a=X(()=>({animation:600,ghostClass:"ghost"}));return(s,n)=>{const l=y("el-input");return d(),_("div",b6,[i("div",w6,[i("table",null,[n[3]||(n[3]=i("colgroup",null,[i("col"),i("col",{width:"50"}),i("col",{width:"300"}),i("col"),i("col"),i("col")],-1)),i("thead",null,[i("tr",null,[n[2]||(n[2]=i("th",null,null,-1)),i("th",null,h(s.$t("Image")),1),i("th",null,h(s.$t("Title")),1),i("th",null,h(s.$t("Price")),1),i("th",null,h(s.$t("Compare at price")),1),i("th",B6,h(s.$t("Action")),1)])]),o(p(xl),ht(a.value,{list:t.product.variants,"item-key":"id",onEnd:n[0]||(n[0]=A=>{t.productEditModel.updateVariantSerialIndexes(t.product.variants)}),tag:"tbody",handle:".fct-drag-handle"}),{default:r(()=>[(d(!0),_(H,null,q(t.product.variants,(A,u)=>{var c,m,v,b,g,F,B;return d(),_("tr",{key:A.id},[i("td",null,[t.product.variants.length>1?(d(),_("span",C6,[o(Y,{name:"ReorderDotsVertical"})])):x("",!0)]),i("td",null,[i("div",k6,[i("div",F6,[i("div",x6,[o(vl,{previewImage:!1,showList:!1,multiple:!0,showDeleteButton:!1,attachments:A==null?void 0:A.media,onMediaUploaded:w=>{t.productEditModel.onUploadPricingMedia("media",u,w)}},null,8,["attachments","onMediaUploaded"])]),typeof(A==null?void 0:A.media)<"u"&&((c=A==null?void 0:A.media)==null?void 0:c.length)>0?(d(),_("div",U6,[i("img",{src:(m=A.media[0])==null?void 0:m.url,alt:(v=A.media[0])==null?void 0:v.title,class:"!object-contain rounded border border-solid border-gray-outline dark:border-dark-400"},null,8,E6)])):(d(),_("img",{key:1,src:s.appVars.asset_url+"images/empty-image.svg",alt:"No Image"},null,8,S6))])])]),i("td",null,[i("div",Q6,[o(l,{class:ne(t.productEditModel.hasValidationError(`variants.${u}.variation_title`)?"is-error":""),id:`variants.${u}.variation_title`,placeholder:s.$t("Title"),type:"text",modelValue:A.variation_title,"onUpdate:modelValue":w=>A.variation_title=w,onInput:w=>{t.productEditModel.onChangePricing("variation_title",u,w)},disabled:((g=(b=t.product)==null?void 0:b.detail)==null?void 0:g.variation_type)==="simple",onFocus:w=>t.productEditModel.clearValidationError(`variants.${u}.variation_title`)},null,8,["class","id","placeholder","modelValue","onUpdate:modelValue","onInput","disabled","onFocus"]),((F=A.other_info)==null?void 0:F.installment)==="yes"?(d(),_("span",D6,h(A.other_info.times)+" "+h(p(f)("Installment")),1)):x("",!0)])]),i("td",null,[i("div",$6,[o(l,{placeholder:s.$t("Price"),class:ne(t.productEditModel.hasValidationError(`variants.${u}.item_price`)?"is-error":""),id:`variants.${u}.item_price`,type:"number",min:1,modelValue:A.item_price,"onUpdate:modelValue":w=>A.item_price=w,modelModifiers:{number:!0},onInput:w=>{t.productEditModel.onChangePricing("item_price",u,w)},disabled:A.expanded,onFocus:w=>t.productEditModel.clearValidationError(`variants.${u}.item_price`)},{prefix:r(()=>[i("span",{innerHTML:s.appVars.shop.currency_sign},null,8,I6)]),_:2},1032,["placeholder","class","id","modelValue","onUpdate:modelValue","onInput","disabled","onFocus"]),((B=A.other_info)==null?void 0:B.payment_type)==="subscription"?(d(),_("span",T6,h(A.other_info.repeat_interval),1)):x("",!0)])]),i("td",null,[i("div",M6,[o(l,{placeholder:s.$t("Compare price"),class:ne(t.productEditModel.hasValidationError(`variants.${u}.compare_price`)?"is-error":""),id:`variants.${u}.compare_price`,type:"number",min:1,modelValue:A.compare_price,"onUpdate:modelValue":w=>A.compare_price=w,modelModifiers:{number:!0},disabled:A.expanded,onInput:w=>{t.productEditModel.onChangePricing("compare_price",u,w)},onFocus:w=>t.productEditModel.clearValidationError(`variants.${u}.compare_price`)},{prefix:r(()=>[i("span",{innerHTML:s.appVars.shop.currency_sign},null,8,V6)]),_:2},1032,["placeholder","class","id","modelValue","onUpdate:modelValue","disabled","onInput","onFocus"])])]),i("td",L6,[i("div",O6,[o(Kr,{modeType:"action",index:u,variant:A,product:t.product,productEditModel:t.productEditModel},null,8,["index","variant","product","productEditModel"])])])])}),128))]),_:1},16,["list"])])]),i("div",H6,[o(p(xl),ht(a.value,{list:t.product.variants,"item-key":"id",onEnd:n[1]||(n[1]=A=>{t.productEditModel.updateVariantSerialIndexes(t.product.variants)}),handle:".fct-drag-handle"}),{default:r(()=>[(d(!0),_(H,null,q(t.product.variants,(A,u)=>{var c,m,v,b,g;return d(),_("div",{key:A.id,class:"fct-product-pricing-table-mobile-row"},[t.product.variants.length>1?(d(),_("span",R6,[o(Y,{name:"ReorderDotsVertical"})])):x("",!0),i("div",P6,[i("div",K6,[i("div",N6,[i("div",G6,[o(vl,{previewImage:!1,showList:!1,multiple:!0,showDeleteButton:!1,attachments:A==null?void 0:A.media,onMediaUploaded:F=>{t.productEditModel.onUploadPricingMedia("media",u,F)}},null,8,["attachments","onMediaUploaded"])]),typeof(A==null?void 0:A.media)<"u"&&((c=A==null?void 0:A.media)==null?void 0:c.length)>0?(d(),_("div",j6,[i("img",{src:(m=A.media[0])==null?void 0:m.url,alt:(v=A.media[0])==null?void 0:v.title,class:"!object-contain rounded border border-solid border-gray-outline dark:border-dark-400"},null,8,z6)])):(d(),_("img",{key:1,src:s.appVars.asset_url+"images/empty-image.svg",alt:"No Image"},null,8,Y6))]),i("div",q6,[i("div",W6,[M(h(A.variation_title)+" ",1),((b=A.other_info)==null?void 0:b.installment)==="yes"?(d(),_("span",X6,h(A.other_info.times)+" "+h(p(f)("Installment")),1)):x("",!0)]),i("ul",null,[i("li",null,[A.compare_price?(d(),_("div",J6,[i("span",{innerHTML:s.appVars.shop.currency_sign},null,8,Z6),M(" "+h(A.compare_price),1)])):x("",!0),i("div",e9,[i("span",{innerHTML:s.appVars.shop.currency_sign},null,8,t9),M(" "+h(A.item_price),1)])]),((g=A.other_info)==null?void 0:g.payment_type)==="subscription"?(d(),_("li",a9,h(A.other_info.repeat_interval),1)):x("",!0)])])]),i("div",s9,[o(Kr,{modeType:"action",index:u,variant:A,product:t.product,productEditModel:t.productEditModel},null,8,["index","variant","product","productEditModel"])])])])}),128))]),_:1},16,["list"])]),o(Kr,{modeType:"add",product:t.product,productEditModel:t.productEditModel},null,8,["product","productEditModel"])])}}},o9={class:"fct-product-pricing-wrap"},l9={class:"w-[150px] fct-select-gray"},r9={__name:"ProductPricing",props:{product:Object,productEditModel:Object,productDownloadableModel:Object},setup(t){var u,c;const e=t;T(!1);const a=T((c=(u=e.product)==null?void 0:u.detail)==null?void 0:c.variation_type),s=T(null),n=m=>{var b;const v=((b=e.product.variants)==null?void 0:b.length)??0;m==="simple"&&e.product.detail.variation_type==="simple_variations"&&v>1?(s.value=m,a.value=e.product.detail.variation_type,bA.confirmDeleteWithInput("proceed",f("Switching to 'Simple' will permanently delete all variations except the first one.")).then(()=>{l()}).catch(()=>{s.value||(s.value=null)})):A(m)},l=()=>{s.value&&A(s.value),s.value=null},A=m=>{a.value=m,e.productEditModel.updateVariationType("variation_type",m)};return(m,v)=>{var F,B;const b=y("el-option"),g=y("el-select");return d(),_("div",o9,[o(se,{class:ne(((B=(F=t.product)==null?void 0:F.detail)==null?void 0:B.variation_type)==="simple_variations"?"overflow-hidden":"")},{default:r(()=>{var w,C;return[o(le,{title:m.$t("Pricing"),border_bottom:""},{action:r(()=>[i("div",l9,[t.product.detail?(d(),U(g,{key:0,size:"small",class:ne(t.productEditModel.hasValidationError("detail.variation_type")?"is-error":""),modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=k=>a.value=k),placeholder:m.$t("Select Variation"),onChange:n},{default:r(()=>[o(b,{label:m.$t("Simple"),value:"simple"},null,8,["label"]),o(b,{label:m.$t("Simple Variations"),value:"simple_variations"},null,8,["label"])]),_:1},8,["class","modelValue","placeholder"])):x("",!0)])]),_:1},8,["title"]),o(ae,{class:ne(((C=(w=t.product)==null?void 0:w.detail)==null?void 0:C.variation_type)==="simple_variations"?"pb-0":"")},{default:r(()=>{var k,S,E,V,$,O,D,Q,I,L;return[((S=(k=t.product)==null?void 0:k.detail)==null?void 0:S.variation_type)==="simple"?(d(),U(Df,{key:0,index:0,modeType:"add",fieldKey:"variants.0",product:t.product,productEditModel:t.productEditModel},null,8,["product","productEditModel"])):x("",!0),((V=(E=t.product)==null?void 0:E.detail)==null?void 0:V.variation_type)==="simple"&&(($=t.product)==null?void 0:$.post_status)==="publish"&&((D=(O=t.product)==null?void 0:O.variants[0])!=null&&D.id)?(d(),U(Ca,{key:1,class:"fct-copy-wrap-inline",text:((Q=m.appVars)==null?void 0:Q.frontend_url)+"=instant_checkout&item_id="+t.product.variants[0].id+"&quantity=1",showMode:"icon_with_text",placement:"top",buttonText:m.$t("Direct Checkout"),tooltipContent:m.$t("Share direct checkout link to let customers buy this variation directly.")},null,8,["text","buttonText","tooltipContent"])):x("",!0),((L=(I=t.product)==null?void 0:I.detail)==null?void 0:L.variation_type)==="simple_variations"?(d(),U(n9,{key:2,product:t.product,productEditModel:t.productEditModel},null,8,["product","productEditModel"])):x("",!0)]}),_:1},8,["class"])]}),_:1},8,["class"])])}}},i9={key:0,class:"fct-product-inventory-wrap"},A9={class:"fct-product-inventory-inner-wrap hide-on-mobile"},d9={class:"relative"},u9={key:0,class:"fct-variant-badge absolute -top-2 right-1.5 bg-white border border-solid border-gray-outline text-primary-500 rounded-xs dark:bg-primary-700 dark:text-gray-50 dark:border-primary-500"},c9={class:"fct-adjust-by-wrap"},f9={class:"fct-adjust-by-row"},p9={class:"fct-adjust-by-col"},m9={class:"title"},h9={class:"fct-adjust-by-col"},_9={class:"title"},g9={class:"fct-adjust-by-action"},v9=["onClick"],y9={class:"fct-product-inventory-inner-wrap-mobile"},b9={key:0,class:"fct-product-inventory-mobile-col"},w9={class:"title"},B9={class:"fct-product-inventory-mobile-col"},C9={class:"fct-adjust-by-wrap"},k9={class:"fct-adjust-by-row"},F9={class:"fct-adjust-by-col"},x9={class:"title"},U9={class:"fct-adjust-by-col"},E9={class:"title"},S9={class:"fct-adjust-by-action"},Q9=["onClick"],D9={class:"fct-product-inventory-mobile-col"},$9={key:1},I9={class:"flex items-center gap-2"},T9={class:"fct-product-inventory-pro-text"},M9={class:"m-0"},Xd=!1,V9={__name:"ProductInventory",props:{product:Object,productEditModel:Object},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,s=T([]),n=T([]),l=T([]),A=$e.get("app_config.isProActive"),u=$e.get("modules_settings.stock_management.active");pe(()=>{const F=Object.keys(a.product.variants).length;s.value=Array.from({length:F},()=>!1),n.value=Array.from({length:F},()=>!1),a.product.variants.filter(B=>(B.new_stock=B.total_stock,B.adjusted_quantity=0,B))});const c=F=>a.product.detail.variation_type==="simple_variations"&&F.row.manage_stock==0?"disable_inventory_row":"",m=F=>a.product.detail.variation_type==="simple_variations"&&F.manage_stock==0?"disable_inventory_row":"",v=F=>{let B=parseInt(a.product.variants[F].new_stock);a.product.variants[F].total_stock=B<0?0:B;let w=parseInt(a.product.variants[F].total_stock)-parseInt(a.product.variants[F].committed)-parseInt(a.product.variants[F].on_hold);a.product.variants[F].available=w<0?0:w,de(()=>{s.value[F]=!1,n.value[F]=!1}),a.product.variants[F].adjusted_quantity=0,a.product.variants[F].new_stock=a.product.variants[F].total_stock,te.put(`products/${a.product.ID}/update-inventory/${a.product.variants[F].id}`,{total_stock:a.product.variants[F].total_stock,available:a.product.variants[F].available}).then(C=>{J.success(C.message)}).catch(C=>{var k;C.status_code=="422"?J.validationErrors(C):J.error((k=C.data)==null?void 0:k.message)}).finally(()=>{})},b=F=>{A&&te.put(`products/${a.product.ID}/update-manage-stock`,{manage_stock:a.product.detail.manage_stock}).then(B=>{J.success(B.message),a.product.variants.forEach(w=>{w.manage_stock=F,w.total_stock=1,w.available=1})}).catch(B=>{var w;B.status_code=="422"?J.validationErrors(B):J.error((w=B.data)==null?void 0:w.message)}).finally(()=>{})},g=(F,B)=>{B==="desktop"?s.value=s.value.map((w,C)=>C===F):n.value=n.value.map((w,C)=>C===F)};return(F,B)=>{const w=y("el-switch"),C=y("el-input"),k=y("el-table-column"),S=y("el-button"),E=y("el-popover"),V=y("el-table");return p(A)&&p(u)==="yes"?(d(),_("div",i9,[o(se,{class:"overflow-hidden"},{default:r(()=>{var $,O;return[o(le,{class:ne((($=t.product.detail)==null?void 0:$.manage_stock.toString())==="0"?"pb-5":"")},{action:r(()=>{var D;return[(D=t.product.detail)!=null&&D.manage_stock?(d(),U(w,{key:0,modelValue:t.product.detail.manage_stock,"onUpdate:modelValue":B[0]||(B[0]=Q=>t.product.detail.manage_stock=Q),onChange:b,"active-value":"1","inactive-value":"0","active-text":p(f)("Inventory Management")},null,8,["modelValue","active-text"])):x("",!0)]}),_:1},8,["class"]),o(na,{visible:((O=t.product.detail)==null?void 0:O.manage_stock.toString())==="1",accordion:""},{default:r(()=>[o(ae,{class:"px-0 pb-0"},{default:r(()=>[i("div",A9,[o(V,{data:t.product.variants,"row-class-name":c},{default:r(()=>[t.product.detail.variation_type==="simple_variations"?(d(),U(k,{key:0,label:p(f)("Title"),width:"140"},{default:r(D=>{var Q;return[i("div",d9,[o(C,{disabled:"",size:"small",modelValue:D.row.variation_title,"onUpdate:modelValue":I=>D.row.variation_title=I},null,8,["modelValue","onUpdate:modelValue"]),((Q=D.row.other_info)==null?void 0:Q.payment_type)==="subscription"?(d(),_("span",u9,h(D.row.other_info.repeat_interval),1)):x("",!0)])]}),_:1},8,["label"])):x("",!0),o(k,{label:p(f)("Total Stock"),width:"160"},{default:r(D=>[i("div",null,[o(C,{modelValue:D.row.total_stock,"onUpdate:modelValue":Q=>D.row.total_stock=Q,class:"input-with-total-stock fct-input-group",readonly:"",size:"small"},{append:r(()=>[i("div",{ref_key:"filter_popover_wrapper",ref:l},[o(E,{visible:s.value[D.$index],"popper-class":"fct-stock-dropdown",trigger:"click",placement:"bottom-end"},{reference:r(()=>[i("div",{onClick:Q=>g(D.$index,"desktop")},[o(Y,{name:"Configuration",class:"w-3.5 h-3.5"})],8,v9)]),default:r(()=>[i("div",c9,[i("div",f9,[i("div",p9,[i("span",m9,h(p(f)("Adjust by")),1),o(C,{size:"small",class:ne(t.productEditModel.hasValidationError(`${D.$index}.adjusted_quantity`)?"is-error":""),placeholder:p(f)("Quantity"),type:"number",modelValue:D.row.adjusted_quantity,"onUpdate:modelValue":Q=>D.row.adjusted_quantity=Q,modelModifiers:{number:!0},onKeyup:Q=>{t.productEditModel.onChangeAdjustedQuantity("adjusted_quantity",Q.target.value,D.$index)},onChange:Q=>{t.productEditModel.onChangeAdjustedQuantity("adjusted_quantity",Q,D.$index)}},null,8,["class","placeholder","modelValue","onUpdate:modelValue","onKeyup","onChange"])]),i("div",h9,[i("span",_9,h(p(f)("New Stock")),1),o(C,{size:"small",class:ne(t.productEditModel.hasValidationError(`${D.$index}.new_stock`)?"is-error":""),placeholder:p(f)("New Stock"),type:"number",min:1,modelValue:D.row.new_stock,"onUpdate:modelValue":Q=>D.row.new_stock=Q,modelModifiers:{number:!0},onKeyup:Q=>{t.productEditModel.onChangeNewStock("new_stock",Q.target.value,D.$index)}},null,8,["class","placeholder","modelValue","onUpdate:modelValue","onKeyup"])])]),i("div",g9,[o(S,{size:"small",type:"info",soft:"",onClick:Q=>s.value[D.$index]=!1},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:2},1032,["onClick"]),o(S,{size:"small",type:"primary",onClick:Q=>v(D.$index),disabled:D.row.new_stock===""},{default:r(()=>[M(h(p(f)("Apply")),1)]),_:2},1032,["onClick","disabled"])])])]),_:2},1032,["visible"])],512)]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),o(k,{label:p(f)("Available"),width:"100"},{default:r(D=>[o(C,{disabled:"",size:"small",placeholder:p(f)(D.row.available)},null,8,["placeholder"])]),_:1},8,["label"]),o(k,{label:p(f)("On hold"),width:"100"},{default:r(D=>[o(C,{disabled:"",size:"small",placeholder:p(f)(D.row.on_hold)},null,8,["placeholder"])]),_:1},8,["label"]),o(k,{label:p(f)("Delivered"),width:"100"},{default:r(D=>[o(C,{disabled:"",size:"small",placeholder:p(f)(D.row.committed)},null,8,["placeholder"])]),_:1},8,["label"])]),_:1},8,["data"])]),i("div",y9,[(d(!0),_(H,null,q(t.product.variants,(D,Q)=>(d(),_("div",{key:Q,class:ne(["fct-product-inventory-mobile-row",m(D)])},[t.product.detail.variation_type==="simple_variations"?(d(),_("div",b9,[i("div",w9,h(D.variation_title),1)])):x("",!0),i("div",B9,[o(C,{modelValue:D.total_stock,"onUpdate:modelValue":I=>D.total_stock=I,class:"input-with-total-stock fct-input-group",readonly:"",size:"small"},{append:r(()=>[i("div",{ref_for:!0,ref_key:"filter_popover_wrapper",ref:l},[o(E,{visible:n.value[Q],"popper-class":"fct-stock-dropdown",trigger:"click",placement:"bottom-end"},{reference:r(()=>[i("div",{onClick:I=>g(Q,"mobile")},[o(Y,{name:"Configuration",class:"w-3.5 h-3.5"})],8,Q9)]),default:r(()=>[i("div",C9,[i("div",k9,[i("div",F9,[i("span",x9,h(p(f)("Adjust by")),1),o(C,{size:"small",class:ne(t.productEditModel.hasValidationError(`${Q}.adjusted_quantity`)?"is-error":""),placeholder:p(f)("Quantity"),type:"number",modelValue:D.adjusted_quantity,"onUpdate:modelValue":I=>D.adjusted_quantity=I,modelModifiers:{number:!0},onKeyup:I=>{t.productEditModel.onChangeAdjustedQuantity("adjusted_quantity",I.target.value,Q)},onChange:I=>{t.productEditModel.onChangeAdjustedQuantity("adjusted_quantity",I,Q)}},null,8,["class","placeholder","modelValue","onUpdate:modelValue","onKeyup","onChange"])]),i("div",U9,[i("span",E9,h(p(f)("New Stock")),1),o(C,{size:"small",class:ne(t.productEditModel.hasValidationError(`${Q}.new_stock`)?"is-error":""),placeholder:p(f)("New Stock"),type:"number",min:1,modelValue:D.new_stock,"onUpdate:modelValue":I=>D.new_stock=I,modelModifiers:{number:!0},onKeyup:I=>{t.productEditModel.onChangeNewStock("new_stock",I.target.value,Q)}},null,8,["class","placeholder","modelValue","onUpdate:modelValue","onKeyup"])])]),i("div",S9,[o(S,{size:"small",type:"info",soft:"",onClick:I=>n.value[Q]=!1},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:2},1032,["onClick"]),o(S,{size:"small",type:"primary",onClick:I=>v(Q),disabled:D.new_stock===""},{default:r(()=>[M(h(p(f)("Apply")),1)]),_:2},1032,["onClick","disabled"])])])]),_:2},1032,["visible"])],512)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),i("div",D9,[i("ul",null,[i("li",null,[i("span",null,h(p(f)("Available"))+":",1),M(" "+h(D.available.toString()),1)]),i("li",null,[i("span",null,h(p(f)("On Hold"))+":",1),M(" "+h(D.on_hold.toString()),1)]),i("li",null,[i("span",null,h(p(f)("Delivered"))+":",1),M(" "+h(D.committed.toString()),1)])])])],2))),128))])]),_:1})]),_:1},8,["visible"])]}),_:1})])):p(A)?x("",!0):(d(),_("div",$9,[o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{class:"pb-0"},{action:r(()=>[i("div",I9,[o(w,{modelValue:Xd,"onUpdate:modelValue":B[1]||(B[1]=$=>Xd=$),"active-value":"1","inactive-value":"0","active-text":p(f)("Inventory Management")},null,8,["active-text"]),o(Y,{name:"Crown",class:"w-4 h-4 text-warning-500"})])]),_:1}),o(ae,{class:"px-5 mt-5 border-[1px] border-r-0 border-l-0 border-b-0 border-solid border-gray-divider dark:border-dark-400"},{default:r(()=>[i("div",T9,[i("p",M9,h(p(f)("This feature is only available for pro version.")),1)])]),_:1})]),_:1})]))}}},L9={class:"fct-file-uploader-wrap"},O9={key:0,class:"fct-file-upload-rename"},H9={class:"fct-form-group"},R9={for:"filename_input"},P9={style:{display:"flex","justify-content":"space-between"}},K9={key:0},N9={class:"fct-btn-group sm fct-file-upload-rename-actions"},G9={key:0,class:"fct-form-group"},j9={key:1,class:"fct-file-upload-list-empty"},z9={class:"el-upload__text"},Y9=["innerHTML"],q9={key:1,class:"fct-file-upload-progress"},W9={class:"upload-progress-head"},X9={class:"upload-progress-body"},J9={key:0,class:"fct-file-upload-name"},Z9={class:"fct-file-upload-text"},eM={key:0},tM={__name:"FileUploader",props:{driver:String,storageDriverModel:Object},emits:["onUploaded"],setup(t,{expose:e,emit:a}){const s=t,n=a,l=T(),A=T(null),u=T(""),c=T(),m=T([]),v=T(!1),b=T(0),g=()=>window.fluentCartRestVars.rest.url+"/files/upload",F=()=>({name:u.value,driver:s.driver,bucket:l.value}),B=D=>D.name.length>160?(J.error(f("Filename too long. Maximum 160 characters allowed")),m.value=[],D.value=null,u.value="",v.value=!1,b.value=0,!1):!0,w=D=>{D!=null&&D.message&&J.success(D.message),m.value=[],c.value=null,u.value="",v.value=!1,b.value=0};e({reset:w});const C=D=>{c.value=D,u.value=D.name.replace(/\.[^/.]+$/,"")},k=()=>{A.value.handleRemove(c.value),w()},S=(D,Q,I)=>{b.value=parseInt(D.percent+"")},E=(D,Q,I)=>{var L,K;w(D),(K=(L=s.storageDriverModel)==null?void 0:L.fileUploaded)==null||K.call(L,D),n("onUploaded",D,Q,I)},V=()=>{v.value=!0,A.value.submit()},$=D=>u.value+"."+D.split(".").pop(),O=()=>({"X-WP-Nonce":te.getNonce()});return(D,Q)=>{const I=y("el-input"),L=y("el-button"),K=y("el-option"),N=y("el-select"),W=y("el-upload"),R=y("el-progress");return d(),_("div",L9,[m.value.length>0?(d(),_(H,{key:0},[v.value?x("",!0):(d(),_("div",O9,[i("div",H9,[i("label",R9,h(D.$t("File Name")),1),o(I,{id:"filename_input",modelValue:u.value,"onUpdate:modelValue":Q[0]||(Q[0]=ee=>u.value=ee)},null,8,["modelValue"]),i("div",P9,[i("div",null,[u.value.length>160?(d(),_("span",K9,h(p(f)("File name Must not exceed %s characters",160)),1)):x("",!0)]),i("div",null,h(u.value.length)+"/160 ",1)])]),i("div",N9,[o(L,{type:"primary",onClick:V,disabled:u.value.length>160},{default:r(()=>[M(h(D.$t("Upload")),1)]),_:1},8,["disabled"]),o(Be,{onClick:Ke(w,["prevent"]),tag:"button"},{default:r(()=>[o(Y,{name:"Delete"})]),_:1})])]))],64)):x("",!0),i("div",{class:ne({hidden:m.value.length>0})},[t.storageDriverModel.hasBucket(t.driver)?(d(),_("div",G9,[i("label",null,h(p(f)("Select Bucket")),1),o(N,{filterable:"",modelValue:l.value,"onUpdate:modelValue":Q[1]||(Q[1]=ee=>l.value=ee),placeholder:p(f)("Select"),"popper-class":"fct-bucket-list-popover"},{default:r(()=>[(d(!0),_(H,null,q(t.storageDriverModel.data.buckets[t.driver],(ee,oe)=>(d(),U(K,{key:oe,label:ee.label,value:ee.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])):x("",!0),t.storageDriverModel.hasBucket(t.driver)&&!l.value?(d(),_("div",j9,h(p(f)("Please select a bucket to upload files.")),1)):x("",!0),!t.storageDriverModel.hasBucket(t.driver)||l.value?(d(),U(W,{key:2,class:"fct-file-uploader",ref_key:"uploaderRef",ref:A,data:F(),"file-list":m.value,"onUpdate:fileList":Q[2]||(Q[2]=ee=>m.value=ee),drag:"",action:g(),"on-progress":S,"on-success":E,"on-error":(ee,oe,Ae)=>{ee.toString().includes("Request Entity Too Large")?p(J).error(p(f)("File too large")):p(J).error(p(f)("Cant upload the file")),m.value=[],u.value="",v.value=!1,b.value=0},"auto-upload":!1,"on-change":C,multiple:!1,limit:1,"show-file-list":!1,headers:O(),"before-upload":B},{default:r(()=>[o(Be,{circle:"",bg:"primary",soft:""},{default:r(()=>[o(Y,{name:"Upload"})]),_:1}),i("div",z9,[i("span",{innerHTML:p(f)("Drag & Drop or %1$s Browse/Upload %2$s Files","<em>","</em>")},null,8,Y9),i("span",null,h(p(f)("Any Format upto %s",p(Ge).serverMaxUploadSize())),1)])]),_:1},8,["data","file-list","action","on-error","headers"])):x("",!0)],2),v.value?(d(),_("div",q9,[i("div",W9,[o(Be,{bg:"info",soft:"",size:"small"},{default:r(()=>[o(Y,{name:"Files"})]),_:1})]),i("div",X9,[m.value.length>0?(d(),_("div",J9,h($(m.value[0].name)),1)):x("",!0),o(R,{"stroke-width":5,percentage:b.value,striped:"","striped-flow":"",duration:40},{default:r(()=>[i("div",Z9,[m.value.length>0?(d(),_("span",eM,h(p(Qp)(m.value[0].size*(b.value/100),m.value[0].size)),1)):x("",!0),i("span",null,h(p(f)("%s% Uploaded",b.value)),1)])]),_:1},8,["percentage"])]),i("div",{class:"fct-file-upload-progress-cancel",onClick:k},[o(Y,{name:"Close"})])])):x("",!0)])}}},aM={key:0,class:"fct-form-group"},sM={class:"fct-file-upload-search-wrap"},nM={key:0},oM={key:1,class:"fct-file-upload-list"},lM={key:1},rM={key:2,class:"fct-file-upload-list-empty"},iM={__name:"FileList",props:{driver:String,buckets:Array,storageDriverModel:Object,multiple:{type:Boolean,default:!0}},emits:["onFileSelected"],setup(t,{emit:e}){const a=t,s=T([]),n=T(!1),l=()=>{n.value=!0,s.value=[],u.value=[],v([]),a.storageDriverModel.getFileList(a.driver,A.value,g.value).then(E=>{s.value=E}).catch(E=>{J.error(E)}).finally(()=>{n.value=!1})},A=T(""),u=T([]),c=T(!1),m=T(!1),v=E=>{m.value=!1;const V=E.map($=>($.name.length>185&&(m.value=!0),{name:$.name,size:$.size,bucket:$.bucket,driver:$.driver}));V.value=E,c.value=V.value.length>0,w("onFileSelected",V,m.value)},b=X(()=>s.value&&s.value.errors&&Object.keys(s.value.errors).length>0),g=T(""),F=T(null),B=E=>E.includes("_____fluent-cart_____")?E.split("_____fluent-cart_____")[0]:E.split("__fluent-cart__")[0];ce(()=>a.driver,()=>{v([])});const w=e,C=T(null),k=E=>{n.value=!0;const V=E.file;V.bucket!==g.value?(g.value=V.bucket,s.value=[V]):s.value.unshift(V),v([...u.value,V]),n.value=!1,de(()=>{C.value&&C.value.toggleRowSelection(E.file,!0)})};pe(()=>{a.storageDriverModel.hasBucket(a.driver)||l(),a.storageDriverModel.onFileUploaded(k,a.driver)});const S=async(E,V)=>{E.deleting=!0,await te.delete("files/delete",{file_path:E.name,driver:a.driver,bucket:g.value}).then($=>{J.success($.message),s.value.splice(V,1),v([])}).catch($=>{J.error($.message)}).finally(()=>{E.deleting=!1})};return(E,V)=>{const $=y("el-option"),O=y("el-select"),D=y("el-input"),Q=y("el-table-column"),I=y("el-skeleton-item"),L=y("el-skeleton"),K=y("el-table"),N=y("el-radio"),W=y("el-popconfirm");return d(),_(H,null,[t.storageDriverModel.hasBucket(t.driver)?(d(),_("div",aM,[i("label",null,h(p(f)("Select Bucket")),1),o(O,{filterable:"",clearable:"",modelValue:g.value,"onUpdate:modelValue":V[0]||(V[0]=R=>g.value=R),placeholder:p(f)("Type to search"),"popper-class":"fct-bucket-list-popover",onChange:l,disabled:n.value},{default:r(()=>[(d(!0),_(H,null,q(t.storageDriverModel.data.buckets[t.driver],(R,ee)=>(d(),U($,{key:ee,label:R.label,value:R.value,loading:t.storageDriverModel.isBucketLoading(t.driver)},null,8,["label","value","loading"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])])):x("",!0),!t.storageDriverModel.hasBucket(t.driver)||g.value&&t.storageDriverModel.isBucketLoaded(t.driver)?(d(),_(H,{key:1},[i("div",sM,[o(D,{modelValue:A.value,"onUpdate:modelValue":V[1]||(V[1]=R=>A.value=R),class:"fct-file-search-input",placeholder:p(f)("Search and hit enter"),clearable:"",onKeyup:V[2]||(V[2]=fa(()=>{l()},["enter"]))},null,8,["modelValue","placeholder"])]),n.value?(d(),_("div",nM,[o(K,{data:[1,2,3,4,5]},{default:r(()=>[o(Q,{type:"selection",width:"45"}),o(Q,{label:p(f)("File Name")},{default:r(()=>[o(L,{animated:""},{template:r(()=>[o(I,{varient:"p",class:"max-w-[190px]"})]),_:1})]),_:1},8,["label"]),o(Q,{label:p(f)("Size"),width:"150"},{default:r(()=>[o(L,{animated:""},{template:r(()=>[o(I,{varient:"p",class:"max-w-[100px]"})]),_:1})]),_:1},8,["label"])]),_:1})])):x("",!0),n.value?x("",!0):(d(),_("div",oM,[b.value?(d(),_("div",lM,[i("p",null,h(p(f)("Error: Unable to load the file list.")),1)])):(d(),U(K,{key:0,ref_key:"tableRef",ref:C,data:s.value,onSelectionChange:v},{empty:r(()=>[i("span",null,h(p(f)("No file found.")),1)]),default:r(()=>[t.multiple?(d(),U(Q,{key:0,type:"selection",width:"45",selectable:R=>!R.deleting,onSelectionChange:v},null,8,["selectable"])):(d(),U(Q,{key:1,label:"",width:"45"},{default:r(R=>[o(N,{modelValue:F.value,"onUpdate:modelValue":V[3]||(V[3]=ee=>F.value=ee),label:R.row,onChange:ee=>v([R.row])},null,8,["modelValue","label","onChange"])]),_:1})),o(Q,{label:p(f)("File Name")},{default:r(R=>[i("span",null,h(B(R.row.name)),1)]),_:1},8,["label"]),o(Q,{label:p(f)("Size"),width:"150"},{default:r(R=>[i("span",null,h(p(Ge).readableFileSizeFromBytes(R.row.size)),1)]),_:1},8,["label"]),o(Q,{label:p(f)("Actions"),width:"80"},{default:r(R=>[o(W,{title:p(f)("Are you sure you want to delete this file? This action is not recoverable."),"confirm-button-text":p(f)("Yes, Confirm!"),"cancel-button-text":p(f)("Cancel"),onConfirm:ee=>S(R.row,R.$index),width:"250","popper-class":"fct-delete-confirm-popover"},{reference:r(()=>[o(Be,{size:"small",tag:"button",disabled:R.row.deleting},{default:r(()=>[o(Y,{name:"Delete"})]),_:2},1032,["disabled"])]),_:2},1032,["title","confirm-button-text","cancel-button-text","onConfirm"])]),_:1},8,["label"])]),_:1},8,["data"]))]))],64)):x("",!0),!g.value&&t.storageDriverModel.hasBucket(t.driver)?(d(),_("div",rM,h(p(f)("Please select a bucket to view the files.")),1)):x("",!0)],64)}}};class AM extends Xt{constructor(){super(...arguments);fe(this,"data",{drivers:{},selectedDriver:"",isDriversLoaded:!1,loadingDriver:!1,buckets:{},bucketLoadingStates:{},loadingFiles:!1,onFileUploadedCallbacks:{}});fe(this,"getActiveDrivers",()=>{this.data.drivers=[],te.get("settings/storage-drivers/active-drivers").then(a=>{this.data.drivers=a.drivers,this.data.drivers.length>0&&(this.data.selectedDriver.value=this.data.drivers[0].route),Object.values(this.data.drivers).forEach(s=>{s.has_bucket&&(this.data.buckets[s.route]=s.buckets,this.data.bucketLoadingStates[s.route]=!0)})}).catch(a=>{console.log(a,"errors")}).finally(()=>{this.data.isDriversLoaded=!0})});fe(this,"getBuckets",a=>this.data.bucketLoadingStates[a]===!1?(this.loadBucketList(a),[]):this.data.buckets[a]?this.data.buckets[a]:[]);fe(this,"loadBucketList",a=>{this.isBucketLoaded(a)||this.isBucketLoading(a)||(this.data.bucketLoadingStates[a]="loading",te.get("files/bucket-list",{driver:a}).then(s=>{this.data.bucketLoadingStates[a]=!0,this.data.buckets[a]=s.buckets}).catch(s=>{this.data.bucketLoadingStates[a]=!1}).finally(()=>{}))});fe(this,"getFileList",async(a,s="",n)=>{if(s=s.trim(),this.hasBucket(a)&&!n)return[];let l=[];return this.data.loadingFiles=!0,await te.get("files",{driver:a,activeBucket:n,search:s}).then(A=>{l=A.files}).catch(A=>{J.error(A)}).finally(()=>{this.data.loadingFiles=!1}),l});fe(this,"onFileUploaded",(a,s)=>{typeof a=="function"&&!this.data.onFileUploadedCallbacks.hasOwnProperty(s)&&(this.data.onFileUploadedCallbacks[s]=a)});fe(this,"fileUploaded",a=>{const s=a.file.driver;!s||!this.data.onFileUploadedCallbacks.hasOwnProperty(s)||typeof this.data.onFileUploadedCallbacks[s]=="function"&&this.data.onFileUploadedCallbacks[s](a)})}get drivers(){return Object.values(this.data.drivers)}hasBucket(a){return this.data.buckets.hasOwnProperty(a)}isBucketLoading(a){return this.data.bucketLoadingStates[a]==="loading"}isBucketLoaded(a){return this.data.bucketLoadingStates[a]===!0}}function dM(){return AM.init()}const uM={class:"fct-driver-wrap"},cM={class:"fct-driver-content"},fM={key:0,class:"empty-driver-text"},pM={class:"fct-driver-tabs-label"},mM={class:"fct-driver-arrow-icon"},hM={class:"fct-driver-tabs-label"},_M={key:0},gM={class:"fct-driver-tabs-label"},vM={key:0,class:"dialog-footer"},$f={__name:"FileUploaderDialog",props:{isDisabled:String,uploadBtnText:{default:f("Choose File")},uploadBtnIcon:{default:"Upload"},uploadBtnSize:{type:String,default:"large"},isMultiple:{type:Boolean,default:!0}},emits:["onUploaded","onFileSelected"],setup(t,{emit:e}){const a=t,s=e,n=T(!1),l=T(),A=Xe().ctx,u=T([]),c=T("local"),m=T([]),v=[];T(!1);const b=T(!1),g=dM();pe(()=>{g.getActiveDrivers()});const F=S=>{c.value=S,g.getBuckets(S)},B=()=>{if(!v.value||v.value.length===0){A.handleMessage(f("Please select a file"),"error","fct-file-upload-message");return}if(m.value=[],a.isMultiple)v.value.forEach(S=>{const E=S.name;let V=E.split("_____fluent-cart_____")[0];V=V.split("__fluent-cart__")[0],m.value.push({id:"",title:V,type:E.slice(E.lastIndexOf(".")+1),driver:S.driver,bucket:S.bucket,file_name:E,file_size:S.size,settings:{download_limit:"",download_expiry:"",bucket:S.bucket},serial:""})});else{const S=v.value[0],E=S.name;let V=E.split("_____fluent-cart_____")[0];V=V.split("__fluent-cart__")[0],m.value.push({id:"",title:V,type:E.slice(E.lastIndexOf(".")+1),driver:S.driver,bucket:S.bucket,file_name:E,file_size:S.size,settings:{download_limit:"",download_expiry:"",bucket:S.bucket},serial:""})}n.value=!1,b.value=!1,s("onFileSelected",m)},w=T("list"),C=T(!1),k=(S,E)=>{v.value=S,b.value=v.value.length>0,C.value=E};return(S,E)=>{const V=y("el-button"),$=y("router-link"),O=y("el-tab-pane"),D=y("el-tabs"),Q=y("el-dialog");return d(),_("div",uM,[o(V,{class:"fct-upload-btn",type:"info",plain:"",onClick:E[0]||(E[0]=I=>n.value=!0),disabled:t.isDisabled,size:t.uploadBtnSize},{default:r(()=>[t.uploadBtnIcon?(d(),U(Y,{key:0,name:t.uploadBtnIcon},null,8,["name"])):x("",!0),M(" "+h(t.uploadBtnText),1)]),_:1},8,["disabled","size"]),o(Q,{modelValue:n.value,"onUpdate:modelValue":E[6]||(E[6]=I=>n.value=I),"append-to-body":!0,title:p(f)("Storage Providers"),"modal-class":"fct-file-upload-dialog",onClose:()=>{}},{default:r(()=>[i("div",cM,[p(g).drivers.length<1?(d(),_("span",fM,[M(h(p(f)("No active storage provider found!"))+" ",1),o($,{to:"/settings/storage"},{default:r(()=>[M(h(p(f)("Go to setting to active")),1)]),_:1})])):x("",!0),p(g).drivers.length>0?(d(),U(D,{key:1,class:"fct-driver-tabs",modelValue:c.value,"onUpdate:modelValue":E[4]||(E[4]=I=>c.value=I),"tab-position":"left",onTabChange:F},{default:r(()=>[(d(!0),_(H,null,q(p(g).drivers,I=>(d(),U(O,{name:I.route,key:I.route},{label:r(()=>[i("div",pM,[o(Y,{name:I.title==="S3"?"FolderCloud":"Folder"},null,8,["name"]),i("span",null,h(I.title),1),i("div",mM,[o(Y,{name:"ChevronRight"})])])]),default:r(()=>[o(D,{modelValue:w.value,"onUpdate:modelValue":E[3]||(E[3]=L=>w.value=L),class:"fct-file-tabs","tab-position":"top"},{default:r(()=>[o(O,{name:"list"},{label:r(()=>[i("div",hM,h(p(f)("Select Files")),1)]),default:r(()=>[o(iM,{storageDriverModel:p(g),buckets:u.value,driver:I.route,onOnFileSelected:E[1]||(E[1]=(L,K)=>{k(L,K)}),multiple:t.isMultiple},null,8,["storageDriverModel","buckets","driver","multiple"]),C.value?(d(),_("span",_M,h(p(f)("File name must not exceed %s characters",160)),1)):x("",!0)]),_:2},1024),o(O,{name:"upload"},{label:r(()=>[i("div",gM,h(p(f)("Upload")),1)]),default:r(()=>[o(tM,{storageDriverModel:p(g),onOnUploaded:E[2]||(E[2]=(L,K,N)=>{w.value="list"}),driver:I.route,ref_for:!0,ref:I.route==="local"?l.value:""},null,8,["storageDriverModel","driver"])]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])):x("",!0)]),p(g).drivers.length>0?(d(),_("div",vM,[o(V,{onClick:E[5]||(E[5]=I=>n.value=!1),type:"info",soft:""},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),o(V,{type:"primary",onClick:B,disabled:!b.value||C.value},{default:r(()=>[M(h(p(f)("Confirm")),1)]),_:1},8,["disabled"])])):x("",!0)]),_:1},8,["modelValue","title"])])}}},yM={class:"el-form el-form--default el-form--label-top"},bM={class:"m-0 mt-1"},wM={class:"m-0"},If={__name:"SingleFileForm",props:{product:Object,file:Object,index:Number,productDownloadableModel:Object,singleMode:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1}},setup(t){const e=t;return Rs(()=>{if(e.file&&typeof e.file.product_variation_id=="string")try{e.file.product_variation_id=JSON.parse(e.file.product_variation_id),e.file.product_variation_id=e.file.product_variation_id.map(a=>parseInt(a))}catch{}}),(a,s)=>{const n=y("el-option"),l=y("el-select"),A=y("el-form-item"),u=y("el-input");return d(),_("div",yM,[o(A,{label:a.$t("Choose variant"),class:"mb-2.5"},{default:r(()=>[o(l,{class:"",size:"small",modelValue:t.file.product_variation_id,"onUpdate:modelValue":s[0]||(s[0]=c=>t.file.product_variation_id=c),multiple:"",id:`downloadable_files.${t.index}.product_variation_id`,placeholder:a.$t("Keep empty for all"),"popper-class":"fct-choose-variant-popover","collapse-tags":"","collapse-tags-tooltip":""},{default:r(()=>[(d(!0),_(H,null,q(t.productDownloadableModel.generateVariantOptions(t.product),c=>(d(),U(n,{key:c.id,label:c.variation_title,value:c.id},{default:r(()=>[o(Sl,{variant:c},null,8,["variant"])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","id","placeholder"]),o(rt,{"validation-errors":t.productDownloadableModel.data.validationErrors,"field-key":`downloadable_files.${t.index}.product_variation_id`},null,8,["validation-errors","field-key"])]),_:1},8,["label"]),t.isEditing||t.productDownloadableModel.insertableFiles.length===1?(d(),U(A,{key:0,class:"mb-2.5"},{default:r(()=>[o($f,{isMultiple:!t.singleMode,onOnFileSelected:s[1]||(s[1]=c=>{const m=t.index,v=c;v.value.forEach((b,g)=>{t.isEditing?(v.value[g].serial=m+1,v.value[g].settings.download_limit=t.productDownloadableModel.data.downloadableFiles[m].settings.download_limit,v.value[g].settings.download_expiry=t.productDownloadableModel.data.downloadableFiles[m].settings.download_expiry,v.value.length>1?(v.value[g].product_variation_id=t.productDownloadableModel.data.downloadableFiles[m].product_variation_id,t.file=v.value[g]):(v.value[g].product_variation_id=t.productDownloadableModel.data.downloadableFiles[m].product_variation_id,t.file.file_name=v.value[g].file_name,t.file.file_path=v.value[g].file_path,t.file.file_size=v.value[g].file_size,t.file.file_url=v.value[g].file_url,t.file.title=v.value[g].title,t.file.type=v.value[g].type,t.file.settings=v.value[g].settings)):(v.value[g].serial=m+1,v.value[g].settings.download_limit=t.productDownloadableModel.insertableFiles[m].settings.download_limit,v.value[g].settings.download_expiry=t.productDownloadableModel.insertableFiles[m].settings.download_expiry,v.value.length>1?(v.value[g].product_variation_id=t.productDownloadableModel.insertableFiles[m].product_variation_id,t.productDownloadableModel.insertableFiles[m+g]=v.value[g]):(v.value[g].product_variation_id=t.productDownloadableModel.insertableFiles[m].product_variation_id,t.productDownloadableModel.insertableFiles[m]=v.value[g]))})})},null,8,["isMultiple"]),o(rt,{"validation-errors":t.productDownloadableModel.data.validationErrors,"field-key":`downloadable_files.${t.index}.file_url`},null,8,["validation-errors","field-key"])]),_:1})):x("",!0),t.file.title?(d(),U(A,{key:1,class:"mb-2.5",label:a.$t("File Title")},{default:r(()=>[i("p",bM,h(t.file.title),1),x("",!0),o(rt,{"validation-errors":t.productDownloadableModel.data.validationErrors,"field-key":`downloadable_files.${t.index}.title`},null,8,["validation-errors","field-key"])]),_:1},8,["label"])):x("",!0),t.file.driver?(d(),U(A,{key:2},{default:r(()=>[i("p",wM,h(p(f)("Driver: %s",t.file.driver)),1)]),_:1})):x("",!0)])}}},BM={key:0,class:"text-right"},CM={key:1,class:"px-6 py-3"},kM={class:"fct-product-download-inner-wrap flex flex-col gap-4"},FM={class:"rounded p-3 bg-gray-25 dark:bg-dark-500 relative"},xM={key:1},UM={__name:"ProductDownloadAddModal",props:{product:Object,productEditModel:Object,productDownloadableModel:Object},setup(t){const e=X(()=>window.innerWidth<=768?"90%":"34%");return(a,s)=>{const n=y("el-button"),l=y("el-drawer");return d(),_(H,null,[i("div",{class:ne(["add-download-btn",t.productDownloadableModel.hasVariationOption(t.product)?"px-6 py-3 border border-solid border-gray-divider border-x-0 border-b-0 dark:border-dark-400":""])},[t.productDownloadableModel.hasVariationOption(t.product)?(d(),_("div",BM,[o(n,{text:"",type:"primary",onClick:s[0]||(s[0]=()=>{t.productDownloadableModel.openAddModal()})},{default:r(()=>[o(Y,{name:"Plus"}),M(" "+h(a.$t("Add")),1)]),_:1})])):(d(),_("div",CM,h(a.$t("No pricing added yet")),1))],2),o(l,{modelValue:t.productDownloadableModel.data.addModal.isModalOpen,"onUpdate:modelValue":s[4]||(s[4]=A=>t.productDownloadableModel.data.addModal.isModalOpen=A),size:e.value,onClose:s[5]||(s[5]=()=>{t.productDownloadableModel.clearInsertableFile()}),onOpen:s[6]||(s[6]=()=>{t.productDownloadableModel.addDummyInsertableFile()})},{header:r(()=>[o(Ze,{title:a.$t("Add Downloadable Asset(s)"),content:a.$t("Attach the WordPress-supported digital files that customers will receive after purchasing this product. If this downloadable file is only for a specific product variation (e.g., 'eBook Version' or 'Audiobook Version'), please select that variant. Otherwise, you may leave the 'Choose variant' field empty to make the file available for all variants of this product. Please note that any additional files added after any sell will be accessible to both existing and new orders."),placement:"bottom"},null,8,["title","content"])]),footer:r(()=>[i("div",null,[o(n,{onClick:s[2]||(s[2]=A=>t.productDownloadableModel.data.addModal.isModalOpen=!1)},{default:r(()=>[M(h(a.$t("Cancel")),1)]),_:1}),o(n,{type:"primary",onClick:s[3]||(s[3]=()=>{t.productDownloadableModel.attachInsertableFiles(t.product.ID)})},{default:r(()=>[M(h(a.$t("Save Asset")),1)]),_:1})])]),default:r(()=>[i("div",kM,[t.productDownloadableModel.insertableFiles.length?(d(!0),_(H,{key:0},q(t.productDownloadableModel.insertableFiles,(A,u)=>(d(),_("div",FM,[t.productDownloadableModel.insertableFiles.length>1?(d(),U(n,{key:0,onClick:c=>t.productDownloadableModel.deleteInsertableFile(u),size:"small",plain:"",class:"absolute right-2 top-2 p-0 border-none hover:text-red-500"},{default:r(()=>[o(Y,{name:"Delete"})]),_:2},1032,["onClick"])):x("",!0),o(If,{product:t.product,file:A,index:u,productDownloadableModel:t.productDownloadableModel},null,8,["product","file","index","productDownloadableModel"])]))),256)):x("",!0),t.productDownloadableModel.insertableFiles.length>1?(d(),_("div",xM,[o($f,{uploadBtnText:p(f)("Add More Files"),onOnFileSelected:s[1]||(s[1]=A=>{const u=t.productDownloadableModel.insertableFiles.length-1,c=A;c.value.forEach((m,v)=>{c.value[v].serial=u+1,c.value[v].settings.download_limit=t.productDownloadableModel.insertableFiles[u].settings.download_limit,c.value[v].settings.download_expiry=t.productDownloadableModel.insertableFiles[u].settings.download_expiry,c.value[v].product_variation_id=t.productDownloadableModel.insertableFiles[u].product_variation_id,t.productDownloadableModel.insertableFiles.push(c.value[v])})})},null,8,["uploadBtnText"])])):x("",!0),(d(!0),_(H,null,q(t.product.variants,(A,u)=>(d(),_("div",{key:u},[o(rt,{"validation-errors":t.productDownloadableModel.data.validationErrors,"field-key":`variants.${u}.downloadable`},null,8,["validation-errors","field-key"])]))),128))])]),_:1},8,["modelValue","size"])],64)}}},EM={class:"fluent-cart-admin-pages"},SM={class:"fct-product-download-inner-wrap flex flex-col gap-4"},QM={class:"rounded p-3 bg-gray-25 dark:bg-dark-500"},DM={__name:"ProductDownloadEditModal",props:{product:Object,productDownloadable:Object,productEditModel:Object,productDownloadableModel:Object,index:Number|String},setup(t){const e=t,a=X(()=>window.innerWidth<=768?"90%":"40%"),s=T({...e.productDownloadable}),n=e.productDownloadableModel.data.editModal.states;return Rs(()=>{n[e.index]={},n[e.index].visible=!1}),(l,A)=>{const u=y("el-button"),c=y("el-drawer");return d(),_(H,null,[o(c,{"append-to-body":"",modelValue:p(n)[t.index].visible,"onUpdate:modelValue":A[1]||(A[1]=m=>p(n)[t.index].visible=m),size:a.value,title:p(f)("Edit Downloadable Asset"),onClose:A[2]||(A[2]=()=>{t.productDownloadableModel.closeEditModal(t.index)})},{footer:r(()=>[o(u,{type:"primary",loading:t.productDownloadableModel.saving,onClick:A[0]||(A[0]=()=>{t.productDownloadableModel.updateDownloadableFile()})},{default:r(()=>[M(h(t.productDownloadableModel.saving?p(f)("Updating"):p(f)("Update")),1)]),_:1},8,["loading"])]),default:r(()=>[i("div",EM,[i("div",SM,[i("div",QM,[o(If,{product:t.product,file:s.value,index:t.index,productDownloadableModel:t.productDownloadableModel,singleMode:!0,"is-editing":""},null,8,["product","file","index","productDownloadableModel"])])])])]),_:1},8,["modelValue","size","title"]),i("div",{class:"el-dropdown-menu__item w-full",onClick:A[3]||(A[3]=Ke(()=>{p(n)[t.index].visible=!0,t.productDownloadableModel.openEditModal(t.index,s.value)},["prevent"]))},[o(Y,{name:"Edit"}),M(" "+h(p(f)("Edit")),1)])],64)}}},$M={class:"fct-product-download-wrap"},IM={key:0,class:"fct-product-download-inner-wrap border border-x-0 border-b-0 border-solid border-gray-divider dark:border-dark-400"},TM={class:"fct-media-content-list"},MM={class:"product-thumbnail bg-gray-100 rounded flex items-center justify-center dark:bg-dark-500"},VM={class:"product-details"},LM={class:"product-details-content-row"},OM={class:"product-details-content-first"},HM={class:"product-title text-sm font-medium text-system-dark dark:text-gray-50"},RM={key:0,class:"font-normal text-system-mid"},PM={class:"product-variation-title inline-flex"},KM={key:1,class:"product-variation-title"},NM={class:"product-details-content-second"},GM={class:"more-btn"},jM={__name:"ProductDownload",props:{product:Object,productEditModel:Object,productDownloadableModel:Object},setup(t){const e=t,a=function(n){te.get(`products/getDownloadableUrl/${n.id}`).then(l=>{Ol.copy(l.url)}).catch(l=>{J.error({title:f("Error"),message:f("Failed to copy file URL")})})},s=n=>{n.action==="copy-download-link"?a(n.data):n.action==="delete"&&e.productDownloadableModel.deleteDownloadableFile(n.data.id,n.idx)};return(n,l)=>{const A=y("el-switch"),u=y("el-popover"),c=y("el-dropdown-item"),m=y("el-dropdown-menu"),v=y("el-dropdown");return d(),_("div",$M,[o(se,null,{default:r(()=>{var b;return[o(le,{class:"pb-5"},{action:r(()=>[t.product.detail?(d(),U(A,{key:0,modelValue:t.product.detail.manage_downloadable,"onUpdate:modelValue":l[0]||(l[0]=g=>t.product.detail.manage_downloadable=g),"active-value":"1","inactive-value":"0","active-text":n.$t("Downloadable Asset(s)"),onChange:l[1]||(l[1]=g=>{(g.toString()==="0"||t.productDownloadableModel.hasDownloadableFiles())&&t.productEditModel.setHasChange(!0)})},null,8,["modelValue","active-text"])):x("",!0)]),_:1}),o(na,{visible:((b=t.product.detail)==null?void 0:b.manage_downloadable.toString())==="1",accordion:""},{default:r(()=>[o(ae,{class:"p-0"},{default:r(()=>[t.productDownloadableModel.hasDownloadableFiles()?(d(),_("div",IM,[i("div",TM,[(d(!0),_(H,null,q(t.productDownloadableModel.downloadableFiles,(g,F)=>(d(),_("div",{class:"fct-media-content-list-item",key:F},[i("div",MM,h(g.type),1),i("div",VM,[i("div",LM,[i("div",OM,[i("div",HM,[M(h(g.title)+" ",1),g.driver!=="local"?(d(),_("span",RM," - "+h(g.driver),1)):x("",!0)]),t.productDownloadableModel.getHiddenVariationNames(g.product_variation_id,t.product).length?(d(),U(u,{key:0,placement:"top",trigger:"hover",width:200},{reference:r(()=>[i("div",PM,"  "+h(t.productDownloadableModel.generateDownloadableVariationName(g.product_variation_id,t.product)),1)]),default:r(()=>[(d(!0),_(H,null,q(t.productDownloadableModel.getHiddenVariationNames(g.product_variation_id,t.product),(B,w)=>(d(),_("div",{style:{"margin-top":"4px"},key:w},h(B),1))),128))]),_:2},1024)):(d(),_("div",KM,"  "+h(t.productDownloadableModel.generateDownloadableVariationName(g.product_variation_id,t.product)),1))]),i("div",NM,[o(v,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",placement:"bottom-end",onCommand:s},{dropdown:r(()=>[o(m,null,{default:r(()=>[o(c,{class:"item-link"},{default:r(()=>[o(DM,{product:t.product,productDownloadableModel:t.productDownloadableModel,productEditModel:t.productEditModel,productDownloadable:g,index:F},null,8,["product","productDownloadableModel","productEditModel","productDownloadable","index"])]),_:2},1024),o(c,{command:{action:"copy-download-link",data:g}},{default:r(()=>[o(Y,{name:"Copy"}),M(" "+h(p(f)("Copy Download Link")),1)]),_:2},1032,["command"]),o(c,{command:{action:"delete",data:g,idx:F},class:"item-destructive"},{default:r(()=>[o(Y,{name:"Delete"}),M(" "+h(p(f)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[i("span",GM,[o(Y,{name:"More"})])]),_:2},1024)])])])]))),128))])])):x("",!0),o(UM,{product:t.product,productEditModel:t.productEditModel,productDownloadableModel:t.productDownloadableModel},null,8,["product","productEditModel","productDownloadableModel"])]),_:1})]),_:1},8,["visible"])]}),_:1})])}}},zM={class:"fct-product-status-wrap"},YM={class:"fct-admin-summary-item-list"},qM={class:"fct-admin-summary-item"},WM={class:"fct-admin-summary-item-title"},XM={class:"fct-product-status-chosen-wrap",id:"fct-product-status-chosen-wrap"},JM={id:"fct-product-status-chosen-dropdown",class:"fct-product-status-chosen-dropdown"},ZM={key:0,style:{"margin-top":"20px"}},eV={class:"title"},tV={class:"capitalize"},aV={key:1},sV={key:0,class:"fct-admin-summary-item"},nV={class:"fct-admin-summary-item-title flex items-center gap-1"},oV=["href"],lV={class:"fct-product-url-slug-container"},rV={class:"filter-popover-item fct-admin-summary-popover-item"},iV={class:"filter-popover-title"},AV={class:"filter-popover-input-group"},dV={class:"fct-product-url-label"},uV=["href"],cV={class:"fct-product-url-slug"},fV={key:1,class:"fct-admin-summary-item"},pV={class:"fct-admin-summary-item-title"},mV={class:"fct-admin-summary-item-select"},hV={key:2,class:"fct-admin-summary-item"},_V={class:"fct-admin-summary-item-title"},gV={key:0,class:"fct-admin-summary-item-select"},vV={key:0,class:"mt-4 pt-4"},Jd={__name:"ProductStatus",props:{product:Object,productEditModel:Object},setup(t){const e=t,a=T(""),s=T(""),n=T(""),l=T(!1),A=f("Customize the product's URL ending. Remember, this will affect SEO and readability. The URL will be activated when publish. Check Google's %s Structure Best Practices.",'<a href="https://developers.google.com/search/docs/crawling-indexing/url-structure">'+f("URL")+"</a>"),u=()=>e.product.variants.filter(g=>g.created_at).length>0,c=b=>{e.productEditModel.onChangeInputField("post_status",b),(b==="draft"||b==="publish")&&(l.value=!1)},m=()=>f("Status controls the product's visibility on the public page and its purchasability. 'Publish' indicates that it is live and can be purchased, 'Draft' signifies that it is in private editing, and 'Schedule' means it will be publish on a specified date. The status can only be changed once pricing is set."),v={use_pricing_table:"no",group_pricing_by:"payment_type",sold_individually:"no"};return ce(()=>e.product.detail,b=>{b&&(!b.other_info||Object.keys(b.other_info).length===0)&&(e.product.detail.other_info={...v})},{immediate:!0}),pe(()=>{a.value=window.location.protocol,s.value=window.location.hostname,n.value=`${a.value}//${s.value}`}),(b,g)=>{const F=y("el-radio"),B=y("el-radio-group"),w=y("el-date-picker"),C=y("el-button"),k=y("el-popover"),S=y("el-input"),E=y("el-option"),V=y("el-select"),$=y("el-checkbox");return d(),_("div",zM,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Publishing"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>{var O,D;return[i("ul",YM,[i("li",qM,[i("span",WM,[o(Ze,{title:p(f)("Status"),content:m()},null,8,["title","content"])]),i("div",XM,[u()?(d(),U(k,{key:0,trigger:"click",placement:"bottom-end",width:"250","popper-class":"filter-popover"},{reference:r(()=>[u()?(d(),U(C,{key:0,id:"fct-product-status-toggle",type:"primary",class:"is-tertiary el-button--x-small"},{default:r(()=>[i("span",tV,h(t.product.post_status==="future"?p(f)("Scheduled"):t.product.post_status),1),o(Y,{name:"ChevronUpDown"})]),_:1})):(d(),_("span",aV,h(p(nt).headline(t.product.post_status)),1))]),default:r(()=>[i("div",JM,[o(B,{class:"fct-radios-blocks",modelValue:t.product.post_status,"onUpdate:modelValue":g[0]||(g[0]=Q=>t.product.post_status=Q),onChange:c},{default:r(()=>[o(F,{value:"draft"},{default:r(()=>[M(h(p(f)("Draft")),1)]),_:1}),o(F,{value:"future"},{default:r(()=>[M(h(p(f)("Scheduled")),1)]),_:1}),o(F,{value:"publish"},{default:r(()=>[M(h(p(f)("Publish")),1)]),_:1})]),_:1},8,["modelValue"]),t.product.post_status==="future"?(d(),_("div",ZM,[i("h3",eV,h(p(f)("Scheduled Date")),1),o(w,{clearable:!1,modelValue:t.product.post_date,"onUpdate:modelValue":g[1]||(g[1]=Q=>t.product.post_date=Q),type:"datetime",placeholder:p(f)("Schedule Date"),"value-format":"YYYY-MM-DDTHH:mm:ssZ",onChange:g[2]||(g[2]=Q=>{t.productEditModel.onChangeInputField("post_date",Q)})},null,8,["modelValue","placeholder"])])):x("",!0)])]),_:1})):x("",!0)])]),t.product.post_status==="publish"?(d(),_("li",sV,[i("span",nV,[M(h(p(f)("URL Slug"))+" ",1),i("a",{href:t.product.view_url,class:"focus:outline-none focus:shadow-none",target:"_blank"},[o(Y,{name:"Redirect",class:"w-3 h-3 text-primary-500 dark:text-gray-200"})],8,oV)]),i("div",lV,[o(k,{trigger:"click",placement:"bottom-end",width:"250","popper-class":"filter-popover"},{reference:r(()=>[o(C,{type:"primary",class:"is-tertiary el-button--x-small"},{default:r(()=>[i("span",null,h(t.product.post_name),1),o(Y,{name:"ChevronUpDown"})]),_:1})]),default:r(()=>[i("div",rV,[i("h3",iV,h(p(f)("URL")),1),i("div",AV,[o(Ze,{title:p(f)("Permalink"),content:p(A),hideAfter:300},null,8,["title","content"]),o(S,{placeholder:p(f)("Slug"),type:"text",modelValue:t.product.post_name,"onUpdate:modelValue":g[3]||(g[3]=Q=>t.product.post_name=Q),onInput:g[4]||(g[4]=Q=>{t.productEditModel.onChangeInputField("post_name",Q)})},null,8,["placeholder","modelValue"])]),i("div",dV,h(p(f)("View Product")),1),i("a",{class:"fct-product-url-slug-wrap",target:"_blank",href:t.product.view_url,rel:"external noreferrer noopener"},[i("span",cV,h(t.product.view_url),1),o(Ca,{text:t.product.view_url,showMode:"basic_copy_btn",tooltipText:p(f)("Copy Link")},null,8,["text","tooltipText"])],8,uV)])]),_:1})])])):x("",!0),((O=t.product.detail)==null?void 0:O.variation_type)==="simple_variations"?(d(),_("li",fV,[i("span",pV,[o(Ze,{title:p(f)("Default Variant"),content:p(f)("Select the default variant that users will see pre-selected on the product page.")},null,8,["title","content"])]),i("div",mV,[o(V,{class:"el-select--x-small",modelValue:t.product.detail.default_variation_id,"onUpdate:modelValue":g[5]||(g[5]=Q=>t.product.detail.default_variation_id=Q),placeholder:p(f)("Select Default Variant"),onChange:g[6]||(g[6]=Q=>{t.productEditModel.onChangeInputField("default_variation_id",Q)}),clearable:""},{default:r(()=>[(d(!0),_(H,null,q(t.product.variants,Q=>(d(),U(E,{key:Q.id,label:Q.variation_title,value:Q.id.toString()},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])])):x("",!0),((D=t.product.detail)==null?void 0:D.variation_type)==="simple_variations"?(d(),_("li",hV,[i("span",_V,[o(Ze,{title:p(f)("Group By"),content:p(f)("Organize product variations by repeat interval (Monthly, Yearly) or payment term (One time, Subscription).")},null,8,["title","content"])]),t.product.detail?(d(),_("div",gV,[o(V,{class:"el-select--x-small",clearable:"",modelValue:t.product.detail.other_info.group_pricing_by,"onUpdate:modelValue":g[7]||(g[7]=Q=>t.product.detail.other_info.group_pricing_by=Q),placeholder:p(f)("Group by"),onChange:g[8]||(g[8]=Q=>{t.productEditModel.onChangeInputField("group_pricing_by",Q)})},{default:r(()=>[o(E,{label:p(f)("Payment Term"),value:"payment_type"},null,8,["label"]),o(E,{label:p(f)("Repeat Interval"),value:"repeat_interval"},null,8,["label"]),o(E,{label:p(f)("None"),value:"none"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])])):x("",!0)])):x("",!0)]),t.product.detail?(d(),_("div",vV,[o($,{onChange:g[9]||(g[9]=Q=>{t.productEditModel.onChangeInputField("sold_individually",Q)}),modelValue:t.product.detail.other_info.sold_individually,"onUpdate:modelValue":g[10]||(g[10]=Q=>t.product.detail.other_info.sold_individually=Q),"true-value":"yes","false-value":"no"},{default:r(()=>[M(h(p(f)("Limit purchases to 1 item per order")),1)]),_:1},8,["modelValue"])])):x("",!0)]}),_:1})]),_:1})])}}},yV={name:"Gallery",display:"Transition",components:{DynamicIcon:Y,draggable:xl,MediaButton:to,IconButton:Be,VueEasyLightbox:Xc},props:{attachments:{type:Array,default:()=>[]},featured_image_id:{type:[String,Number,null],default:null}},data(){return{visible:!1,imageIndex:0,lightboxData:[],images:T([])}},emits:["removeImage","mediaUploaded","onMediaChange"],methods:{showLightbox(t){this.imageIndex=t,this.visible=!0},removeImageEvent(t){this.$emit("removeImage",t)},onMediaSelected(t){this.images=t.map(e=>({id:e.id,title:e.title,url:e.url})),this.$emit("mediaUploaded",this.images)},onMediaChange(t){this.$emit("onMediaChange",this.attachments)}},computed:{dragOptions(){return{animation:600}}},mounted(){this.attachments!==void 0&&this.attachments.map((t,e)=>{this.lightboxData.push(t.url)})},watch:{attachments:{handler:function(t,e){return this.lightboxData=[],Array.isArray(t)&&t.length>0&&t.map((a,s)=>{this.lightboxData.push(a.url)}),t},deep:!0}}},bV={class:"fct-gallery-wrap"},wV={key:0,class:"icon-move"},BV=["onClick"],CV=["src","alt"];function kV(t,e,a,s,n,l){const A=y("DynamicIcon"),u=y("IconButton"),c=y("el-tag"),m=y("MediaButton"),v=y("draggable"),b=y("VueEasyLightbox");return d(),_(H,null,[i("div",bV,[o(v,ht({class:"fct-gallery-drag-area",list:a.attachments,tag:"ul"},l.dragOptions,{draggable:".gallery-drag-item",onChange:l.onMediaChange}),{default:r(()=>[o(pp,{type:"transition",name:"flip-list"},{default:r(()=>[(d(!0),_(H,null,q(a.attachments,(g,F)=>(d(),_("li",{class:"gallery-drag-item",key:F},[o(u,{tag:"button",size:"tiny",onClick:Ke(B=>l.removeImageEvent(F),["prevent"]),title:t.$t("Delete media")},{default:r(()=>[o(A,{name:"Delete"})]),_:2},1032,["onClick","title"]),F!==0?(d(),_("div",wV,e[1]||(e[1]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"10",viewBox:"0 0 8 10",fill:"none"},[i("rect",{x:"0.333313",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),i("rect",{x:"0.333313",y:"3.6665",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),i("rect",{x:"0.333313",y:"7.3335",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),i("rect",{x:"5",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),i("rect",{x:"5.00018",y:"3.6665",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),i("rect",{x:"5.00018",y:"7.3335",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"})],-1)]))):x("",!0),F===0?(d(),U(c,{key:1,type:"primary"},{default:r(()=>[M(h(t.$t("Featured")),1)]),_:1})):x("",!0),i("div",{class:"gallery-drag-item-overlay",onClick:B=>l.showLightbox(F)},null,8,BV),i("img",{src:g.url,alt:g.title},null,8,CV)]))),128)),(d(),_("li",{class:ne(a.attachments.length<1?"is-full-media":""),key:a.attachments.length},[o(m,{icon:"GalleryAdd",title:a.attachments.length<1?t.$t("Add Media"):"",attachments:a.attachments,onOnMediaSelected:l.onMediaSelected,multiple:!0},null,8,["title","attachments","onOnMediaSelected"])],2))]),_:1})]),_:1},16,["list","onChange"])]),o(b,{visible:n.visible,imgs:n.lightboxData,index:n.imageIndex,onHide:e[0]||(e[0]=()=>{this.visible=!1})},null,8,["visible","imgs","index"])],64)}const FV=ye(yV,[["render",kV]]),xV={class:"fct-product-media-wrap"},UV={class:"fct-admin-summary-item"},EV={class:"fct-admin-summary-item mt-4"},SV={class:"flex items-start justify-between gap-3"},QV={class:"fct-admin-summary-item-title"},DV={class:"fct-admin-summary-item-desc"},$V={class:"fct-admin-input-wrapper mt-3"},IV={class:"flex items-center gap-3 mt-2"},TV={class:"text-xs text-gray-500"},MV={key:0,class:"mt-3"},VV=["onKeyup","aria-label"],LV=["src","alt"],OV=["src","poster","autoplay","muted"],HV=["src"],Zd={__name:"ProductMedia",props:{product:Object,productEditModel:Object},setup(t){const e=t,a=T(!1),s=k=>{if(!Array.isArray(k))return"";const S=k.find(E=>E==null?void 0:E.url);return(S==null?void 0:S.url)??""},n=X(()=>{var V,$,O,D,Q,I,L,K;const k=s((V=e.product)==null?void 0:V.gallery);if(k)return k;const S=s((D=(O=($=e.product)==null?void 0:$.detail)==null?void 0:O.gallery_image)==null?void 0:D.meta_value);if(S)return S;const E=((L=(I=(Q=e.product)==null?void 0:Q.detail)==null?void 0:I.featured_media)==null?void 0:L.url)??((K=e.product)==null?void 0:K.featured_media)??"";return E||Os.getUrl("images/placeholder.svg")}),l=k=>{try{const S=new URL(k,window.location.origin);return S.searchParams.set("autoplay","1"),S.toString()}catch{return k.includes("?")?`${k}&autoplay=1`:`${k}?autoplay=1`}},A=k=>{const S=k&&typeof k=="object"?{...k}:{};return S.url=(S.url??"").trim(),S.title=S.title??"",S.url?(S.type||(S.type=m(S.url)),S):{url:""}},u=k=>{const S=A(k);e.product.featured_video=S,e.productEditModel.updateMedia("featured_video",S)},c=k=>{if(!Array.isArray(k)||!k.length){u({});return}const S=k[0];u({id:S.id??"",title:S.title??"",url:S.url??"",type:"file"})},m=k=>k&&/\.(mp4|mov|webm|ogg)(\?.*)?$/i.test(k)?"file":"url",v=k=>{const S=k?k.trim():"",E=e.product.featured_video||{};u({...E,url:S,type:S?m(S):""})},b=()=>{a.value=!1,u({})},g=X(()=>{var k,S;return((S=(k=e.product)==null?void 0:k.featured_video)==null?void 0:S.url)??""}),F=X(()=>{var S,E;return g.value?((E=(S=e.product)==null?void 0:S.featured_video)==null?void 0:E.type)==="file"?!0:/\.(mp4|mov|webm|ogg)(\?.*)?$/i.test(g.value):!1}),B=X(()=>g.value?!F.value&&a.value?l(g.value):g.value:""),w=()=>{a.value=!0};ce(g,()=>{a.value=!1});const C=X(()=>{var S;const k=(S=e.product)==null?void 0:S.featured_video;return k!=null&&k.id&&k.url?[{id:k.id,title:k.title??"",url:k.url}]:[]});return(k,S)=>{const E=y("el-button"),V=y("el-input"),$=y("el-form-item"),O=y("el-form");return d(),_("div",xV,[o(se,null,{default:r(()=>[o(le,{title:k.$t("Media"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[i("div",UV,[o(FV,{attachments:t.product.gallery,featured_image_id:t.product.featured_image_id,onMediaUploaded:S[0]||(S[0]=D=>{t.product.gallery=D,t.productEditModel.updateMedia("gallery",D)}),onRemoveImage:S[1]||(S[1]=D=>{t.product.gallery.splice(D,1),t.product.gallery=[...t.product.gallery],t.productEditModel.updateMedia("gallery",t.product.gallery)}),onOnMediaChange:S[2]||(S[2]=D=>{t.productEditModel.updateMedia("gallery",D)})},null,8,["attachments","featured_image_id"])]),i("div",EV,[i("div",SV,[i("div",null,[i("p",QV,h(k.$t("Featured Video")),1),i("p",DV,h(k.$t("Use a product video as the featured media on the product page.")),1)]),g.value?(d(),U(E,{key:0,type:"danger",text:"",onClick:b},{default:r(()=>[M(h(k.$t("Remove")),1)]),_:1})):x("",!0)]),i("div",$V,[o(O,{"label-position":"top"},{default:r(()=>[o($,{label:k.$t("Video URL")},{default:r(()=>[o(V,{"model-value":g.value,placeholder:k.$t("YouTube, Vimeo or direct MP4 URL"),onInput:v},null,8,["model-value","placeholder"])]),_:1},8,["label"])]),_:1})]),i("div",IV,[o(to,{icon:"Video",title:k.$t("Upload Video"),attachments:C.value,"library-type":"video",onOnMediaSelected:c},null,8,["title","attachments"]),i("p",TV,h(k.$t("Upload a video file or paste a public video link.")),1)]),g.value?(d(),_("div",MV,[a.value?F.value?(d(),_("video",{key:1,src:g.value,poster:n.value,autoplay:a.value,muted:a.value,controls:"",playsinline:"",style:{width:"100%","border-radius":"8px","max-height":"340px"}},null,8,OV)):(d(),_("iframe",{key:2,src:B.value,allowfullscreen:"",allow:"autoplay; encrypted-media",style:{width:"100%","min-height":"260px",border:"0","border-radius":"8px"}},null,8,HV)):(d(),_("div",{key:0,class:"relative overflow-hidden rounded-lg border border-dashed border-gray-200 dark:border-dark-400 cursor-pointer",role:"button",tabindex:"0",onClick:w,onKeyup:[fa(Ke(w,["prevent"]),["enter"]),fa(Ke(w,["prevent"]),["space"])],"aria-label":k.$t("Play featured video preview")},[i("img",{src:n.value,alt:t.product.post_title||k.$t("Product media preview"),class:"w-full object-cover",style:{"max-height":"340px"}},null,8,LV),S[3]||(S[3]=i("div",{class:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center"},[i("span",{class:"flex items-center justify-center w-16 h-16 rounded-full bg-white bg-opacity-90 shadow-lg"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 24 24",fill:"none"},[i("path",{d:"M9 7L17 12L9 17V7Z",fill:"#1F2937"})])])],-1))],40,VV))])):x("",!0)])]),_:1})]),_:1})])}}},RV={class:"fct-product-custom-section-wrap"},PV={class:"fct-custom-section__header"},KV={class:"fct-custom-section__title"},NV={class:"fct-custom-section__body"},GV={class:"fct-admin-input-wrapper"},jV={class:"fct-admin-input-wrapper"},zV={class:"fct-admin-input-wrapper"},YV={key:0,class:"fct-admin-input-wrapper"},qV={class:"fct-section-media-picker"},WV={key:0,class:"fct-section-attachment"},XV={class:"fct-section-attachment__thumb"},JV=["src","alt"],ZV={class:"fct-section-attachment__info"},eL={class:"fct-section-attachment__title"},tL={class:"fct-section-media-meta"},aL={class:"fct-section-attachment__actions"},sL={class:"fct-section-media-actions"},nL={key:1,class:"fct-admin-input-wrapper"},oL={class:"fct-section-media-picker"},lL={class:"fct-section-media-actions"},rL={class:"fct-section-video-actions"},iL={key:0,class:"fct-section-attachment"},AL={class:"fct-section-attachment__info"},dL=["href"],uL={class:"fct-section-media-meta"},cL={class:"fct-custom-section-footer"},fL={key:0,class:"text-muted"},eu=4,pL={__name:"ProductCustomSections",props:{product:Object,productEditModel:Object},setup(t){var I,L,K;const e=t,a=()=>({url:"",type:"",id:"",title:""}),s=()=>({title:"",description:"",media_type:"image",image:null,video:a()}),n=N=>N?/\.(mp4|mov|webm|ogg)(\?.*)?$/i.test(N)?"file":"url":"",l=N=>{var R;if(!N||typeof N!="object")return a();const W={url:((R=N.url)==null?void 0:R.trim())||"",type:N.type||"",id:N.id||"",title:N.title||""};return W.url&&!W.type&&(W.type=n(W.url)),W},A=N=>{if(!N||typeof N!="object")return s();const W={...s(),...N};return W.video=l(W.video),W.media_type=W.media_type||"image",W.image=W.image||null,W},u=N=>{if(!Array.isArray(N))return[s()];const W=N.map(A).slice(0,eu);return W.length?W:[s()]},c=T(u((K=(L=(I=e.product)==null?void 0:I.detail)==null?void 0:L.other_info)==null?void 0:K.custom_sections)),m=T("section-0");ce(()=>{var N,W,R;return(R=(W=(N=e.product)==null?void 0:N.detail)==null?void 0:W.other_info)==null?void 0:R.custom_sections},N=>{c.value=u(N),Q()},{immediate:!0});const v=X(()=>c.value.length>=eu),b=()=>{e.productEditModel.onChangeInputField("custom_sections",c.value)},g=(N,W,R)=>{const ee=[...c.value],oe=A(ee[N]);oe[W]=R,ee.splice(N,1,oe),c.value=ee,b()},F=()=>{v.value||(c.value=[...c.value,s()],b(),D(c.value.length-1))},B=N=>{const W=[...c.value];W.splice(N,1),c.value=u(W),b(),Q()},w=(N,W)=>{var ee,oe,Ae;const R=Array.isArray(W)&&W.length?{id:((ee=W[0])==null?void 0:ee.id)??"",title:((oe=W[0])==null?void 0:oe.title)??"",url:((Ae=W[0])==null?void 0:Ae.url)??""}:null;g(N,"media_type","image"),g(N,"image",R)},C=N=>{g(N,"image",null)},k=(N,W)=>{if(!Array.isArray(W)||!W.length){g(N,"video",a());return}const R=W[0],ee={id:R.id??"",title:R.title??"",url:R.url??"",type:"file"};g(N,"media_type","video"),g(N,"video",ee)},S=(N,W)=>{var oe;const R=W?W.trim():"",ee=l((oe=c.value[N])==null?void 0:oe.video);ee.url=R,ee.type=R?n(R):"",g(N,"media_type","video"),g(N,"video",ee)},E=N=>{g(N,"video",a())},V=N=>{var W,R;return(W=N.video)!=null&&W.id&&((R=N.video)!=null&&R.url)?[{id:N.video.id,title:N.video.title??"",url:N.video.url}]:[]},$=N=>{var W;return(W=N.video)!=null&&W.title?N.video.title:N.title?N.title:f("Selected video")},O=N=>{var W;return!!((W=N==null?void 0:N.video)!=null&&W.url)},D=N=>{m.value=`section-${N}`},Q=()=>{if(!c.value.length){m.value="";return}c.value.findIndex((W,R)=>`section-${R}`===m.value)===-1&&(m.value="section-0")};return(N,W)=>{const R=y("el-button"),ee=y("el-input"),oe=y("el-form-item"),Ae=y("el-radio-button"),ue=y("el-radio-group"),P=y("el-form"),G=y("el-collapse-item"),z=y("el-collapse");return d(),_("div",RV,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Custom Sections"),desc:p(f)("Add up to four sections with a heading, short description, and supporting image or video."),border_bottom:""},null,8,["title","desc"]),o(ae,null,{default:r(()=>[o(z,{modelValue:m.value,"onUpdate:modelValue":W[0]||(W[0]=j=>m.value=j),accordion:"",class:"fct-custom-sections"},{default:r(()=>[(d(!0),_(H,null,q(c.value,(j,Z)=>(d(),U(G,{key:`section-${Z}`,name:`section-${Z}`,class:"fct-custom-section"},{title:r(()=>[i("div",PV,[i("p",KV,h(p(f)("Section"))+" "+h(Z+1),1),c.value.length>1?(d(),U(R,{key:0,text:"",type:"danger",size:"small",onClick:Ke(_e=>B(Z),["stop"])},{default:r(()=>[M(h(p(f)("Remove")),1)]),_:2},1032,["onClick"])):x("",!0)])]),default:r(()=>[i("div",NV,[o(P,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[i("div",GV,[o(oe,{label:p(f)("Heading")},{default:r(()=>[o(ee,{placeholder:p(f)("Add heading"),"model-value":j.title,onInput:_e=>g(Z,"title",_e)},null,8,["placeholder","model-value","onInput"])]),_:2},1032,["label"])]),i("div",jV,[o(oe,{label:p(f)("Short description")},{default:r(()=>[o(ee,{type:"textarea",rows:2,placeholder:p(f)("Add a concise description"),"model-value":j.description,onInput:_e=>g(Z,"description",_e)},null,8,["placeholder","model-value","onInput"])]),_:2},1032,["label"])]),i("div",zV,[o(oe,{label:p(f)("Media type")},{default:r(()=>[o(ue,{"model-value":j.media_type,onChange:_e=>g(Z,"media_type",_e)},{default:r(()=>[o(Ae,{label:"image"},{default:r(()=>[M(h(p(f)("Image")),1)]),_:1}),o(Ae,{label:"video"},{default:r(()=>[M(h(p(f)("Video")),1)]),_:1})]),_:2},1032,["model-value","onChange"])]),_:2},1032,["label"])]),j.media_type==="image"?(d(),_("div",YV,[o(oe,{label:p(f)("Section image")},{default:r(()=>{var _e;return[i("div",qV,[(_e=j.image)!=null&&_e.url?(d(),_("div",WV,[i("div",XV,[i("img",{src:j.image.url,alt:j.image.title||j.title||p(f)("Section image")},null,8,JV)]),i("div",ZV,[i("p",eL,h(j.image.title||j.title||p(f)("Selected image")),1),i("span",tL,h(p(f)("Image attachment")),1)]),i("div",aL,[o(R,{text:"",type:"danger",size:"small",onClick:he=>C(Z)},{default:r(()=>[M(h(p(f)("Remove")),1)]),_:2},1032,["onClick"])])])):x("",!0),i("div",sL,[o(to,{icon:"Picture",title:j.image?p(f)("Change image"):p(f)("Select image"),attachments:j.image?[j.image]:[],multiple:!1,onOnMediaSelected:he=>w(Z,he)},null,8,["title","attachments","onOnMediaSelected"])])])]}),_:2},1032,["label"])])):(d(),_("div",nL,[o(oe,{label:p(f)("Section video")},{default:r(()=>{var _e,he;return[i("div",oL,[i("div",lL,[o(ee,{"model-value":(_e=j.video)==null?void 0:_e.url,placeholder:p(f)("YouTube, Vimeo or direct MP4 URL"),onInput:Qe=>S(Z,Qe)},null,8,["model-value","placeholder","onInput"]),i("div",rL,[o(to,{icon:"Video",title:(he=j.video)!=null&&he.url?p(f)("Replace video"):p(f)("Upload video"),attachments:V(j),"library-type":"video",multiple:!1,onOnMediaSelected:Qe=>k(Z,Qe)},null,8,["title","attachments","onOnMediaSelected"]),O(j)?(d(),U(R,{key:0,text:"",type:"danger",onClick:Qe=>E(Z)},{default:r(()=>[M(h(p(f)("Remove")),1)]),_:2},1032,["onClick"])):x("",!0)])]),O(j)?(d(),_("div",iL,[i("div",AL,[i("a",{href:j.video.url,target:"_blank",rel:"noopener",class:"fct-section-attachment__title"},h($(j)),9,dL),i("span",uL,h(p(f)("Video attachment")),1)])])):x("",!0)])]}),_:2},1032,["label"])]))]),_:2},1024)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),i("div",cL,[o(R,{type:"primary",plain:"",disabled:v.value,onClick:F},{default:r(()=>[M(h(p(f)("Add section")),1)]),_:1},8,["disabled"]),v.value?(d(),_("p",fL,h(p(f)("You can add up to four sections.")),1)):x("",!0)])]),_:1})]),_:1})])}}},mL=ye(pL,[["__scopeId","data-v-f4b6ed83"]]),hL={class:"fct-product-reviews-wrap"},_L={key:0,class:"fct-product-reviews"},gL={class:"fct-review__header"},vL={class:"fct-review__heading"},yL={class:"fct-review__title"},bL={key:0,class:"fct-review__summary"},wL={class:"fct-review__actions"},BL={class:"fct-review__content"},CL={class:"fct-review__grid"},kL={class:"fct-admin-input-wrapper"},FL={class:"fct-admin-input-wrapper"},xL={class:"fct-admin-input-wrapper"},UL={class:"fct-admin-input-wrapper"},EL={class:"fct-admin-input-wrapper"},SL={key:1,class:"fct-review-empty"},QL={class:"fct-review-footer"},DL={key:0,class:"text-muted"},$L={key:1,class:"text-muted"},Nr=15,IL={__name:"ProductReviews",props:{product:Object,productEditModel:Object},setup(t){var V,$,O;const e=t,a=D=>{if(!D||typeof D!="string"||D.length<2)return"";const I=[...D.slice(0,2).toUpperCase()].map(L=>127397+L.charCodeAt(0));return String.fromCodePoint(...I)},s=()=>({name:"",text:"",rating:0,country:"",date:""}),n=D=>{const Q=Number.isFinite(D)?D:parseFloat(D||0);return Number.isNaN(Q)?0:Math.min(Math.max(parseFloat(Q.toFixed(1)),0),5)},l=D=>{var Q,I,L;return!D||typeof D!="object"?s():{name:((Q=D.name)==null?void 0:Q.toString())||"",text:((I=D.text)==null?void 0:I.toString())||"",rating:n(D.rating??0),country:((L=D.country)==null?void 0:L.toString().slice(0,3).toUpperCase())||"",date:D.date||""}},A=D=>Array.isArray(D)?D.slice(0,Nr).map(l):[],u=T(A((O=($=(V=e.product)==null?void 0:V.detail)==null?void 0:$.other_info)==null?void 0:O.reviews)),c=T([]);ce(()=>{var D,Q,I;return(I=(Q=(D=e.product)==null?void 0:D.detail)==null?void 0:Q.other_info)==null?void 0:I.reviews},D=>{u.value=A(D)},{immediate:!0}),ce(u,D=>{c.value=c.value.filter(Q=>Q<D.length)});const m=X(()=>u.value.length>=Nr),v=()=>{e.productEditModel.onChangeInputField("reviews",u.value)},b=D=>{c.value.includes(D)||(c.value=[...c.value,D])},g=D=>{c.value=c.value.filter(Q=>Q!==D)},F=D=>{if(c.value.includes(D)){g(D);return}b(D)},B=D=>c.value.includes(D),w=()=>{m.value||(u.value=[...u.value,s()],b(u.value.length-1),v())},C=D=>{const Q=[...u.value];Q.splice(D,1),u.value=A(Q),c.value=c.value.filter(I=>I!==D).map(I=>I>D?I-1:I),v()},k=(D,Q,I)=>{const L=[...u.value];L[D]=l({...L[D],[Q]:I}),u.value=L,v()},S=D=>{const Q=[];return D.rating&&Q.push(`${D.rating.toFixed(1)} / 5`),D.name&&Q.push(D.name),D.country&&Q.push(D.country),Q.join("  ")},E=X(()=>Qu.map(D=>({value:D.code2,label:`${a(D.code2)} ${D.name}`.trim()})));return(D,Q)=>{const I=y("el-button"),L=y("el-input"),K=y("el-form-item"),N=y("el-input-number"),W=y("el-option"),R=y("el-select"),ee=y("el-date-picker"),oe=y("el-form"),Ae=y("el-collapse-transition");return d(),_("div",hL,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Reviews"),desc:p(f)("Add up to fifteen reviews with ratings, flags, and dates. Avatars are generated from initials automatically."),border_bottom:""},null,8,["title","desc"]),o(ae,null,{default:r(()=>[u.value.length?(d(),_("div",_L,[(d(!0),_(H,null,q(u.value,(ue,P)=>(d(),_("div",{class:"fct-review",key:`review-${P}`},[i("div",gL,[i("div",vL,[i("p",yL,h(p(f)("Review"))+" "+h(P+1),1),S(ue)?(d(),_("p",bL,h(S(ue)),1)):x("",!0)]),i("div",wL,[o(I,{text:"",type:"primary",size:"small",onClick:G=>F(P)},{default:r(()=>[M(h(B(P)?p(f)("Collapse"):p(f)("Expand")),1)]),_:2},1032,["onClick"]),u.value.length>0?(d(),U(I,{key:0,text:"",type:"danger",size:"small",onClick:G=>C(P)},{default:r(()=>[M(h(p(f)("Remove")),1)]),_:2},1032,["onClick"])):x("",!0)])]),o(Ae,null,{default:r(()=>[At(i("div",BL,[o(oe,{"label-position":"top","require-asterisk-position":"right",class:"fct-review__form"},{default:r(()=>[i("div",CL,[i("div",kL,[o(K,{label:p(f)("Reviewer name")},{default:r(()=>[o(L,{"model-value":ue.name,placeholder:p(f)("Add reviewer name"),onInput:G=>k(P,"name",G)},null,8,["model-value","placeholder","onInput"])]),_:2},1032,["label"])]),i("div",FL,[o(K,{label:p(f)("Rating (0 - 5)")},{default:r(()=>[o(N,{"model-value":ue.rating,min:0,max:5,step:.1,precision:1,"onUpdate:modelValue":G=>k(P,"rating",G)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["label"])]),i("div",xL,[o(K,{label:p(f)("Country")},{default:r(()=>[o(R,{filterable:"",clearable:"","model-value":ue.country,placeholder:p(f)("Choose a country"),onChange:G=>k(P,"country",G)},{default:r(()=>[(d(!0),_(H,null,q(E.value,G=>(d(),U(W,{key:G.value,label:G.label,value:G.value},null,8,["label","value"]))),128))]),_:2},1032,["model-value","placeholder","onChange"])]),_:2},1032,["label"])]),i("div",UL,[o(K,{label:p(f)("Date")},{default:r(()=>[o(ee,{type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","model-value":ue.date,placeholder:p(f)("YYYY-MM-DD"),"onUpdate:modelValue":G=>k(P,"date",G)},null,8,["model-value","placeholder","onUpdate:modelValue"])]),_:2},1032,["label"])])]),i("div",EL,[o(K,{label:p(f)("Review text")},{default:r(()=>[o(L,{type:"textarea",rows:3,"model-value":ue.text,placeholder:p(f)("Add the review text"),onInput:G=>k(P,"text",G)},null,8,["model-value","placeholder","onInput"])]),_:2},1032,["label"])])]),_:2},1024)],512),[[nl,B(P)]])]),_:2},1024)]))),128))])):(d(),_("p",SL,h(p(f)("No reviews added yet.")),1)),i("div",QL,[o(I,{type:"primary",plain:"",disabled:m.value,onClick:w},{default:r(()=>[M(h(p(f)("Add review")),1)]),_:1},8,["disabled"]),m.value?(d(),_("p",DL,h(p(f)("You can add up to fifteen reviews.")),1)):(d(),_("p",$L,h(p(f)("You can add up to fifteen reviews."))+" ("+h(u.value.length)+" / "+h(Nr)+")",1))])]),_:1})]),_:1})])}}},TL=ye(IL,[["__scopeId","data-v-22a9206b"]]),ML={class:"fct-term-input-item"},VL={class:"el-tag__content"},LL=["innerHTML"],OL=["innerHTML"],HL={class:"pt-1.5 text-right"},RL={class:"relative w-3 h-3"},PL={class:"fct-term-add-input-wrap"},KL={__name:"TermInput",props:{modelValue:Array,taxonomy:Object,product_id:Number},emits:["update:modelValue","onChanged"],setup(t,{emit:e}){Xe().ctx;const a=t,s=e,n=T([]),l=T(!1),A=T(),u=T(""),c=T([]),m=T(""),v=T(!1);pe(()=>{n.value=a.modelValue,c.value=a.taxonomy.terms,ce(()=>a.taxonomy.terms,($,O)=>{c.value=$}),ce(()=>a.modelValue,($,O)=>{v.value=!0,n.value=$})});const b=$=>{$.stopPropagation(),$.preventDefault(),C()},g=()=>{v.value&&te.post("products/sync-taxonomy-term/"+a.product_id,{taxonomy:a.taxonomy.name,terms:n.value}).then($=>{J.success($.message),s("update:modelValue",n.value)}).catch($=>{var O;$.status_code=="422"?J.validationErrors($):J.error((O=$.data)==null?void 0:O.message)}).finally(()=>{v.value=!1})},F=Wi.debounce($=>{w($)},1200),B=()=>{s("update:modelValue",n.value)},w=$=>{v.value=!1,te.post("products/delete-taxonomy-term/"+a.product_id,{taxonomy:a.taxonomy.name,term:$}).then(O=>{ll(O.message),s("update:modelValue",n.value)}).catch(O=>{var D;O.status_code=="422"?J.validationErrors(O):J.error((D=O.data)==null?void 0:D.message)}).finally(()=>{v.value=!1})};[...n.value];const C=()=>{v.value=!0,te.post("products/add-product-terms",{term:{name:u.value,taxonomy:a.taxonomy.name,parent:m.value}}).then($=>{l.value=!1,u.value="",$.term_ids.forEach(function(O,D){c.value.push({value:O,label:$.names[D]}),n.value.push(O)}),g()}).catch($=>{})},k=()=>{l.value=!l.value,l.value&&de(()=>{A.value.focus()})},S={categories:"Category",types:"Type"};X(()=>{let $=a.taxonomy.label.replace(/product\s*/i,"").trim();return Object.keys(S).forEach(O=>{$.toLowerCase().includes(O)&&($=$.replace(new RegExp(O,"i"),S[O]))}),$});const E=$=>{const O=n.value.indexOf($);O>-1&&n.value.splice(O,1),v.value=!1,F($)},V=$=>{const O=D=>{for(const Q of D){if(Q.value==$)return Q.label;if(Q.children&&Q.children.length>0){const I=O(Q.children);if(I)return I}}return null};return O(c.value)};return($,O)=>{const D=y("el-tag"),Q=y("el-tree-select"),I=y("el-button"),L=y("el-input");return d(),_("div",ML,[o(Q,{modelValue:n.value,"onUpdate:modelValue":O[0]||(O[0]=K=>n.value=K),data:c.value,multiple:"","render-after-expand":!1,"show-checkbox":"","check-strictly":"","check-on-click-node":"",onCheck:O[1]||(O[1]=()=>{v.value=!0}),onBlur:g,onChange:B,onRemoveTag:O[2]||(O[2]=K=>{v.value=!1,p(F)(K)})},{tag:r(()=>[(d(!0),_(H,null,q(n.value,(K,N)=>(d(),U(D,{key:N,closable:"",onClose:W=>E(K)},{default:r(()=>[i("span",VL,[i("span",{class:"el-select__tags-text",innerHTML:V(K)},null,8,LL)])]),_:2},1032,["onClose"]))),128))]),default:r(({data:K})=>[i("span",{innerHTML:K.label},null,8,OL)]),_:1},8,["modelValue","data"]),i("div",HL,[o(I,{text:"",onClick:k,size:"small"},{default:r(()=>[i("span",RL,[o(na,{visible:l.value,fade:""},{default:r(()=>[o(Y,{name:"Cross",class:"absolute justify-center inset-0 w-full he-full"})]),_:1},8,["visible"]),o(na,{visible:!l.value,fade:""},{default:r(()=>[o(Y,{name:"Plus",class:"absolute justify-center inset-0 w-full he-full"})]),_:1},8,["visible"])]),M(" "+h(p(f)("Add %s",a.taxonomy.labels.singular_name)),1)]),_:1})]),o(na,{visible:l.value,accordion:""},{default:r(()=>[i("div",PL,[o(L,{modelValue:u.value,"onUpdate:modelValue":O[3]||(O[3]=K=>u.value=K),ref_key:"inputRef",ref:A,onKeydown:fa(b,["enter"])},null,8,["modelValue"]),o(I,{type:"info",plain:"",onClick:C,class:"el-button--x-small"},{default:r(()=>[M(h(p(f)("Add")),1)]),_:1})])]),_:1},8,["visible"])])}}},NL={class:"fct-product-simple-wrap"},GL={__name:"ProductTermTaxonomy",props:{product:Object,productEditModel:Object},setup(t){return(e,a)=>(d(),_("div",NL,[o(se,null,{default:r(()=>[o(le,{title:e.$t("Product Taxonomies"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[(d(!0),_(H,null,q(t.product.taxonomies,s=>(d(),_("div",{class:"fct-admin-summary-item",key:s.id},[i("h4",null,h(s.labels.name),1),o(KL,{product_id:t.product.ID,taxonomy:s,modelValue:t.product.product_terms[s.name],"onUpdate:modelValue":n=>t.product.product_terms[s.name]=n},null,8,["product_id","taxonomy","modelValue","onUpdate:modelValue"])]))),128))]),_:1})]),_:1})]))}};class jL extends Xt{constructor(){super(...arguments);fe(this,"data",{downloadableFiles:{},addModal:{files:[],isModalOpen:!1},editModal:{file:{},isCurrentlyEditing:!1,states:{},currentIndex:-1},validationErrors:{},saving:!1});fe(this,"generateDownloadableVariationName",(a,s)=>{if(!a)return f("For all variants");let n=[];if(typeof a=="string")try{n=JSON.parse(a)}catch{}else typeof a=="object"&&(n=Object.values(a));if(n.length===0)return f("For all variants");const l=s.variants.reduce((u,c)=>(u[c.id]=c.variation_title,u),{}),A=n.map(u=>l[u]).filter(Boolean);return A.length===0?"--":A.length===1?A[0]:`${A[0]} +${A.length-1}`});fe(this,"deleteDownloadableFile",(a,s)=>{bA.ofDelete(f("Are you sure you want to delete this downloadable file ?")).then(()=>{te.delete(`products/${a}/delete`).then(()=>{J.success(f("Downloadable File Deleted Successfully")),this.downloadableFiles.splice(s,1)}).catch(n=>{J.error(f("Failed To Delete"))})}).catch(()=>{})});fe(this,"addDummyDownloadableFileForAllVariant",a=>{this.data.addModal.files=this.data.addModal.files.filter(s=>Object.values(s).every(n=>n!=null&&n!=="")),Object.values(this.generateVariantOptions(a)).forEach(s=>{s.id>0&&this.addDummyInsertableFile(s.id)})});fe(this,"deleteInsertableFile",a=>{this.insertableFiles.splice(a,1)});fe(this,"clearInsertableFile",()=>{this.data.addModal.files=[]});fe(this,"attachInsertableFiles",a=>{te.post(`products/${a}/sync-downloadable-files`,{downloadable_files:this.insertableFiles}).then(s=>{this.setDownloadableFiles(s.downloadable_files),this.closeAddModal(),J.success(f("Variations Synced Successfully"))}).catch(s=>{s.status_code=="422"?this.setValidationError(s.data):J.error(f("Please fill up all the fields"))})});fe(this,"openAddModal",()=>{this.data.addModal.isModalOpen=!0});fe(this,"closeAddModal",()=>{this.data.addModal.isModalOpen=!1,this.resetValidationError()});fe(this,"openEditModal",(a,s)=>{this.data.editModal.isCurrentlyEditing=!0,this.data.editModal.states[a].visible=!0,this.data.editModal.states[a].file=s,this.data.editModal.currentIndex=a});fe(this,"closeEditModal",a=>{this.data.editModal.isCurrentlyEditing=!1,this.data.editModal.states[a].visible=!1,this.data.editModal.states[a].file=null,this.data.editModal.currentIndex=-1,this.resetValidationError()});fe(this,"isEditModalOpen",()=>this.data.editModal.isCurrentlyEditing===!0);fe(this,"setValidationError",a=>{this.data.validationErrors=a});fe(this,"hasValidationError",a=>this.data.validationErrors.hasOwnProperty(a));fe(this,"clearValidationError",()=>{this.data.validationErrors={}});fe(this,"deleteValidationError",a=>{this.data.validationErrors.hasOwnProperty(a)&&delete this.data.validationErrors[a]})}setDownloadableFiles(a){a=a.map(s=>{if(typeof s.settings=="string")try{s.settings=JSON.parse(s.settings)}catch{}return s}),this.data.downloadableFiles=a}get downloadableFiles(){return this.data.downloadableFiles}get saving(){return this.data.saving}setSaving(a){this.data.saving=a}hasDownloadableFiles(){return Array.isArray(this.data.downloadableFiles)&&this.data.downloadableFiles.length>0}getHiddenVariationNames(a,s){if(!a)return[];let n=[];if(typeof a=="string")try{n=JSON.parse(a)}catch{return[]}else typeof a=="object"&&(n=Object.values(a));const l=s.variants.reduce((u,c)=>(u[c.id]=c.variation_title,u),{});return n.map(u=>l[u]).filter(Boolean).slice(1)}generateVariantOptions(a){return[...a.variants.filter(n=>n.created_at)]}hasVariationOption(a){return Object.values(this.generateVariantOptions(a)).length>0}get downloadableFileSchema(){return{product_variation_id:[],title:"",type:"",driver:"",file_name:"",file_path:"",file_url:"",file_size:"",settings:{download_limit:"",download_expiry:"",bucket:""},serial:""}}setInsertableFiles(a){this.data.addModal.files=a}get insertableFiles(){return this.data.addModal.files}addDummyInsertableFile(a=null){const s=this.downloadableFileSchema;a&&(s.product_variation_id=[a]),this.data.addModal.files.push(s)}getCurrentEditableIndex(){return this.data.editModal.currentIndex}getCurrentEditableFile(){var a;return((a=this.data.editModal.states[this.getCurrentEditableIndex()])==null?void 0:a.file)??null}updateDownloadableFile(){this.setSaving(!0);const a=this.getCurrentEditableFile(),s=this.getCurrentEditableIndex();if(!a||s<0){console.error(["File or Index is missing",a,s]);return}te.put("products/"+a.id+"/update",a).then(n=>{this.closeEditModal(s),J.success(n.message),this.downloadableFiles[s]={...a}}).catch(n=>{n.hasOwnProperty("message")?J.error(n.message):J.error(f("Failed To Update"))}).finally(()=>{this.setSaving(!1)})}resetValidationError(){this.data.validationErrors={}}isAddModalOpen(){return this.data.addModal.isModalOpen}}function zL(){return jL.init()}const YL={class:"fct-product-simple-wrap"},qL={class:"flex items-center gap-1 justify-between w-full"},WL={class:"fct-shipping-class-select-wrap relative"},XL={class:"fct-select-option-with-leftright-value"},JL={class:"text-sm text-gray-500"},ZL={class:"pt-1.5 text-right"},eO={key:0},tO={class:"mb-0 mt-2"},aO={__name:"ShippingClass",props:{product:Object,productEditModel:Object},setup(t){const e=t,a=T(we.get(e,"product.detail.other_info.shipping_class")),s=T(),n=T(!1),l=T(!1),A=T([]),u=$e.get("admin_url")+"settings/shipping/shipping_classes",c=(g="")=>{l.value=!0,A.value=[],te.get("shipping/classes",{search:g}).then(F=>{A.value=F.shipping_classes.data,v()}).finally(()=>{l.value=!1})},m=g=>{c(),g.id&&(a.value=g.id,e.productEditModel.onChangeInputField("shipping_class",a.value))},v=()=>{const g=we.where(A.value,"id",a.value);s.value=we.get(g,"0")},b=()=>{n.value=!0};return pe(()=>{c()}),(g,F)=>{const B=y("el-option"),w=y("el-select"),C=y("el-button");return d(),_("div",YL,[o(se,null,{default:r(()=>[o(le,{border_bottom:""},{default:r(()=>[i("div",qL,[o(Ze,{title:p(f)("Shipping Class"),content:p(f)("Use a shipping class to group products with similar shipping requirements. This allows you to set specific shipping rates for different types of items, such as 'Bulky Items', 'Fragile Goods'. Select an existing class from the search box or click + Add to create a new one. If no class is assigned, the product will use your store's default shipping rates.")},null,8,["title","content"]),i("a",{href:u,class:"focus:outline-none focus:shadow-none w-4 h-4 inline-flex items-center justify-center",target:"_blank"},[o(Y,{name:"Redirect",class:"w-3 h-3 text-primary-500 dark:text-gray-200"})])])]),_:1}),o(ae,null,{default:r(()=>[i("div",WL,[o(w,{modelValue:a.value,"onUpdate:modelValue":F[0]||(F[0]=k=>a.value=k),remote:"",placeholder:p(f)("Search Shipping Class"),"remote-method":c,loading:l.value,filterable:"",clearable:"",onChange:F[1]||(F[1]=()=>{t.productEditModel.onChangeInputField("shipping_class",a.value),v()}),"popper-class":"fct-shipping-class-select"},{default:r(()=>[(d(!0),_(H,null,q(A.value,k=>(d(),U(B,{key:k.id,label:k.name,value:k.id},{default:r(()=>[i("div",XL,[M(h(k.name)+" ",1),i("span",JL,h(k.type==="percentage"?k.cost+"%":p(xe).formatNumber(k.cost*100,!0)),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","loading"]),i("div",ZL,[o(C,{onClick:Ke(b,["stop"]),size:"small",text:""},{default:r(()=>[o(Y,{name:"Plus",class:"w-3 h-3"}),M(" "+h(p(f)("Add Shipping Class")),1)]),_:1})])]),s.value?(d(),_("div",eO,[i("p",tO,h(p(f)("Cost: %s",s.value.type==="percentage"?s.value.cost+"%":p(xe).formatNumber(s.value.cost*100,!0))),1)])):x("",!0)]),_:1})]),_:1}),o(zp,{modelValue:n.value,"onUpdate:modelValue":F[2]||(F[2]=k=>n.value=k),onSaved:m},null,8,["modelValue"])])}}},sO={class:"dialog-footer"},nO={__name:"TaxClassDrawer",props:{modelValue:{type:Boolean,required:!0},classData:{type:Object,default:null},initialData:{type:Object,default:()=>({title:"",description:"",priority:10,categories:[]})}},emits:["update:modelValue","saved","closed"],setup(t,{emit:e}){const a=t,s=e,n=T(null),l=T(!1),A=T(!1),u=T([]),c=T({...a.initialData}),m={title:[{required:!0,message:f("Please enter a tax class name"),trigger:"blur"}],priority:[{required:!0,message:f("Please enter a priority"),trigger:"blur"}]},v=X(()=>!!a.classData),b=X({get:()=>a.modelValue,set:C=>s("update:modelValue",C)});ce(()=>a.classData,C=>{var k,S;C?c.value={title:C.title||"",description:C.description||"",priority:((k=C.meta)==null?void 0:k.priority)||10,categories:((S=C.meta)==null?void 0:S.categories)||[]}:c.value={...a.initialData}},{immediate:!0,deep:!0});const g=()=>{u.value.length>0||(A.value=!0,te.get("products/fetch-term").then(C=>{u.value=C.taxonomies["product-categories"].terms}).catch(C=>{console.error("Error fetching product categories:",C),J.error(f("Failed to fetch product categories"))}).finally(()=>{A.value=!1}))},F=()=>{n.value.validate(C=>{if(!C)return;l.value=!0;const k=v.value?"put":"post",S=v.value?`/tax/classes/${a.classData.id}`:"/tax/classes",E={title:c.value.title,description:c.value.description,priority:c.value.priority,categories:c.value.categories};te[k](S,E).then(V=>{J.success(V.message),s("saved",V.tax_class||V),B()}).catch(V=>{console.error("Error saving tax class:",V),J.error(f("Failed to save tax class"))}).finally(()=>{l.value=!1})})},B=()=>{s("update:modelValue",!1)},w=()=>{v.value||(c.value={title:"",description:"",priority:10,categories:[]}),s("closed")};return pe(()=>{g()}),(C,k)=>{const S=y("el-input"),E=y("el-form-item"),V=y("el-input-number"),$=y("el-option"),O=y("el-select"),D=y("el-form"),Q=y("el-button"),I=y("el-drawer"),L=Et("loading");return d(),U(I,{modelValue:b.value,"onUpdate:modelValue":k[4]||(k[4]=K=>b.value=K),title:v.value?p(f)("Edit Tax Class"):p(f)("Add Tax Class"),width:"500px","append-to-body":"","close-on-click-modal":!0,class:"fct-tax-class-drawer",onClosed:w},{footer:r(()=>[i("span",sO,[o(Q,{onClick:B},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),o(Q,{type:"primary",onClick:F,loading:l.value},{default:r(()=>[M(h(v.value?p(f)("Update"):p(f)("Save")),1)]),_:1},8,["loading"])])]),default:r(()=>[o(D,{model:c.value,rules:m,ref_key:"formRef",ref:n,"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(E,{prop:"title"},{label:r(()=>[o(Ze,{title:p(f)("Tax Class Name"),content:p(f)("Give the tax class a friendly name to help identify it when setting up tax rates for your products. For instance: Standard Rate, Reduced Rate, Zero Rate, and so on."),placement:"bottom"},null,8,["title","content"])]),default:r(()=>[o(S,{modelValue:c.value.title,"onUpdate:modelValue":k[0]||(k[0]=K=>c.value.title=K),placeholder:p(f)("Enter tax class name")},null,8,["modelValue","placeholder"])]),_:1}),o(E,{prop:"description"},{label:r(()=>[o(Ze,{title:p(f)("Description"),content:p(f)("Enter a description for this tax class to help you and your team understand when to use it.")},null,8,["title","content"])]),default:r(()=>[o(S,{modelValue:c.value.description,"onUpdate:modelValue":k[1]||(k[1]=K=>c.value.description=K),type:"textarea",rows:3,placeholder:p(f)("Enter tax class description")},null,8,["modelValue","placeholder"])]),_:1}),o(E,{prop:"priority"},{label:r(()=>[o(Ze,{title:p(f)("Priority"),content:p(f)("Higher numbers have higher priority (0-10). Tax classes with higher priority will be applied first when multiple classes could apply to a product.")},null,8,["title","content"])]),default:r(()=>[o(V,{modelValue:c.value.priority,"onUpdate:modelValue":k[2]||(k[2]=K=>c.value.priority=K),min:0,max:10,step:1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1}),o(E,{prop:"categories"},{label:r(()=>[o(Ze,{title:p(f)("Product Categories"),content:p(f)("Select the product categories that this tax class will be applied to. Leave empty to apply to all categories.")},null,8,["title","content"])]),default:r(()=>[At((d(),U(O,{modelValue:c.value.categories,"onUpdate:modelValue":k[3]||(k[3]=K=>c.value.categories=K),filterable:"",multiple:"",placeholder:p(f)("Select Product Categories"),class:"w-full"},{default:r(()=>[(d(!0),_(H,null,q(u.value,K=>(d(),U($,{key:K.value,label:K.label,value:K.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])),[[L,A.value]])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}},oO={class:"fct-product-simple-wrap"},lO={class:"flex items-center gap-1 justify-between w-full"},rO={class:"fct-tax-class-select-wrap relative"},iO={class:"fct-select-option-with-leftright-value"},AO={class:"pt-1.5 text-right"},dO={key:0},uO={class:"mb-0 mt-2"},cO={__name:"TaxClass",props:{product:Object,productEditModel:Object},setup(t){const e=t,a=T(we.get(e,"product.detail.other_info.tax_class")),s=T(),n=T(!1),l=T(!1),A=T([]),u=$e.get("admin_url")+"settings/tax_settings",c=(B="")=>{l.value=!0,A.value=[],te.get("tax/classes",{search:B}).then(w=>{A.value=w.tax_classes,v()}).finally(()=>{l.value=!1})},m=B=>{c(),B.id&&(a.value=B.id,e.productEditModel.onChangeInputField("tax_class",a.value))},v=()=>{const B=we.where(A.value,"id",a.value);s.value=we.get(B,"0")},b=()=>{n.value=!0},g=()=>{a.value&&te.post("products/"+e.product.ID+"/tax-class",{tax_class:a.value}).then(B=>{J.success(B.message),v()}).catch(B=>{var w;B.status_code=="422"?J.validationErrors(B):J.error((w=B.data)==null?void 0:w.message)})},F=()=>{te.post("products/"+e.product.ID+"/tax-class/remove").then(B=>{J.success(B.message),v()}).catch(B=>{var w;B.status_code=="422"?J.validationErrors(B):J.error((w=B.data)==null?void 0:w.message)})};return pe(()=>{c()}),(B,w)=>{const C=y("el-option"),k=y("el-select"),S=y("el-button");return d(),_("div",oO,[o(se,null,{default:r(()=>[o(le,{border_bottom:""},{default:r(()=>[i("div",lO,[o(Ze,{title:p(f)("Tax Class"),content:p(f)("Use a tax class to group products with similar tax treatment. This allows you to set specific tax rates for different types of items, such as 'Standard Rate', 'Reduced Rate', 'Zero Rate'. Select an existing class from the search box or click + Add to create a new one. If no class is assigned, the product will use your store's default tax rates.")},null,8,["title","content"]),i("a",{href:u,class:"focus:outline-none focus:shadow-none w-4 h-4 inline-flex items-center justify-center",target:"_blank"},[o(Y,{name:"Redirect",class:"w-3 h-3 text-primary-500 dark:text-gray-200"})])])]),_:1}),o(ae,null,{default:r(()=>[i("div",rO,[o(k,{modelValue:a.value,"onUpdate:modelValue":w[0]||(w[0]=E=>a.value=E),remote:"",placeholder:p(f)("Search Tax Class"),"remote-method":c,loading:l.value,filterable:"",clearable:"",onChange:g,onClear:F,"popper-class":"fct-tax-class-select"},{default:r(()=>[(d(!0),_(H,null,q(A.value,E=>(d(),U(C,{key:E.id,label:E.title,value:E.id},{default:r(()=>[i("div",iO,h(E.title),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","loading"]),i("div",AO,[o(S,{onClick:Ke(b,["stop"]),size:"small",text:""},{default:r(()=>[o(Y,{name:"Plus",class:"w-3 h-3"}),M(" "+h(p(f)("Add Tax Class")),1)]),_:1})])]),s.value?(d(),_("div",dO,[i("p",uO,h(p(f)("Description: %s",s.value.description||p(f)("No description available"))),1)])):x("",!0)]),_:1})]),_:1}),o(nO,{modelValue:n.value,"onUpdate:modelValue":w[1]||(w[1]=E=>n.value=E),onSaved:m},null,8,["modelValue"])])}}},fO={class:"fct-product-disclaimer-wrap"},pO={__name:"ProductDisclaimer",props:{product:Object,productEditModel:Object},setup(t){const e=t,a=T(""),s=l=>{a.value=l??""};ce(()=>{var l,A,u;return(u=(A=(l=e.product)==null?void 0:l.detail)==null?void 0:A.other_info)==null?void 0:u.disclaimer},l=>{s(l)},{immediate:!0});const n=l=>{s(l),e.productEditModel.onChangeInputField("disclaimer",a.value)};return(l,A)=>{const u=y("el-input"),c=y("el-form-item"),m=y("el-form");return d(),_("div",fO,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Disclaimer"),desc:p(f)("Add an optional disclaimer that will show on the product page."),border_bottom:""},null,8,["title","desc"]),o(ae,null,{default:r(()=>[o(m,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(c,{label:p(f)("Disclaimer text")},{default:r(()=>[o(u,{type:"textarea",rows:4,placeholder:p(f)("Add any important notes or warnings for this product"),"model-value":a.value,onInput:n},null,8,["placeholder","model-value"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})])}}},mO={class:"fct-edit-product-wrapper fct-layout-width"},hO={class:"fct-btn-group sm"},_O={class:"hide-on-mobile"},gO={class:"show-on-mobile"},vO=["href"],yO={key:1,class:"single-page-body"},bO=["innerHTML"],wO={class:"fct-product-edit"},BO={class:"fct-product-main"},CO={class:"fct-show-on-tablet fct-product-publish-and-media-widgets el-form el-form--default el-form--label-top"},kO={class:"fct-product-aside"},FO={class:"el-form el-form--default el-form--label-top"},xO={key:2},UO={__name:"EditProduct",props:{product:Object,product_id:String,taxonomies:Object},setup(t){const e=t,a=T(),s=hT();let n=null;const l=zL();s.setProductDownloadableModel(l);const A=T(!1),u=F=>{var B,w;A.value=!1,s.setProduct(F),n=s.data.product,l.setDownloadableFiles(F.downloadable_files),n.gallery=((w=(B=n==null?void 0:n.detail)==null?void 0:B.gallery_image)==null?void 0:w.meta_value)??[],n.featured_video=(n==null?void 0:n.featured_video)??null,n.detail=n.detail||{},n.detail.other_info=n.detail.other_info||{},n.detail.other_info.custom_sections=n.detail.other_info.custom_sections||[],n.detail.other_info.reviews=n.detail.other_info.reviews||[],n.detail.other_info.disclaimer=n.detail.other_info.disclaimer||"",n.taxonomies=e.taxonomies,n.product_terms={},Object.keys(n.taxonomies).map(C=>{n.product_terms[C]=n[C]??[]}),A.value=!0};_T().onSave(()=>{var F;s.data.metaValue=(F=a.value)==null?void 0:F.getFormStates(),s.update()});const m=ro();m.bind(["mod+s"],F=>{var B;F.preventDefault(),s.data.hasChange&&(l.isAddModalOpen()?l.attachInsertableFiles(e.product.ID):l.isEditModalOpen()?l.updateDownloadableFile():(s.data.metaValue=(B=a.value)==null?void 0:B.getFormStates(),s.update()))});const v=()=>{s.setHasChange(!0)},b=F=>{F==="delete"&&s.delete()};Li("triggerChange",v);const g=$l("reload");return ce(()=>e.product,(F,B)=>{F!==B&&u(F)}),pe(()=>{u(e.product),s.setReloader(g);const F=document.querySelector(".fct-admin-product-header");F&&document.querySelector("#fluent_cart_plugin_app").prepend(F)}),_u(()=>{m.unbind("mod+s")}),(F,B)=>{const w=y("el-button"),C=y("el-dropdown-item"),k=y("el-dropdown-menu"),S=y("el-dropdown");return d(),_("div",mO,[(d(),U(Il,{to:"#fct-admin-product-header-buttons"},[i("div",hO,[o(S,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:b},{dropdown:r(()=>[o(k,null,{default:r(()=>[o(C,{command:"preview",class:"item-link"},{default:r(()=>[i("a",{href:p(s).viewUrl(),target:"_blank"},[o(Y,{name:"Eye"}),M(" "+h(p(f)("Preview")),1)],8,vO)]),_:1}),o(C,{command:"delete",class:"item-destructive"},{default:r(()=>[o(Y,{name:"Delete"}),M(" "+h(p(f)("Delete")),1)]),_:1})]),_:1})]),default:r(()=>[o(w,null,{default:r(()=>[i("span",_O,[M(h(p(f)("More Actions"))+" ",1),o(Y,{name:"ChevronDown"})]),i("span",gO,[o(Y,{name:"More"})])]),_:1})]),_:1})])])),A.value?(d(),U(yn,{key:0,isActive:p(s).data.hasChange?"is-active":"",loading:p(s).data.saving,onDiscard:p(s).discard,onSave:B[0]||(B[0]=()=>{var E;p(s).data.metaValue=(E=a.value)==null?void 0:E.getFormStates(),p(s).update()}),saveButtonText:p(f)("Update"),loadingText:p(f)("Updating"),"show-cmnd-icon":!0},null,8,["isActive","loading","onDiscard","saveButtonText","loadingText"])):x("",!0),A.value?(d(),_("div",yO,[p(s).shouldShowShippingMethodAlert()?(d(),U(bs,{key:0,class:"mb-3",type:"warning",icon:"InformationFill"},{default:r(()=>[i("span",{innerHTML:p(f)("This Product has physical variants. Please %s",'<a href="'+p(s).shippingSettingsUrl()+'" target="_blank">'+p(f)("Add Shipping")+"</a>")},null,8,bO)]),_:1})):x("",!0),p(s).isInDraft()?(d(),U(bs,{key:1,class:"mb-3",type:"warning",icon:"InformationFill",content:p(f)("This product is currently in draft and cannot be sold to customers. Please publish the product to make it available for purchase.")},null,8,["content"])):x("",!0),i("div",wO,[i("div",BO,[o(LT,{product:p(n),productEditModel:p(s),reload:p(g)},null,8,["product","productEditModel","reload"]),i("div",CO,[o(Jd,{product:p(n),productEditModel:p(s)},null,8,["product","productEditModel"]),o(Zd,{product:p(n),productEditModel:p(s)},null,8,["product","productEditModel"])]),o(r9,{product:p(n),productEditModel:p(s),productDownloadableModel:p(l)},null,8,["product","productEditModel","productDownloadableModel"]),o(V9,{product:p(n),productEditModel:p(s)},null,8,["product","productEditModel"]),o(jM,{product:p(n),productEditModel:p(s),productDownloadableModel:p(l)},null,8,["product","productEditModel","productDownloadableModel"]),o(mL,{product:p(n),productEditModel:p(s)},null,8,["product","productEditModel"]),o(pO,{product:p(n),productEditModel:p(s)},null,8,["product","productEditModel"]),o(TL,{product:p(n),productEditModel:p(s)},null,8,["product","productEditModel"])]),i("div",kO,[i("div",FO,[o(Jd,{class:"fct-hide-on-tablet",product:p(n),productEditModel:p(s)},null,8,["product","productEditModel"]),o(Zd,{class:"fct-hide-on-tablet",product:p(n),productEditModel:p(s)},null,8,["product","productEditModel"]),o(GL,{product:p(n),productEditModel:p(s)},null,8,["product","productEditModel"]),p(s).hasPhysicalVariation()?(d(),U(aO,{key:0,product:p(n),productEditModel:p(s)},null,8,["product","productEditModel"])):x("",!0),p(s).isTaxEnabled()?(d(),U(cO,{key:1,product:p(n),productEditModel:p(s)},null,8,["product","productEditModel"])):x("",!0),p(n)?(d(),_("div",xO,[o(Bn,{ref_key:"dynamicTemplates",ref:a,filter:"single_product_page","widgets-query":{product_id:p(n).ID},data:{editableProduct:p(n)}},null,8,["widgets-query","data"])])):x("",!0)])])])])):x("",!0)])}}},EO={class:"fct-upgrade-path-drawer-content"},SO={class:"fct-form-group"},QO={class:"fct-form-group"},DO={class:"fct-form-group"},$O={class:"fct-form-group"},IO={__name:"AddModal",props:{pathOptions:Object,allVariants:Object,existingUpgradePathMap:Object,productId:{type:[Number,String]}},emits:["pathGenerated"],setup(t,{expose:e,emit:a}){const s=t,n=a,l=T(!1),A=()=>{l.value=!0},u={from_variant:"",to_variants:[],is_prorate:"0",discount_amount:"0"},c=T({...u}),m=T({}),v=$e.get("shop.currency_sign"),b=()=>{m.value={};const B={...c.value};(!Array.isArray(B.to_variants)||B.to_variants.length===0)&&(B.to_variants=[]),te.post(`products/${s.productId}/upgrade-path`,{...B}).then(w=>{J.success(w.message),c.value={...u},l.value=!1,n("pathGenerated")}).catch(w=>{if(m.value=w,w.message)return J.error(w.message)})},g=()=>c.value.from_variant?s.allVariants.filter(B=>{var w,C;return!((w=s.existingUpgradePathMap[c.value.from_variant])!=null&&w.includes(B.id)||(C=s.existingUpgradePathMap[c.value.from_variant])!=null&&C.includes(B.id.toString()))&&B.id!==c.value.from_variant}):[],F=B=>{let w=B==null?void 0:B.toString().replace(/^0+(?=\d)/,"");w===""&&(w="0"),parseInt(w)<0&&(w="0"),c.value.discount_amount=w};return e({openModal:A}),(B,w)=>{const C=y("el-option"),k=y("el-select"),S=y("el-checkbox"),E=y("el-input"),V=y("el-button"),$=y("el-drawer");return d(),U($,{title:p(f)("Add Upgrade Path"),modelValue:l.value,"onUpdate:modelValue":w[5]||(w[5]=O=>l.value=O),onClosed:w[6]||(w[6]=()=>{l.value=!1,c.value={...u}}),"append-to-body":"",class:ne(p(me).isAdminBarEnabled()?"admin-bar-enable":""),"close-on-click-modal":!1},{footer:r(()=>[o(V,{onClick:w[4]||(w[4]=O=>l.value=!1)},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),o(V,{onClick:b,type:"primary"},{default:r(()=>[M(h(p(f)("Save")),1)]),_:1})]),default:r(()=>[i("div",EO,[i("div",SO,[i("label",null,h(p(f)("From Plan")),1),o(k,{modelValue:c.value.from_variant,"onUpdate:modelValue":w[0]||(w[0]=O=>c.value.from_variant=O),placeholder:p(f)("Select"),"popper-class":"fct-variation-select"},{default:r(()=>[(d(!0),_(H,null,q(t.pathOptions,O=>(d(),U(C,{key:O.id,label:O.variation_title,value:O.id,disabled:c.value.to_variants.includes(O.id)},{default:r(()=>[o(Sl,{variant:O},null,8,["variant"])]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue","placeholder"]),m.value.hasOwnProperty("from_variant")?(d(),U(rt,{key:0,"validation-errors":m.value,"field-key":"from_variant"},null,8,["validation-errors"])):x("",!0)]),i("div",QO,[i("label",null,h(p(f)("To Plan(s)")),1),o(k,{disabled:!c.value.from_variant,modelValue:c.value.to_variants,"onUpdate:modelValue":w[1]||(w[1]=O=>c.value.to_variants=O),multiple:"",placeholder:p(f)("Select"),clearable:"","popper-class":"fct-variation-select"},{default:r(()=>[(d(!0),_(H,null,q(g(),O=>(d(),U(C,{key:O.id,label:O.variation_title,value:O.id,disabled:O.id==c.value.from_variant},{default:r(()=>[o(Sl,{variant:O},null,8,["variant"])]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["disabled","modelValue","placeholder"]),m.value.hasOwnProperty("to_variants")?(d(),U(rt,{key:0,"validation-errors":m.value,"field-key":"to_variants"},null,8,["validation-errors"])):x("",!0)]),i("div",DO,[o(S,{"true-value":"1","false-value":"0",modelValue:c.value.is_prorate,"onUpdate:modelValue":w[2]||(w[2]=O=>c.value.is_prorate=O)},{default:r(()=>[M(h(p(f)("Prorate")),1)]),_:1},8,["modelValue"])]),i("div",$O,[i("label",null,h(p(f)("Discount Amount")),1),o(E,{modelValue:c.value.discount_amount,"onUpdate:modelValue":w[3]||(w[3]=O=>c.value.discount_amount=O),type:"number",min:0,onInput:F},{prepend:r(()=>[M(h(p(v)),1)]),_:1},8,["modelValue"]),m.value.hasOwnProperty("discount_amount")?(d(),U(rt,{key:0,"validation-errors":m.value,"field-key":"discount_amount"},null,8,["validation-errors"])):x("",!0)])])]),_:1},8,["title","modelValue","class"])}}},TO={class:"fct-upgrade-path-drawer-content"},MO={class:"fct-form-group"},VO={class:"text"},LO={class:"fct-form-group"},OO={class:"fct-form-group"},HO={class:"fct-form-group"},tu={__name:"EditModal",props:{fromName:String,preSelectedFromVariant:{type:[String,Number]},preSelectedToVariants:{type:Array},preSelectedIsProrate:{type:[String,Number]},preSelectedDiscountAmount:{type:[String,Number]},pathOptions:Object,allVariants:Object,existingUpgradePathMap:Object,pathId:{type:[Number,String]}},emits:["pathGenerated"],setup(t,{emit:e}){const a=t,s=T({...a.existingUpgradePathMap}),n=e,l=T(!1),A={from_variant:"",to_variants:[],is_prorate:"0",discount_amount:"0"},u=T({...A}),c=T({}),m=()=>{c.value={};const F={...u.value};(!Array.isArray(F.to_variants)||F.to_variants.length===0)&&(F.to_variants=[]),te.post(`products/upgrade-path/${a.pathId}/update`,{...F}).then(B=>{J.success(B.message),u.value={...A},l.value=!1,n("pathGenerated")}).catch(B=>{if(c.value=B,B.message)return J.error(B.message)})},v=()=>u.value.from_variant?a.allVariants.filter(F=>{var B,w;return!((B=s[u.value.from_variant])!=null&&B.includes(F.id)||(w=s[u.value.from_variant])!=null&&w.includes(F.id.toString()))&&F.id.toString()!==u.value.from_variant.toString()}):[],b=()=>{u.value.from_variant=a.preSelectedFromVariant,u.value.is_prorate=a.preSelectedIsProrate,u.value.discount_amount=a.preSelectedDiscountAmount,u.value.to_variants=[];for(const F of a.preSelectedToVariants)u.value.to_variants.push(parseInt(F))},g=F=>{let B=F==null?void 0:F.toString().replace(/^0+(?=\d)/,"");B===""&&(B="0"),parseInt(B)<0&&(B="0"),u.value.discount_amount=B};return Rs(()=>{b()}),(F,B)=>{const w=y("el-option"),C=y("el-select"),k=y("el-checkbox"),S=y("el-input"),E=y("el-button"),V=y("el-drawer");return d(),_(H,null,[o(Be,{size:"x-small",tag:"button",onClick:B[0]||(B[0]=()=>{l.value=!0})},{default:r(()=>[o(Y,{name:"Edit"})]),_:1}),o(V,{modelValue:l.value,"onUpdate:modelValue":B[5]||(B[5]=$=>l.value=$),title:F.$t("Update Upgrade Path"),onClosed:B[6]||(B[6]=()=>{l.value=!1,u.value={...A}}),onOpen:b,"append-to-body":""},{footer:r(()=>[o(E,{onClick:B[4]||(B[4]=$=>l.value=!1),size:"small"},{default:r(()=>[M(h(F.$t("Cancel")),1)]),_:1}),o(E,{onClick:m,size:"small",type:"primary"},{default:r(()=>[M(h(F.$t("Update")),1)]),_:1})]),default:r(()=>[i("div",TO,[i("div",MO,[i("label",null,h(F.$t("From Plan")),1),i("div",VO,h(t.fromName),1)]),i("div",LO,[i("label",null,h(F.$t("To Plan(s)")),1),o(C,{disabled:!u.value.from_variant,modelValue:u.value.to_variants,"onUpdate:modelValue":B[1]||(B[1]=$=>u.value.to_variants=$),multiple:"",placeholder:"Select",clearable:""},{default:r(()=>[(d(!0),_(H,null,q(v(),$=>(d(),U(w,{key:$.id,label:$.variation_title,value:$.id,disabled:$.id==u.value.from_variant},null,8,["label","value","disabled"]))),128))]),_:1},8,["disabled","modelValue"]),c.value.hasOwnProperty("to_variants")?(d(),U(rt,{key:0,"validation-errors":c.value,"field-key":"to_variants"},null,8,["validation-errors"])):x("",!0)]),i("div",OO,[o(k,{class:"m-2","true-value":"1","false-value":"0",modelValue:u.value.is_prorate,"onUpdate:modelValue":B[2]||(B[2]=$=>u.value.is_prorate=$)},{default:r(()=>[o(Ze,{class:"flex items-center",title:F.$t("Prorate"),content:`The prorated amount, based on the remaining days, will be credited to the new plan. Upgrading from one-time payment, the full amount will be credited.
          `},null,8,["title"])]),_:1},8,["modelValue"])]),i("div",HO,[i("label",null,h(F.$t("Discount Amount")),1),o(S,{modelValue:u.value.discount_amount,"onUpdate:modelValue":B[3]||(B[3]=$=>u.value.discount_amount=$),type:"number",min:"0",onInput:g},null,8,["modelValue"]),c.value.hasOwnProperty("discount_amount")?(d(),U(rt,{key:0,"validation-errors":c.value,"field-key":"discount_amount"},null,8,["validation-errors"])):x("",!0)])])]),_:1},8,["modelValue","title"])],64)}}},RO={__name:"UpgradePathsLoader",setup(t){return(e,a)=>{const s=y("el-skeleton-item"),n=y("el-skeleton"),l=y("el-table-column"),A=y("el-table");return d(),U(A,{data:[1,2,3,4,5]},{default:r(()=>[o(l,{label:p(f)("From Plan"),prop:"object_id",width:300},{default:r(()=>[o(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:r(()=>[o(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),o(l,{label:p(f)("To Plan"),width:200},{default:r(()=>[o(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:r(()=>[o(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),o(l,{label:p(f)("Discount Amount"),width:110},{default:r(()=>[o(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:r(()=>[o(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),o(l,{label:p(f)("Is Prorate"),width:100},{default:r(()=>[o(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:r(()=>[o(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),o(l,{width:100},{default:r(()=>[o(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:r(()=>[o(s,{varient:"p",class:"w-3/5"})]),_:1})]),_:1})]),_:1})}}},PO={class:"fct-upgrade-paths-wrap fct-layout-width"},KO={class:"grid gap-1"},NO={class:"text-system-dark dark:text-gray-50"},GO={class:"text-xs text-system-mid dark:text-gray-300"},jO={class:"flex gap-1 flex-wrap"},zO={key:0},YO={key:1},qO={class:"fct-btn-group sm"},WO={key:2,class:"fct-upgrade-paths-mobile"},XO={class:"from-plan"},JO={class:"title"},ZO={class:"plan-title"},e7={key:0,class:"plan-billing-summary"},t7={class:"to-plan"},a7={class:"title"},s7={class:"discount-amount"},n7={class:"title"},o7={key:0},l7={key:1},r7={class:"is-prorate"},i7={class:"title"},A7={class:"path-actions"},d7={class:"title"},u7={class:"fct-btn-group sm mt-3"},c7={key:0,class:"py-6 text-center"},f7={key:1},p7={key:1,class:"border border-solid border-gray-divider mt-5 pt-5 border-x-0 border-b-0 dark:border-dark-400"},m7={__name:"UpgradePaths",props:{product:{type:Object,required:!0},product_id:{type:[String,Number],required:!0}},setup(t){const e=t,a=T(!1),s=T(null);T([]),T({status:"yes",paths:{}});const n=$e.get("app_config.isProActive"),l=T([]),A=X(()=>e.product.variants.filter(w=>{var k;return(((k=g.value[w.id])==null?void 0:k.length)||0)<b.value-1})),u=w=>{c()},c=async()=>{a.value=!0,te.get(`products/${e.product_id}/upgrade-paths`).then(function(w){l.value=w.data,F()}).catch(function(w){console.log(w)}).finally(()=>{a.value=!1})},m=T({}),v=T({}),b=T(we.get(e.product,"variants",[]).length),g=T({}),F=()=>{e.product.variants.entries().forEach(([w,C])=>{m.value[C.id]=C.variation_title,v.value[C.id]=C.other_info.billing_summary}),g.value={},l.value.forEach(w=>{g.value.hasOwnProperty(w.object_id)?(g.value[w.object_id]=[...g.value[w.object_id].concat([...w.meta_value.to_variants])],g.value[w.object_id]=[...new Set(g.value[w.object_id])]):g.value[w.object_id]=[...w.meta_value.to_variants]})},B=w=>{te.delete(`products/upgrade-path/${w}/delete`).then(function(C){c(),J.success(C.message)}).catch(function(C){})};return pe(()=>{c();const w=document.querySelector("#fct_admin_menu_holder .fct-admin-product-header");w&&document.querySelector("#fluent_cart_plugin_app").prepend(w)}),(w,C)=>{const k=y("el-table-column"),S=y("el-tag"),E=y("el-table"),V=y("el-button");return d(),_(H,null,[i("div",PO,[o(p(se),null,{default:r(()=>[o(p(le),{title:p(f)("Upgrade Paths")},null,8,["title"]),p(n)?(d(),_(H,{key:0},[o(p(ae),{class:"px-0 pb-0"},{default:r(()=>[a.value?(d(),U(RO,{key:0})):x("",!0),a.value?x("",!0):(d(),U(E,{key:1,class:"hide-on-mobile",data:l.value},{empty:r(()=>[M(h(p(f)("Control available upgrade options and offer tailored discounts when moving between plans.")),1)]),default:r(()=>[o(k,{label:p(f)("From Plan"),prop:"object_id",width:300},{default:r($=>[i("div",KO,[i("div",NO,h(p(we).get(m.value,$.row.object_id,"")),1),i("div",GO,h(p(we).get(v.value,$.row.object_id,"")),1)])]),_:1},8,["label"]),o(k,{label:p(f)("To Plan"),width:200},{default:r($=>[i("div",jO,[(d(!0),_(H,null,q(p(we).get($.row,"meta_value.to_variants",[]),O=>(d(),_(H,{key:O},[p(we).get(m.value,O)?(d(),U(S,{key:0},{default:r(()=>[M(h(p(we).get(m.value,O)),1)]),_:2},1024)):x("",!0)],64))),128))])]),_:1},8,["label"]),o(k,{label:p(f)("Discount Amount"),width:110},{default:r($=>[$.row.meta_value.discount_amount>0?(d(),_("span",zO,h(p(we).get($.row,"meta_value.discount_amount","0")),1)):(d(),_("span",YO,"--"))]),_:1},8,["label"]),o(k,{label:p(f)("Is Prorate"),width:100},{default:r($=>[M(h(p(we).get($.row,"meta_value.is_prorate","0")==="1"?"Yes":"No"),1)]),_:1},8,["label"]),o(k,{width:100},{default:r($=>[i("div",qO,[o(tu,{pathId:$.row.id,preSelectedToVariants:p(we).get($.row,"meta_value.to_variants",[]),preSelectedIsProrate:p(we).get($.row,"meta_value.is_prorate","0"),preSelectedDiscountAmount:p(we).get($.row,"meta_value.discount_amount","0"),pathOptions:A.value,"all-variants":t.product.variants,existingUpgradePathMap:g.value,fromName:p(we).get(m.value,$.row.object_id,""),preSelectedFromVariant:$.row.object_id,onPathGenerated:u},null,8,["pathId","preSelectedToVariants","preSelectedIsProrate","preSelectedDiscountAmount","pathOptions","all-variants","existingUpgradePathMap","fromName","preSelectedFromVariant"]),o(Be,{size:"x-small",tag:"button",outline:"",onClick:()=>B($.row.id)},{default:r(()=>[o(Y,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])),a.value?x("",!0):(d(),_("div",WO,[(d(!0),_(H,null,q(l.value,($,O)=>(d(),_("div",{class:"fct-upgrade-paths-mobile-row",key:O},[i("div",XO,[i("div",JO,h(p(f)("From Plan"))+": ",1),i("div",null,[i("div",ZO,h(p(we).get(m.value,$.object_id,"")),1),p(we).get(v.value,$.object_id,"")?(d(),_("div",e7,h(p(we).get(v.value,$.object_id,"")),1)):x("",!0)])]),i("div",t7,[i("div",a7,h(p(f)("To Plan"))+": ",1),(d(!0),_(H,null,q(p(we).get($,"meta_value.to_variants",[]),D=>(d(),_(H,{key:D},[p(we).get(m.value,D)?(d(),U(S,{key:0},{default:r(()=>[M(h(p(we).get(m.value,D)),1)]),_:2},1024)):x("",!0)],64))),128))]),i("div",s7,[i("div",n7,h(p(f)("Discount Amount"))+": ",1),$.meta_value.discount_amount>0?(d(),_("span",o7,h(p(we).get($,"meta_value.discount_amount","0")),1)):(d(),_("span",l7,"--"))]),i("div",r7,[i("div",i7,h(p(f)("Is Prorate"))+": ",1),i("span",null,h(p(we).get($,"meta_value.is_prorate","0")==="1"?"Yes":"No"),1)]),i("div",A7,[i("div",d7,h(p(f)("Actions"))+": ",1),i("div",u7,[o(tu,{pathId:$.id,preSelectedToVariants:p(we).get($,"meta_value.to_variants",[]),preSelectedIsProrate:p(we).get($,"meta_value.is_prorate","0"),preSelectedDiscountAmount:p(we).get($,"meta_value.discount_amount","0"),pathOptions:A.value,"all-variants":t.product.variants,existingUpgradePathMap:g.value,fromName:p(we).get(m.value,$.object_id,""),preSelectedFromVariant:$.object_id,onPathGenerated:u},null,8,["pathId","preSelectedToVariants","preSelectedIsProrate","preSelectedDiscountAmount","pathOptions","all-variants","existingUpgradePathMap","fromName","preSelectedFromVariant"]),o(Be,{size:"x-small",tag:"button",outline:"",onClick:()=>B($.id)},{default:r(()=>[o(Y,{name:"Delete"})]),_:2},1032,["onClick"])])])]))),128)),l.value.length==0?(d(),_("div",c7,h(p(f)("No upgrade paths found.")),1)):x("",!0)]))]),_:1}),a.value?x("",!0):(d(),U(p(Xi),{key:0},{default:r(()=>[A.value.length?(d(),U(V,{key:0,text:"",onClick:C[0]||(C[0]=()=>{var $;return($=s.value)==null?void 0:$.openModal()})},{default:r(()=>[o(Y,{name:"Plus"}),M(" "+h(p(f)("Add Path")),1)]),_:1})):(d(),_("span",f7,h(p(f)("No more upgrade paths available")),1))]),_:1}))],64)):(d(),_("div",p7,[o(Hi,{class:"py-7.5",title:p(f)("Get access to this feature by Upgrading to Webmakerr"),text:p(f)("This feature is only available in Webmakerr.")},null,8,["title","text"])]))]),_:1})]),o(IO,{productId:t.product.ID,onPathGenerated:u,ref_key:"addModalRef",ref:s,pathOptions:A.value,"all-variants":t.product.variants,existingUpgradePathMap:g.value},null,8,["productId","pathOptions","all-variants","existingUpgradePathMap"])],64)}}},h7={name:"ProductIntegrations",props:["product","product_id"],components:{IconButton:Be,Empty:Le,DynamicIcon:Y,CardFooter:Xi,CardBody:ae,CardHeader:le,CardContainer:se},data(){return{product_id:this.product_id,selectedIntegrationType:"",integrationLists:[],showIntegrationDialog:!1,feeds:[],available_integrations:{},all_module_config_url:{},totalActiveModules:0,loading:!1}},computed:{Str(){return nt},hasActiveModules(){return Object.values(this.available_integrations).some(t=>t.enabled)}},methods:{isEmpty:qi,fetchIntegrations(){this.loading=!0,this.$get(`products/${this.product_id}/integrations`).then(t=>{this.available_integrations=t.available_integrations,this.feeds=t.feeds,this.all_module_config_url=t.all_module_config_url}).catch(t=>{this.handleError(t.message||"Failed to load integrations")}).finally(()=>{this.loading=!1})},add(t){let e=this.available_integrations[t];if(!e.enabled){this.$confirm(e.configure_message,e.configure_title,{confirmButtonText:e.configure_button_text,cancelButtonText:"Cancel",cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{window.location.href=e.global_configure_url});return}this.$router.push({name:"product_integration_feed_editor",params:{integration_id:0,integration_name:t}})},edit(t){this.$router.push({name:"product_integration_feed_editor",params:{integration_id:t.id,integration_name:t.provider}})},handleActive(t){let e={status:t.enabled,notification_id:t.id};this.$post(`products/${this.product_id}/integrations/feed/change-status`,e).then(a=>{this.handleSuccess(a.message)}).catch(a=>{this.handleError(a.responseJSON.data.message)})},remove(t,e){let a=e.$index,s={integration_id:t};this.$confirm("Are you sure you want to delete this integration?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",confirmButtonClass:"el-button--primary",cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{this.$del(`products/${this.product_id}/integrations/${t}`,s).then(n=>{this.handleSuccess(n.message),this.feeds.splice(a,1)}).catch(n=>console.log(n))}).catch(()=>{})},handleSuccess(t){this.$notify({type:"success",message:t,offset:40})},handleError(t){this.$notify({type:"error",message:t,offset:40})}},mounted(){this.fetchIntegrations();const t=document.querySelector("#fct_admin_menu_holder .fct-admin-product-header");t&&document.querySelector("#fluent_cart_plugin_app").prepend(t)}},_7={class:"fct-integration-settings fct-layout-width"},g7={key:0,class:"integration-actions"},v7={key:0,class:"fct-empty-integration-wrap px-4 text-center mx-auto mb-5 md:max-w-[600px]"},y7={class:"text-sm"},b7={key:1,class:"fct-integrations-table-wrap"},w7={class:"fct-integration-logo-wrap"},B7=["src","alt"],C7={class:"text-xs text-gray-700"},k7=["onClick"],F7={class:"fct-event-triggers"},x7={class:"fct-event-triggers"},U7={class:"fct-btn-group sm"},E7={class:"fct-integration-table-footer"},S7=["href"],Q7={target:"_blank",rel:"noopener",href:"https://docs.fluentcart.com"};function D7(t,e,a,s,n,l){const A=y("DynamicIcon"),u=y("el-button"),c=y("el-dropdown-item"),m=y("el-dropdown-menu"),v=y("el-dropdown"),b=y("CardHeader"),g=y("el-skeleton"),F=y("el-switch"),B=y("el-table-column"),w=y("el-tag"),C=y("el-popover"),k=y("IconButton"),S=y("el-tooltip"),E=y("Empty"),V=y("el-table"),$=y("CardBody"),O=y("CardContainer"),D=Et("loading");return d(),_("div",_7,[o(O,null,{default:r(()=>[o(b,{title:t.$t("Product Integrations")},{action:r(()=>[l.hasActiveModules?(d(),_("div",g7,[o(v,{onCommand:l.add,trigger:"click","popper-class":"fct-dropdown"},{dropdown:r(()=>[o(m,null,{default:r(()=>[(d(!0),_(H,null,q(n.available_integrations,(Q,I)=>(d(),U(c,{key:I,command:I},{default:r(()=>[M(h(Q.title),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:r(()=>[o(u,{type:"info",plain:"",size:"small"},{default:r(()=>[M(h(t.$t("Add Integration"))+" ",1),o(A,{name:"ChevronDown"})]),_:1})]),_:1},8,["onCommand"])])):x("",!0)]),_:1},8,["title"]),o($,{class:"px-0 pb-0 pt-4"},{default:r(()=>[o(g,{class:"px-5 pb-5",loading:n.loading,animated:"",rows:6},null,8,["loading"]),n.loading?x("",!0):(d(),_(H,{key:0},[l.hasActiveModules?(d(),_("div",b7,[At((d(),U(V,{data:n.feeds},{empty:r(()=>[o(E,{icon:"Folder",text:t.$t("No Integrations Available.")},null,8,["text"])]),default:r(()=>[o(B,{label:t.$t("Status"),width:90},{default:r(Q=>[o(F,{"active-value":"yes","inactive-value":"no",onChange:I=>l.handleActive(Q.row),modelValue:Q.row.enabled,"onUpdate:modelValue":I=>Q.row.enabled=I},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),o(B,{width:160,label:t.$t("Integration")},{default:r(Q=>{var I,L;return[i("div",w7,[(I=n.available_integrations[Q.row.provider])!=null&&I.logo?(d(),_("img",{key:0,style:{"min-width":"24px"},class:"fct-integration-logo",src:n.available_integrations[Q.row.provider].logo,alt:Q.row.provider},null,8,B7)):x("",!0),i("span",C7,h(((L=n.available_integrations[Q.row.provider])==null?void 0:L.title)||Q.row.provider),1)])]}),_:1},8,["label"]),o(B,{"min-width":150,label:t.$t("Title")},{default:r(Q=>[i("a",{class:"fct-action-link-btn",onClick:Ke(I=>l.edit(Q.row),["prevent"]),href:"#"},h(Q.row.name),9,k7)]),_:1},8,["label"]),o(B,{"min-width":150,label:t.$t("Triggers")},{default:r(Q=>[i("div",F7,[(d(!0),_(H,null,q((Q.row.feed.event_trigger||[]).slice(0,2),(I,L)=>(d(),U(w,{key:I},{default:r(()=>[o(A,{name:"Trigger"}),M(" "+h(l.Str.headline(I)),1)]),_:2},1024))),128)),(Q.row.feed.event_trigger||[]).length>2?(d(),U(C,{key:0,placement:"bottom",width:"300",trigger:"hover"},{reference:r(()=>[o(w,{type:"info"},{default:r(()=>[M(" +"+h((Q.row.feed.event_trigger||[]).length-2),1)]),_:2},1024)]),default:r(()=>[i("div",x7,[(d(!0),_(H,null,q((Q.row.feed.event_trigger||[]).slice(2),(I,L)=>(d(),U(w,{key:I+L},{default:r(()=>[o(A,{name:"Trigger"}),M(" "+h(l.Str.headline(I)),1)]),_:2},1024))),128))])]),_:2},1024)):x("",!0)])]),_:1},8,["label"]),o(B,{width:90},{default:r(Q=>[i("div",U7,[o(S,{effect:"dark",content:t.$t("Edit"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(k,{tag:"button",onClick:I=>l.edit(Q.row),size:"x-small",hover:"primary"},{default:r(()=>[o(A,{name:"Edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"]),o(S,{effect:"dark",content:t.$t("Delete"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(k,{tag:"button",size:"x-small",onClick:I=>l.remove(Q.row.id,Q),hover:"danger"},{default:r(()=>[o(A,{name:"Delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])])]),_:1})]),_:1},8,["data"])),[[D,n.loading]])])):(d(),_("div",v7,[i("p",y7,h(t.$t("You don't have any integration module enabled. Please go to integration modules and enable and configured from available modules")),1),o(u,{tag:"a",type:"primary",href:n.all_module_config_url},{default:r(()=>[M(h(t.$t("Configure Modules")),1)]),_:1},8,["href"])])),i("div",E7,[i("a",{href:n.all_module_config_url},h(t.$t("Check Global Integration Settings")),9,S7),i("a",Q7,h(t.$t("View Documentations")),1)])],64))]),_:1})]),_:1})])}const au=ye(h7,[["render",D7]]),$7={name:"SingleIntegration",props:["product","product_id","integration_id","integration_type"],components:{CardFooter:Xi,CardBody:ae,CardHeader:le,CardContainer:se},data(){return{integration_id:this.integration_id,product_id:this.product_id,integration_type:this.integration_type||"",saving:!1,formData:{values:{name:"",integrationName:this.integration_type||"",description:""},fields:{integrationName:{type:"select",label:"Integration Type",placeholder:"Select Integration",options:[]}}}}},methods:{saveIntegration(){if(!this.formData.values.name){this.$notify({type:"error",message:"Integration name is required",offset:40});return}this.saving=!0;const t=this.integration_id?`products/${this.product_id}/integrations/${this.integration_id}`:`products/${this.product_id}/integrations`,e=this.integration_id?"put":"post";this[`$${e}`](t,{integration:this.formData.values}).then(a=>{this.saving=!1,this.$notify({type:"success",message:a.message||"Integration saved successfully",offset:40}),this.$router.push({name:"ProductIntegrations",params:{product_id:this.product_id}})}).catch(a=>{console.log(a),this.saving=!1,this.$notify({type:"error",message:(a==null?void 0:a.message)||"Failed to save integration",offset:40})})},fetchIntegrationData(){if(!this.integration_id){this.fetchIntegrationType();return}this.$get(`products/${this.product_id}/integrations/${this.integration_id}`).then(t=>{t.integration&&(this.formData.values={...t.integration},this.integration_type=t.integration.integrationName,this.fetchIntegrationType())}).catch(t=>{this.$notify({type:"error",message:t.message||"Failed to load integration data",offset:40})})},fetchIntegrationType(){this.integration_type&&this.$get(`integration/settings?integration_name=${this.integration_type}`).then(t=>{t.settings_fields&&(this.formData.fields=t.settings_fields),Object.keys(this.formData.fields).forEach(e=>{this.formData.values[e]===void 0&&(this.formData.values[e]="")})}).catch(t=>{this.$notify({type:"error",message:t.message||"Failed to load integration fields",offset:40})})},compare(t,e,a){switch(e){case"=":return t===a;case"!=":return t!==a;default:return!0}},dependancyPass(t){if(t.dependency){const a=t.dependency.depends_on.split("/").reduce((s,n)=>s[n],this.formData.values);return this.compare(a,t.dependency.operator,t.dependency.value)}return!0}},mounted(){this.fetchIntegrationData()}},I7={class:"fct-integration-settings fct-layout-width"};function T7(t,e,a,s,n,l){const A=y("el-button"),u=y("CardHeader"),c=y("el-input"),m=y("el-form-item"),v=y("el-option"),b=y("el-select"),g=y("el-form"),F=y("CardBody"),B=y("CardContainer");return d(),_("div",I7,[o(B,null,{default:r(()=>[o(u,{border_bottom:"",title:n.integration_id?t.$t("Edit Integration"):t.$t("Add Integration")},{action:r(()=>[o(A,{onClick:l.saveIntegration,type:"primary",loading:n.saving},{default:r(()=>[M(h(t.$t("Save")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"]),o(F,null,{default:r(()=>[o(g,{"label-position":"top",model:n.formData.values,class:"integration-form"},{default:r(()=>[o(m,{label:t.$t("Integration Name"),required:""},{default:r(()=>[o(c,{modelValue:n.formData.values.name,"onUpdate:modelValue":e[0]||(e[0]=w=>n.formData.values.name=w),placeholder:"Enter a name for this integration"},null,8,["modelValue"])]),_:1},8,["label"]),n.integration_id?x("",!0):(d(),U(m,{key:0,label:t.$t("Integration Type")},{default:r(()=>[o(b,{modelValue:n.formData.values.integrationName,"onUpdate:modelValue":e[1]||(e[1]=w=>n.formData.values.integrationName=w),disabled:"",class:"fct-select"},{default:r(()=>[(d(!0),_(H,null,q(n.formData.fields.integrationName.options,w=>(d(),U(v,{key:w.value,label:w.label,value:w.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])),(d(!0),_(H,null,q(n.formData.fields,(w,C)=>(d(),_(H,{key:C},[C!=="integrationName"&&l.dependancyPass(w)?(d(),U(m,{key:0,label:w.label},{default:r(()=>[w.type==="text"?(d(),U(c,{key:0,modelValue:n.formData.values[C],"onUpdate:modelValue":k=>n.formData.values[C]=k,placeholder:w.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):w.type==="select"?(d(),U(b,{key:1,modelValue:n.formData.values[C],"onUpdate:modelValue":k=>n.formData.values[C]=k,placeholder:w.placeholder,class:"fct-select"},{default:r(()=>[(d(!0),_(H,null,q(w.options,k=>(d(),U(v,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):w.type==="textarea"?(d(),U(c,{key:2,type:"textarea",modelValue:n.formData.values[C],"onUpdate:modelValue":k=>n.formData.values[C]=k,placeholder:w.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):x("",!0)]),_:2},1032,["label"])):x("",!0)],64))),128))]),_:1},8,["model"])]),_:1})]),_:1})])}const M7=ye($7,[["render",T7],["__scopeId","data-v-b582f090"]]),V7={class:"fluent-cart-admin-validation-error-wrapper `${fieldKey}`"},Wa=Object.assign({name:"ValidationError"},{__name:"ValidationError",props:{validationErrors:Object,fieldKey:{type:String,default:""}},setup(t){return(e,a)=>(d(),_("div",V7,[(d(!0),_(H,null,q(t.validationErrors,(s,n)=>(d(),_("span",{class:"fluent-cart-admin-validation-error",key:s.toLowerCase().replace(/\s/g,"")},h(s),1))),128))]))}}),L7={class:"setting-wrap wm-container-enhanced"},O7={key:0,class:"fct-all-notification-table-wrap"},H7={class:"m-0 mb-1"},R7={class:"m-0"},P7={class:"m-0"},K7={class:"fct-all-notification-actions flex items-center gap-3"},N7={class:"fct-btn-group sm"},G7={__name:"EmailNotificationSettings",setup(t){Xe().ctx;const e=T(!0),a=T([]);Fa(),Wt();const s=()=>{e.value=!0,te.get("email-notification").then(u=>{a.value=Object.values(u.data)}).catch(u=>{}).finally(()=>{e.value=!1})},n=(u,c)=>{te.post("email-notification/enable-notification/"+c,{active:u}).then(m=>{J.success(m.message)}).catch(m=>{var v;m.status_code=="422"?J.validationErrors(m):J.error((v=m.data)==null?void 0:v.message)}).finally(()=>{})},l=()=>{e.value=!0,te.post("email-notification/reset").then(u=>{a.value=Object.values(u.data),J.success(u.message)}).catch(u=>{var c;u.status_code=="422"?J.validationErrors(u):J.error((c=u.data)==null?void 0:c.message)}).finally(()=>{e.value=!1})},A=T(!1);return pe(()=>{s()}),(u,c)=>{const m=y("el-dialog"),v=y("el-button"),b=y("el-popconfirm"),g=y("el-skeleton"),F=y("el-table-column"),B=y("el-switch"),w=y("el-tooltip"),C=y("el-table");return d(),_("div",L7,[o(m,{modelValue:A.value,"onUpdate:modelValue":c[0]||(c[0]=k=>A.value=k),title:p(f)("Coming Soon"),width:"300"},{default:r(()=>[i("span",null,h(p(f)("Editing this email will be available later")),1)]),_:1},8,["modelValue","title"]),o(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{title:p(f)("Email Notifications")},ut({_:2},[void 0]),1032,["title"]),o(ae,{class:"px-0 pb-0"},{default:r(()=>[o(g,{class:"px-5 pb-5",loading:e.value,rows:5,animated:""},null,8,["loading"]),e.value?x("",!0):(d(),_("div",O7,[o(C,{data:a.value},{empty:r(()=>[o(Le,{icon:"Empty/EmailNotification","has-dark":!0,text:p(f)("No email notifications available! Please reactivate Webmakerr!")},null,8,["text"])]),default:r(()=>[o(F,{prop:"title",label:p(f)("Notification Name"),width:"250"},{default:r(k=>[i("h4",H7,h(k.row.title),1),i("p",R7,h(k.row.description),1)]),_:1},8,["label"]),o(F,{prop:"recipient",label:p(f)("Recipient"),width:"100"},{default:r(k=>[i("p",P7,h(p(nt).headline(k.row.recipient)),1)]),_:1},8,["label"]),o(F,{label:p(f)("Enabled"),width:"50"},{default:r(k=>[i("div",K7,[o(B,{autocomplete:"rutjfkde",onChange:S=>n(S,k.row.name),modelValue:k.row.settings.active,"onUpdate:modelValue":S=>k.row.settings.active=S,"active-value":"yes","inactive-value":"no"},null,8,["onChange","modelValue","onUpdate:modelValue"]),i("div",N7,[o(w,{effect:"dark",content:p(f)("Edit"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(Be,{to:{name:"email_notifications/edit",params:{name:k.row.name}},size:"x-small",hover:"primary"},{default:r(()=>[o(Y,{name:"Edit"})]),_:2},1032,["to"])]),_:2},1032,["content"])])])]),_:1},8,["label"])]),_:1},8,["data"])]))]),_:1})]),_:1})])}}},j7={class:"setting-wrap wm-container-enhanced fct-edit-email-notification-wrapper"},z7={class:"grid gap-5"},Y7={class:"mb-5 flex items-center justify-between"},q7={class:"capitalize"},W7={class:"setting-switcher"},X7={class:"setting-save-action"},J7={__name:"EditEmailNotification",props:{name:{type:String,required:!0}},setup(t){const e=t,a=T(!1),s=T(!1),n=T(e.name),l=T({title:"",description:"",event:"",name:"",recipient:"",smartcode_groups:[],template_path:"",is_async:!1,settings:{active:"",is_default_body:"yes",email_body:"",subject:""}}),A=T({}),u=T(!1),c=b=>{l.value.settings.subject+=b},m=()=>{a.value=!0,te.get("email-notification/"+n.value).then(b=>{l.value=b.data,A.value=b.shortcodes}).catch(b=>{var g;errors.status_code=="422"?J.validationErrors(errors):J.error((g=errors.data)==null?void 0:g.message)}).finally(()=>{a.value=!1})},v=()=>{s.value=!0,te.put("email-notification/"+n.value,l.value).then(b=>{J.success(b.message)}).catch(b=>{var g;b.status_code=="422"?J.validationErrors(b):J.error((g=b.data)==null?void 0:g.message)}).finally(()=>{s.value=!1})};return pe(()=>{m()}),(b,g)=>{const F=y("el-skeleton-item"),B=y("el-skeleton"),w=y("el-breadcrumb-item"),C=y("el-breadcrumb"),k=y("el-switch"),S=y("el-input"),E=y("el-form-item"),V=y("el-radio-button"),$=y("el-radio-group"),O=y("el-form"),D=y("el-button");return d(),_("div",j7,[o(B,{loading:a.value,class:"bg-white rounded p-6 mb-7.5 dark:bg-dark-700",animated:""},{template:r(()=>[o(F,{variant:"h3",class:"w-[150px] mb-5"}),i("div",z7,[i("div",null,[o(F,{variant:"h3",class:"w-[50px] mb-3"}),o(F,{variant:"p"})]),i("div",null,[o(F,{variant:"h3",class:"w-[50px] mb-3"}),o(F,{variant:"p"})])])]),_:1},8,["loading"]),a.value?x("",!0):(d(),_(H,{key:0},[i("div",Y7,[o(C,{class:"mb-0","separator-icon":p(ma)},{default:r(()=>[o(w,{to:{path:"/settings/email_notifications"}},{default:r(()=>[M(h(b.$t("Email Notifications")),1)]),_:1}),o(w,null,{default:r(()=>[i("span",q7,h(l.value.title),1)]),_:1})]),_:1},8,["separator-icon"]),i("div",W7,[o(k,{modelValue:l.value.settings.active,"onUpdate:modelValue":g[0]||(g[0]=Q=>l.value.settings.active=Q),"active-value":"yes","inactive-value":"no","active-text":p(f)("Enable this email notification!")},null,8,["modelValue","active-text"])])]),o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(O,{"label-position":"top"},{default:r(()=>[o(E,{label:p(f)("Email Subject")},{default:r(()=>[o(S,{modelValue:l.value.settings.subject,"onUpdate:modelValue":g[1]||(g[1]=Q=>l.value.settings.subject=Q),autocomplete:"rutjfkde",class:ne({"is-focus":u.value}),onFocus:g[2]||(g[2]=Q=>u.value=!0),onBlur:g[3]||(g[3]=Q=>u.value=!1),label:p(f)("Email Subject")},{append:r(()=>[o(Uu,{data:A.value,onCommand:c,btnType:"info",btnSize:"small",plain:"",placement:"bottom"},{default:r(()=>[M(h(p(f)("Add ShortCodes")),1)]),_:1},8,["data"])]),_:1},8,["modelValue","class","label"])]),_:1},8,["label"]),o(E,{label:p(f)("Email Body Type")},{default:r(()=>[o($,{modelValue:l.value.settings.is_default_body,"onUpdate:modelValue":g[4]||(g[4]=Q=>l.value.settings.is_default_body=Q)},{default:r(()=>[o(V,{label:p(f)("Default Body"),value:"yes"},null,8,["label"]),o(V,{label:p(f)("Customized Body"),value:"no"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l.value.settings.is_default_body==="no"&&!a.value?(d(),U(E,{key:0,label:p(f)("Email Body")},{default:r(()=>[o(Ks,{modelValue:l.value.settings.email_body,"onUpdate:modelValue":g[5]||(g[5]=Q=>l.value.settings.email_body=Q),"short-codes":A.value,emailTemplateEditor:!0,onUpdate:g[6]||(g[6]=Q=>{l.value.settings.email_body=Q})},null,8,["modelValue","short-codes"])]),_:1},8,["label"])):x("",!0)]),_:1})]),_:1})]),_:1})],64)),i("div",X7,[o(D,{onClick:v,type:"primary",disabled:s.value,loading:s.value},{default:r(()=>[M(h(s.value?p(f)("Updating"):p(f)("Update")),1)]),_:1},8,["disabled","loading"])])])}}},Z7={name:"StorageSettings",props:["settings"],components:{Badge:dt,CardBody:ae,CardHeader:le,CardContainer:se},data(){return{loading:!1,availableDrivers:[]}},methods:{getBadgeTitle(t){return t===!0?"active":"inactive"},getLogo(t){return t},getStorageDrivers(){this.loading=!0,this.$get("settings/storage-drivers").then(t=>{this.availableDrivers=t.drivers}).catch(t=>{this.handleError(t)}).finally(()=>{this.loading=!1})}},mounted(){this.getStorageDrivers()}},eH={class:"setting-wrap wm-container-enhanced"},tH={class:"storage-setting-list fct-content-card-list"},aH=["src","alt"],sH={class:"fct-content-card-list-head"},nH={class:"title-wrap"},oH={class:"fct-content-card-list-content"},lH={class:"fct-content-card-list-action"};function rH(t,e,a,s,n,l){const A=y("CardHeader"),u=y("el-skeleton"),c=y("Badge"),m=y("el-button"),v=y("CardBody"),b=y("CardContainer");return d(),_("div",eH,[o(b,null,{default:r(()=>[o(A,{title:t.$t("Storage Providers"),border_bottom:""},null,8,["title"]),o(v,null,{default:r(()=>[o(u,{loading:n.loading,animated:"",rows:6},null,8,["loading"]),i("div",tH,[(d(!0),_(H,null,q(n.availableDrivers,(g,F)=>(d(),_("div",{class:"fct-content-card-list-item",key:F},[i("div",{class:ne(`fct-content-card-list-icon ${g.title.toLowerCase()}`)},[i("img",{src:l.getLogo(g.logo),alt:g.title},null,8,aH)],2),i("div",sH,[i("div",nH,[i("h6",null,h(g.title),1)]),o(c,{size:"small",status:g.status?"active":"info","hide-icon":!0},{default:r(()=>[M(h(t.$t(l.getBadgeTitle(g.status))),1)]),_:2},1032,["status"])]),i("div",oH,[i("p",null,h(g.description),1)]),i("div",lH,[o(m,{size:"small",onClick:()=>t.$router.push({name:g.route})},{default:r(()=>[M(h(t.$t("Manage")),1)]),_:2},1032,["onClick"])])]))),128))])]),_:1})]),_:1})])}const iH=ye(Z7,[["render",rH]]),AH={class:"single-page-header flex items-center justify-between"},dH={__name:"GlobalStorageComponents",setup(t){T({});const e=T({}),a=T(!1),s=T(!1);T(!1);const n=T("top"),l=T("");T([]);const A=T("");T(!1),T(!1),T(!1);const u=dA(),c=T({}),m=Wt(),v=Ns(),b=()=>{s.value=!0,te.get("settings/storage-drivers/"+A.value).then(w=>{s.value=!1,u.setSchema(w.fields).setDefaults(w.settings).initForm()})},g=()=>{let w=u.values;a.value=!0,te.post("settings/storage-drivers",{settings:{...w},driver:A.value}).then(C=>{var k;e.value.is_active=(k=C.data)==null?void 0:k.is_active,J.success(C.message||f("Storage Settings updated!")),u.values=C.data,C.data.shouldReload&&b()}).catch(C=>{var k;C.status_code=="422"?J.validationErrors(C):J.error((k=C.data)==null?void 0:k.message)}).finally(()=>{a.value=!1})},F=()=>{A.value=m.name,l.value=`settings/storage/${m.name}`},B=()=>{let w="";return m.meta.title?w=m.meta.title+" Settings":w=m.name.charAt(0).toUpperCase()+m.name.slice(1).toLowerCase()+" Settings",w};return ce(m,(w,C)=>{F(),b(),B()}),v.onSave(()=>{g()}),pe(()=>{F(),b(),window.outerWidth<500&&(n.value="top")}),(w,C)=>{const k=y("el-breadcrumb-item"),S=y("el-breadcrumb"),E=y("el-skeleton");return d(),_("div",{class:ne(["setting-wrap wm-container-enhanced",A.value])},[i("div",AH,[o(S,{class:"mb-0","separator-icon":p(ma)},{default:r(()=>[o(k,{to:{name:"storage"}},{default:r(()=>[M(h(p(f)("Storage Providers")),1)]),_:1}),p(nt).headline(A.value)?(d(),U(k,{key:0},{default:r(()=>[M(h(p(nt).headline(A.value)),1)]),_:1})):x("",!0)]),_:1},8,["separator-icon"])]),o(E,{loading:s.value,animated:"",rows:6},null,8,["loading"]),s.value?x("",!0):(d(),U(er,{key:0,form:p(u),showSubmitButton:!0,onOnSubmitButtonClick:g,submitButtonText:p(f)("Save"),loading:a.value,onOnChange:C[0]||(C[0]=V=>{}),"validation-errors":c.value},null,8,["form","submitButtonText","loading","validation-errors"]))],2)}}},uH=["innerHTML"],cH={class:"fct-select-template-wrap"},fH={class:"fct-select-template-wrap flex gap-2 flex-row"},pH={class:"setting-save-action"},mH={__name:"AddEmailNotification",setup(t){const e=Xe().ctx,a=T(),s=T(!0),n=T(!1),l=T({}),A=T(),u=T([{label:"After Order Created",value:"fluent_cart/order_created"},{label:"After Order Updated",value:"fluent_cart/order_updated"},{label:"After Payment Paid",value:"fluent_cart/order_paid"},{label:"After User Created",value:"fluent_cart/user_created"},{label:"After Refund made",value:"fluent_cart/order_refunded"}]),c=T({}),m=T([{label:"Admin Email",value:"{wp.admin_email}"},{label:"Customer Email",value:"{order.customer.email}"},{label:"User Email",value:"{user.user_email}"}]);T(!0);const v=T({}),b=T({});Fa(),Wt();let g=null;const F=T([]),B=T([]),w=T({});Ns().onSave(()=>{V(event)});const k=L=>{const K=L;e.$post("email-notification/getTemplate/",{template:K}).then(N=>{var W;l.value.content=N.data.content,(W=a.value)==null||W.setContent(l.value.content)}).catch(N=>{}).finally(()=>{s.value=!1})},S=()=>{var L;(L=a.value)==null||L.setContent("")},E=()=>{s.value=!0,e.$get("email-notification/get-short-codes").then(L=>{c.value=L.data.shortcodes,v.value=L.data.email_templates,b.value=Object.keys(L.data.buttons).map(K=>({[K]:L.data.buttons[K]}))}).catch(L=>{}).finally(()=>{s.value=!1})},V=L=>{L.preventDefault(),w.value={},s.value=!0,e.$post("email-notification/create",l.value).then(K=>{e.handleSuccess(K)}).catch(K=>{var N;K.status_code=="422"?(J.validationErrors(K),w.value=K.data):J.error((N=K.data)==null?void 0:N.message)}).finally(()=>{s.value=!1})};T(!1);const $=()=>{n.value=!0,A.value=l.value.content};pe(()=>{E()});const O=L=>{g=L},D=L=>{w.value&&w.value.hasOwnProperty(L)&&delete w.value[L]},Q=()=>{l.value.to=F.value},I=()=>{l.value.from=B.value};return(L,K)=>{const N=y("el-switch"),W=y("el-dialog"),R=y("el-input"),ee=y("el-form-item"),oe=y("el-option"),Ae=y("el-select"),ue=y("el-col"),P=y("el-row"),G=y("el-tooltip"),z=y("el-button"),j=y("el-form");return d(),U(se,null,{default:r(()=>[o(le,{title:l.value.title?l.value.title:"Add Notification",title_size:"small",border_bottom:"",icon:"Message"},{action:r(()=>[o(N,{"active-value":"yes","inactive-value":"no",modelValue:l.value.enabled,"onUpdate:modelValue":K[0]||(K[0]=Z=>l.value.enabled=Z),"active-text":l.value.enabled=="yes"?L.$t("Enabled"):L.$t("Enable")},null,8,["modelValue","active-text"])]),_:1},8,["title"]),o(ae,null,{default:r(()=>[o(W,{modelValue:n.value,"onUpdate:modelValue":K[1]||(K[1]=Z=>n.value=Z),title:L.$t("Preview")},{default:r(()=>[i("div",{innerHTML:A.value},null,8,uH)]),_:1},8,["modelValue","title"]),o(j,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(ee,{label:L.$t("Notification Name"),required:""},{default:r(()=>{var Z,_e;return[o(R,{modelValue:l.value.title,"onUpdate:modelValue":K[2]||(K[2]=he=>l.value.title=he),onFocus:K[3]||(K[3]=he=>D("title"))},null,8,["modelValue"]),o(Wa,{"validation-errors":(_e=(Z=w.value)==null?void 0:Z.title)==null?void 0:_e.required},null,8,["validation-errors"])]}),_:1},8,["label"]),o(ee,{label:L.$t("Select notification event"),required:""},{default:r(()=>{var Z,_e;return[o(Ae,{multiple:!0,modelValue:l.value.events,"onUpdate:modelValue":K[4]||(K[4]=he=>l.value.events=he),placeholder:L.$t("Select Events"),onFocus:K[5]||(K[5]=he=>D("events")),clearable:""},{default:r(()=>[(d(!0),_(H,null,q(u.value,he=>(d(),U(oe,{key:he.value,label:he.label,value:he.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),o(Wa,{"validation-errors":(_e=(Z=w.value)==null?void 0:Z.events)==null?void 0:_e.required},null,8,["validation-errors"])]}),_:1},8,["label"]),o(P,{gutter:15},{default:r(()=>[o(ue,{lg:12},{default:r(()=>[o(ee,{label:L.$t("Mail From:"),required:""},{default:r(()=>{var Z,_e;return[o(R,{modelValue:l.value.from,"onUpdate:modelValue":K[8]||(K[8]=he=>l.value.from=he),onFocus:K[9]||(K[9]=he=>D("from")),placeholder:L.$t("Select a Field or Type Custom Value")},{append:r(()=>[o(Ae,{modelValue:B.value,"onUpdate:modelValue":K[6]||(K[6]=he=>B.value=he),onChange:K[7]||(K[7]=he=>I()),clearable:""},{default:r(()=>[(d(!0),_(H,null,q(m.value,he=>(d(),U(oe,{key:he.value,label:he.label,value:he.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","placeholder"]),o(Wa,{"validation-errors":(_e=(Z=w.value)==null?void 0:Z.from)==null?void 0:_e.required},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1}),o(ue,{lg:12},{default:r(()=>[o(ee,{label:L.$t("Send Mail To:"),required:""},{default:r(()=>{var Z,_e;return[o(R,{modelValue:l.value.to,"onUpdate:modelValue":K[12]||(K[12]=he=>l.value.to=he),onFocus:K[13]||(K[13]=he=>D("to"))},{append:r(()=>[o(Ae,{modelValue:F.value,"onUpdate:modelValue":K[10]||(K[10]=he=>F.value=he),onChange:K[11]||(K[11]=he=>Q()),clearable:""},{default:r(()=>[(d(!0),_(H,null,q(m.value,he=>(d(),U(oe,{key:he.value,label:he.label,value:he.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),o(Wa,{"validation-errors":(_e=(Z=w.value)==null?void 0:Z.to)==null?void 0:_e.required},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1})]),_:1}),o(ee,{label:L.$t("Cc:")},{default:r(()=>[o(R,{modelValue:l.value.cc,"onUpdate:modelValue":K[14]||(K[14]=Z=>l.value.cc=Z)},null,8,["modelValue"])]),_:1},8,["label"]),o(ee,{label:L.$t("Mail Subject:"),required:""},{default:r(()=>{var Z,_e;return[o(R,{modelValue:l.value.subject,"onUpdate:modelValue":K[15]||(K[15]=he=>l.value.subject=he),onFocus:K[16]||(K[16]=he=>D("subject"))},null,8,["modelValue"]),o(Wa,{"validation-errors":(_e=(Z=w.value)==null?void 0:Z.subject)==null?void 0:_e.required},null,8,["validation-errors"])]}),_:1},8,["label"]),i("div",null,[o(Ks,{ref_key:"wpEditor",ref:a,"short-codes":c.value,buttons:b.value,onOnEditorReady:O,onUpdate:K[19]||(K[19]=Z=>{l.value.content=Z}),modelValue:l.value.content,"onUpdate:modelValue":K[20]||(K[20]=Z=>l.value.content=Z)},{action:r(()=>[i("div",cH,[o(Ae,{onChange:K[17]||(K[17]=Z=>{var _e;(_e=a.value)==null||_e.setContent(Z)}),placeholder:L.$t("Select button"),clearable:""},{default:r(()=>[(d(!0),_(H,null,q(b.value,(Z,_e)=>(d(),U(oe,{key:_e,label:Object.keys(Z)[0],value:Object.values(Z)[0]},null,8,["label","value"]))),128))]),_:1},8,["placeholder"])]),i("div",fH,[o(Ae,{onChange:K[18]||(K[18]=Z=>{k(Z)}),placeholder:L.$t("Select template"),clearable:""},{default:r(()=>[(d(!0),_(H,null,q(v.value,(Z,_e)=>(d(),U(oe,{key:_e,label:Z.label,value:Z.path},null,8,["label","value"]))),128))]),_:1},8,["placeholder"]),i("span",null,[o(G,{effect:"dark",content:L.$t("Reset Template"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(Be,{onClick:Ke(S,["prevent"]),tag:"button"},{default:r(()=>[o(Y,{name:"Refresh"})]),_:1})]),_:1},8,["content"])])])]),preview_button:r(()=>[p(g)!==null?(d(),U(G,{key:0,effect:"dark",content:L.$t("Preview Template"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(Be,{onClick:Ke($,["prevent"]),tag:"button"},{default:r(()=>[o(Y,{name:"Eye"})]),_:1})]),_:1},8,["content"])):x("",!0)]),_:1},8,["short-codes","buttons","modelValue"])]),i("div",pH,[o(z,{onClick:V,type:"primary",disabled:s.value,loading:s.value},{default:r(()=>[M(h(L.$t("Save Notification")),1)]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1})}}};class hH extends gn{getTabs(){return{all:f("All"),success:f("Success"),warning:f("Warning"),error:f("Error"),failed:f("Failed"),info:f("Info"),api:f("API Only")}}getToggleableColumns(){return[{label:"Title",value:"title"},{label:"Content",value:"content"},{label:"Date",value:"date"},{label:"Actions",value:"actions"}]}getSortableColumns(){return[{label:f("ID"),value:"id"},{label:f("Title"),value:"title"},{label:f("Created At"),value:"created_at"}]}getSearchHint(){return f("Search by id, title, content or module.")}getFetchUrl(){return"activity"}parseResponse(e){return e.activities}getTableName(){return"log_table"}getAdvanceFilterOptions(){return null}getSearchGuideOptions(){return[]}}function _H(t){return hH.init(t)}const gH={class:"fct-table-mobile-wrap fct-logs-table-mobile-wrap"},vH={class:"fct-table-mobile-header"},yH={class:"fct-table-date-col"},bH={class:"mark-read-unread-wrap"},wH=["onClick","title"],BH=["onClick","title"],CH=["title"],kH={class:"fct-table-mobile-body"},FH={key:0,class:"fct-table-title-col"},xH={key:1,class:"fct-table-content-col"},UH={class:"fct-table-mobile-footer"},EH={class:"fct-table-mobile-footer-row"},SH={class:"fct-table-status-col"},QH={class:"title"},DH={class:"fct-table-module-col"},$H={class:"title"},IH={class:"value"},TH={key:0,class:"fct-table-actions-col"},MH={class:"title"},VH={__name:"LogsTableMobile",props:{table:{type:Object}},emits:["changeStatus"],setup(t,{emit:e}){const a=e,s=(n,l)=>{a("changeStatus",n,l)};return(n,l)=>{const A=y("el-icon"),u=y("router-link");return d(),_("div",gH,[(d(!0),_(H,null,q(t.table.getTableData(),(c,m)=>(d(),_("div",{key:c.id,class:"fct-table-mobile-row"},[i("div",vH,[i("div",yH,[i("div",bH,[c.read_status!=="unread"?(d(),_("span",{key:0,onClick:v=>s(c,"unread"),title:p(f)("Mark as unread")},[o(A,null,{default:r(()=>[o(p(rl))]),_:1})],8,wH)):(d(),_("span",{key:1,onClick:v=>s(c,"read"),title:p(f)("Mark as read")},[o(A,null,{default:r(()=>[o(p(Vl))]),_:1})],8,BH))]),i("div",{title:p(f)("Logs ID: %s",c.id),class:"invoice-no"}," #"+h(c.id),9,CH),t.table.isColumnVisible("date")?(d(),_(H,{key:0},[l[0]||(l[0]=i("span",{class:"bullet"},"",-1)),o(Vt,{class:"date","date-time":c.created_at,"with-time":!0},null,8,["date-time"])],64)):x("",!0)])]),i("div",kH,[t.table.isColumnVisible("title")?(d(),_("div",FH,h(c.title),1)):x("",!0),t.table.isColumnVisible("content")?(d(),_("div",xH,h(c.content),1)):x("",!0)]),i("div",UH,[i("div",EH,[i("div",SH,[i("div",QH,h(p(f)("Status")),1),(d(),U(dt,{status:c.status,size:"small",key:c.id},null,8,["status"]))]),i("div",DH,[i("div",$H,h(p(f)("Module")),1),i("div",IH,h(c.module_name),1)]),t.table.isColumnVisible("actions")?(d(),_("div",TH,[i("div",MH,h(p(f)("Actions")),1),o(u,{class:"value",to:{name:"view_order",params:{order_id:c.module_id}}},{default:r(()=>[M(h(p(f)("View Order")),1)]),_:2},1032,["to"])])):x("",!0)])])]))),128))])}}},LH={},OH={class:"px-4 py-3"},HH={class:"grid grid-cols-3 gap-5 mt-5"};function RH(t,e){const a=y("el-skeleton-item"),s=y("el-skeleton");return d(),U(s,{animated:""},{template:r(()=>[i("div",OH,[(d(),_(H,null,q(2,n=>i("div",{key:n,class:"flex items-center justify-between mb-3"},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64)),i("div",HH,[(d(),_(H,null,q(3,n=>i("div",{key:n},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const PH=ye(LH,[["render",RH]]),KH={class:"table-cell"},NH={class:"table-cell"},GH={class:"table-cell"},jH={class:"table-cell"},zH={class:"table-cell"},YH={class:"table-cell"},qH={class:"table-cell"},WH={__name:"LogsLoader",props:{nextPageCount:{type:Number,default:0},logTable:{type:Object,default:()=>({})}},setup(t){const e=t,a=Array.from({length:e.nextPageCount},(s,n)=>n+1);return(s,n)=>{const l=y("el-skeleton-item"),A=y("el-skeleton"),u=y("el-table-column"),c=y("el-table");return d(),U(c,{data:p(a),class:"w-full compact-table full-compact"},{default:r(()=>[o(u,{width:100,label:p(f)("ID")},{default:r(()=>[i("div",KH,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"]),t.logTable.isColumnVisible("date")?(d(),U(u,{key:0,label:p(f)("Date"),width:120},{default:r(()=>[i("div",NH,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),t.logTable.isColumnVisible("title")?(d(),U(u,{key:1,label:p(f)("Title"),width:200},{default:r(()=>[i("div",GH,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),t.logTable.isColumnVisible("content")?(d(),U(u,{key:2,label:p(f)("Content"),width:200},{default:r(()=>[i("div",jH,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),o(u,{label:p(f)("Status"),width:100},{default:r(()=>[i("div",zH,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"]),o(u,{label:p(f)("Module"),width:100},{default:r(()=>[i("div",YH,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"]),t.logTable.isColumnVisible("actions")?(d(),U(u,{key:3,label:p(f)("Actions"),width:100},{default:r(()=>[i("div",qH,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])}}},XH={class:"fct-all-logs-page fct-layout-width"},JH={key:1},ZH={class:"inline-flex items-center gap-1"},eR=["onClick","title"],tR=["onClick","title"],aR={__name:"Logs",setup(t){const e=Xe().ctx,a=_H(),s=T([]),n=(l,A)=>{e.$put("activity/"+l.id+"/mark-read",{id:l.id,status:A}).then(u=>{s.value.find(c=>c.id===l.id).read_status=A,e.handleSuccess(u)}).catch(u=>{var c;u.status_code=="422"?J.validationErrors(u):J.error((c=u.data)==null?void 0:c.message)})};return a.onDataLoaded(function(){s.value=a.getTableData()}),(l,A)=>{const u=y("el-icon"),c=y("el-table-column"),m=y("el-button"),v=y("el-table");return d(),_("div",XH,[o(Ps,{title:p(f)("Logs")},null,8,["title"]),o(vn,{table:p(a),classicTabStyle:!0,"has-mobile-slot":!0},{mobile:r(()=>[p(a).isLoading()?(d(),U(PH,{key:0})):x("",!0),p(a).isLoading()?x("",!0):(d(),U(VH,{key:1,table:p(a),onChangeStatus:n},null,8,["table"]))]),default:r(()=>[p(a).isLoading()?(d(),U(WH,{key:0,logTable:p(a),"next-page-count":p(a).nextPageCount},null,8,["logTable","next-page-count"])):(d(),_("div",JH,[o(v,{class:"w-full",data:p(a).getTableData()},{empty:r(()=>[o(Le,{icon:"Empty/ListView",text:p(f)("We could't find any logs matching your filter.")},null,8,["text"])]),default:r(()=>[o(c,{label:p(f)("ID"),width:100},{default:r(b=>[i("div",ZH,[b.row.read_status!=="unread"?(d(),_("span",{key:0,onClick:g=>n(b.row,"unread"),title:p(f)("Mark as unread"),class:"cursor-pointer"},[o(u,null,{default:r(()=>[o(p(rl))]),_:1})],8,eR)):(d(),_("span",{key:1,onClick:g=>n(b.row,"read"),title:p(f)("Mark as read"),class:"cursor-pointer"},[o(u,null,{default:r(()=>[o(p(Vl))]),_:1})],8,tR)),M(" #"+h(p(Mt)(b.row.id)),1)])]),_:1},8,["label"]),p(a).isColumnVisible("date")?(d(),U(c,{key:0,label:p(f)("Date"),width:120},{default:r(b=>[o(Vt,{"date-time":b.row.created_at},null,8,["date-time"])]),_:1},8,["label"])):x("",!0),p(a).isColumnVisible("title")?(d(),U(c,{key:1,label:p(f)("Title"),width:200},{default:r(b=>[M(h(b.row.title),1)]),_:1},8,["label"])):x("",!0),p(a).isColumnVisible("content")?(d(),U(c,{key:2,label:p(f)("Content"),width:200},{default:r(b=>[M(h(b.row.content),1)]),_:1},8,["label"])):x("",!0),o(c,{label:p(f)("Status"),width:100},{default:r(b=>[(d(),U(dt,{status:b.row.status,size:"small",key:b.row.id},null,8,["status"]))]),_:1},8,["label"]),o(c,{label:p(f)("Module"),width:100},{default:r(b=>[M(h(b.row.module_name),1)]),_:1},8,["label"]),p(a).isColumnVisible("actions")?(d(),U(c,{key:3,label:p(f)("Actions"),width:100},{default:r(b=>[o(m,{tag:"router-link",class:"el-button--x-small",to:{name:"view_order",params:{order_id:b.row.module_id}}},{default:r(()=>[M(h(p(f)("View Order")),1)]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])]))]),_:1},8,["table"])])}}},sR={class:"fct-report-nav-links-wrap"},nR={class:"fct-report-nav-links-toggle"},oR={__name:"ReportNavLinks",setup(t){const e=Fa(),a=Wt(),s=T(null),n=T([]),l=T(null),A=T(null),u=T(!1),c=[{route:"reports_overview",label:f("Overview"),url:"/reports/overview"},{route:"reports_sales",label:f("Sales"),url:"/reports/sales"},{route:"reports_orders",label:f("Orders"),url:"/reports/orders"},{route:"reports_revenue",label:f("Revenue"),url:"/reports/revenue"},{route:"reports_refunds",label:f("Refunds"),url:"/reports/refunds"},{route:"reports_subscriptions",label:f("Subscriptions"),url:"/reports/subscriptions",child:[{route:"future_renewals",label:f("Future Renewals"),url:"/reports/subscriptions/future-renewals"}]},{route:"reports_products",label:f("Products"),url:"/reports/products"},{route:"reports_customer",label:f("Customers"),url:"/reports/customer"},{route:"reports_sources",label:f("Sources"),url:"/reports/sources"}],m=()=>{u.value=window.innerWidth<1025,v()},v=()=>{if(!s.value||!A.value)return;const w=c.findIndex(E=>E.route===a.name);if(w===-1)return;const C=n.value[w];if(!C)return;const k=A.value.getBoundingClientRect(),S=C.$el.getBoundingClientRect();u.value?(s.value.style.width=`${S.width}px`,s.value.style.height="3px",s.value.style.left=`${S.left-k.left}px`,s.value.style.top=`${S.top-k.top+S.height}px`):(s.value.style.width=`${S.width}px`,s.value.style.height="2px",s.value.style.left="0px",s.value.style.top="auto",s.value.style.transform=`translateX(${S.left-k.left}px)`)},b=()=>{A.value.classList.toggle("is-active"),v()},g=w=>{const C=a.path;return!!(w.child&&w.child.length&&w.child.some(S=>C===S.url||C.includes(S.url))||C===w.url||C.includes(w.url))},F=(w,C,k)=>a.path===w.url,B=w=>{e.push({name:w.route});const C=document.querySelector("#fct-report-body");C&&(C.scrollTop=0)};return ce(()=>a.name,()=>{v()},{immediate:!0}),pe(()=>{l.value=document.querySelector(".fct_admin_menu_wrap"),m(),window.addEventListener("resize",v)}),(w,C)=>{const k=y("el-button");return d(),_("div",sR,[i("div",nR,[o(k,{onClick:b},{default:r(()=>[M(h(p(f)("Reports")),1)]),_:1})]),i("div",{class:"fct-report-nav-links",ref_key:"reportNavLinks",ref:A},[i("div",{class:"fct-report-nav-links-overlay",onClick:b}),o(_f,null,{default:r(()=>[o(gf,{class:"is-open"},{default:r(()=>[(d(),_(H,null,q(c,(S,E)=>o(Ul,{key:E,class:ne({"fct-tab-item-active":g(S)})},{default:r(()=>[o(El,{onClick:V=>B(S)},{default:r(()=>[S.icon?(d(),U(Y,{key:0,name:S.icon},null,8,["name"])):x("",!0),M(" "+h(S.label)+" ",1),o(Y,{name:"ChevronRight",class:"tab-icon-right"})]),_:2},1032,["onClick"]),o(na,{accordion:"",visible:g(S)&&S.child,class:"fct-settings-menu-child-wrap"},{default:r(()=>[(d(!0),_(H,null,q(S.child,(V,$)=>(d(),U(Ul,{key:$,class:ne({"fct-tab-item-active":F(V,$,S)})},{default:r(()=>[o(El,{onClick:O=>B(V)},{default:r(()=>[M(h(V.label),1)]),_:2},1032,["onClick"])]),_:2},1032,["class"]))),128))]),_:2},1032,["visible"])]),_:2},1032,["class"])),64))]),_:1})]),_:1})],512)])}}},lR={class:"fct-report-header-top"},rR={class:"fct-report-header-top-inner"},iR={__name:"ReportFilterHeader",props:{filterState:{type:[Object]}},setup(t){const e=Wt();t.filterState;const s=T(null),n=T(0),l=()=>{const u=document.querySelector(".fct_admin_menu_wrap");if(u&&s.value){const c=u.offsetHeight;n.value=c+32,s.value.style.top=`${n.value}px`}},A=()=>{s.value&&(window.scrollY>0?s.value.classList.add("is-fixed"):s.value.classList.remove("is-fixed"))};return X(()=>!["reports_overview","reports_customer"].includes(e.name)),pe(()=>{l(),window.addEventListener("scroll",A),window.addEventListener("resize",l)}),je(()=>{window.removeEventListener("scroll",A),window.removeEventListener("resize",l)}),(u,c)=>(d(),_("div",{class:"fct-report-header",ref_key:"reportHeaderWrap",ref:s},[i("div",lR,[i("div",rR,[o(oR)])])],512))}},AR=["title"],dR={__name:"RemoveButton",props:{filterKey:{type:String,required:!0},itemId:{type:[String,Number],default:null}},emits:["remove"],setup(t,{emit:e}){const a=t,s=e,n=()=>{s("remove",{filterKey:a.filterKey,itemId:a.itemId})};return(l,A)=>(d(),_("button",{class:"fct-applied-filter-remove",onClick:n,title:l.$t("Remove")},[o(Y,{name:"Close"})],8,AR))}},uR={__name:"StatusFilter",props:{filterState:{type:[Object]},filterItem:{type:Object,required:!0},filterItemKey:{type:String,required:!0}},setup(t){const a=t.filterState;return(s,n)=>{const l=y("el-option"),A=y("el-select");return d(),U(A,{modelValue:p(a).data.selectedFilters[t.filterItemKey].value,"onUpdate:modelValue":n[0]||(n[0]=u=>p(a).data.selectedFilters[t.filterItemKey].value=u),placeholder:s.$t("Select Status"),filterable:"",onChange:p(a).applyFilterChange,"popper-class":"fct-dropdown-compact",size:"small"},{default:r(()=>[(d(!0),_(H,null,q(t.filterItem.options,u=>(d(),U(l,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])}}},Tf={__name:"DateRangeFilter",props:{modelValue:Array,type:{type:String,default:"daterange"},separator:{type:String,default:"-"},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},unlinkPanels:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},placement:{type:String,default:"bottom-end"},showArrow:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},filterState:{type:[Object]}},emits:["update:modelValue","change"],setup(t,{emit:e}){const a=t,s=e,n=a.filterState,l=T(null);let A=null;const u=X({get:()=>a.modelValue,set:w=>s("update:modelValue",w)}),c=X(()=>$e.get("app_config.isProActive"));function m(w){s("change",w)}function v(w){w.querySelectorAll(".el-date-table td span, .el-year-table td span, .el-month-table td span, .el-date-picker__header-label").forEach(k=>{k.textContent&&/\d/.test(k.textContent)&&!k.dataset.translated&&(k.textContent=Mt(k.textContent),k.dataset.translated="true")})}function b(w){w&&(v(w),A=new MutationObserver(C=>{v(w)}),A.observe(w,{childList:!0,subtree:!0}))}function g(){A&&(A.disconnect(),A=null)}function F(w){w?de(()=>{const C=document.querySelector(".el-picker-panel");C&&b(C);const k=document.querySelectorAll(".el-picker-panel__shortcut");k.forEach(S=>{S.addEventListener("click",()=>{k.forEach(E=>E.classList.remove("active")),S.classList.add("active")})})}):g()}function B(){n.data.dateRange=[lt.withTimezone(Ce().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),lt.withTimezone(Ce().format("YYYY-MM-DD 23:59:59"))],s("change",n.data.dateRange)}return ks(()=>{g()}),(w,C)=>{const k=y("el-date-picker"),S=Et("translate-numbers");return d(),_("div",{class:ne(`fct-date-range-filter ${t.clearable?"is-clearable":""}`)},[At(o(k,{ref_key:"datePickerRef",ref:l,modelValue:u.value,"onUpdate:modelValue":C[0]||(C[0]=E=>u.value=E),type:t.type,"range-separator":t.separator,"start-placeholder":t.startPlaceholder||p(f)("Start date"),"end-placeholder":t.endPlaceholder||p(f)("End date"),"unlink-panels":t.unlinkPanels,clearable:t.clearable,shortcuts:p(xu),onChange:m,onVisibleChange:F,placement:t.placement,disabled:t.disabled||!c.value},null,8,["modelValue","type","range-separator","start-placeholder","end-placeholder","unlink-panels","clearable","shortcuts","placement","disabled"]),[[S,"translate-numbers"]]),t.showArrow?(d(),U(Y,{key:0,name:"ChevronDown",class:"fct-applied-filter-expand-icon"})):x("",!0),c.value&&t.clearable?(d(),U(Y,{key:1,onClick:B,name:"CircleClose",class:"fct-applied-filter-clear-all"})):x("",!0)],2)}}},Mf={__name:"CurrencyFilter",props:{modelValue:String,currencies:{type:Array,required:!0}},emits:["update:modelValue","change"],setup(t,{emit:e}){const a=t,s=e,n=X({get:()=>a.modelValue,set:A=>s("update:modelValue",A)}),l=A=>{s("change",A)};return(A,u)=>{const c=y("el-option"),m=y("el-select");return d(),U(m,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=v=>n.value=v),placeholder:A.$t("Select Currency"),filterable:"",onChange:l,"popper-class":"fct-dropdown-compact",size:"small"},{default:r(()=>[(d(!0),_(H,null,q(t.currencies,(v,b)=>(d(),U(c,{key:b,label:v.label,value:v.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])}}},cR={__name:"ResetFilters",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(d(),_("button",{onClick:n[0]||(n[0]=(...l)=>p(a).resetFilters&&p(a).resetFilters(...l)),class:"reset-filters-btn"},h(s.$t("Reset Filters")),1))}},fR={__name:"MultiselectFilter",props:{filterState:{type:[Object]},filterItem:{type:Object,required:!0},filterItemKey:{type:String,required:!0}},setup(t){const e=t,a=e.filterState,s=X({get:()=>{var n;return((n=a.data.selectedFilters[e.filterItemKey])==null?void 0:n.value)??[]},set:n=>{a.setMultiSelectChange(e.filterItemKey,n)}});return(n,l)=>{const A=y("el-option"),u=y("el-select");return d(),U(u,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=c=>s.value=c),placeholder:n.$t("Select Order Type"),multiple:"",filterable:"","popper-class":"fct-dropdown-compact fct-multi-select-filter",size:"small"},{default:r(()=>[(d(!0),_(H,null,q(t.filterItem.options,c=>(d(),U(A,{key:c.value,label:c.label,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])}}},pR={class:"fct-compare-to-filter"},mR={class:"fct-applied-filter-label"},hR={class:"fct-applied-filter-actions"},_R={class:"fct-compare-to-select"},gR={class:"fct-compare-to-date"},vR={__name:"CompareToFilter",props:{filterState:{type:[Object]}},emits:["selectChange","dateChange"],setup(t,{emit:e}){const a=t,s=e,n=a.filterState,l=X({get:()=>{var c;return((c=n.data.selectedFilters.compareType)==null?void 0:c.value)??n.data.compareType},set:c=>{n.setCompareTypeChange(c),s("selectChange",c)}}),A=X({get:()=>{var c;return((c=n.data.selectedFilters.compareDate)==null?void 0:c.value)??n.data.compareDate},set:c=>{n.setCompareDateChange(c),s("dateChange",c)}}),u=X(()=>$e.get("app_config.isProActive"));return(c,m)=>{const v=y("el-option"),b=y("el-select"),g=y("el-date-picker");return d(),_("div",pR,[i("div",mR,h(p(f)("Compare to")),1),i("div",hR,[i("div",_R,[o(b,{modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=F=>l.value=F),"popper-class":"fct-dropdown-compact",disabled:!u.value},{default:r(()=>[o(v,{label:p(f)("Previous Period"),value:"previous_period"},null,8,["label"]),o(v,{label:p(f)("Previous Month"),value:"previous_month"},null,8,["label"]),o(v,{label:p(f)("Previous Quarter"),value:"previous_quarter"},null,8,["label"]),o(v,{label:p(f)("Previous Year"),value:"previous_year"},null,8,["label"]),o(v,{label:p(f)("Custom"),value:"custom"},null,8,["label"]),o(v,{label:p(f)("No Comparison"),value:"no_comparison"},null,8,["label"])]),_:1},8,["modelValue","disabled"])]),i("div",gR,[l.value==="custom"?(d(),U(g,{key:0,modelValue:A.value,"onUpdate:modelValue":m[1]||(m[1]=F=>A.value=F),type:"date",size:"small",placeholder:p(f)("Select Date")},null,8,["modelValue","placeholder"])):x("",!0)])])])}}},yR={style:{"flex-wrap":"wrap","row-gap":"4px",display:"flex","align-items":"center"}},bR={key:0},Vf={__name:"TreeSelectFilter",props:{filterState:{type:Object,required:!0}},setup(t){const a=t.filterState,s=T([]),n=T([]),l=T(!1),A=Xe().ctx,u=g=>{const F=Ge.get("product_variations");if(F&&(s.value=F),s.value.length&&!g){n.value=[...s.value];return}if(g&&s.value.length){n.value=s.value.filter(B=>B.label.toLowerCase().includes(g.toLowerCase()));return}l.value=!0,A.$get("products/searchVariantByName",{name:g}).then(B=>{s.value=B,n.value=B,Ge.set("product_variations",B)}).catch(()=>{}).finally(()=>{l.value=!1})},c=(g,F)=>{const B=F.checkedNodes||[];a.setTreeSelectItem(B)},m=g=>{a.removeTreeSelectItem(g)},v=()=>{a.clearTreeSelect()},b=X(()=>{let g={},F={};n.value.forEach(w=>{g[w.label]=w.children,w.children.forEach(C=>{F[C.value]={productName:w.label,variationName:C.label}})});let B={};return a.data.variation_ids.forEach(w=>{if(F[w]){let C=F[w];B[C.productName]||(B[C.productName]=[]),B[C.productName].push(C.variationName)}else B.Unknown||(B.Unknown=[]),B.Unknown.push(w)}),Object.keys(B).forEach(w=>{var C;B[w].length===((C=g[w])==null?void 0:C.length)&&(B[w]=[])}),B});return pe(()=>{const g=a.retrieveSavedReportFilters();g&&g.variation_ids&&(a.data.variation_ids=g.variation_ids),u("")}),(g,F)=>{const B=y("el-tag"),w=y("el-tree-select");return d(),U(w,{placeholder:g.$t("Select Products"),modelValue:p(a).data.variation_ids,"onUpdate:modelValue":F[0]||(F[0]=C=>p(a).data.variation_ids=C),data:n.value,"filter-method":p(Wi).debounce(u),filterable:"","show-checkbox":"",multiple:"",clearable:"",loading:l.value,onCheck:c,"popper-class":"fct-tooltip-long",onRemoveTag:m,onClear:v,size:"small"},{tag:r(()=>[i("div",yR,[(d(!0),_(H,null,q(b.value,(C,k)=>(d(),U(B,{style:{"margin-right":"4px"}},{default:r(()=>[M(h(k)+" ",1),C.length?(d(),_("span",bR," | "+h(C.join(", ")),1)):x("",!0)]),_:2},1024))),256))])]),_:1},8,["placeholder","modelValue","data","filter-method","loading"])}}},wR={class:"fct-applied-filters-wrap"},BR={class:"fct-applied-filter-list"},CR={class:"fct-applied-filter fct-applied-filter-date"},kR={class:"fct-applied-filter-label"},FR={class:"fct-applied-filter-value"},xR={key:0,class:"fct-applied-filter fct-applied-filter-compare-to"},UR={class:"fct-applied-filter-label"},ER={class:"fct-applied-filter-value"},SR={key:2,class:"fct-applied-filter-clear-wrap"},QR={__name:"AppliedFilters",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState,s=Wt(),n=({filterKey:c,itemId:m})=>{a.removeFilter(c,m)},l=c=>!(["dateRange","compareType","compareDate"].includes(c)||s.name==="reports_customer"),A=X(()=>["reports_revenue","reports_subscriptions","reports_products","reports_customer","reports_sales","reports_orders","reports_refunds","reports_sources"].includes(s.name)),u=X(()=>Object.keys(a.data.selectedFilters).filter(c=>!(c==="orderTypes"&&s.name==="reports_subscriptions")).reduce((c,m)=>(c[m]=a.data.selectedFilters[m],c),{}));return ce(a.data.dateRange,c=>{console.log("dateRange changed:",c)}),(c,m)=>(d(),_("div",wR,[i("ul",BR,[i("li",CR,[i("div",kR,h(c.$t("Date:")),1),i("div",FR,[o(Tf,{modelValue:p(a).data.dateRange,"onUpdate:modelValue":m[0]||(m[0]=v=>p(a).data.dateRange=v),placement:"bottom-start",reRenderDate:p(a).data.reRenderDate,showArrow:!0,size:"small",onChange:p(a).setDateRange,clearable:"",filterState:p(a)},null,8,["modelValue","reRenderDate","onChange","filterState"])])]),A.value?(d(),_("li",xR,[o(vR,{filterState:p(a)},null,8,["filterState"])])):x("",!0),Object.keys(u.value).length?(d(!0),_(H,{key:1},q(u.value,(v,b)=>(d(),_(H,{key:b},[l(b)?(d(),_("li",{key:0,class:ne(`fct-applied-filter ${b==="variation_ids"?"fct-applied-filter-variation":""} ${b==="orderTypes"?"fct-applied-filter-order-types":""}`)},[i("div",UR,h(v.label)+":",1),i("div",ER,[v.type==="list"?(d(),U(uR,{key:0,"filter-state":p(a),"filter-item":v,"filter-item-key":b},null,8,["filter-state","filter-item","filter-item-key"])):x("",!0),v.type==="multi-list"?(d(),U(fR,{key:1,"filter-state":p(a),"filter-item":v,"filter-item-key":b},null,8,["filter-state","filter-item","filter-item-key"])):b==="variation_ids"?(d(),U(Vf,{key:2,"filter-state":p(a)},null,8,["filter-state"])):b==="currency"?(d(),U(Mf,{key:3,modelValue:p(a).data.currency,"onUpdate:modelValue":m[1]||(m[1]=g=>p(a).data.currency=g),currencies:p(a).currencies,onChange:g=>{p(a).setSelectChange(g,{...v,value:b})}},null,8,["modelValue","currencies","onChange"])):x("",!0)]),b!=="variation_ids"?(d(),U(dR,{key:0,filterKey:b,itemId:b==="variation_ids"?v.value[0].id:null,onRemove:n},null,8,["filterKey","itemId"])):x("",!0)],2)):x("",!0)],64))),128)):x("",!0),Object.keys(u.value).length?(d(),_("li",SR,[o(cR,{"filter-state":p(a)},null,8,["filter-state"])])):x("",!0)])]))}},DR={class:"fct-filter-dropdown-header"},$R={key:0,class:"fct-filter-back-wrapper"},IR={class:"fct-filter-active-label"},TR={key:1,class:"fct-filter-dropdown-search-input"},MR={__name:"FilterHeader",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>{const l=y("el-input");return d(),_("div",DR,[p(a).data.activeFilter!=null?(d(),_("div",$R,[i("button",{class:"fct-filter-back-button",onClick:n[0]||(n[0]=A=>p(a).selectActiveFilter(null))},[o(Y,{name:"ArrowLeft"})]),i("span",IR,h(p(a).activeFilterOptions.label),1)])):(d(),_("div",TR,[o(l,{modelValue:p(a).data.searchQuery,"onUpdate:modelValue":n[1]||(n[1]=A=>p(a).data.searchQuery=A),placeholder:s.$t("Search Filter..."),clearable:""},null,8,["modelValue","placeholder"])]))])}}},VR={class:"fct-filter-dropdown-active-filter-list"},LR=["onClick"],OR={__name:"StatusList",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(d(),_("ul",VR,[(d(!0),_(H,null,q(p(a).activeFilterOptions.options,(l,A)=>(d(),_("li",{key:A,class:ne(["fct-filter-active-option-item",{"is-selected":p(a).isFilterOptionSelected(l)}])},[i("div",{class:"fct-filter-dropdown-active-button",onClick:u=>p(a).selectFilterOption(l)},h(l.label),9,LR)],2))),128))]))}},HR={class:"fct-filter-dropdown-active-filter-list is-multi-list"},RR=["onClick"],PR={__name:"MultiList",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(d(),_("ul",HR,[(d(!0),_(H,null,q(p(a).activeFilterOptions.options,(l,A)=>(d(),_("li",{key:A,class:ne(["fct-filter-active-option-item",{"is-selected":p(a).isFilterOptionSelectedMulti(l)}])},[i("div",{class:"fct-filter-dropdown-active-button",onClick:u=>p(a).selectFilterOptionMulti(l)},h(l.label),9,RR)],2))),128))]))}},KR={class:"fct-filter-dropdown-active-filter"},NR={__name:"SelectedFilters",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(d(),_("div",KR,[p(a).activeFilterOptions.type==="list"?(d(),U(OR,{key:0,"filter-state":p(a)},null,8,["filter-state"])):x("",!0),p(a).activeFilterOptions.type==="multi-list"?(d(),U(PR,{key:1,"filter-state":p(a)},null,8,["filter-state"])):x("",!0),p(a).activeFilterOptions.type==="date"?(d(),U(Tf,{key:2,modelValue:p(a).data.dateRange,"onUpdate:modelValue":n[0]||(n[0]=l=>p(a).data.dateRange=l),onChange:p(a).setDateRange},null,8,["modelValue","onChange"])):x("",!0),p(a).activeFilterOptions.type==="currency"?(d(),U(Mf,{key:3,modelValue:p(a).data.currency,"onUpdate:modelValue":n[1]||(n[1]=l=>p(a).data.currency=l),currencies:p(a).currencies,onChange:p(a).setSelectChange},null,8,["modelValue","currencies","onChange"])):x("",!0),p(a).activeFilterOptions.type==="tree-select"?(d(),U(Vf,{key:4,"filter-state":p(a)},null,8,["filter-state"])):x("",!0)]))}},GR={class:"fct-filter-dropdown-list"},jR=["onClick"],zR={key:1,class:"fct-filter-dropdown-list-item filter-not-found"},YR={__name:"FilterOptionList",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(d(),_("ul",GR,[p(a).visibleFilters.length?(d(!0),_(H,{key:0},q(p(a).visibleFilters,(l,A)=>(d(),_("li",{class:"fct-filter-dropdown-list-item",key:A},[i("div",{class:"fct-filter-dropdown-button",onClick:u=>p(a).selectActiveFilter(l)},[o(Y,{name:l.icon},null,8,["name"]),M(" "+h(l.label),1)],8,jR)]))),128)):(d(),_("li",zR,h(p(a).data.searchQuery?p(f)("No filter found"):p(f)("All filters selected")),1))]))}},qR={key:0,class:"fct-filter-dropdown"},WR={class:"fct-filter-dropdown-body"},XR={key:1},JR={__name:"FilterDropdown",props:{filterState:{type:[Object]}},setup(t){const e=t,a=T(null),s=e.filterState,n=$e.get("app_config.isProActive"),l=[{label:f("Order Type"),icon:"AppsLine",type:"multi-list",value:"orderTypes",disableRoutes:["reports_customer","reports_subscriptions"],options:[{label:f("All"),value:"all"},{label:f("One time"),value:"payment"},{label:f("Subscription"),value:"subscription"},{label:f("Renewal"),value:"renewal"}]},{label:f("Subscription Type"),icon:"Reload",type:"list",value:"subscriptionType",disableRoutes:["reports_revenue","reports_products","reports_customer","reports_sales","reports_refunds","reports_orders","reports_sales"],options:[{label:f("Active"),value:"subscription"},{label:f("Renewal"),value:"renewal"},{label:f("Expired"),value:"expired"},{label:f("Canceled"),value:"canceled"}]},{label:f("Currency"),icon:"Currency",type:"currency",value:"currency",disableRoutes:["reports_products","reports_customer","reports_subscriptions"]},{label:f("Products"),icon:"ListView",type:"tree-select",value:"variation_ids",disableRoutes:["reports_customer"]}];s.setFilterOption(l);const A=u=>{const c=a.value,m=u.target,v=document.querySelectorAll(".el-picker-panel"),b=Array.from(v).some(g=>g.contains(m));c!=null&&c.contains(m)||b||(s.data.searchQuery="",s.dropdownOpen&&s.toggleDropdown())};return pe(()=>{document.addEventListener("click",A)}),ks(()=>{document.removeEventListener("click",A)}),(u,c)=>(d(),_("div",{ref_key:"dropdownRef",ref:a,class:"fct-filter-dropdown-container",onClick:c[0]||(c[0]=Ke(()=>{},["stop"]))},[o(Be,{class:"fct-filter-dropdown-toggle-button",size:"small",tag:"button",onClick:p(s).toggleDropdown},{default:r(()=>[o(Y,{name:"Filter"})]),_:1},8,["onClick"]),o(zo,{name:"fade-scale","enter-active-class":"transition ease-out duration-200","leave-active-class":"transition ease-in duration-150","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:r(()=>[p(s).dropdownOpen?(d(),_("div",qR,[p(n)?(d(),_(H,{key:0},[o(MR,{"filter-state":p(s)},null,8,["filter-state"]),i("div",WR,[p(s).data.activeFilter!=null?(d(),U(NR,{key:0,"filter-state":p(s)},null,8,["filter-state"])):(d(),U(YR,{key:1,"filter-state":p(s)},null,8,["filter-state"]))])],64)):(d(),_("div",XR,[o(Hi,{class:"py-7.5",title:p(f)("Upgrade to Pro for filtering"),text:p(f)("This feature is only available in Webmakerr.")},null,8,["title","text"])]))])):x("",!0)]),_:1})],512))}},ZR={class:"fct-reports-view"},eP={class:"fct-reports-view-inner"},tP={class:"fct-report-body fct-layout-width",id:"fct-report-body"},aP={key:0,class:"fct-report-filter-wrap"},sP={key:1,class:"fct-report-filter-button"},nP={class:"fct-report-body-inner"},oP={__name:"ReportsView",setup(t){const e=tf(),a=Wt(),s=X(()=>Yt.data);e.onFilterChanged(c=>{A(c)});const n=X(()=>!["reports_overview","reports_customer","future_renewals","reports_sources"].includes(a.name)),l=X(()=>["reports_overview","reports","future_renewals"].includes(a.name));X(()=>$e.get("app_config.isProActive"));const A=c=>{Object.entries(c).forEach(([m,v])=>{let b=v.value;switch(v.type==="multi-list"&&(b=v.value.map(g=>g.value)),m){case"orderStatus":case"paymentStatus":case"currency":case"compareType":case"compareDate":case"subscriptionType":case"orderTypes":Yt.data[m]=b;break;case"dateRange":Yt.data.dateRange=v.value,Yt.data.rangeKey=v.rangeKey;break;case"variation_ids":Yt.data[m]=Array.isArray(v.value)?v.value.map(g=>g.id):[];break}}),Yt.onFilterChange()},u=()=>{var m,v;const c=e.retrieveSavedFilters();c?(e.data.selectedFilters={...c},((v=(m=c.dateRange)==null?void 0:m.value)==null?void 0:v.length)===2&&(e.data.dateRange=[c.dateRange.value[0],c.dateRange.value[1]])):e.data.selectedFilters={}};return pe(()=>{Yt.fetchReportMeta(),u()}),ks(()=>{Ge.remove("product_variations")}),(c,m)=>{const v=y("router-view");return d(),_("div",ZR,[i("div",eP,[o(iR,{filterState:p(e)},null,8,["filterState"]),i("div",tP,[!l.value||n.value?(d(),_("div",aP,[l.value?x("",!0):(d(),U(QR,{key:0,"filter-state":p(e)},null,8,["filter-state"])),!l.value&&n.value?(d(),_("div",sP,[o(JR,{"filter-state":p(e)},null,8,["filter-state"])])):x("",!0)])):x("",!0),i("div",nP,[o(hA),s.value.storeMode!==s.value.filterMode&&s.value.filterMode&&s.value.filterMode!==""?(d(),U(bs,{key:0,class:"mb-5 alert-yellow",icon:"InformationFill",content:c.$t(`Your store is in ${s.value.storeMode} mode but you are watching data in ${s.value.filterMode} mode.`)},null,8,["content"])):x("",!0),o(v,null,{default:r(({Component:b})=>[(d(),U(Oa(b),{reportFilter:p(Yt)},null,8,["reportFilter"]))]),_:1})])])])])}}},lP=ye(oP,[["__scopeId","data-v-dac6cb3e"]]),rP={__name:"lineChart",props:{xAxis:{type:Array,default:()=>[],required:!0},yAxis:{type:Array,default:()=>[],required:!0},lineColor:{type:String,default:"#42b983"},backgroundGradient:{type:Array,required:!0},chartTitle:{type:String,default:""},hasCurrency:{type:Boolean,default:!1}},setup(t){const e=t,a=T(null),s=(v,b,g,F)=>({name:v,type:b,data:g,smooth:!0,color:F,showSymbol:!0,areaStyle:{color:new Yr(0,0,0,1,e.backgroundGradient.map(B=>({offset:B.offset,color:B.color})))}}),n=()=>{const v=[];return v.push(s("","line",e.yAxis,e.lineColor)),v},l=v=>{const b=v.split("-");if(b.length===3){const[g,F,B]=b;return`${$a[parseInt(F)-1]} ${B}, ${g}`}else if(b.length===2){const[g,F]=b;return`${$a[parseInt(F)-1]} ${g}`}else if(b.length===1){const[g]=b;return`${g}`}},A=X(()=>e.xAxis.map(v=>l(v)));let u=null;const c=()=>{if(a.value&&u==null){u=ot(a.value);const v={title:{show:!1},tooltip:{trigger:"axis",valueFormatter:b=>e.hasCurrency?`${xe.scaled(b)}`:b},grid:{show:!1,left:"10%",right:"10%",bottom:"80%"},xAxis:{type:"category",data:A.value,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",axisLabel:{show:!1},splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},series:n()};u.setOption(v),window.addEventListener("resize",()=>{u.resize()})}},m=()=>{u&&u.setOption({xAxis:{data:e.xAxis},series:n()})};return ce(()=>[e.xAxis,e.yAxis],()=>{de(()=>{m()})}),pe(()=>{de(()=>{c()})}),(v,b)=>(d(),_("div",{style:{height:"70px"},ref_key:"chartRef",ref:a},null,512))}},iP=ye(rP,[["__scopeId","data-v-a7c199f1"]]);function Lf(t){return Number(t)>0}function _s(t){return Lf(t)?"text-red-500":""}function Ba(t,e=null){return(e!==null?e:Lf(t))?`(${xe.scaled(t)})`:xe.scaled(t)}const AP={class:"cursor-pointer"},zs={__name:"ReportSummary",props:{amount:{type:[Number,String],required:!0},placement:{type:String,default:"top"},title:{type:String,default:""}},setup(t){const e=t,a=X(()=>e.title?e.title+" "+e.amount:e.amount);return(s,n)=>{const l=y("el-tooltip");return d(),U(l,{effect:"dark",placement:t.placement,"popper-class":"fct-tooltip"},{content:r(()=>[i("span",null,h(a.value),1)]),default:r(()=>[i("span",AP,h(t.amount),1)]),_:1},8,["placement"])}}},ca={__name:"Fluctuation",props:{fluctuation:{type:[String,Number],required:!0},isLiability:{type:Boolean,default:!1},placement:{type:String,default:"top"},amount:{type:[String,Number],required:!1},title:{type:String,default:""},hasCurrency:{type:Boolean,default:!0},isPercentage:{type:Boolean,default:!1},fluctuationSuffix:{type:String,default:""}},setup(t){const e=t,a=X(()=>bt(e.fluctuation)),s=X(()=>(e.hasCurrency?xe.scaled:bt)(e.amount)),n=X(()=>(e.title?e.title:f("Previously"))+" "+s.value+(e.isPercentage?"%":"")),l=X(()=>{if(e.fluctuation===0)return"text-system-light";const u=e.fluctuation>0;return(e.isLiability?!u:u)?"text-success-500":"text-red-500"}),A=X(()=>e.fluctuation<0?"CaretDown":"CaretUp");return(u,c)=>{const m=y("el-tooltip");return d(),_("div",{class:ne(["percentage",l.value])},[t.fluctuation!==0?(d(),U(Y,{key:0,class:"w-2",name:A.value},null,8,["name"])):x("",!0),o(m,{effect:"dark",placement:t.placement,"popper-class":"fct-tooltip"},{content:r(()=>[i("span",null,h(n.value),1)]),default:r(()=>[i("span",{class:ne(["cursor-pointer",l.value])},[M(h(a.value)+"% ",1),t.fluctuationSuffix?(d(),_(H,{key:0},[M(h(t.fluctuationSuffix),1)],64)):x("",!0)],2)]),_:1},8,["placement"])],2)}}},dP={class:"fct-report-result"},uP={key:0,class:"fct-report-result-content"},cP={key:1,class:"fct-report-result-content"},fP={class:"title flex items-center gap-1"},pP={class:"value"},mP={class:"inline-flex"},hP={key:2,class:"fct-report-result-chart"},_P={key:3,class:"fct-report-result-chart"},gP={__name:"SummaryCards",props:{defaultReport:{type:Object,required:!0}},setup(t){const e=t;X(()=>reportFilter.currentCurrencySign),X(()=>defaultReport.data.isBusy.salesReport);const a=(c,m)=>{const v=parseInt(c.replace("#",""),16),b=v>>16&255,g=v>>8&255,F=v&255;return`rgba(${b}, ${g}, ${F}, ${m})`},s=me.colors.report,n=T([{title:f("Gross Sales"),key:"gross_sale",graph:"grossSaleGraph",lineColor:s.sea_green,backgroundGradient:[{offset:0,color:a(s.sea_green,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:f("The total sales you had in this period.")},{title:f("Refunds"),key:"total_refunded_amount",graph:"refundsGraph",lineColor:s.medium_slate_blue,backgroundGradient:[{offset:0,color:a(s.medium_slate_blue,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:f("Refunds made in this period. This is deducted from gross sales to calculate revenue."),liability:!0},{title:f("Revenue"),key:"net_revenue",graph:"netRevenueGraph",lineColor:s.royal_blue,backgroundGradient:[{offset:0,color:a(s.royal_blue,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:f("Gross sales less refunds, taxes, shipping, fees.")},{title:f("Orders"),key:"order_count",graph:"orderGraph",lineColor:s.medium_turquoise,backgroundGradient:[{offset:0,color:a(s.medium_turquoise,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:f("The total number of orders placed in this period.")},{title:f("Items"),key:"total_item_count",graph:"itemsSoldGraph",lineColor:s.deep_sky_blue,backgroundGradient:[{offset:0,color:a(s.deep_sky_blue,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:f("The total number of items sold in this period.")},{title:f("Total Refunds"),key:"total_refunded",graph:"refundCountGraph",lineColor:s.golden_rod,backgroundGradient:[{offset:0,color:a(s.golden_rod,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:f("Total refunds count including partially refunds.")}]),l=X(()=>n.value.map(c=>({...c,value:e.defaultReport.summaryData[c.key]||0,fluctuation:e.defaultReport.fluctuations[c.key]||0,graph:e.defaultReport.data.graphs[c.graph]||{},dataBusy:e.defaultReport.data.isBusy.salesReport||!1,graphBusy:e.defaultReport.data.isBusy.graphs[c.graph]||!1,liability:c.liability||!1}))),A=c=>["net_revenue","total_refunded_amount","gross_sale"].includes(c),u=c=>A(c.key)?Ba(c.value,c.liability):bt(c.value);return(c,m)=>{const v=y("el-skeleton"),b=y("el-tooltip"),g=y("el-skeleton-item"),F=y("el-col"),B=y("el-row");return d(),U(et,{permission:"reports/view"},{default:r(()=>[o(B,{gutter:16,class:"gap-y-4"},{default:r(()=>[(d(!0),_(H,null,q(l.value,(w,C)=>(d(),U(F,{lg:8,md:12,key:C},{default:r(()=>[o(uo,{class:"fct-report-summary-card h-[100px]"},{default:r(()=>[i("div",dP,[w.dataBusy?(d(),_("div",uP,[o(v,{animated:"",rows:1})])):(d(),_("div",cP,[i("div",fP,[M(h(w.title)+" ",1),o(b,{"popper-class":"fct-tooltip",content:w.info,placement:"top"},{default:r(()=>[o(Y,{class:"text-gray-500 w-4 cursor-pointer",name:"InformationFill"})]),_:2},1032,["content"])]),i("div",pP,[i("div",mP,[o(zs,{amount:u(w),title:w.title},null,8,["amount","title"])]),o(ca,{fluctuation:w.fluctuation,amount:t.defaultReport.data.previousSummary[w.key],"is-liability":w.liability,"has-currency":A(w.key)},null,8,["fluctuation","amount","is-liability","has-currency"])])])),w.dataBusy?(d(),_("div",hP,[o(v,{animated:"",class:"flex items-center justify-end"},{template:r(()=>[o(g,{variant:"circle",class:"w-12.5 h-12.5 flex-none"})]),_:1})])):x("",!0),!w.dataBusy&&Object.keys(w.graph).length>0?(d(),_("div",_P,[o(iP,{ref_for:!0,ref:"lineChart",xAxis:Object.keys(w.graph),yAxis:Object.values(w.graph),lineColor:w.lineColor,backgroundGradient:w.backgroundGradient,"has-currency":A(w.key)},null,8,["xAxis","yAxis","lineColor","backgroundGradient","has-currency"])])):x("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}};const vP={key:0,class:"fct-report-sold-product-list has-scroll"},yP={class:"list-left-content"},bP={class:"list-image"},wP=["src","alt"],BP=["src"],CP={class:"list-title"},kP={class:"list-title-inner"},FP={class:"list-id"},xP={class:"list-right-content"},UP={class:"list-value"},EP={class:"list-price"},SP={class:"inline-flex"},QP={__name:"TopSoldVariants",props:{defaultReport:{type:[Array,Object],required:!0}},setup(t){const e=Qa.data,a=X(()=>Qa.data.isBusy.topSoldVariants);return(s,n)=>{const l=y("el-skeleton"),A=y("router-link");return d(),U(et,{permission:"reports/view"},{default:r(()=>[o(uo,{class:"top-sold-variants","card-options":{heading:p(f)("Top Sold Variants")}},{default:r(()=>{var u,c;return[a.value?(d(),U(l,{key:0,animated:"",rows:7})):(d(),_(H,{key:1},[((c=(u=p(e))==null?void 0:u.topSoldVariants)==null?void 0:c.length)>0?(d(),_("ul",vP,[(d(!0),_(H,null,q(p(e).topSoldVariants,m=>(d(),_("li",{key:m.product_id},[o(A,{to:{name:"product_edit",params:{product_id:m.product_id}}},{default:r(()=>{var v;return[i("div",yP,[i("div",bP,[m.media_url!==null?(d(),_("img",{key:0,src:m.media_url,alt:(v=m.media)==null?void 0:v.title},null,8,wP)):(d(),_("img",{key:1,src:s.getPlaceholderImage(),alt:""},null,8,BP))]),i("div",CP,[i("div",kP,h(m.variation_name),1),i("div",FP,[i("strong",null,h(m.product_name),1)])])]),i("div",xP,[i("div",UP,h(m.quantity)+" "+h(p(f)(" Sold")),1),i("div",EP,[i("div",SP,h(p(xe).scaled(m.total_amount)),1)])])]}),_:2},1032,["to"])]))),128))])):(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no item!")},null,8,["text"]))],64))]}),_:1},8,["card-options"])]),_:1})}}},DP={key:0,class:"fct-btn-group sm"},$P={__name:"Sources",props:{data:{type:Object,required:!0}},setup(t){const e=t,a=me.colors,s=T(null),n=T(me.isDark()),l=T({}),A=w=>{const C=["#F6B51E","#855EF8","#47C2FF"],k=["#E6A819","#693EE0","#35ADE9"];return(n.value?k:C)[w]},u=X(()=>{if(typeof e.data.onetime_count===void 0)return[];if((e.data.onetime_count||0)===0&&(e.data.renewal_count||0)===0&&(e.data.subscription_count||0)===0)return[];const w={onetime:f("Onetime Payments"),renewal:f("Renewals"),subscription:f("Subscriptions")},C=e.data.order_count,k=[];return Object.keys(w).forEach((S,E)=>{k.push({name:w[S],value:e.data[S+"_count"]||0,gross:e.data[S+"_gross"]||0,net:e.data[S+"_net"]||0,percentage:C?(e.data[S+"_count"]/C*100).toFixed(2):0,color:A(E),visible:l.value[w[S]]!==!1})}),k}),c=X(()=>!u.value.length),m=X(()=>Qa.data.isBusy.salesReport),v=X(()=>u.value.filter(w=>l.value[w.name]!==!1).map((w,C)=>({value:w.value,name:w.name,gross:w.gross,net:w.net,itemStyle:{color:A(u.value.findIndex(k=>k.name===w.name))}})));let b=null;const g=()=>{b&&(b.dispose(),b=null),de(()=>{s.value&&(b=ot(s.value),F())})},F=()=>{if(!b)return;const w={title:{text:e.chartTitle??"",left:"center"},legend:{show:!1},tooltip:{trigger:"item",formatterr:"{b}: {c} ({d}%)",formatter:function(C){const k=n.value?"#ffffff":"#565865";return`
          <div style="font-weight: bold; margin-bottom: 4px;">
            ${C.marker} ${C.name} (${C.percent}%)
          </div>
          <div>
            <span style="color: ${k};">${f("Count")}</span>
            <span style="font-weight: bold; float: right; margin-left: 15px; color: ${k};">
              ${bt(C.value)}
            </span>
          </div>
          <div>
            <span style="color: ${k};">${f("Gross Sales")}</span>
            <span style="font-weight: bold; float: right; margin-left: 15px; color: ${k};">
              ${xe.scaled(C.data.gross)}
            </span>
          </div>
          <div>
            <span style="color: ${k};">${f("Revenue")}</span>
            <span style="font-weight: bold; float: right; margin-left: 15px; color: ${k};">
              ${xe.scaled(C.data.net)}
            </span>
          </div>
        `},borderRadius:8,backgroundColor:n.value?"#38485a":"#ffffff",textStyle:{color:n.value?a.gray[25]:a.system.mid},borderColor:n.value?"#4a5a6b":"#c0c4ca",borderWidth:1},series:[{type:"pie",center:["50%","50%"],data:v.value,label:{show:!0,color:n.value?a.gray[25]:a.system.dark},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};b.setOption(w,{notMerge:!0,replaceMerge:["series"]})};ce([()=>u.value],()=>{de(F)},{deep:!0}),ce(c,w=>{w||g()}),ce(m,w=>{w||g()});const B=w=>{n.value=me.isDark(),F()};return pe(()=>{window.addEventListener("onFluentCartThemeChange",B),de(g)}),je(()=>{window.removeEventListener("onFluentCartThemeChange",B)}),(w,C)=>{const k=y("el-skeleton");return d(),U(uo,{class:"sales-sources","card-options":{heading:p(f)("Sources")}},{action:r(()=>[c.value?x("",!0):(d(),_("div",DP,[o(St,{targetRef:s.value,size:"x-small"},null,8,["targetRef"])]))]),default:r(()=>[m.value?(d(),U(k,{key:0,animated:"",rows:7})):(d(),_(H,{key:1},[c.value?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("No relevant data to plot the chart")},null,8,["text"])):(d(),_("div",{key:0,class:"fct-report-order-completion-time-chart",ref_key:"chartRef",ref:s},null,512))],64))]),_:1},8,["card-options"])}}},IP={class:"fct-default-report-page"},TP={class:"page-heading-wrap flex items-center justify-between"},MP={class:"page-title"},VP={__name:"DefaultReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=T(e.reportFilter),s=async n=>{n&&(await Qa.getSalesReport(n),await Qa.getTopSoldProducts(n),await Qa.getTopSoldVariants(n))};return pe(()=>{a.value&&a.value.addListener("default-report",s)}),je(()=>{a.value&&a.value.removeListener("default-report")}),ce(()=>e.reportFilter,n=>{a.value&&a.value.removeListener("default-report"),a.value=n,a.value&&(a.value.addListener("default-report",s),s(a.value.applicableFilters))},{immediate:!0}),(n,l)=>{const A=y("el-col"),u=y("el-row");return d(),_("div",IP,[i("div",TP,[i("h1",MP,h(n.$t("Sales")),1)]),o(gP,{"default-report":p(Qa)},null,8,["default-report"]),o(u,{gutter:30,class:"gap-y-4 my-5"},{default:r(()=>[o(A,{lg:12},{default:r(()=>[o(af,{data:p(Qa).data.topSoldProducts,loading:p(Qa).data.isBusy.topSoldProducts},null,8,["data","loading"])]),_:1}),o(A,{lg:12},{default:r(()=>[o(QP,{"default-report":p(Qa)},null,8,["default-report"])]),_:1}),x("",!0)]),_:1}),o(u,{gutter:30,class:"gap-y-4 my-5"},{default:r(()=>[o(A,{lg:12},{default:r(()=>[o($P,{data:p(Qa).data.summaryData},null,8,["data"])]),_:1})]),_:1})])}}};class LP extends Xt{constructor(){super(...arguments);fe(this,"data",{order:["net_revenue","gross_sale","order_count","total_item_count","average_net","average_gross","average_order_items_count"],revenue:["Revenue","Gross Sales","Refund","Taxes","Shipping","Discount"],refund:["Total Refunds","Total Refunded Amount","Avg. Refunded Amount","Refund Rate","Total Paid"],product:["average_selling_price","units_sold","gross_sale","customer_count"]});fe(this,"storageKey","report-checkbox-filter");fe(this,"listeners",{})}beforeInit(){this.mergeWithStorage()}mergeWithStorage(){const a=Ge.get(this.storageKey);this.data.order=a.order??this.data.order,this.data.revenue=a.revenue??this.data.revenue,this.data.refund=a.refund??this.data.refund}addListener(a,s){this.listeners[a]=s}async onCheckBoxChange(a,s){const n=this.data[a];n.includes(s)?this.data[a]=n.filter(l=>l!==s):this.data[a].push(s),this.syncStorage();for(let l in this.listeners)this.listeners[l](this.applicableFilters)}syncStorage(){Ge.set(this.storageKey,this.applicableFilters.checkbox)}removeListener(a){delete this.listeners[a]}get applicableFilters(){return{checkbox:{order:this.data.order,revenue:this.data.revenue,refund:this.data.refund,product:this.data.product}}}}const Ka=LP.init(),OP={class:"fct-revenue-line-chart-wrap"},HP={class:"flex items-center gap-2"},RP={class:"fct-card-header-title is-small"},PP={class:"fct-chart-select"},KP={class:"fct-btn-group sm"},NP={key:2,class:"chart-action-wrap"},GP={class:"chart-change-wrap"},jP={class:"chart-change"},zP={class:"text"},YP={class:"chart-change"},qP={class:"text"},WP={__name:"RevenueLineChart",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},emits:["filter-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T(yt.getChartType("revenue","revenue_chart")||"line"),l=T(!1),A=me.colors.report,u=T(me.isDark()),c=(D,Q,I,L,K,N=!1)=>({name:D,type:Q,barMaxWidth:30,yAxisIndex:I,data:L,smooth:!1,color:K,hidden:N,lineStyle:{width:3},areaStyle:{opacity:.3,color:K},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:K,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:ea(K)},lineStyle:{color:K},areaStyle:{opacity:.3,color:K}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),m=T(a.appliedGroupKey);ce(()=>a.appliedGroupKey,D=>{m.value=D});const v=[{label:f("Default"),value:"default"},{label:f("Monthly"),value:"monthly"},{label:f("Yearly"),value:"yearly"}],b=e,g=()=>{b("filter-data",m.value)},F=X(()=>a.reportFilter.data.compareType!=="no_comparison"),B=X(()=>{let D=[{name:f("Current Revenue"),key:"net_revenue",type:n.value,color:u.value?A.dark_cyan_blue_36:A.light_gray_cyan_blue,data:a.chartData.map(Q=>Q.net_revenue)}];return F.value&&D.unshift({name:f("Compare Revenue"),key:"net_revenue",type:n.value,color:u.value?A.dark_cyan_blue_16:A.light_gray,data:a.compareData.map(Q=>({value:Q.net_revenue,date:Q.group})),hidden:!1}),D.map(Q=>c(Q.name,Q.type,0,Q.data,Q.color,Q.hidden))});let w=null;const C=()=>{w&&(w.dispose(),w=null),de(()=>{s.value&&(w=ot(s.value),E())})},k=X(()=>{const D=Gs(a.reportFilter.data.dateRange);return f("This report looks at the revenue you received ")+D}),S=X(()=>xa(a.chartData.length)),E=()=>{if(!w)return;const D=ns(a.chartData),Q={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:u.value?"#ffffff":"#000000"},selected:Object.fromEntries(B.value.map(I=>[I.name,!I.hidden]))},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?A.dark_cyan_blue_16:A.light_gray_blue}},alwaysShowContent:!1,valueFormatter:I=>`${xe.scaled(I)}`,formatter:I=>{let L="";const K=u.value?"#ffffff":"#565865";return I.forEach(function(N,W){const ee=typeof N.data=="object"&&N.data!==null?js(N.data.date):N.name,oe=xe.scaled(N.value),Ae=I.length>1&&W===0;Ae&&(L+='<div style="margin-bottom: 10px">'),L+=`<div>${ee}</div>`,L+=`<div>
            ${N.marker}
            <span style="color: ${K}">${N.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${K}">
              ${bt(oe)}
            </span>
          </div>`,Ae&&(L+="</div>")}),L}},grid:{show:!1},xAxis:{type:"category",data:D,axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12,interval:S.value.interval},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12,formatter:I=>`${xe.scaled(I)}`},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}},series:B.value};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},V=()=>{l.value=!l.value,l.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):E()},$=D=>{yt.onChange("revenue","revenue_chart",D),n.value!==D&&(l.value=!1,n.value=D,E())};ce([()=>a.chartData,m],()=>{de(E)},{deep:!0}),ce(()=>Ka.data.revenue,()=>{de(()=>{E()})},{deep:!0}),ce(()=>a.isEmpty,D=>{D||C()}),ce(()=>a.loading,D=>{D||C()});const O=()=>{u.value=me.isDark(),de(()=>{E()})};return je(()=>{window.removeEventListener("onFluentCartThemeChange",O,!1)}),pe(()=>{window.addEventListener("onFluentCartThemeChange",O),de(()=>{C()})}),(D,Q)=>{const I=y("el-tooltip"),L=y("el-option"),K=y("el-select"),N=y("el-skeleton");return d(),_("div",OP,[o(se,{id:"chartContainer"},{default:r(()=>[o(le,{title_size:"small",border_bottom:""},ut({title:r(()=>[i("div",HP,[i("h5",RP,h(p(f)("Revenue Chart")),1),o(I,{"popper-class":"fct-tooltip",content:k.value,placement:"top"},{default:r(()=>[o(Y,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),_:2},[!t.isEmpty&&!t.loading?{name:"action",fn:r(()=>[i("div",PP,[o(K,{class:"el-select--x-small",modelValue:m.value,"onUpdate:modelValue":Q[0]||(Q[0]=W=>m.value=W),onChange:g},{default:r(()=>[(d(),_(H,null,q(v,W=>o(L,{key:W.value,label:p(f)(W.label),value:W.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),i("div",KP,[o(Fs,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:$},null,8,["activeType"]),o(Be,{tag:"button",size:"small",title:p(f)("Zoom Chart"),onClick:V,class:ne(l.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(ae,{class:"px-0 pt-0"},{default:r(()=>[t.loading?(d(),U(N,{key:0,animated:"",rows:7,class:"p-4"})):(d(),_(H,{key:1},[t.isEmpty?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-chart-wrap fct-revenue-line-chart mt-3",ref_key:"chartRef",ref:s},null,512)),t.isEmpty?x("",!0):(d(),_("div",NP,[i("div",GP,[i("div",jP,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",zP,h(p(f)("Data")),1)]),i("div",YP,[i("span",qP,h(p(f)("Timeline")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},XP={props:{data:{type:Array,required:!0},filename:{type:String,default:"data.csv"}},components:{DynamicIcon:Y},methods:{exportCSV(){const e=(n=>{const l=m=>m.replace(/_/g," ").replace(/\b\w/g,v=>v.toUpperCase()),A=Object.keys(n[0]),c=[A.map(l).join(",")];return n.forEach(m=>{const v=A.map(b=>{let g=m[b];return typeof g=="object"&&(g=JSON.stringify(g)),typeof g=="string"&&(g=`"${g.replace(/"/g,'""')}"`),g});c.push(v.join(","))}),c.join(`
`)})(this.data),a=new Blob([e],{type:"text/csv"}),s=document.createElement("a");s.href=URL.createObjectURL(a),s.download=this.filename,s.click(),URL.revokeObjectURL(s.href)}}};function JP(t,e,a,s,n,l){const A=y("DynamicIcon"),u=y("el-button");return d(),U(u,{onClick:l.exportCSV,size:"small"},{default:r(()=>[o(A,{name:"Download"}),M(" "+h(t.$t("Export")),1)]),_:1},8,["onClick"])}const po=ye(XP,[["render",JP]]),ZP={class:"inline-flex"},eK={class:"inline-flex"},tK={class:"inline-flex"},aK={class:"inline-flex"},sK={class:"inline-flex"},nK={class:"inline-flex"},oK={name:"Revenue",props:{revenueReport:{type:Array,required:!0},appliedGroupKey:{type:String},loading:{type:Boolean,default:!0}},computed:{dateFormat(){if(!this.revenueReport.length)return"";const t=this.revenueReport[0].group.split("-");return t.length===3?"MMMM DD, YYYY":t.length===2?"MMMM YYYY":""},tableData(){const t=this.revenueReport.reduce((e,a)=>{const s=a.year;return e[s]||(e[s]={year:s,order_count:0,net_revenue:0,gross_sale:0,total_refunded_amount:0,tax_total:0,shipping_total:0,items:[]}),e[s].order_count+=Number(a.order_count),e[s].net_revenue+=Number(a.net_revenue),e[s].gross_sale+=Number(a.total_sales),e[s].total_refunded_amount+=Number(a.total_refunds),e[s].tax_total+=Number(a.total_tax),e[s].shipping_total+=Number(a.shipping_total),e[s].items.push(a),e},{});return Object.values(t)}},data(){return{}},methods:{formatDate(t){const e={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString(void 0,e)},formatCurrency(t){return xe.scaled(t)},liabilityClass:_s,maybeLiability:Ba}},lK=Object.assign(oK,{setup(t){return(e,a)=>{const s=y("el-skeleton"),n=y("el-table-column"),l=y("el-table"),A=y("el-empty");return d(),U(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{title:p(f)("Revenue Breakdown"),title_size:"small"},ut({_:2},[t.loading?void 0:{name:"action",fn:r(()=>[o(po,{data:t.revenueReport,filename:"revenue.csv"},null,8,["data"])]),key:"0"}]),1032,["title"]),o(ae,{class:"px-0 pb-0"},{default:r(()=>[t.loading?(d(),U(s,{key:0,animated:"",rows:2,class:"p-4"})):(d(),U(l,{key:1,data:e.tableData,"row-key":"year","default-expand-all":!1,class:"w-full"},{empty:r(()=>[o(A,{description:p(f)("No data available")},null,8,["description"])]),default:r(()=>[e.dateFormat?(d(),U(n,{key:0,type:"expand"},{default:r(u=>[o(l,{data:u.row.items,"row-key":"month",size:"small",border:"",class:"w-full"},{default:r(()=>[o(n,{prop:"group",label:p(f)("Date"),"min-width":"160"},{default:r(c=>[M(h(p(Ce)(c.row.group).format(e.dateFormat)),1)]),_:1},8,["label"]),o(n,{prop:"order_count",label:p(f)("Order Count"),"min-width":"140"},{default:r(c=>[M(h(p(f)(p(bt)(c.row.order_count))),1)]),_:1},8,["label"]),o(n,{prop:"total_sales",label:p(f)("Gross Sales"),"min-width":"150"},{default:r(c=>[i("div",ZP,h(e.formatCurrency(Number(c.row.total_sales))),1)]),_:1},8,["label"]),o(n,{prop:"total_refunds",label:p(f)("Refunds"),"min-width":"150"},{default:r(c=>[i("div",{class:ne(["inline-flex",p(_s)(c.row.total_refunds)])},h(p(Ba)(c.row.total_refunds)),3)]),_:1},8,["label"]),e.tax_total>0?(d(),U(n,{key:0,prop:"total_tax",label:p(f)("Taxes"),"min-width":"150"},{default:r(c=>[i("div",{class:ne(["inline-flex",p(_s)(c.row.total_tax)])},h(p(Ba)(c.row.total_tax)),3)]),_:1},8,["label"])):x("",!0),e.shipping_total>0?(d(),U(n,{key:1,prop:"shipping_total",label:p(f)("Shipping"),"min-width":"150"},{default:r(c=>[i("div",{class:ne(["inline-flex",p(_s)(c.row.shipping_total)])},h(p(Ba)(c.row.shipping_total)),3)]),_:1},8,["label"])):x("",!0),o(n,{prop:"net_revenue",label:p(f)("Revenue"),"min-width":"180"},{default:r(c=>[i("div",eK,h(e.formatCurrency(Number(c.row.net_revenue))),1)]),_:1},8,["label"])]),_:2},1032,["data"])]),_:1})):x("",!0),o(n,{prop:"year",label:p(f)("Year"),"min-width":"50",fixed:""},null,8,["label"]),o(n,{prop:"order_count",label:p(f)("Order Count"),"min-width":"120"},{default:r(u=>[M(h(p(f)(p(bt)(u.row.order_count))),1)]),_:1},8,["label"]),o(n,{prop:"gross_sale",label:p(f)("Gross Sales"),"min-width":"150"},{default:r(u=>[i("div",tK,h(e.formatCurrency(u.row.gross_sale)),1)]),_:1},8,["label"]),o(n,{prop:"total_refunded_amount",label:p(f)("Refunds"),"min-width":"150"},{default:r(u=>[i("div",{class:ne(["inline-flex",p(_s)(u.row.total_refunded_amount)])},h(p(Ba)(u.row.total_refunded_amount)),3)]),_:1},8,["label"]),e.tax_total>0?(d(),U(n,{key:1,prop:"tax_total",label:p(f)("Taxes"),"min-width":"150"},{default:r(u=>[i("div",aK,h(e.formatCurrency(u.row.tax_total)),1)]),_:1},8,["label"])):x("",!0),e.shipping_total>0?(d(),U(n,{key:2,prop:"shipping_total",label:p(f)("Shipping"),"min-width":"150"},{default:r(u=>[i("div",sK,h(e.formatCurrency(u.row.shipping_total)),1)]),_:1},8,["label"])):x("",!0),o(n,{prop:"net_revenue",label:p(f)("Revenue"),"min-width":"180"},{default:r(u=>[i("div",nK,h(e.formatCurrency(u.row.net_revenue)),1)]),_:1},8,["label"])]),_:1},8,["data"]))]),_:1})]),_:1})}}});function lo(t){var e;return((e=Qu.find(a=>a.code2===t))==null?void 0:e.name)||"Uncategorized"}const rK={class:"px-5 pb-4"},iK={__name:"ReportTableLoader",props:{loading:{type:Boolean,default:!1}},setup(t){return(e,a)=>{const s=y("el-skeleton-item"),n=y("el-skeleton");return d(),U(n,{loading:t.loading,animated:""},{template:r(()=>[i("div",rK,[o(s,{class:"w-full h-7"})]),(d(),_(H,null,q(8,l=>i("div",{key:l,class:"flex items-center gap-5 px-5"},[o(s,{class:"w-1/2 h-4 mb-3"}),o(s,{class:"w-1/2 h-4 mb-3"}),o(s,{class:"w-1/2 h-4 mb-3"}),o(s,{class:"w-1/2 h-4 mb-3"})])),64))]),_:1},8,["loading"])}}},AK={class:"fct-btn-group sm w-[240px] gap-2"},dK={class:"capitalize"},uK={class:"capitalize"},cK={class:"inline-flex"},fK={class:"inline-flex"},pK={__name:"RevenueGroupedBy",props:{tableData:{type:Object},reportFilter:{type:Object},revenueReport:{type:Object}},emits:["fetch-data-by-group"],setup(t,{emit:e}){const a=t,s=e;X(()=>a.reportFilter.currentCurrencySign);const n=[{label:"Billing Country",value:"billing_country"},{label:"Shipping Country",value:"shipping_country"},{label:"Payment Method",value:"payment_method_title"}];T({offline_payment:"Cash On Delivery",paypal:"PayPal",stripe:"Stripe"});const l=T("billing_country"),A=()=>{s("fetch-data-by-group",l.value)};return(u,c)=>{const m=y("el-option"),v=y("el-select"),b=y("el-table-column"),g=y("el-empty"),F=y("el-table");return d(),U(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{title:u.$t("Grouped by"),title_size:"small"},{action:r(()=>[i("div",AK,[o(v,{class:"el-select--x-small",modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=B=>l.value=B),onChange:A,placeholder:u.$t("Select Group")},{default:r(()=>[(d(),_(H,null,q(n,B=>o(m,{key:B.value,label:u.$t(B.label),value:B.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),o(po,{data:t.tableData,filename:"revenue grouped by.csv",class:"!ml-0"},null,8,["data"])])]),_:1},8,["title"]),o(ae,{class:"px-0 pb-0"},{default:r(()=>[o(iK,{loading:t.revenueReport.data.isBusy.netRevenueByGroup},null,8,["loading"]),t.revenueReport.data.isBusy.netRevenueByGroup?x("",!0):(d(),U(F,{key:0,data:t.tableData,"max-height":"390"},{empty:r(()=>[o(g,{text:u.$t("No data available")},null,8,["text"])]),default:r(()=>[l.value==="country"?(d(),U(b,{key:0,prop:"country",label:u.$t("Country"),"min-width":"150"},{default:r(B=>[M(h(B.row.country),1)]),_:1},8,["label"])):x("",!0),l.value==="shipping_country"?(d(),U(b,{key:1,prop:"country",label:u.$t("Country"),"min-width":"150"},{default:r(B=>[i("span",dK,h(p(lo)(B.row.shipping_country)),1)]),_:1},8,["label"])):x("",!0),l.value==="billing_country"?(d(),U(b,{key:2,prop:"country",label:u.$t("Country"),"min-width":"150"},{default:r(B=>[i("span",uK,h(p(lo)(B.row.billing_country)),1)]),_:1},8,["label"])):x("",!0),l.value==="payment_method_title"?(d(),U(b,{key:3,prop:"payment_method",label:u.$t("Payment Method"),"min-width":"150"},{default:r(B=>[M(h(B.row.payment_method),1)]),_:1},8,["label"])):x("",!0),o(b,{prop:"order_count",label:u.$t("Order Count"),"min-width":"150"},{default:r(B=>[M(h(p(f)(B.row.orders)),1)]),_:1},8,["label"]),o(b,{prop:"total_sales",label:u.$t("Gross Sales"),"min-width":"150"},{default:r(B=>[i("div",cK,h(p(xe).scaled(B.row.gross_sale)),1)]),_:1},8,["label"]),o(b,{prop:"total_refunds",label:u.$t("Refunds"),"min-width":"150"},{default:r(B=>[i("div",{class:ne(["inline-flex",p(_s)(B.row.total_refunds)])},h(p(Ba)(B.row.total_refunds)),3)]),_:1},8,["label"]),u.total_tax>0?(d(),U(b,{key:4,prop:"total_tax",label:u.$t("Taxes"),"min-width":"150"},{default:r(B=>[i("div",{class:ne(["inline-flex",p(_s)(B.row.total_tax)])},h(p(Ba)(B.row.total_tax)),3)]),_:1},8,["label"])):x("",!0),u.shipping_total>0?(d(),U(b,{key:5,prop:"shipping_total",label:u.$t("Shipping"),"min-width":"150"},{default:r(B=>[i("div",{class:ne(["inline-flex",p(_s)(B.row.shipping_total)])},h(p(Ba)(B.row.shipping_total)),3)]),_:1},8,["label"])):x("",!0),o(b,{prop:"net_revenue",label:u.$t("Revenue"),"min-width":"150"},{default:r(B=>[i("div",fK,h(p(xe).scaled(B.row.net_sale)),1)]),_:1},8,["label"])]),_:1},8,["data"]))]),_:1})]),_:1})}}};class mK extends Xt{constructor(){super(...arguments);fe(this,"data",{revenueReport:[],previousMetrics:[],netRevenueByGroup:[],summary:{},previousSummary:{},fluctuations:{},isBusy:{revenueReport:!0,netRevenueByGroup:!1,revenueSummary:!1,fluctuations:!1,chartData:!1,productBarRacer:!1},chartData:[],productBarRacer:[],appliedGroupKey:"default"})}get controllerKey(){return"RevenueReportController"}makeRequest(a,s,n,l){l&&(this.data.isBusy[l]=!0),typeof s!="object"&&(s={});const A=te.get(`reports/${a}`,s);return this.resolvePromiseResponse(A,n,l),A}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null?Object.assign(this.data,l):this.data[n]=l[s]}).catch(l=>{console.log(l,"error")}).finally(()=>{n&&(this.data.isBusy[n]=!1)})}getReportData(a={}){return this.makeRequest("revenue",a,null,"revenueReport")}getReportByGroup(a={}){return this.makeRequest("revenue-by-group",a,"data","netRevenueByGroup")}getChartData(a={}){return this.makeRequest("revenue-chart",a,"revenueReport","chartData")}getProductBarRacer(a={}){return this.makeRequest("fetch-product-bar-racer",a,"productBarRacer","productBarRacer")}}const xt=mK.init(),Cs={__name:"SummaryLoader",props:{loading:{type:Boolean,default:!1},count:{type:Number,default:1},marginBottom:{type:Number,default:7.5},padding:{type:Number,default:4},rows:{type:Number,default:1}},setup(t){return(e,a)=>{const s=y("el-skeleton-item"),n=y("el-skeleton");return d(),U(n,{loading:"loading",animated:""},{template:r(()=>[i("div",{class:ne(["grid gap-5 bg-white rounded dark:bg-dark-700 fct-summary-loader",`mb-${t.marginBottom} p-${t.padding}`]),style:sa(`--loader-grid-cols: ${t.count};`)},[(d(!0),_(H,null,q(t.rows,l=>(d(),_(H,{key:l},[(d(!0),_(H,null,q(t.count,A=>(d(),_("div",{key:A},[o(s),o(s,{class:"w-[90%]"})]))),128))],64))),128))],6)]),_:1})}}},hK={class:"summary-item-inner"},_K={class:"value"},gK={class:"inner-value"},vK={class:"title"},yK={__name:"RevenueReportSummary",props:{reportFilter:{type:Object}},setup(t){const e=[{title:f("Gross Sales"),key:"gross_sale",info:f("The total sales you had in this period.")},{title:f("Refunds"),key:"total_refunded_amount",liability:!0,info:f("Refunds made in this period. This is deducted from gross sales to calculate revenue.")},{title:f("Taxes"),key:"tax_total",liability:!0,info:f("Taxes paid in orders. This is deducted from gross sales to calculate revenue.")},{title:f("Shipping"),key:"shipping_total",liability:!0,info:f("Shipping paid in orders. This is deducted from gross sales to calculate revenue.")},{title:f("Revenue"),key:"net_revenue",info:f("Gross sales less refunds, taxes, shipping, fees.")}],a=X(()=>e.map(n=>({key:n.key,title:n.title,value:xt.data.summary[n.key]||0,fluctuation:xt.data.fluctuations[n.key]||0,liability:n.liability||!1,info:n.info})).filter(n=>["tax_total","shipping_total"].includes(n.key)?n.value!==0:!0)),s=X(()=>xt.data.isBusy.revenueReport);return(n,l)=>{const A=y("el-tooltip");return s.value?(d(),U(Cs,{key:0,loading:s.value,count:a.value.length},null,8,["loading","count"])):(d(),_("div",{key:1,class:"fct-report-order-summary",style:sa(`--avg-grid-cols: ${a.value.length}`)},[(d(!0),_(H,null,q(a.value,(u,c)=>(d(),_("div",{class:"summary-item",key:c},[i("div",hK,[i("div",_K,[i("div",gK,[o(zs,{amount:p(Ba)(u.value,u.liability),title:u.title},null,8,["amount","title"])]),o(ca,{fluctuation:u.fluctuation,amount:p(xt).data.previousSummary[u.key],"is-liability":u.liability},null,8,["fluctuation","amount","is-liability"])]),i("div",vK,[M(h(u.title)+" ",1),o(A,{content:u.info,placement:"top","popper-class":"fct-tooltip",effect:"dark"},{default:r(()=>[o(Y,{class:"text-gray-500 w-4 flex-shrink-0",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))],4))}}},bK={name:"Comparison",props:{currentMetrics:{type:Array},previousMetrics:{type:Array},reportFilter:{type:Object},hasComparison:{type:Boolean},loading:{type:Boolean,default:!0}},components:{CardContainer:se,CardHeader:le,CardBody:ae},data(){return{}},computed:{currencySign(){return this.reportFilter.currentCurrencySign},comparisonData(){const t=[];return this.currentMetrics.forEach((e,a)=>{const s=parseFloat(e.net_revenue);let n={group:this.formatDate(e.group),net_revenue:s};if(this.hasComparison){const l=this.previousMetrics[a],A=parseFloat(l.net_revenue),u=A?((s-A)/A*100).toFixed(2):"n/a";n.previous_revenue=A,n.percent_change=u,n.group=`${this.formatDate(e.group)} vs ${this.formatDate(l.group)}`}t.push(n)}),t}},methods:{translate:f,getPercentageClass(t){return t>0?"text-success-500":t<0?"text-red-500":"text-system-light"},formatDate(t){const e=t.split("-");if(e.length===3){const[a,s,n]=e;return`${$a[parseInt(s)-1]} ${n}, ${a}`}else if(e.length===2){const[a,s]=e;return`${$a[parseInt(s)-1]} ${a}`}else if(e.length===1){const[a]=e;return`${a}`}},formatCurrency(t){return xe.scaled(t)}}},wK={class:"fct-revenue-comparison"},BK={class:"inline-flex"},CK={class:"inline-flex"};function kK(t,e,a,s,n,l){const A=y("CardHeader"),u=y("el-skeleton"),c=y("el-table-column"),m=y("el-table"),v=y("CardBody"),b=y("CardContainer");return d(),_("div",wK,[o(b,{class:"overflow-hidden"},{default:r(()=>[o(A,{title:l.translate("Revenue Comparison"),title_size:"small"},null,8,["title"]),o(v,{class:"px-0 pb-0"},{default:r(()=>[a.loading?(d(),U(u,{key:0,animated:"",rows:7,class:"p-4"})):(d(),U(m,{key:1,data:l.comparisonData,class:"w-full",maxHeight:"390"},{default:r(()=>[o(c,{label:l.translate("Period")},{default:r(g=>[M(h(g.row.group),1)]),_:1},8,["label"]),o(c,{label:l.translate("Current Revenue")},{default:r(g=>[i("div",BK,h(l.formatCurrency(g.row.net_revenue)),1)]),_:1},8,["label"]),a.hasComparison?(d(),_(H,{key:0},[o(c,{label:l.translate("Compare Revenue")},{default:r(g=>[i("div",CK,h(l.formatCurrency(g.row.previous_revenue)),1)]),_:1},8,["label"]),o(c,{label:l.translate("Change")+" (%)"},{default:r(g=>[i("span",{class:ne(l.getPercentageClass(g.row.percent_change))},h(g.row.percent_change),3)]),_:1},8,["label"])],64)):x("",!0)]),_:1},8,["data"]))]),_:1})]),_:1})])}const FK=ye(bK,[["render",kK]]),xK={class:"fct-revenue-report-page"},UK={class:"page-heading-wrap flex items-center justify-between"},EK={class:"page-title"},SK={__name:"RevenueReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=T("default"),s=e.reportFilter,n=s.applicableFilters,l=(v,b="default")=>{xt.getReportData({params:{...v.params,groupKey:b}})},A=v=>{xt.getReportData({params:{...n.params,groupKey:v}})},u=v=>{v!==xt.data.appliedGroupKey&&(a.value=v,l(n,a.value))},c=v=>{xt.getReportByGroup({params:{...n.params,groupKey:v}})},m=v=>{l(v,a.value),xt.getReportByGroup({params:{...v.params,groupKey:"billing_country"}})};return pe(()=>{s.addListener("revenue-report",m),m(n)}),je(()=>{s.removeListener("revenue-report")}),(v,b)=>(d(),U(et,{permission:"reports/view"},{default:r(()=>[i("div",xK,[i("div",UK,[i("h1",EK,h(p(f)("Revenue")),1)]),o(yK,{reportFilter:p(s)},null,8,["reportFilter"]),o(WP,{chartData:p(xt).data.revenueReport,compareData:p(xt).data.previousMetrics,reportFilter:p(s),appliedGroupKey:a.value,onFilterData:u,"is-empty":!p(xt).data.summary.gross_sale,loading:p(xt).data.isBusy.revenueReport},null,8,["chartData","compareData","reportFilter","appliedGroupKey","is-empty","loading"]),o(FK,{class:"my-7.5",currentMetrics:p(xt).data.revenueReport,previousMetrics:p(xt).data.previousMetrics,hasComparison:e.reportFilter.data.compareType!=="no_comparison",reportFilter:p(s),loading:p(xt).data.isBusy.revenueReport},null,8,["currentMetrics","previousMetrics","hasComparison","reportFilter","loading"]),o(lK,{revenueReport:p(xt).data.revenueReport,appliedGroupKey:a.value,onFetchData:A,loading:p(xt).data.isBusy.revenueReport},null,8,["revenueReport","appliedGroupKey","loading"]),o(pK,{tableData:p(xt).data.netRevenueByGroup,reportFilter:p(s),revenueReport:p(xt),onFetchDataByGroup:c},null,8,["tableData","reportFilter","revenueReport"])])]),_:1}))}};class QK extends Xt{constructor(){super(...arguments);fe(this,"data",{summary:{},previousSummary:{},fluctuations:{},orderChartData:[],newVsReturning:[],orderByGroup:[],itemCountDistribution:[],grossSaleByDay:[],averageOrderGross:[],grossSaleByHour:[],orderCompletionTime:[],averageOrderItems:[],orderValueDistribution:[],orderByDayAndHour:[],dashBoardStats:[],isBusy:{summary:!1,fluctuations:!1,orderChartData:!0,newVsReturning:!0,orderByGroup:!1,itemCountDistribution:!1,grossSaleByDay:!1,averageOrderGross:!1,grossSaleByHour:!1,orderCompletionTime:!1,averageOrderItems:!1,orderValueDistribution:!1,orderByDayAndHour:!1,dashBoardStats:!1}})}get controllerKey(){return"OrderReportController"}makeRequest(a,s,n,l){this.data.isBusy[l]=!0,typeof s!="object"&&(s={});const A=te.get(`reports/${a}`,s);return this.resolvePromiseResponse(A,n,l),A}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null?Object.assign(this.data,l):this.data[n]=l[s]}).catch(l=>{}).finally(()=>{this.data.isBusy[n]=!1})}getOrderChartData(a={}){return this.data.isBusy.orderChartData=!0,this.makeRequest("order-chart",a).then(()=>this.data.isBusy.orderChartData=!1)}getNewVsReturningCustomer(a={}){return this.data.isBusy.newVsReturning=!0,this.makeRequest("fetch-new-vs-returning-customer",a).then(()=>this.data.isBusy.newVsReturning=!1)}getOrderByGroup(a={}){return this.makeRequest("fetch-order-by-group",a,"data","orderByGroup")}getItemCountDistribution(a={}){return this.makeRequest("item-count-distribution",a,"data","itemCountDistribution")}getOrderCompletionTime(a={}){return this.makeRequest("order-completion-time",a,"data","orderCompletionTime")}getOrderValueDistribution(a={}){return this.makeRequest("order-value-distribution",a,"data","orderValueDistribution")}getReportByDayAndHour(a={}){return this.data.isBusy.orderByDayAndHour=!0,this.makeRequest("fetch-report-by-day-and-hour",a).then(()=>this.data.isBusy.orderByDayAndHour=!1)}getDashboardStats(a={}){return this.makeRequest("dashboard-stats",a,"dashBoardStats","dashBoardStats")}}const Re=QK.init(),DK={key:1,class:"fct-report-order-summary summary-col-4"},$K={class:"summary-item-inner"},IK={class:"value"},TK={key:0,class:"summary-checkbox"},MK={class:"inner-value"},VK={class:"title"},LK={__name:"Summary",props:{orderReport:{type:Object,required:!0},reportFilter:{type:Object}},setup(t){const e=t,a=[{title:f("Gross Sales"),key:"gross_sale",content:f("The total sales you had in this period."),checkable:!0,hasCurrency:!0},{title:f("Refunds"),key:"total_refund",liability:!0,hasCurrency:!0,content:f("Refunds made in this period. This is deducted from gross sales to calculate revenue.")},{title:f("Revenue"),key:"net_revenue",hasCurrency:!0,content:f("Gross sales less refunds, taxes, shipping, fees."),checkable:!0},{title:f("Orders"),key:"order_count",content:f("The total number of orders placed in this period."),checkable:!0,hideCurrency:!0},{title:f("Items"),key:"total_item_count",content:f("The total number of items sold in this period."),hideCurrency:!0},{title:f("Average Gross"),key:"average_gross",hasCurrency:!0,content:f("Average gross sales per order in this period.")},{title:f("Average Revenue"),key:"average_net",hasCurrency:!0,content:f("Average revenue per order in this period.")},{title:f("Average Order Items"),key:"average_order_items_count",content:f("Average number of items per order in this period."),hideCurrency:!0}],s=X(()=>a.map(c=>({...c,value:e.orderReport.data.summary[c.key]||0,fluctuation:e.orderReport.data.fluctuations[c.key]||0,liability:c.liability||!1,hasCurrency:c.hasCurrency||!1}))),n=X(()=>a.filter(c=>!c.hideCurrency).map(c=>c.key)),l=X(()=>e.orderReport.data.isBusy.orderChartData),A=c=>{Ka.onCheckBoxChange("order",c)},u=c=>n.value.includes(c.key)?Ba(c.value,c.liability):bt(c.value);return(c,m)=>{const v=y("el-checkbox"),b=y("el-tooltip");return l.value?(d(),U(Cs,{key:0,count:4,rows:2})):(d(),_("div",DK,[(d(!0),_(H,null,q(s.value,(g,F)=>(d(),_("div",{class:"summary-item",key:F},[i("div",$K,[i("div",IK,[g.checkable?(d(),_("div",TK,[o(v,{"true-value":!0,"false-value":!1,"model-value":p(Ka).data.order.includes(g.key),onChange:()=>A(g.key)},null,8,["model-value","onChange"])])):x("",!0),i("div",MK,[o(zs,{amount:u(g),title:g.title},null,8,["amount","title"])]),o(ca,{fluctuation:g.fluctuation,amount:t.orderReport.data.previousSummary[g.key],"is-liability":g.liability,"has-currency":g.hasCurrency},null,8,["fluctuation","amount","is-liability","has-currency"])]),i("div",VK,[M(h(g.title)+" ",1),o(b,{content:g.content,placement:"top","popper-class":"fct-tooltip",effect:"dark"},{default:r(()=>[o(Y,{class:"text-gray-500 w-4 h-4 cursor-help",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))]))}}},OK={__name:"OrderHeatMap",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(t){const e=t,a=T(null);let s=null;const n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=me.colors,A=T(me.isDark()),u=X(()=>{const B=[];return e.chartData.forEach((w,C)=>{n.forEach((k,S)=>{B.push([C,S,w[k]])})}),B}),c=X(()=>e.chartData.length?Math.max(...e.chartData.flatMap(B=>n.map(w=>B[w]||0))):0),m=X(()=>A.value?["#000000",l.blue[500]]:["#ffffff",l.blue[600]]),v=X(()=>Object.values(e.chartData).every(B=>B.order_count===0)),b=X(()=>Re.data.isBusy.orderByDayAndHour),g=()=>{s&&(s.dispose(),s=null),de(()=>{if(a.value){s=ot(a.value,null,{renderer:"svg"});const B=e.chartData.map(k=>k.hour),w=n,C={tooltip:{position:"top",backgroundColor:A.value?"#253241":"#ffffff",borderColor:A.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:A.value?"#ffffff":"#565865"},formatter:k=>{const S=A.value?"#ffffff":"#000000";let E=`<div style="color: ${S};"><div>${n[k.data[1]]}, ${k.name||"-"}</div>`;return E+=`<div style="color: ${S};">
            ${k.marker}
            <span style="color: ${S};">${k.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${S};">
              ${k.data[2]}
            </span>
          </div>`,E+"</div>"}},grid:{height:"70%",top:"10%"},xAxis:{type:"category",data:B,axisLabel:{color:A.value?"#ffffff":"#000000",fontSize:12},splitArea:{show:!0}},yAxis:{type:"category",data:w,axisLabel:{color:A.value?"#ffffff":"#000000",fontSize:12},splitArea:{show:!0}},visualMap:{min:0,max:c.value,calculable:!0,orient:"horizontal",left:"center",bottom:"0%",inRange:{color:m.value}},series:[{name:f("Orders"),type:"heatmap",data:u.value,label:{show:!0},itemStyle:{borderColor:"#e0e0e0",borderWidth:1},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};s.setOption(C)}})};ce([u,c],()=>{de(()=>{g()})}),ce(v,B=>{B||g()}),ce(b,B=>{B||g()});const F=()=>{A.value=me.isDark(),de(()=>{g()})};return pe(()=>{window.addEventListener("onFluentCartThemeChange",F),de(()=>{g(),window.addEventListener("resize",()=>s==null?void 0:s.resize())})}),ks(()=>{s&&(window.removeEventListener("resize",()=>s==null?void 0:s.resize()),window.removeEventListener("onFluentCartThemeChange",F,!1),s.dispose(),s=null)}),(B,w)=>{const C=y("el-skeleton");return d(),U(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{title:p(f)("Orders by day and hour"),title_size:"small",border_bottom:""},null,8,["title"]),o(ae,{class:"px-0 pb-0"},{default:r(()=>[b.value?(d(),U(C,{key:0,animated:"",rows:4,class:"px-3 pb-5"})):(d(),_(H,{key:1},[v.value?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-report-average-order-items-chart",ref_key:"chartRef",ref:a},null,512))],64))]),_:1})]),_:1})}}},HK={class:"fct-gross-sale-vs-net-revenue-wrap"},RK={class:"flex items-center gap-2"},PK={class:"fct-card-header-title is-small"},KK={class:"fct-chart-select"},NK={class:"fct-btn-group sm"},GK={key:2,class:"chart-action-wrap"},jK={class:"chart-change-wrap"},zK={class:"chart-change"},YK={class:"text"},qK={class:"chart-change"},WK={class:"text"},XK={__name:"OrderLineChart",props:{chartData:{type:Array,required:!0},reportFilter:{type:Object},isEmpty:{type:Boolean,default:!1}},emits:["fetch-chart-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T("default"),l=T(yt.getChartType("order","order_chart")||"line"),A=T(!1),u=me.colors.report,c=T(me.isDark()),m=[{value:"default",label:f("Default")},{value:"monthly",label:f("Monthly")},{value:"yearly",label:f("Yearly")}],v=e,b=()=>{v("fetch-chart-data",n.value)},g=X(()=>Re.data.isBusy.orderChartData),F=X(()=>[{title:f("Orders"),key:"order_count",color:c.value?u.dark_cyan_blue_16:u.light_gray,yAxisIndex:1,type:"bar"},{title:f("Gross Sales"),key:"gross_sale",color:c.value?u.blue_dark_mode:u.blue,yAxisIndex:0,type:"line"},{title:f("Revenue"),key:"net_revenue",color:c.value?u.purple_dark_mode:u.purple,yAxisIndex:0,type:"line"}].filter(({key:Q})=>Ka.data.order.includes(Q)).map(({title:Q,key:I,color:L,yAxisIndex:K,type:N})=>$(Q,N,K,a.chartData.map(W=>W[I]),L))),B=X(()=>a.chartData.map(Q=>js(Q.group)));let w=null;const C=T(!0),k=()=>{w&&(w.dispose(),w=null),de(()=>{s.value&&(w=ot(s.value),V(),w.on("legendselectchanged",Q=>{C.value=Q.selected.Orders}))})},S=X(()=>{const Q=Gs(a.reportFilter.data.dateRange);return f("This report looks at orders created ")+Q}),E=X(()=>xa(a.chartData.length)),V=()=>{if(!w)return;const Q={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:c.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:c.value?"#253241":"#ffffff",borderColor:c.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:c.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:c.value?u.dark_cyan_blue_16:u.light_gray_blue}},formatter:I=>{let L=I[0].axisValue;const K=c.value?"#ffffff":"#565865";return I.forEach(function(N,W){const R=W===0?N.value:xe.scaled(N.value);L+=`<div>
            ${N.marker} 
            <span style="color: ${K};">${N.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${K};">
              ${R}
            </span>
          </div>`}),L}},xAxis:{type:"category",data:B.value,axisLabel:{color:c.value?"#ffffff":"#696778",fontSize:12,interval:E.value.interval},axisLine:{lineStyle:{type:"dashed",color:c.value?"#253241":"#D6DAE1"}}},yAxis:[{name:f("Sales"),type:"value",position:"left",axisLabel:{color:c.value?"#ffffff":"#696778",fontSize:12,formatter:I=>`${xe.scaled(I)}`},splitLine:{show:!0,lineStyle:{color:c.value?"#253241":"#D6DAE1",type:"dashed"}},minInterval:500},{name:f("Orders"),type:"value",position:"right",axisLabel:{color:c.value?"#ffffff":"#696778",fontSize:12},splitLine:{show:!1,lineStyle:{color:c.value?"#253241":"#D6DAE1",type:"dashed"}},minInterval:20}],dataZoom:[],series:F.value};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},$=(Q,I,L,K,N)=>({name:Q,type:I,yAxisIndex:L,barMaxWidth:30,data:K,smooth:!1,color:N,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:N,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:ea(N)},lineStyle:{color:N},areaStyle:{opacity:.3,color:N}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),O=()=>{A.value=!A.value,A.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):V()};ce([()=>a.chartData,l],()=>{de(V)},{deep:!0}),ce(()=>Ka.data.order,()=>{de(()=>{V()})},{deep:!0}),ce(()=>a.isEmpty,Q=>{Q||k()}),ce(g,Q=>{Q||k()}),ce(C,()=>{if(!w)return;const I=w.getOption().series.map(L=>L.type==="line"?{...L,areaStyle:C.value?void 0:{opacity:.3}}:L);de(()=>{w.setOption({series:I})})});const D=()=>{c.value=me.isDark(),de(()=>{V()})};return je(()=>{window.removeEventListener("onFluentCartThemeChange",D,!1)}),pe(()=>{de(k),window.addEventListener("onFluentCartThemeChange",D)}),(Q,I)=>{const L=y("el-tooltip"),K=y("el-option"),N=y("el-select"),W=y("el-skeleton");return d(),_("div",HK,[o(se,{id:"chartContainer"},{default:r(()=>[o(le,{title_size:"small",border_bottom:""},ut({title:r(()=>[i("div",RK,[i("h5",PK,h(p(f)("Order Chart")),1),o(L,{"popper-class":"fct-tooltip",content:S.value,placement:"top"},{default:r(()=>[o(Y,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),_:2},[t.isEmpty?void 0:{name:"action",fn:r(()=>[i("div",KK,[o(N,{class:"el-select--x-small",modelValue:n.value,"onUpdate:modelValue":I[0]||(I[0]=R=>n.value=R),onChange:b},{default:r(()=>[(d(),_(H,null,q(m,R=>o(K,{key:R.value,label:R.label,value:R.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),i("div",NK,[o(Be,{tag:"button",size:"small",title:p(f)("Zoom Chart"),onClick:O,class:ne(A.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}]),1024),o(ae,null,{default:r(()=>[g.value?(d(),U(W,{key:0,animated:"",rows:4})):(d(),_(H,{key:1},[t.isEmpty?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-chart-wrap fct-order-line-chart",ref_key:"chartRef",ref:s},null,512)),t.isEmpty?x("",!0):(d(),_("div",GK,[i("div",jK,[i("div",zK,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",YK,h(p(f)("Data")),1)]),i("div",qK,[i("span",WK,h(p(f)("Timeline")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},JK={class:"fct-report-monthly-list"},ZK={class:"list-left-content"},eN={class:"list-title"},tN={class:"list-right-content"},aN={class:"list-value"},sN={__name:"MonthlySummary",props:{orderReport:{type:Object,required:!0}},setup(t){const e=t,a=X(()=>Yt.currentCurrencySign),s=[{title:f("Average Monthly Gross"),key:"monthly_gross",currencySign:a,hasCurrency:!0},{title:f("Average Monthly Revenue"),key:"monthly_net",currencySign:a,hasCurrency:!0},{title:f("Average Monthly Orders"),key:"monthly_orders"},{title:f("Average Monthly Items"),key:"monthly_items"}],n=X(()=>s.map(A=>({...A,value:e.orderReport.data.summary[A.key]||0,fluctuation:e.orderReport.data.fluctuations[A.key]||0,hasCurrency:A.hasCurrency||!1}))),l=A=>["monthly_net","monthly_gross"].includes(A.key)?xe.scaled(A.value):bt(A.value);return(A,u)=>(d(),_("ul",JK,[(d(!0),_(H,null,q(n.value,(c,m)=>(d(),_("li",{key:m},[i("div",ZK,[i("div",eN,h(c.title),1)]),i("div",tN,[i("div",aN,[o(zs,{amount:l(c),title:c.title},null,8,["amount","title"]),o(ca,{fluctuation:c.fluctuation,amount:t.orderReport.data.previousSummary[c.key],"is-liability":!1,"has-currency":c.hasCurrency},null,8,["fluctuation","amount","has-currency"])])])]))),128))]))}},nN={class:"fct-report-result-content"},oN={class:"value"},lN={class:"inline-flex"},rN={class:"title"},iN={__name:"AverageResults",props:{orderReport:{type:Object,required:!0},reportFilter:{type:Object}},setup(t){const e=t,a=X(()=>e.reportFilter.currentCurrencySign),s=[{title:f("Taxes"),content:f("Total amount of taxes"),key:"tax_total",currencySign:a.value},{title:f("Shipping"),content:f("Total amount of shipping costs"),key:"shipping_total",currencySign:a.value}],n=X(()=>s.map(l=>({...l,value:e.orderReport.data.summary[l.key]||0,fluctuation:e.orderReport.data.fluctuations[l.key]||0})).filter(l=>l.value>0));return(l,A)=>{const u=y("el-tooltip");return d(),_("div",{class:"fct-report-avg-wrap mb-7.5",style:sa(`--avg-grid-cols: ${n.value.length}`)},[(d(!0),_(H,null,q(n.value,c=>(d(),_("div",{class:"fct-report-result",key:c.title},[i("div",nN,[i("div",oN,[i("span",lN,h(p(xe).scaled(c.value)),1),c.fluctuation!==0?(d(),_("div",{key:0,class:"percentage",style:sa({color:c.fluctuation>0?"green":"red"})},[c.fluctuation>0?(d(),U(Y,{key:0,class:"w-2",name:"CaretUp"})):x("",!0),c.fluctuation<0?(d(),U(Y,{key:1,class:"w-2",name:"CaretDown"})):x("",!0),M(" "+h(p(bt)(c.fluctuation))+"% ",1)],4)):x("",!0)]),i("div",rN,[M(h(c.title)+" ",1),c.content?(d(),U(u,{key:0,"popper-class":"fct-tooltip",content:c.content,placement:"top"},{default:r(()=>[o(Y,{name:"InformationFill",class:"w-4"})]),_:2},1032,["content"])):x("",!0)])])]))),128))],4)}}},AN={class:"flex items-center gap-2"},dN={class:"fct-card-header-title is-small"},uN={class:"fct-btn-group sm"},cN={class:"inline-flex"},fN={class:"inline-flex"},pN={class:"inline-flex"},mN={class:"inline-flex"},hN={__name:"NewVsReturningCustomer",props:{tableData:{type:Object,required:!0},reportFilter:{type:Object}},setup(t){const e=t;T("number");const a=T(!1),s=X(()=>Re.data.isBusy.newVsReturning),n=X(()=>{if(a.value===!0){const A=["customer_count","order_count","net_sales","average_net","gross_sales","average_gross"],u={customer_type:"New"},c={customer_type:"Returning"};return A.forEach(m=>{const v=parseFloat(e.tableData[0][m]),b=parseFloat(e.tableData[1][m]),g=v+b;u[m]=v*100/g,c[m]=b*100/g}),[u,c]}return e.tableData});X(()=>e.reportFilter.currentCurrencySign),pe(()=>{});const l=A=>`${parseFloat(A).toFixed(2)}%`;return(A,u)=>{const c=y("el-tooltip"),m=y("el-checkbox"),v=y("el-skeleton"),b=y("el-table-column"),g=y("el-empty"),F=y("el-table");return d(),U(se,{class:"overflow-hidden",id:"chartContainer"},{default:r(()=>[o(le,{title_size:"small"},{title:r(()=>[i("div",AN,[i("h5",dN,h(p(f)("New vs. Returning Customers")),1),o(c,{"popper-class":"fct-tooltip",content:p(f)("Returning customers are those who first ordered before this period."),placement:"top"},{default:r(()=>[o(Y,{name:"InformationFill",class:"text-gray-500 w-4 h-4 cursor-pointer"})]),_:1},8,["content"])])]),action:r(()=>[i("div",uN,[o(m,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=B=>a.value=B),onChange:A.selectGroupKey},{default:r(()=>[M(h(p(f)("Show Percentages")),1)]),_:1},8,["modelValue","onChange"]),o(po,{data:n.value,filename:"order_report.csv"},null,8,["data"])])]),_:1}),o(ae,{class:"px-0 pb-0"},{default:r(()=>[s.value?(d(),U(v,{key:0,animated:"",rows:3,class:"p-3"})):(d(),U(F,{key:1,data:n.value,border:""},{empty:r(()=>[o(g,{text:p(f)("No data available")},null,8,["text"])]),default:r(()=>[o(b,{prop:"customer_type",label:p(f)("Type"),"min-width":"90"},{default:r(B=>[M(h(B.row.customer_type),1)]),_:1},8,["label"]),o(b,{prop:"customer_count",label:p(f)("Customer Count"),"min-width":"120"},{default:r(B=>[M(h(a.value?l(B.row.customer_count):B.row.customer_count),1)]),_:1},8,["label"]),o(b,{prop:"order_count",label:p(f)("Order Count"),"min-width":"150"},{default:r(B=>[M(h(a.value?l(B.row.order_count):B.row.order_count),1)]),_:1},8,["label"]),o(b,{prop:"gross_sales",label:p(f)("Gross Sales"),"min-width":"150"},{default:r(B=>[i("div",cN,h(a.value?l(B.row.gross_sales):p(xe).scaled(B.row.gross_sales)),1)]),_:1},8,["label"]),o(b,{prop:"average_gross",label:p(f)("Average Gross Sales"),"min-width":"150"},{default:r(B=>[i("div",fN,h(a.value?l(B.row.average_gross):p(xe).scaled(B.row.average_gross)),1)]),_:1},8,["label"]),o(b,{prop:"net_sales",label:p(f)("Revenue"),"min-width":"150"},{default:r(B=>[i("div",pN,h(a.value?l(B.row.net_sales):p(xe).scaled(B.row.net_sales)),1)]),_:1},8,["label"]),o(b,{prop:"average_net",label:p(f)("Average Revenue"),"min-width":"150"},{default:r(B=>[i("div",mN,h(a.value?l(B.row.average_net):p(xe).scaled(B.row.average_net)),1)]),_:1},8,["label"])]),_:1},8,["data"]))]),_:1})]),_:1})}}},_N=ye(hN,[["__scopeId","data-v-464883ba"]]),gN={class:"w-[240px] fct-btn-group gap-1.5"},vN={class:"capitalize"},yN={class:"capitalize"},bN={class:"inline-flex"},wN={class:"inline-flex"},BN={class:"inline-flex"},CN={class:"inline-flex"},kN={__name:"OrderGroupedBy",props:{reportFilter:{type:Object}},setup(t){const a=t.reportFilter,s=T("billing_country"),n=a.applicableFilters;X(()=>a.currentCurrencySign);const l=()=>{Re.getOrderByGroup({params:{...n.params,groupKey:s.value}})},A=[{label:f("Billing Country"),value:"billing_country"},{label:f("Shipping Country"),value:"shipping_country"},{label:f("Payment Method"),value:"payment_method_title"}];return pe(()=>{l()}),(u,c)=>{const m=y("el-option"),v=y("el-select"),b=y("el-table-column"),g=y("el-empty"),F=y("el-table");return d(),U(se,{class:"overflow-hidden",id:"chartContainer"},{default:r(()=>[o(le,{title:p(f)("Orders grouped by"),title_size:"small"},{action:r(()=>[i("div",gN,[o(v,{class:"el-select--x-small",modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=B=>s.value=B),onChange:l,placeholder:p(f)("Select Group")},{default:r(()=>[(d(),_(H,null,q(A,B=>o(m,{key:B.value,label:B.label,value:B.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),o(po,{data:p(Re).data.orderByGroup,filename:"order_grouped_by.csv",class:"m-0"},null,8,["data"])])]),_:1},8,["title"]),o(ae,{class:"px-0 pb-0"},{default:r(()=>[o(F,{data:p(Re).data.orderByGroup,border:"",class:"max-h-[350px] overflow-y-auto"},{empty:r(()=>[o(g,{text:p(f)("No data available")},null,8,["text"])]),default:r(()=>[s.value==="payment_method_title"?(d(),U(b,{key:0,prop:"payment_method_title",label:"Payment Method Title","min-width":"150"},{default:r(B=>[M(h(B.row.payment_method_title),1)]),_:1})):x("",!0),s.value==="shipping_country"?(d(),U(b,{key:1,prop:"shipping_country",label:p(f)("Country"),"min-width":"150"},{default:r(B=>[i("span",vN,h(p(lo)(B.row.shipping_country)),1)]),_:1},8,["label"])):x("",!0),s.value==="billing_country"?(d(),U(b,{key:2,prop:"billing_country",label:p(f)("Billing Country"),"min-width":"150"},{default:r(B=>[i("span",yN,h(p(lo)(B.row.billing_country)),1)]),_:1},8,["label"])):x("",!0),o(b,{prop:"orders",label:p(f)("Orders"),"min-width":"150"},{default:r(B=>[M(h(p(f)(B.row.orders)),1)]),_:1},8,["label"]),o(b,{prop:"gross_sale",label:p(f)("Gross Sales"),"min-width":"150"},{default:r(B=>[i("div",bN,h(p(xe).scaled(B.row.gross_sale)),1)]),_:1},8,["label"]),o(b,{prop:"average_order_gross",label:p(f)("Average Gross Sales"),"min-width":"150"},{default:r(B=>[i("div",wN,h(p(xe).scaled(B.row.average_order_gross)),1)]),_:1},8,["label"]),o(b,{prop:"net_sale",label:p(f)("Revenue"),"min-width":"150"},{default:r(B=>[i("div",BN,h(p(xe).scaled(B.row.net_sale)),1)]),_:1},8,["label"]),o(b,{prop:"average_order_net",label:p(f)("Average Revenue"),"min-width":"150"},{default:r(B=>[i("div",CN,h(p(xe).scaled(B.row.average_order_net)),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})}}},FN={class:"fct-report-spend-by-day-wrap"},xN={class:"flex items-center gap-2"},UN={class:"fct-card-header-title is-small"},EN={class:"fct-btn-group sm"},SN={key:2,class:"chart-action-wrap"},QN={class:"chart-change-wrap"},DN={class:"chart-change"},$N={class:"text"},IN={class:"chart-change"},TN={class:"text"},MN={__name:"GrossSaleByDay",props:{reportFilter:{type:Object},chartRef:{},chartData:{type:Array,required:!0}},setup(t){const e=t,a=T(null);let s=null;T(yt.getChartType("order","gross_sale_by_day_chart")||"line");const n=T(!1),l=X(()=>{const C=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return[...e.chartData].sort((S,E)=>S.day-E.day).map(S=>C[S.day-1])}),A=X(()=>Object.values(e.chartData).every(C=>C.order_count===0)),u=X(()=>Re.data.isBusy.orderByDayAndHour),c=me.colors.report,m=T(me.isDark()),v=X(()=>[b("Gross Sale","line",0,e.chartData.map(C=>C.gross_sale),m.value?c.blue_dark_mode:c.blue),b("Orders","bar",1,e.chartData.map(C=>C.order_count),m.value?c.dark_cyan_blue_16:c.light_gray)]),b=(C,k,S,E,V)=>({name:C,type:k,barMaxWidth:30,data:E,smooth:!1,color:V,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:V,borderRadius:[4,4,0,0]},yAxisIndex:S,emphasis:{scale:2,itemStyle:{color:ea(V)},lineStyle:{color:V},areaStyle:{opacity:.3,color:V}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),g=()=>{if(!s)return;const C={title:{text:e.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:m.value?"#253241":"#ffffff",borderColor:m.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:m.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:m.value?c.dark_cyan_blue_16:c.light_gray_blue}},formatter:k=>{let S=k[0].name;return k.forEach(E=>{const V=E.seriesName==="Gross Sale"?`${xe.scaled(E.value)}`:E.value,$=m.value?"#ffffff":"#565865";S+=`<div>
            ${E.marker}
            <span style="color: ${$};">${E.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${$};">
              ${V}
            </span>
          </div>`}),S}},grid:{left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:l.value,axisLabel:{color:m.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:m.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",name:"Gross Sale",axisLabel:{color:m.value?"#FFFFFF":"#696778",fontSize:12,formatter:k=>`${xe.scaled(k)}`},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:m.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",name:"Orders",position:"right",axisLabel:{color:m.value?"#FFFFFF":"#696778",fontSize:12},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:m.value?"#253241":"#D6DAE1",type:"dashed"}}}],dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:v.value};s.setOption(C)},F=()=>{s&&(s.dispose(),s=null),de(()=>{a.value&&(s=ot(a.value),g())})},B=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};ce(()=>[Re.data.grossSaleByDay],()=>{de(()=>{g()})},{deep:!0}),ce(A,C=>{C||F()}),ce(u,C=>{C||F()});const w=()=>{m.value=me.isDark(),de(()=>{g()})};return pe(()=>{de(()=>{F(),e.reportFilter.addListener("spend-by-day",F),window.addEventListener("onFluentCartThemeChange",w)})}),je(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",w,!1),e.reportFilter.removeListener("spend-by-day",F,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(C,k)=>{const S=y("el-tooltip"),E=y("el-skeleton");return d(),_("div",FN,[o(se,{id:"chartContainer"},{default:r(()=>[o(le,{title_size:"small",border_bottom:""},ut({title:r(()=>[i("div",xN,[i("h5",UN,h(p(f)("Spend by day")),1),o(S,{"popper-class":"fct-tooltip",content:p(f)("Gross sales grouped by the days of the week."),placement:"top"},{default:r(()=>[o(Y,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[A.value?void 0:{name:"action",fn:r(()=>[i("div",EN,[o(Be,{tag:"button",size:"x-small",title:C.$t("Zoom Chart"),onClick:B,class:ne(n.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}]),1024),o(ae,{class:"px-0 pt-0"},{default:r(()=>[u.value?(d(),U(E,{key:0,animated:"",rows:4,class:"p-3"})):(d(),_(H,{key:1},[A.value?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-report-spend-by-day-chart",ref_key:"chartRef",ref:a},null,512)),A.value?x("",!0):(d(),_("div",SN,[i("div",QN,[i("div",DN,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",$N,h(C.$t("Gross Sale")),1)]),i("div",IN,[i("span",TN,h(C.$t("Days of the week")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},VN={class:"fct-report-item-count-distribution-wrap"},LN={class:"flex items-center gap-2"},ON={class:"fct-card-header-title is-small"},HN={class:"fct-btn-group sm"},RN={key:2,class:"chart-action-wrap"},PN={class:"chart-change-wrap"},KN={class:"chart-change"},NN={class:"text"},GN={class:"chart-change"},jN={class:"text"},zN={__name:"ItemCountDistribution",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(t){const e=t,a=T(null);T(e.chartData.length<=1?"bar":yt.getChartType("order","item_count_distribtion_chart")||"bar");const s=T(!1);X(()=>{const k=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return[...e.chartData].sort((E,V)=>E.day-V.day).map(E=>k[E.day-1])});const n=me.colors,l=T(me.isDark());let A=null;const u=()=>{s.value=!s.value,s.value?A.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):A.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})},c=()=>{A&&A.resize()},m=X(()=>l.value?n.blue[500]+"52":n.blue[300]),v=X(()=>[{name:f("Orders"),type:"bar",barMaxWidth:30,data:e.chartData.map(k=>k.order_count),smooth:!1,color:m.value,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:m.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:l.value?n.blue[800]:n.blue[400]},lineStyle:{color:m.value},areaStyle:{opacity:.3,color:m.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),b=X(()=>({title:{text:e.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?n.report.dark_cyan_blue_16:n.report.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:e.chartData.map(k=>k.item_count),axisLabel:{color:l.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",name:f("Orders"),axisLabel:{formatter:"{value}",color:l.value?"#FFFFFF":"#696778",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:[],series:v.value})),g=X(()=>Object.values(e.chartData).every(k=>k.order_count===0)),F=X(()=>Re.data.isBusy.orderByDayAndHour),B=()=>{A&&(A.dispose(),A=null),de(()=>{a.value&&(A=ot(a.value),A.setOption(b.value),window.addEventListener("resize",c))})},w=()=>{A&&A.setOption(b.value)};ce(()=>e.chartData,()=>{A?A.setOption(b.value):de(()=>{B()})}),ce(g,k=>{k||B()}),ce(F,k=>{k||B()});const C=()=>{l.value=me.isDark(),de(()=>{w()})};return pe(()=>{window.addEventListener("onFluentCartThemeChange",C,!1),de(()=>{B()})}),je(()=>{A&&(A.dispose(),window.removeEventListener("onFluentCartThemeChange",C,!1),window.removeEventListener("resize",c))}),(k,S)=>{const E=y("el-tooltip"),V=y("el-skeleton");return d(),_("div",VN,[o(se,{id:"chartContainer"},{default:r(()=>[o(le,{title_size:"small",border_bottom:""},ut({title:r(()=>[i("div",LN,[i("h5",ON,h(p(f)("Item count distribution")),1),o(E,{"popper-class":"fct-tooltip",content:p(f)("Grouping the orders by the number of items in each order."),placement:"top"},{default:r(()=>[o(Y,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[t.chartData.length?{name:"action",fn:r(()=>[i("div",HN,[o(Be,{tag:"button",size:"x-small",title:k.$t("Zoom Chart"),onClick:u,class:ne(s.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(ae,{class:"px-0 pt-0"},{default:r(()=>[F.value?(d(),U(V,{key:0,animated:"",rows:4,class:"px-5 pb-5"})):(d(),_(H,{key:1},[g.value?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-report-item-count-distribution-chart",ref_key:"chartRef",ref:a},null,512)),g.value?x("",!0):(d(),_("div",RN,[i("div",PN,[i("div",KN,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",NN,h(k.$t("Order Count")),1)]),i("div",GN,[i("span",jN,h(k.$t("Item Count")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},YN={class:"fct-report-spend-by-hour-wrap"},qN={class:"flex items-center gap-2"},WN={class:"fct-card-header-title is-small"},XN={class:"fct-btn-group sm"},JN={key:2,class:"chart-action-wrap"},ZN={class:"chart-change-wrap"},eG={class:"chart-change"},tG={class:"text"},aG={class:"chart-change"},sG={class:"text"},nG={__name:"GrossSaleByHour",props:{chartData:{type:Array,required:!0},chartTitle:{type:String,default:""}},setup(t){const e=t,a=T(null);let s=null;T(yt.getChartType("order","gross_sale_by_hour_chart")||"line");const n=T(!1),l=X(()=>e.chartData.map(C=>C.hour)),A=X(()=>Object.values(e.chartData).every(C=>C.order_count===0)),u=X(()=>Re.data.isBusy.orderByDayAndHour),c=me.colors.report,m=T(me.isDark()),v=(C,k,S,E,V)=>({name:C,type:k,barMaxWidth:30,data:S,smooth:!1,color:E,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:E,borderRadius:[4,4,0,0]},yAxisIndex:V,emphasis:{scale:2,itemStyle:{color:ea(E)},lineStyle:{color:E},areaStyle:{opacity:.3,color:E}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),b=X(()=>[{name:f("Gross Sale"),type:"line",yAxisIndex:0,data:e.chartData.map(C=>C.gross_sale),color:m.value?c.purple_dark_mode:c.purple},{name:f("Orders"),type:"bar",yAxisIndex:1,data:e.chartData.map(C=>C.order_count),color:m.value?c.dark_cyan_blue_16:c.light_gray}].map(C=>v(C.name,C.type,C.data,C.color,C.yAxisIndex))),g=()=>{if(!s)return;const C={title:{text:e.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:m.value?"#253241":"#ffffff",borderColor:m.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:m.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:m.value?c.dark_cyan_blue_16:c.light_gray_blue}},formatter:k=>{let S=k[0].name;return k.forEach(E=>{const V=E.seriesName==="Gross Sale"?`${xe.scaled(E.value)}`:E.value,$=m.value?"#ffffff":"#565865";S+=`<div>
            ${E.marker}
            <span style="color: ${$};">${E.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${$};">
              ${V}
            </span>
          </div>`}),S}},grid:{left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:l.value,axisLabel:{color:m.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:m.value?"#253241":"#D6DAE1"}},axisTick:{alignWithLabel:!0}},yAxis:[{type:"value",name:f("Gross Sale"),axisLabel:{color:m.value?"#FFFFFF":"#696778",fontSize:12,formatter:k=>`${xe.formatScaled(k)}`},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:m.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",name:f("Orders"),position:"right",axisLabel:{color:m.value?"#FFFFFF":"#696778",fontSize:12},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:m.value?"#253241":"#D6DAE1",type:"dashed"}}}],dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:b.value};s.setOption(C)},F=()=>{s&&(s.dispose(),s=null),de(()=>{a.value&&(s=ot(a.value),g())})},B=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};ce(()=>e.chartData,()=>{de(()=>g())}),ce(A,C=>{C||F()}),ce(u,C=>{C||F()});const w=()=>{m.value=me.isDark(),de(()=>{g()})};return pe(()=>{window.addEventListener("onFluentCartThemeChange",w,!1),de(()=>F())}),je(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",w,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(C,k)=>{const S=y("el-tooltip"),E=y("el-skeleton");return d(),_("div",YN,[o(se,null,{default:r(()=>[o(le,{title_size:"small",border_bottom:""},ut({title:r(()=>[i("div",qN,[i("h5",WN,h(p(f)("Spend by hour ")),1),o(S,{"popper-class":"fct-tooltip",content:p(f)("Gross Sales grouped by the hours of the day."),placement:"top"},{default:r(()=>[o(Y,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[A.value?void 0:{name:"action",fn:r(()=>[i("div",XN,[o(Be,{tag:"button",size:"x-small",title:C.$t("Zoom Chart"),onClick:B,class:ne(n.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}]),1024),o(ae,{class:"px-0 pt-0"},{default:r(()=>[u.value?(d(),U(E,{key:0,animated:"",rows:10,class:"px-3"})):(d(),_(H,{key:1},[A.value?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-report-spend-by-hour-chart",ref_key:"chartRef",ref:a},null,512)),A.value?x("",!0):(d(),_("div",JN,[i("div",ZN,[i("div",eG,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",tG,h(C.$t("Gross Sale")),1)]),i("div",aG,[i("span",sG,h(C.$t("Hour")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},oG={class:"fct-report-order-completion-time-wrap"},lG={class:"flex items-center gap-2"},rG={class:"fct-card-header-title is-small"},iG={class:"fct-btn-group sm"},AG={key:2,class:"chart-action-wrap"},dG={class:"chart-change-wrap"},uG={class:"chart-change"},cG={class:"text"},fG={class:"chart-change"},pG={class:"text"},mG={__name:"OrderCompletionTime",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(t){const e=t,a=T(null);let s=null;T(yt.getChartType("order","order_completion_time_chart")||"bar");const n=T(!1),l=X(()=>e.chartData.map(k=>k.hour)),A=me.colors,u=T(me.isDark()),c=X(()=>u.value?A.blue[500]+"52":A.blue[300]),m=X(()=>[{name:f("Orders"),type:"bar",barMaxWidth:30,data:e.chartData.map(k=>k.orders),smooth:!1,color:c.value,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:c.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:u.value?A.blue[800]:A.blue[400]},lineStyle:{color:c.value},areaStyle:{opacity:.3,color:c.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),v=X(()=>Object.values(e.chartData).every(k=>k.orders===0)),b=X(()=>Re.data.isBusy.orderCompletionTime),g=()=>{s&&s.resize()},F=()=>{if(!s)return;const k={title:{text:"",left:"center"},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?A.report.dark_cyan_blue_16:A.report.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:l.value,axisLabel:{color:u.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",color:u.value?"#FFFFFF":"#696778",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:m.value};s.setOption(k)},B=()=>{s&&(s.dispose(),s=null),de(()=>{a.value&&(s=ot(a.value),F())})},w=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};ce(()=>e.chartData,()=>{s?F():de(()=>{B()})}),ce(v,k=>{k||B()}),ce(b,k=>{k||B()});const C=()=>{u.value=me.isDark(),de(()=>{F()})};return pe(()=>{window.addEventListener("onFluentCartThemeChange",C,!1),de(()=>B())}),je(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",C,!1),window.removeEventListener("resize",g))}),(k,S)=>{const E=y("el-tooltip"),V=y("el-skeleton");return d(),_("div",oG,[o(se,{id:"chartContainer"},{default:r(()=>[o(le,{title_size:"small",border_bottom:""},ut({title:r(()=>[i("div",lG,[i("h5",rG,h(p(f)("Time between an order's created & completed date")),1),o(E,{"popper-class":"fct-tooltip",content:p(f)("Orders grouped by based on their completion time in Hours."),placement:"top"},{default:r(()=>[o(Y,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[t.chartData.length?{name:"action",fn:r(()=>[i("div",iG,[o(Be,{tag:"button",size:"x-small",title:k.$t("Zoom Chart"),onClick:w,class:ne(n.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(ae,{class:"px-0 pt-0"},{default:r(()=>[b.value?(d(),U(V,{key:0,animated:"",rows:4,class:"px-5 pt-5"})):(d(),_(H,{key:1},[v.value?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-report-order-completion-time-chart",ref_key:"chartRef",ref:a},null,512)),v.value?x("",!0):(d(),_("div",AG,[i("div",dG,[i("div",uG,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",cG,h(p(f)("Order Count")),1)]),i("div",fG,[i("span",pG,h(p(f)("Hours")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},hG={class:"fct-report-order-value-distribution-wrap"},_G={class:"flex items-center gap-2"},gG={class:"fct-card-header-title is-small"},vG={class:"fct-btn-group sm"},yG={key:2,class:"chart-action-wrap"},bG={class:"chart-change-wrap"},wG={class:"chart-change"},BG={class:"text"},CG={class:"chart-change"},kG={class:"text"},FG={__name:"OrderValueDistribution",props:{chartData:{type:Object,required:!0},chartRef:{}},setup(t){const e=t,a=T(null);let s=null;T(yt.getChartType("order","order_value_distribution_chart")||"bar");const n=T(!1),l=X(()=>Object.keys(e.chartData)),A=me.colors,u=T(me.isDark()),c=X(()=>u.value?A.blue[500]+"52":A.blue[300]),m=X(()=>!Object.values(e.chartData).every(k=>k&&k!==0)),v=X(()=>Re.data.isBusy.orderValueDistribution),b=X(()=>[{name:f("Orders"),type:"bar",barMaxWidth:30,data:Object.values(e.chartData),smooth:!1,color:c.value,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:c.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:u.value?A.blue[800]:A.blue[400]},lineStyle:{color:c.value},areaStyle:{opacity:.3,color:c.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),g=X(()=>({title:{text:e.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?A.report.dark_cyan_blue_16:A.report.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:l.value,axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",name:f("Orders"),axisLabel:{formatter:"{value}",color:u.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:b.value})),F=()=>{s&&(s.dispose(),s=null),de(()=>{a.value?(s=ot(a.value),s.setOption(g.value),window.addEventListener("resize",()=>{s.resize()})):s&&s.setOption(g.value)})},B=()=>{s&&s.setOption(g.value)},w=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};ce(()=>e.chartData,()=>{s&&s.setOption(g.value)}),ce(m,k=>{k||F()}),ce(v,k=>{k||F()});const C=()=>{u.value=me.isDark(),de(()=>{B()})};return pe(()=>{window.addEventListener("onFluentCartThemeChange",C,!1),de(()=>{F()})}),je(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",C,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(k,S)=>{const E=y("el-tooltip"),V=y("el-skeleton");return d(),_("div",hG,[o(se,{id:"chartContainer"},{default:r(()=>[o(le,{title_size:"small",border_bottom:""},ut({title:r(()=>[i("div",_G,[i("h5",gG,h(p(f)("Order value distribution")),1),o(E,{"popper-class":"fct-tooltip",content:p(f)("Orders grouped by based on their order value in different ranges."),placement:"top"},{default:r(()=>[o(Y,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[m.value?void 0:{name:"action",fn:r(()=>[i("div",vG,[o(Be,{tag:"button",size:"x-small",title:k.$t("Zoom Chart"),onClick:w,class:ne(n.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}]),1024),o(ae,{class:"px-0 pt-0"},{default:r(()=>[v.value?(d(),U(V,{key:0,animated:"",rows:4,class:"p-3"})):(d(),_(H,{key:1},[m.value?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-report-order-value-distribution-chart",ref_key:"chartRef",ref:a},null,512)),m.value?x("",!0):(d(),_("div",yG,[i("div",bG,[i("div",wG,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",BG,h(k.$t("Order Count")),1)]),i("div",CG,[i("span",kG,h(k.$t("Order Value Ranges")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},xG={class:"fct-report-average-order-gross-wrap"},UG={class:"flex items-center gap-2"},EG={class:"fct-card-header-title is-small"},SG={class:"fct-btn-group sm"},QG={key:2,class:"chart-action-wrap"},DG={class:"chart-change-wrap"},$G={class:"chart-change"},IG={class:"text"},TG={class:"chart-change"},MG={class:"text"},VG={__name:"AverageOrderGross",props:{chartData:{type:Array,required:!0},isEmpty:{type:Boolean,required:!1}},setup(t){const e=t,a=T(null);let s=null;T("line");const n=T(!1),l=me.colors.report,A=T(me.isDark()),u=X(()=>A.value?l.blue_dark_mode:l.blue),c=X(()=>Re.data.isBusy.orderChartData),m=X(()=>[{name:f("Average Order Gross"),type:"line",barMaxWidth:30,data:e.chartData.map(C=>C.average_order_gross),smooth:!1,color:u.value,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:u.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:ea(u.value)},lineStyle:{color:u.value},areaStyle:{opacity:.3,color:u.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),v=X(()=>xa(e.chartData.length)),b=()=>{s&&s.resize()},g=()=>{if(!s)return;const C=ns(e.chartData),k={title:{text:"",left:"center"},tooltip:{trigger:"axis",backgroundColor:A.value?"#253241":"#ffffff",borderColor:A.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:A.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:A.value?l.dark_cyan_blue_16:l.light_gray_cyan_blue}},valueFormatter:S=>xe.scaled(S)},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:C,axisLabel:{color:A.value?"#ffffff":"#000000",fontSize:12,interval:v.value.interval},axisLine:{lineStyle:{type:"dashed",color:A.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",color:A.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:m.value};s.setOption(k)},F=()=>{s&&(s.dispose(),s=null),de(()=>{a.value&&(s=ot(a.value),g())})},B=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};ce(()=>e.chartData,()=>{de(()=>g())}),ce(e.isEmpty,C=>{C||F()}),ce(c,C=>{C||F()});const w=()=>{A.value=me.isDark(),de(()=>{g()})};return pe(()=>{window.addEventListener("onFluentCartThemeChange",w,!1),de(()=>F())}),je(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",w,!1),window.removeEventListener("resize",b))}),(C,k)=>{const S=y("el-tooltip"),E=y("el-skeleton");return d(),_("div",xG,[o(se,{id:"chartContainer"},{default:r(()=>[o(le,{border_bottom:"",title_size:"small"},ut({title:r(()=>[i("div",UG,[i("h5",EG,h(p(f)("Average Order Gross ")),1),o(S,{"popper-class":"fct-tooltip",content:p(f)("Average Order Gross grouped by date period."),placement:"top"},{default:r(()=>[o(Y,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[t.isEmpty?void 0:{name:"action",fn:r(()=>[i("div",SG,[o(Be,{tag:"button",size:"x-small",title:C.$t("Zoom Chart"),onClick:B,class:ne(n.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}]),1024),o(ae,{class:"px-0 pt-0"},{default:r(()=>[c.value?(d(),U(E,{key:0,animated:"",rows:4,class:"px-5 pt-5"})):(d(),_(H,{key:1},[t.isEmpty?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-report-average-order-gross-chart",ref_key:"chartRef",ref:a},null,512)),t.isEmpty?x("",!0):(d(),_("div",QG,[i("div",DG,[i("div",$G,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",IG,h(C.$t("Average Order Gross")),1)]),i("div",TG,[i("span",MG,h(C.$t("Timeline")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},LG={class:"fct-report-average-order-items-wrap"},OG={class:"flex items-center gap-2"},HG={class:"fct-card-header-title is-small"},RG={class:"fct-btn-group sm"},PG={key:2,class:"chart-action-wrap"},KG={class:"chart-change-wrap"},NG={class:"chart-change"},GG={class:"text"},jG={class:"chart-change"},zG={class:"text"},YG={__name:"AverageOrderItems",props:{chartData:{type:Array,required:!0},chartRef:{},isEmpty:{type:Boolean,required:!1}},setup(t){const e=t,a=T(null);let s=null;T(yt.getChartType("order","avg_order_items_chart")||"line");const n=T(!1),l=me.colors.report,A=T(me.isDark()),u=X(()=>A.value?l.purple_dark_mode:l.purple),c=X(()=>[{name:f("Average Order Items"),type:"line",barMaxWidth:30,data:Array.isArray(e.chartData)?e.chartData.map(k=>k.average_order_items_count):[],smooth:!1,color:u.value,showSymbol:!0,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:u.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:ea(u.value)},lineStyle:{color:u.value},areaStyle:{opacity:.3,color:u.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),m=X(()=>xa(e.chartData.length)),v=X(()=>{const k=ns(e.chartData);return{title:{text:"",left:"center"},tooltip:{trigger:"axis",backgroundColor:A.value?"#253241":"#ffffff",borderColor:A.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:A.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:A.value?l.dark_cyan_blue_16:l.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:k,axisLabel:{color:A.value?"#FFFFFF":"#696778",fontSize:12,interval:m.value.interval},axisLine:{lineStyle:{type:"dashed",color:A.value?"#253241":"#D6DAE1"}}},yAxis:{name:"Order Items",type:"value",axisLabel:{formatter:"{value}",color:A.value?"#FFFFFF":"#696778",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:c.value}}),b=X(()=>Re.data.isBusy.orderChartData),g=()=>{s&&s.resize()},F=()=>{s&&(s.dispose(),s=null),de(()=>{a.value?(s=ot(a.value),s.setOption(v.value),window.addEventListener("resize",g)):s&&s.setOption(v.value)})},B=()=>{s&&s.setOption(v.value)},w=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};ce(()=>e.chartData,()=>{s&&s.setOption(v.value)}),ce(e.isEmpty,k=>{k||F()}),ce(b,k=>{k||F()});const C=()=>{A.value=me.isDark(),de(()=>{B()})};return pe(()=>{window.addEventListener("onFluentCartThemeChange",C),de(()=>{F(),window.addEventListener("resize",g)})}),je(()=>{window.removeEventListener("onFluentCartThemeChange",C,!1),s&&(window.removeEventListener("resize",g),s.dispose(),s=null)}),(k,S)=>{const E=y("el-tooltip"),V=y("el-skeleton");return d(),_("div",LG,[o(se,null,{default:r(()=>[o(le,{border_bottom:"",title_size:"small"},ut({title:r(()=>[i("div",OG,[i("h5",HG,h(p(f)("Average Order Items ")),1),o(E,{"popper-class":"fct-tooltip",content:p(f)("Average Order Items grouped by date period."),placement:"top"},{default:r(()=>[o(Y,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[t.isEmpty?void 0:{name:"action",fn:r(()=>[i("div",RG,[o(Be,{tag:"button",size:"x-small",title:k.$t("Zoom Chart"),onClick:w,class:ne(n.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}]),1024),o(ae,{class:"px-0 pt-0"},{default:r(()=>[b.value?(d(),U(V,{key:0,animated:"",rows:4,class:"px-5 pt-5"})):(d(),_(H,{key:1},[t.isEmpty?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-report-average-order-items-chart",ref_key:"chartRef",ref:a},null,512)),t.isEmpty?x("",!0):(d(),_("div",PG,[i("div",KG,[i("div",NG,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",GG,h(k.$t("Average Order Items")),1)]),i("div",jG,[i("span",zG,h(k.$t("Timeline")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},qG={class:"fct-order-report-page"},WG={class:"page-heading-wrap flex items-center justify-between"},XG={class:"page-title"},JG={__name:"OrderReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const a=t.reportFilter,s=l=>{l&&(Re.getOrderChartData({params:{...l.params,groupKey:""}}),Re.getNewVsReturningCustomer(l),Re.getReportByDayAndHour(l),Re.getItemCountDistribution(l),Re.getOrderCompletionTime(l),Re.getOrderValueDistribution(l))},n=l=>{const A=a.applicableFilters;A&&Re.getOrderChartData({params:{...A.params,groupKey:l}})};return pe(()=>{a.addListener("order-report",s),s(a.applicableFilters),a.value}),je(()=>{a.removeListener("order-report",s,!1),a.value}),(l,A)=>{const u=y("el-col"),c=y("el-row");return d(),U(et,{permission:"reports/view"},{default:r(()=>[i("div",qG,[i("div",WG,[i("h1",XG,h(l.$t("Orders")),1)]),o(LK,{orderReport:p(Re),reportFilter:p(a)},null,8,["orderReport","reportFilter"]),o(XK,{chartData:p(Re).data.orderChartData,reportFilter:p(a),onFetchChartData:n,"is-empty":!p(Re).data.summary.gross_sale},null,8,["chartData","reportFilter","is-empty"]),o(sN,{orderReport:p(Re)},null,8,["orderReport"]),p(Re).data.summary.tax_total||p(Re).data.summary.shipping_total?(d(),U(iN,{key:0,orderReport:p(Re),reportFilter:p(a)},null,8,["orderReport","reportFilter"])):x("",!0),o(_N,{tableData:p(Re).data.newVsReturning,reportFilter:p(a)},null,8,["tableData","reportFilter"]),o(kN,{tableData:p(Re).data.orderByGroup,reportFilter:p(a)},null,8,["tableData","reportFilter"]),o(OK,{chartData:p(Re).data.orderByDayAndHour},null,8,["chartData"]),o(c,{gutter:30},{default:r(()=>[o(u,{lg:12},{default:r(()=>[o(MN,{reportFilter:p(a),ref:"chartRef",chartData:p(Re).data.grossSaleByDay},null,8,["reportFilter","chartData"])]),_:1}),o(u,{lg:12},{default:r(()=>[o(nG,{chartData:p(Re).data.grossSaleByHour},null,8,["chartData"])]),_:1}),o(u,{lg:12},{default:r(()=>[o(zN,{ref:"chartRef",chartData:p(Re).data.itemCountDistribution},null,8,["chartData"])]),_:1}),o(u,{lg:12},{default:r(()=>[o(FG,{chartData:p(Re).data.orderValueDistribution},null,8,["chartData"])]),_:1}),o(u,{lg:12},{default:r(()=>[o(VG,{chartData:p(Re).data.orderChartData,"is-empty":!p(Re).data.summary.gross_sale},null,8,["chartData","is-empty"])]),_:1}),o(u,{lg:12},{default:r(()=>[o(YG,{chartData:p(Re).data.orderChartData,"is-empty":!p(Re).data.summary.order_count},null,8,["chartData","is-empty"])]),_:1}),o(u,{lg:12},{default:r(()=>[o(mG,{chartData:p(Re).data.orderCompletionTime},null,8,["chartData"])]),_:1})]),_:1})])]),_:1})}}},ZG={class:"fct-gross-sale-vs-net-revenue-wrap"},ej={class:"flex items-center gap-2"},tj={class:"fct-card-header-title is-small"},aj={class:"fct-chart-select"},sj={class:"fct-btn-group sm"},nj={class:"chart-action-wrap"},oj={class:"chart-change-wrap"},lj={class:"chart-change"},rj={class:"text"},ij={class:"chart-change"},Aj={class:"text"},dj={__name:"RefundLineChart",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!1},reportFilter:{type:Object},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},emits:["fetch-chart-data"],setup(t,{emit:e}){const a=t,s=me.colors.report,n=T(me.isDark()),l=T(null),A=T("default"),u=T(yt.getChartType("refund","refund_chart")||"line"),c=T(!1);X(()=>a.reportFilter.currentCurrencySign);const m=[{label:f("Default"),value:"default"},{label:f("Monthly"),value:"monthly"},{label:f("Yearly"),value:"yearly"}],v=e,b=()=>{v("fetch-chart-data",A.value)},g=X(()=>a.reportFilter.data.compareType!=="no_comparison"),F=(D,Q,I,L,K,N=!0)=>({name:D,type:Q,barMaxWidth:30,data:I,smooth:!1,color:L,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:L,borderRadius:[4,4,0,0]},yAxisIndex:K,emphasis:{scale:2,itemStyle:{color:ea(L)},lineStyle:{color:L},areaStyle:{opacity:.3,color:L}},animation:N,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),B=X(()=>{let D=[{name:f("Refunded Amount"),key:"refunded_amount",type:"line",color:n.value?s.blue_dark_mode:s.blue,yAxisIndex:0,data:a.chartData.map(Q=>Q.refunded_amount),animation:!1},{name:f("Total Refunds"),key:"refund_count",type:"bar",color:n.value?s.dark_cyan_blue_36:s.light_gray_cyan_blue,yAxisIndex:1,data:a.chartData.map(Q=>Q.refund_count),animation:!1}];return g.value&&D.unshift({name:f("Previous Refunded Amount"),key:"refunded_amount_compare",type:"line",color:n.value?s.purple_dark_mode:s.purple,yAxisIndex:0,data:a.compareData.map(Q=>Q.refunded_amount),animation:!1},{name:f("Previous Total Refunds"),key:"refund_count_compare",type:"bar",color:n.value?s.dark_cyan_blue_16:s.light_gray,yAxisIndex:1,data:a.compareData.map(Q=>Q.refund_count),animation:!0}),D.map(Q=>F(Q.name,Q.type,Q.data,Q.color,Q.yAxisIndex,Q.animation))});let w=null;const C=T(!0),k=()=>{w&&(w.dispose(),w=null),de(()=>{l.value&&(w=ot(l.value),V(),w.on("legendselectchanged",D=>{C.value=D.selected["Total Refunds"]||D.selected["Previous Total Refunds"]}))})},S=X(()=>{const D=Gs(a.reportFilter.data.dateRange);return f("This report looks at refunds made for successful orders created ")+D}),E=X(()=>xa(a.chartData.length)),V=()=>{if(!w)return;const D=ns(a.chartData),Q={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:n.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:n.value?"#253241":"#ffffff",borderColor:n.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:n.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:n.value?s.dark_cyan_blue_16:s.light_gray_blue}},formatter:I=>{let L=I[0].name;return I.forEach(K=>{const N=[0,2].includes(K.seriesIndex)?`${xe.scaled(K.value)}`:K.value,W=n.value?"#ffffff":"#565865";L+=`<div>
            ${K.marker}
            <span style="color: ${W};">${K.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${W};">
              ${N}
            </span>
          </div>`}),L}},xAxis:{type:"category",data:D,axisLabel:{color:n.value?"#ffffff":"#000000",fontSize:12,interval:E.value.interval},axisLine:{lineStyle:{type:"dashed",color:n.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:n.value?"#ffffff":"#000000",fontSize:12,formatter:I=>`${xe.scaled(I)}`},splitLine:{show:!0,lineStyle:{color:n.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",position:"right",axisLabel:{color:n.value?"#253241":"#D6DAE1",fontSize:12},splitLine:{show:!1}}],series:B.value,animation:!0,animationThreshold:2e3,animationDurationUpdate:300,animationEasingUpdate:"cubicInOut"};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},$=()=>{c.value=!c.value,c.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):V()};ce([()=>a.chartData,u],()=>{de(V)},{deep:!0}),ce(()=>Ka.data.refund,()=>{de(()=>{V()})},{deep:!0}),ce(()=>a.isEmpty,D=>{D||k()}),ce(()=>a.loading,D=>{D||k()}),ce(C,()=>{if(!w)return;const Q=w.getOption().series.map(I=>I.type==="line"?{...I,areaStyle:C.value?void 0:{opacity:.3}}:I);de(()=>{w.setOption({series:Q})})});const O=()=>{n.value=me.isDark(),de(()=>{V()})};return je(()=>{window.removeEventListener("onFluentCartThemeChange",O,!1)}),pe(()=>{window.addEventListener("onFluentCartThemeChange",O),de(k)}),(D,Q)=>{const I=y("el-tooltip"),L=y("el-option"),K=y("el-select"),N=y("el-skeleton");return d(),_("div",ZG,[o(se,{id:"chartContainer"},{default:r(()=>[o(le,{title_size:"small",border_bottom:""},ut({title:r(()=>[i("div",ej,[i("h5",tj,h(p(f)("Refunds Chart")),1),o(I,{"popper-class":"fct-tooltip",content:S.value,placement:"top"},{default:r(()=>[o(Y,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),_:2},[!t.isEmpty&&!t.loading?{name:"action",fn:r(()=>[i("div",aj,[o(K,{class:"el-select--x-small",modelValue:A.value,"onUpdate:modelValue":Q[0]||(Q[0]=W=>A.value=W),onChange:b},{default:r(()=>[(d(),_(H,null,q(m,W=>o(L,{key:W.value,label:D.$t(W.label),value:W.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),i("div",sj,[o(Be,{tag:"button",size:"small",title:D.$t("Zoom Chart"),onClick:$,class:ne(c.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:l.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(ae,{class:"px-0"},{default:r(()=>[t.loading?(d(),U(N,{key:0,animated:"",rows:7,class:"p-4"})):(d(),_(H,{key:1},[t.isEmpty?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_(H,{key:0},[t.isEmpty?x("",!0):(d(),_("div",{key:0,class:"fct-chart-wrap fct-refund-line-chart",ref_key:"chartRef",ref:l},null,512)),i("div",nj,[i("div",oj,[i("div",lj,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",rj,h(D.$t("Data")),1)]),i("div",ij,[i("span",Aj,h(D.$t("Timeline")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}};class uj extends Xt{constructor(){super(...arguments);fe(this,"data",{refundData:[],previousMetrics:[],summary:{},previousSummary:{},fluctuations:{},chartData:[],weeksBetweenRefund:[],isBusy:{chartData:!0,weeksBetweenRefund:!0,refundData:!0}})}get controllerKey(){return"RefundReportController"}makeRequest(a,s,n,l){l&&(this.data.isBusy[l]=!0),typeof s!="object"&&(s={});const A=te.get(`reports/${a}`,s);return this.resolvePromiseResponse(A,n,l),A}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null?Object.assign(this.data,l):this.data[n]=l[s]}).catch(l=>{console.log(l,"error")}).finally(()=>{n&&(this.data.isBusy[n]=!1)})}getRefundChartData(a={}){return this.makeRequest("refund-chart",a,null,"chartData")}getWeeksBetweenRefund(a={}){return this.makeRequest("weeks-between-refund",a,"data","weeksBetweenRefund")}getRefundSummary(a={}){return this.makeRequest("refund-summary",a,"summaryData","summaryData")}getRefundDataByGroup(a={}){return this.makeRequest("refund-data-by-group",a,"data","refundData")}getRefundReportFluctuations(a={}){return this.makeRequest("refund-report-fluctuations",a,"data","fluctuations")}}const pt=uj.init(),cj={key:1,class:"fct-report-order-summary summary-col-4"},fj={class:"summary-item-inner"},pj={class:"value"},mj={class:"inner-value"},hj={class:"title"},_j={__name:"Summary",setup(t){const e=X(()=>[{title:f("Refunds"),value:pt.data.summary.refund_count,key:"refund_count",percentage:pt.data.fluctuations.refund_count,info:f("Total refunds count including partially refunds."),no_currency:!0},{title:f("Refunded"),value:pt.data.summary.refunded_amount,key:"refunded_amount",percentage:pt.data.fluctuations.refunded_amount,info:f("Total Refunded Amount")},{title:f("Avgerage Amount"),value:pt.data.summary.average_refunded_amount,key:"average_refunded_amount",percentage:pt.data.fluctuations.average_refunded_amount,info:f("Total Refunded Amount / Total Refund count")},{title:f("Refund Rate"),value:pt.data.summary.refund_rate,key:"refund_rate",percentage:pt.data.fluctuations.refund_rate,info:f("Total Refunded Amount / Total Order Amount"),no_currency:!0,is_percentage:!0}]),a=X(()=>pt.data.isBusy.chartData);return(s,n)=>{const l=y("el-tooltip");return a.value?(d(),U(Cs,{key:0,loading:a.value,count:4},null,8,["loading"])):(d(),_("div",cj,[(d(!0),_(H,null,q(e.value,(A,u)=>(d(),_("div",{class:"summary-item",key:u},[i("div",fj,[i("div",pj,[i("div",mj,[i("span",null,h(A.no_currency?p(bt)(A.value):p(xe).scaled(A.value))+h(A.is_percentage?"%":""),1)]),o(ca,{fluctuation:A.percentage,amount:p(pt).data.previousSummary[A.key],"is-liability":!0,"has-currency":!A.no_currency,"is-percentage":A.is_percentage},null,8,["fluctuation","amount","has-currency","is-percentage"])]),i("div",hj,[M(h(A.title)+" ",1),o(l,{content:A.info,placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(Y,{class:"text-gray-500 w-4 flex-shrink-0",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))]))}}},gj={class:"fct-report-refund-weeks-between-an-order-wrap"},vj={class:"fct-btn-group sm"},yj={class:"chart-action-wrap"},bj={class:"chart-change-wrap"},wj={class:"chart-change"},Bj={class:"text"},Cj={class:"chart-change"},kj={class:"text"},Fj={__name:"WeeksBetweenRefundChart",props:{chartData:{type:Array,required:!0},chartTitle:{type:String,default:""},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},setup(t){const e=t,a=T(null),s=T("bar");let n=null;const l=me.colors.report,A=T(me.isDark()),u=X(()=>A.value?l.dark_cyan_blue_16:l.light_gray),c=X(()=>[{name:f("Refund Count"),type:s.value,data:e.chartData.map(B=>B.occurrence),smooth:!0,color:u.value,showSymbol:!1,itemStyle:{borderRadius:[4,4,0,0]},emphasis:{itemStyle:{color:ea(u.value)}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}]),m=X(()=>xa(e.chartData.length)),v=()=>({title:{text:e.chartTitle,left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:A.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:A.value?"#253241":"#ffffff",borderColor:A.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:A.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:A.value?l.dark_cyan_blue_16:l.light_gray_blue}}},xAxis:{type:"category",data:e.chartData.map(B=>B.weekBetween),axisLabel:{color:A.value?"#ffffff":"#000000",fontSize:12,interval:m.value.interval,formatter:B=>B>1?`${B} weeks`:`${B} week`},axisLine:{lineStyle:{type:"dashed",color:A.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",color:A.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:A.value?"#253241":"#D6DAE1"}}},series:c.value}),b=()=>{n&&(n.dispose(),n=null),de(()=>{a.value&&(n=ot(a.value),n.setOption(v()),window.addEventListener("resize",()=>{n.resize()}))})};ce(()=>e.chartData,()=>{n&&n.setOption(v())}),ce(()=>e.isEmpty,B=>{B||b()}),ce(()=>e.loading,B=>{B||b()});const g=()=>{A.value=me.isDark(),de(()=>{F()})};je(()=>{window.removeEventListener("onFluentCartThemeChange",g,!1)});const F=B=>{n&&n.setOption(v(),!0)};return pe(()=>{window.addEventListener("onFluentCartThemeChange",g),de(()=>{b()})}),(B,w)=>{const C=y("el-skeleton");return d(),_("div",gj,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Weeks between an order's created date and refund date"),title_size:"small",border_bottom:""},ut({_:2},[!t.isEmpty&&!t.loading?{name:"action",fn:r(()=>[i("div",vj,[o(St,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}:void 0]),1032,["title"]),o(ae,{class:"px-0"},{default:r(()=>[t.loading?(d(),U(C,{key:0,animated:"",rows:7,class:"p-4"})):(d(),_(H,{key:1},[t.isEmpty?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_(H,{key:0},[t.isEmpty?x("",!0):(d(),_("div",{key:0,class:"fct-chart-wrap fct-refund-weeks-between-an-order-chart",ref_key:"chartRef",ref:a},null,512)),i("div",yj,[i("div",bj,[i("div",wj,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",Bj,h(p(f)("Refund Count")),1)]),i("div",Cj,[i("span",kj,h(p(f)("Weeks")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}},xj={class:"fct-btn-group sm w-[240px] gap-2"},Uj={key:0},Ej={key:1},Sj={class:"inline-flex"},Qj={class:"inline-flex"},Dj={__name:"RefundTable",props:{tableData:{type:Array,required:!0},currencySign:{type:String},loading:{type:Boolean,default:!0}},emits:["group-data"],setup(t,{emit:e}){const a=e;T([]);const s=T([{label:f("Billing Country"),value:"billing_country"},{label:f("Shipping Country"),value:"shipping_country"},{label:f("Payment Method Title"),value:"payment_method_title"}]),n=T("billing_country"),l=X(()=>{var u;return((u=s.value.find(c=>c.value===n.value))==null?void 0:u.label)||""}),A=()=>{a("group-data",n.value)};return(u,c)=>{const m=y("el-option"),v=y("el-select"),b=y("el-skeleton"),g=y("el-table-column"),F=y("el-empty"),B=y("el-table");return d(),U(se,{class:"overflow-hidden"},{default:r(()=>[o(le,{title:p(f)("Refunds Grouped By"),title_size:"small"},ut({_:2},[t.loading?void 0:{name:"action",fn:r(()=>[i("div",xj,[o(v,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=w=>n.value=w),onChange:A,class:"el-select--x-small",placeholder:p(f)("Select Group")},{default:r(()=>[(d(!0),_(H,null,q(s.value,w=>(d(),U(m,{key:w.value,label:p(f)(w.label),value:w.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),o(po,{data:t.tableData,filename:"refund.csv",class:"!ml-0"},null,8,["data"])])]),key:"0"}]),1032,["title"]),o(ae,{class:"px-0 pb-0"},{default:r(()=>[t.loading?(d(),U(b,{key:0,animated:"",rows:7,class:"p-4"})):(d(),U(B,{key:1,data:t.tableData,height:"330"},{empty:r(()=>[o(F,{text:"No data available"})]),default:r(()=>[o(g,{prop:n.value,label:p(f)(l.value),"min-width":"150"},{default:r(w=>[n.value!=="payment_method_type"&&n.value!=="payment_method_title"?(d(),_("span",Uj,h(p(lo)(w.row[n.value])),1)):(d(),_("span",Ej,h(w.row[n.value]),1))]),_:1},8,["prop","label"]),o(g,{prop:"refunds",label:p(f)("Refunds"),"min-width":"150"},{default:r(w=>[M(h(w.row.totalRefunded),1)]),_:1},8,["label"]),o(g,{prop:"refunded_amount",label:p(f)("Refunded Amount"),"min-width":"150"},{default:r(w=>[i("div",Sj,h(p(xe).scaled(w.row.totalRefundedAmount.total)),1)]),_:1},8,["label"]),o(g,{prop:"average_refund",label:p(f)("Average Refund"),"min-width":"150"},{default:r(w=>[i("div",Qj,h(p(xe).scaled(w.row.totalRefundedAmount.average)),1)]),_:1},8,["label"])]),_:1},8,["data"]))]),_:1})]),_:1})}}},$j={class:"fct-refund-report-page"},Ij={class:"page-heading-wrap flex items-center justify-between"},Tj={class:"page-title"},Mj={__name:"RefundReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const a=t.reportFilter,s=u=>{pt.getRefundChartData({params:{...u.params,groupKey:"default"}}),pt.getWeeksBetweenRefund(u),n(u)},n=u=>{pt.getRefundDataByGroup({params:{...u.params,groupKey:"billing_country"}})},l=u=>{const c=a.applicableFilters;pt.getRefundDataByGroup({params:{...c.params,groupKey:u}})},A=u=>{const c=a.applicableFilters;c&&pt.getRefundChartData({params:{...c.params,groupKey:u}})};return pe(()=>{a.addListener("refund-report",s),s(a.applicableFilters)}),je(()=>{a.removeListener("refund-report")}),(u,c)=>(d(),U(et,{permission:"reports/view"},{default:r(()=>[i("div",$j,[i("div",Ij,[i("h1",Tj,h(u.$t("Refunds")),1)]),o(_j),o(dj,{ref:"refundChart",chartData:p(pt).data.chartData,compareData:p(pt).data.previousMetrics,reportFilter:p(a),onFetchChartData:A,"is-empty":!p(pt).data.summary.refund_count,loading:p(pt).data.isBusy.chartData},null,8,["chartData","compareData","reportFilter","is-empty","loading"]),o(Fj,{chartData:p(pt).data.weeksBetweenRefund,"is-empty":!p(pt).data.weeksBetweenRefund.length,loading:p(pt).data.isBusy.weeksBetweenRefund},null,8,["chartData","is-empty","loading"]),o(Dj,{tableData:p(pt).data.refundData,currencySign:p(a).currentCurrencySign,onGroupData:l,loading:p(pt).data.isBusy.refundData},null,8,["tableData","currencySign","loading"])])]),_:1}))}},Vj={class:"fct-gross-sale-vs-net-revenue-wrap"},Lj={class:"fct-chart-select"},Oj={class:"fct-btn-group sm"},Hj={class:"chart-action-wrap"},Rj={class:"chart-change-wrap"},Pj={class:"chart-change"},Kj={class:"text"},Nj={class:"chart-change"},Gj={class:"text"},jj={__name:"RetentionChart",props:{chartData:{type:Object,required:!0},reportFilter:{type:Object},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},emits:["fetch-custom-chart-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T(yt.getChartType("subscription","retention_chart")||"line"),l=T(!1),A=T(null);T([]);const u=me.colors.report,c=T(me.isDark()),m=(V,$,O,D)=>({name:V,type:$,barMaxWidth:30,data:O,smooth:!1,color:D,lineStyle:{width:3},areaStyle:{opacity:.3,color:D},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:D,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:ea(D)},lineStyle:{color:D},areaStyle:{opacity:.3,color:D}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}),v=X(()=>Object.keys(a.chartData).map($=>$.startsWith("day_")?f("%s Days",$.replace("day_","")):$==="more_than_year"?f("More than Year"):$)),b=X(()=>Object.keys(a.chartData).map($=>a.chartData[$]||0)),g=X(()=>[m(f("Customers"),n.value,b.value,c.value?u.dark_cyan_blue_16:u.light_gray)]);let F=null;const B=()=>{F&&(F.dispose(),F=null),de(()=>{s.value&&(F=ot(s.value),w())})},w=()=>{if(!F)return;const V={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:c.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:c.value?"#253241":"#ffffff",borderColor:c.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:c.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:c.value?u.dark_cyan_blue_16:u.light_gray_blue}}},xAxis:{type:"category",data:v.value,axisLabel:{color:c.value?"#ffffff":"#565865",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:c.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:c.value?"#ffffff":"#565865",fontSize:12},splitLine:{show:!0,lineStyle:{color:c.value?"#253241":"#D6DAE1",type:"dashed"}}}],series:g.value};F.setOption(V,{notMerge:!0,replaceMerge:["series"]})},C=V=>{yt.onChange("subscription","retention_chart",V),n.value!==V&&(l.value=!1,n.value=V,w())},k=e,S=()=>{k("fetch-custom-chart-data",A.value)};ce(()=>a.chartData,()=>{de(w)},{deep:!0}),ce(()=>Ka.data.refund,()=>{de(w)},{deep:!0}),ce(()=>a.isEmpty,V=>{V||B()}),ce(()=>a.loading,V=>{V||B()});const E=()=>{c.value=me.isDark(),de(()=>{w()})};return je(()=>{window.removeEventListener("onFluentCartThemeChange",E,!1)}),pe(()=>{window.addEventListener("onFluentCartThemeChange",E),de(B)}),(V,$)=>{const O=y("el-input"),D=y("el-skeleton");return d(),_("div",Vj,[o(se,{id:"chartContainer"},{default:r(()=>[o(le,{title:p(f)("Retention Chart"),title_size:"small",border_bottom:""},ut({_:2},[!t.isEmpty&&!t.loading?{name:"action",fn:r(()=>[i("div",Lj,[o(O,{type:"text",modelValue:A.value,"onUpdate:modelValue":$[0]||($[0]=Q=>A.value=Q),placeholder:p(f)("Enter custom days"),class:"el-input--x-small",onKeyup:fa(S,["enter"])},null,8,["modelValue","placeholder"])]),i("div",Oj,[o(Fs,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:C},null,8,["activeType"]),o(St,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1032,["title"]),o(ae,{class:"px-0"},{default:r(()=>[t.loading?(d(),U(D,{key:0,animated:"",rows:7,class:"p-4"})):(d(),_(H,{key:1},[t.isEmpty?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_(H,{key:0},[i("div",{class:"fct-chart-wrap fct-refund-line-chart",ref_key:"chartRef",ref:s},null,512),i("div",Hj,[i("div",Rj,[i("div",Pj,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",Kj,h(p(f)("Data")),1)]),i("div",Nj,[i("span",Gj,h(p(f)("Timeline")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}},zj={class:"fct-revenue-line-chart-wrap"},Yj={class:"flex items-center gap-2"},qj={class:"fct-card-header-title is-small"},Wj={class:"w-[270px] fct-btn-group sm gap-1.5 lg:gap-0"},Xj={class:"chart-action-wrap"},Jj={class:"chart-change-wrap"},Zj={class:"chart-change"},ez={class:"text"},tz={class:"chart-change"},az={class:"text"},sz={__name:"SubscriptionChartNew",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},emits:["filter-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T(yt.getChartType("subscription","subscription_chart")||"line"),l=T(!1),A=me.colors.report,u=T(me.isDark()),c=(D,Q,I,L,K)=>({name:D,type:Q,barMaxWidth:30,yAxisIndex:I,data:L,smooth:!1,color:K,lineStyle:{width:3},areaStyle:{opacity:.3,color:K},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:K,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:ea(K)},lineStyle:{color:K},areaStyle:{opacity:.3,color:K}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),m=T(a.appliedGroupKey);ce(()=>a.appliedGroupKey,D=>{m.value=D});const v=[{label:"Default",value:"default"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}],b=e,g=()=>{b("filter-data",m.value)},F=X(()=>a.reportFilter.data.compareType!=="no_comparison"),B=X(()=>{let D=[{name:f("Current Range"),key:"count",type:n.value,color:u.value?A.dark_cyan_blue_36:A.light_gray_cyan_blue,data:a.chartData.map(Q=>Q.count)}];return F.value&&D.unshift({name:f("Compare Range"),key:"count",type:n.value,color:u.value?A.dark_cyan_blue_16:A.light_gray,data:a.compareData.map(Q=>({value:Q.count,date:Q.group}))}),D.map(Q=>c(Q.name,Q.type,0,Q.data,Q.color))});let w=null;const C=()=>{w&&(w.dispose(),w=null),de(()=>{s.value&&(w=ot(s.value),E())})},k=X(()=>{const D=Gs(a.reportFilter.data.dateRange);return f("This report looks at the subscription you received ")+D}),S=X(()=>xa(a.chartData.length)),E=()=>{if(!w)return;const D=ns(a.chartData),Q={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:u.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?A.dark_cyan_blue_16:A.light_gray_blue}},alwaysShowContent:!1,formatter:I=>{let L="";return I.forEach(function(K,N){const W=typeof K.data=="object"&&K.data!==null,R=W?js(K.data.date):K.name,ee=W?K.data.value:K.value,oe=I.length>1&&N===0;oe&&(L+='<div style="margin-bottom: 10px">'),L+=`<div>${R}</div>`,L+=`<div>
            <span style="color:${K.color}"></span> 
            <span>${f("Subscription")}</span>
            <span style="float: right; margin-left: 20px;">
              ${bt(ee)}
            </span>
          </div>`,oe&&(L+="</div>")}),L}},grid:{show:!1},xAxis:{type:"category",data:D,axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12,interval:S.value.interval},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}},series:B.value};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},V=()=>{l.value=!l.value,l.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):E()},$=D=>{yt.onChange("subscription","subscription_chart",D),n.value!==D&&(l.value=!1,n.value=D,E())};ce([()=>a.chartData,m],()=>{de(E)},{deep:!0}),ce(()=>Ka.data.revenue,()=>{de(()=>{E()})},{deep:!0}),ce(()=>a.isEmpty,D=>{D||C()}),ce(()=>a.loading,D=>{D||C()});const O=()=>{u.value=me.isDark(),de(()=>{E()})};return je(()=>{window.removeEventListener("onFluentCartThemeChange",O,!1)}),pe(()=>{window.addEventListener("onFluentCartThemeChange",O),de(()=>{C()})}),(D,Q)=>{const I=y("el-tooltip"),L=y("el-option"),K=y("el-select"),N=y("el-skeleton");return d(),_("div",zj,[o(se,null,{default:r(()=>[o(le,{title_size:"small",border_bottom:""},ut({title:r(()=>[i("div",Yj,[i("h4",qj,h(p(f)("Subscription Chart")),1),o(I,{"popper-class":"fct-tooltip",content:k.value,placement:"top"},{default:r(()=>[o(Y,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),_:2},[!t.isEmpty&&!t.loading?{name:"action",fn:r(()=>[i("div",Wj,[o(K,{class:"el-select--x-small",modelValue:m.value,"onUpdate:modelValue":Q[0]||(Q[0]=W=>m.value=W),onChange:g},{default:r(()=>[(d(),_(H,null,q(v,W=>o(L,{key:W.value,label:p(f)(W.label),value:W.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),o(Fs,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:$},null,8,["activeType"]),o(Be,{tag:"button",size:"small",title:p(f)("Zoom Chart"),onClick:V,class:ne(l.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(ae,{class:"px-0 pt-0"},{default:r(()=>[t.loading?(d(),U(N,{key:0,animated:"",rows:7,class:"p-4"})):(d(),_(H,{key:1},[t.isEmpty?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_(H,{key:0},[t.isEmpty?x("",!0):(d(),_("div",{key:0,class:"fct-chart-wrap fct-revenue-line-chart mt-3",ref_key:"chartRef",ref:s},null,512)),i("div",Xj,[i("div",Jj,[i("div",Zj,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",ez,h(p(f)("Data")),1)]),i("div",tz,[i("span",az,h(p(f)("Timeline")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}};class nz extends Xt{constructor(){super(...arguments);fe(this,"data",{overviews:[],fluctuations:[],chartData:[],productList:[],customerList:[],revenueChurnRateNet:{title:f("Revenue Churn Rate"),isCurrency:!1,value:0},netNewMrr:{title:f("Net New MRR"),isCurrency:!0,value:0},isBusy:{overviews:!1,fluctuations:!1,chartData:!0,productList:!1,customerList:!1,revenueChurnRateNet:!0,netNewMrr:!0},currentMetrics:[],previousMetrics:[]})}get controllerKey(){return"SubscriptionReportController"}get revenueChurnRateNet(){return this.data.revenueChurnRateNet}get netNewMrr(){return this.data.netNewMrr}makeRequest(a,s,n,l){typeof s!="object"&&(s={}),this.data.isBusy[l]=!0;const A=te.get(`reports/${a}`,s);return this.resolvePromiseResponse(A,n,l),A}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null||(this.data[n]=l[s])}).catch(l=>{console.log(l,"error")}).finally(()=>{this.data.isBusy[n]=!1})}getSubscriptionReportFluctuations(a={}){return this.makeRequest("getSubscriptionReportFluctuations",a,"fluctuations","fluctuations")}getSubscriptionReportFluctuations(a={}){return this.makeRequest("get-subscription-fluctuations",a,"fluctuations","fluctuations")}getRetentionChart(a={}){return this.makeRequest("retention-chart",a,"chartData","chartData")}listSubscriptionsByProduct(a={}){return this.makeRequest("list-subscription-by-product",a,"productList","productList")}listSubscriptionsByCustomer(a={}){return this.makeRequest("list-subscription-by-customer",a,"customerList","customerList")}getSubscriptionOverview(a={}){return this.makeRequest("get-subscription-overview",a,"overviews","overviews").then(s=>{this.getRevenueChurnRateNet(a),this.getNetNewMrr(a)}).finally(()=>{})}getRevenueChurnRateNet(a={}){this.data.isBusy.revenueChurnRateNet=!0,te.get("reports/get-subscription-overview/revenue-churn-rate-net",a).then(s=>{this.data.revenueChurnRateNet=s.data}).finally(()=>{this.data.isBusy.revenueChurnRateNet=!1})}getNetNewMrr(a={}){this.data.isBusy.netNewMrr=!0,te.get("reports/get-subscription-overview/net-new-mrr",a).then(s=>{this.data.netNewMrr=s.data}).finally(()=>{this.data.isBusy.netNewMrr=!1})}}const nn=nz.init(),oz={key:1,class:"fct-report-order-summary summary-col-4"},lz={class:"summary-item-inner"},rz={class:"value"},iz={class:"inner-value"},Az={class:"title"},dz={__name:"Summary",props:{summaryData:{type:Object,required:!0},fluctuations:{type:Object,required:!0},reportFilter:{type:Object},subscriptionReport:{type:Object},loading:{type:Boolean,default:!0}},setup(t){const e=t;X(()=>{var n;return((n=e.reportFilter)==null?void 0:n.currentCurrencySign)||""});const a=[{title:f("Future Installments"),key:"future_installments",info:f("The total amount expected from future installments."),hasCurrency:!0}],s=X(()=>!e.summaryData||!e.fluctuations?[]:a.map(n=>({...n,title:n.title,value:e.summaryData[n.key]||0,fluctuation:e.fluctuations[n.key]||0,hasCurrency:n.hasCurrency})));return(n,l)=>{const A=y("el-tooltip");return t.loading?(d(),U(Cs,{key:0,loading:t.loading},null,8,["loading"])):(d(),_("div",oz,[(d(!0),_(H,null,q(s.value,(u,c)=>(d(),_("div",{class:"summary-item",key:c},[i("div",lz,[i("div",rz,[i("div",iz,[o(zs,{amount:p(xe).scaled(u.value),title:u.title},null,8,["amount","title"])])]),i("div",Az,[M(h(u.title)+" ",1),o(A,{content:u.info,placement:"top","popper-class":"fct-tooltip",effect:"dark"},{default:r(()=>[o(Y,{class:"text-gray-500 w-4 h-4 cursor-help",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))]))}}},uz={class:"chart-action-wrap"},cz={class:"chart-change-wrap"},fz={class:"chart-change"},pz={class:"text"},mz={class:"chart-change"},hz={class:"text"},_z={__name:"LineChart",props:{chartData:{type:Array,required:!0},chartTitle:{type:String,default:""},formatValuePercentage:{type:Boolean,default:!1},amountFormat:{type:Boolean,default:!1},chartType:{type:String},zoomIsActive:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},setup(t,{expose:e}){const a=t,s=T(null),n=T(a.chartData);e({chartRef:s}),ce(()=>a.chartData,k=>{n.value=k},{deep:!0});const l=me.colors.report,A=T(me.isDark()),u=X(()=>({textColor:A.value?"#ffffff":"#000000",borderColor:A.value?"#4a5a6b":"#c0c4ca",splitLineColor:A.value?"#253241":"#D6DAE1",bgColor:A.value?"#2d3748":"#ffffff"})),c=X(()=>A.value?l.dark_cyan_blue_16:l.light_gray),m=X(()=>n.value.map(k=>js(k.label))),v=X(()=>[{name:a.chartTitle,type:a.chartType,data:n.value.map(k=>k.value),smooth:!1,color:c.value,lineStyle:{width:3},barMaxWidth:30,areaStyle:{opacity:.3,color:c.value},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:c.value,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:ea(c.value)},lineStyle:{color:c.value},areaStyle:{opacity:.3,color:c.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}]);let b=null;const g=()=>{b&&(b.dispose(),b=null),de(()=>{s.value&&(b=ot(s.value),B())})},F=X(()=>xa(a.chartData.length)),B=()=>{if(!b)return;const k={legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:A.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:A.value?"#253241":"#ffffff",borderColor:A.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:A.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:A.value?l.dark_cyan_blue_16:l.light_gray_blue}}},xAxis:{type:"category",data:m.value,axisLabel:{color:u.value.textColor,fontSize:12,interval:F.value.interval},axisLine:{lineStyle:{type:"dashed",color:u.value.splitLineColor}}},yAxis:{type:"value",axisLabel:{color:u.value.textColor,fontSize:12},splitLine:{show:!0,lineStyle:{color:u.value.splitLineColor,type:"dashed"}}},series:v.value};b.setOption(k,{notMerge:!0,replaceMerge:["series"]})},w=k=>{k?b.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):B()};ce([()=>n.value,()=>a.chartType,()=>me.isDark(),()=>a.loading],()=>{g()},{deep:!0}),ce(()=>a.zoomIsActive,k=>{w(k)});const C=()=>{A.value=me.isDark(),de(()=>{B()})};return pe(()=>{window.addEventListener("onFluentCartThemeChange",C),de(g)}),je(()=>{window.removeEventListener("onFluentCartThemeChange",C,!1)}),(k,S)=>{const E=y("el-skeleton");return t.loading?(d(),U(E,{key:0,animated:"",rows:8})):(d(),_(H,{key:1},[n.value.length?(d(),_(H,{key:0},[n.value.length?(d(),_("div",{key:0,class:"fct-chart-wrap",ref_key:"chartRef",ref:s},null,512)):x("",!0),i("div",uz,[i("div",cz,[i("div",fz,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",pz,h(k.$t("Data")),1)]),i("div",mz,[i("span",hz,h(k.$t("Timeline")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])])],64)):(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"]))],64))}}},gz={class:"fct-daily-signup-chart-wrap"},vz={class:"fct-btn-group sm gap-2 lg:gap-0"},yz={__name:"DailySignupChart",props:{reportFilter:{type:Object,required:!1}},setup(t){const e=t,a=T(yt.getChartType("subscription","daily_signups_chart")||"line"),s=T([]),n=T(""),l=T(!1),A=T(!0),u=m=>{A.value=!0,te.get("reports/daily-signups",{params:{...m}}).then(v=>{s.value=v.signups,s.value.forEach(b=>{b.label=b.trend_date})}).finally(()=>A.value=!1)},c=m=>{yt.onChange("subscription","daily_signups_chart",m),a.value!==m&&(a.value=m)};return pe(()=>{u(e.reportFilter.applicableFilters.params),e.reportFilter.addListener("daily-signup-chart",m=>{u(m.params)})}),(m,v)=>(d(),_("div",gz,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Daily Signups"),title_size:"small",border_bottom:""},ut({_:2},[s.value.length&&!A.value?{name:"action",fn:r(()=>[i("div",vz,[o(Fs,{activeType:a.value,types:{line:"LineChart",bar:"BarChart"},onChange:c},null,8,["activeType"]),n.value?(d(),U(St,{key:0,targetRef:n.value.chartRef},null,8,["targetRef"])):x("",!0)])]),key:"0"}:void 0]),1032,["title"]),o(ae,null,{default:r(()=>[o(_z,{chartData:s.value,"chart-title":p(f)("Signups"),chartType:a.value,zoomIsActive:l.value,ref_key:"lineChartRef",ref:n,loading:A.value},null,8,["chartData","chart-title","chartType","zoomIsActive","loading"])]),_:1})]),_:1})]))}};const bz={name:"Comparison",props:{currentMetrics:{type:Array},previousMetrics:{type:Array},reportFilter:{type:Object},hasComparison:{type:Boolean},loading:{type:Boolean,default:!0}},components:{CardContainer:se,CardHeader:le,CardBody:ae},data(){return{}},computed:{currencySign(){return this.reportFilter.currentCurrencySign},comparisonData(){const t=[];return this.hasComparison?(this.currentMetrics.forEach((e,a)=>{if(a<this.previousMetrics.length){const s=this.previousMetrics[a],n=e.count,l=s.count,A=l?((n-l)/l*100).toFixed(2):"n/a";t.push({group:`${this.formatDate(e.group)} vs ${this.formatDate(s.group)}`,count:bt(n),previous_count:bt(l),percent_change:A})}}),t):this.currentMetrics}},methods:{translate:f,getPercentageClass(t){return t>0?"text-success-500":t<0?"text-red-500":"text-system-light"},formatDate(t){const e=t.split("-");if(e.length===3){const[a,s,n]=e;return`${$a[parseInt(s)-1]} ${n}, ${a}`}else if(e.length===2){const[a,s]=e;return`${$a[parseInt(s)-1]} ${a}`}else if(e.length===1){const[a]=e;return`${a}`}}}},wz={class:"fct-revenue-comparison"},Bz={class:"inline-flex"},Cz={class:"inline-flex"};function kz(t,e,a,s,n,l){const A=y("CardHeader"),u=y("el-skeleton"),c=y("el-table-column"),m=y("el-table"),v=y("CardBody"),b=y("CardContainer");return d(),_("div",wz,[o(b,{class:"overflow-hidden"},{default:r(()=>[o(A,{title:l.translate("Subscription Comparison"),title_size:"small"},null,8,["title"]),o(v,{class:"px-0 pb-0"},{default:r(()=>[a.loading?(d(),U(u,{key:0,animated:"",rows:7,class:"p-4"})):(d(),U(m,{key:1,data:l.comparisonData,class:"w-full",maxHeight:"390"},{default:r(()=>[o(c,{label:"Date"},{default:r(g=>[M(h(g.row.group),1)]),_:1}),o(c,{label:l.translate("Current Range")},{default:r(g=>[i("div",Bz,h(g.row.count),1)]),_:1},8,["label"]),a.hasComparison?(d(),_(H,{key:0},[o(c,{label:l.translate("Compare Range")},{default:r(g=>[i("div",Cz,h(g.row.previous_count),1)]),_:1},8,["label"]),o(c,{label:l.translate("Change")+" (%)"},{default:r(g=>[i("span",{class:ne(l.getPercentageClass(g.row.percent_change))},h(g.row.percent_change),3)]),_:1},8,["label"])],64)):x("",!0)]),_:1},8,["data"]))]),_:1})]),_:1})])}const Fz=ye(bz,[["render",kz]]),xz={class:"fct-refund-report-page"},Uz={class:"page-heading-wrap flex items-center justify-between"},Ez={class:"page-title"};const Sz={__name:"SubscriptionReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=T({summary:{},fluctuations:{},currentMetrics:[],compareMetrics:[],loading:!0}),s=e.reportFilter,n=T("default"),l=X(()=>s.currentCurrencySign);s.applicableFilters;const A=T(""),u=T(""),c=X(()=>{var k;const w=((k=nn.data)==null?void 0:k.productList)||[],C=A.value.toLowerCase();return w.filter(S=>S.product_name.toLowerCase().includes(C))}),m=X(()=>{var k;const w=((k=nn.data)==null?void 0:k.customerList)||[],C=u.value.toLowerCase();return w.filter(S=>S.customer_name.toLowerCase().includes(C)||S.email.toLowerCase().includes(C))}),v=w=>{b(w),F(w)},b=(w,C="default")=>{a.value.loading=!0,te.get("reports/subscription-chart",{params:{...w.params,groupKey:C}}).then(k=>{a.value=k}).finally(()=>a.value.loading=!1)},g=w=>{n.value!==w&&(n.value=w,b(s.applicableFilters.params,w))},F=(w,C=null)=>{nn.getRetentionChart({params:{...w.params,customDays:C}})},B=w=>{F(s.applicableFilters,w)};return pe(()=>{s.addListener("subscription-report",w=>{v(w)}),v(s.applicableFilters)}),je(()=>{s.removeListener("subscription-report")}),(w,C)=>{const k=y("el-col"),S=y("el-row"),E=y("el-input"),V=y("el-table-column"),$=y("el-empty"),O=y("el-table");return d(),U(et,{permission:"reports/view"},{default:r(()=>[i("div",xz,[i("div",Uz,[i("h1",Ez,h(p(f)("Subscriptions")),1)]),o(dz,{summaryData:a.value.summary,fluctuations:a.value.fluctuations,subscriptionReport:p(nn),reportFilter:p(s),loading:a.value.loading},null,8,["summaryData","fluctuations","subscriptionReport","reportFilter","loading"]),o(sz,{ref:"subscriptionChart",chartData:a.value.currentMetrics,compareData:a.value.compareMetrics,reportFilter:p(s),appliedGroupKey:n.value,onFilterData:g,"is-empty":!a.value.summary.total_subscriptions,loading:a.value.loading},null,8,["chartData","compareData","reportFilter","appliedGroupKey","is-empty","loading"]),o(Fz,{class:"my-7.5",currentMetrics:a.value.currentMetrics,previousMetrics:a.value.compareMetrics,hasComparison:e.reportFilter.data.compareType!=="no_comparison",reportFilter:p(s),loading:a.value.loading},null,8,["currentMetrics","previousMetrics","hasComparison","reportFilter","loading"]),o(S,{gutter:30},{default:r(()=>[o(k,{lg:12},{default:r(()=>[o(jj,{ref:"subscriptionChart",chartData:p(nn).data.chartData,onFetchCustomChartData:B,"is-empty":!a.value.summary.total_subscriptions,loading:p(nn).data.isBusy.chartData},null,8,["chartData","is-empty","loading"])]),_:1}),o(k,{lg:12},{default:r(()=>[o(yz,{reportFilter:p(s),"is-empty":!a.value.summary.total_subscriptions},null,8,["reportFilter","is-empty"])]),_:1})]),_:1}),x("",!0),x("",!0),x("",!0),x("",!0)])]),_:1})}}},Qz={class:"fct-refund-report-page"},Dz={class:"page-heading-wrap inline-flex gap-1 items-center"},$z={class:"page-title"},Iz={key:1},Tz={key:1,class:"fct-report-order-summary summary-col-2"},Mz={class:"summary-item-inner"},Vz={class:"value"},Lz={class:"inner-value"},Oz={class:"title"},Hz={class:"fct-revenue-line-chart-wrap"},Rz={class:"flex items-center gap-2"},Pz={class:"fct-card-header-title is-small"},Kz={class:"fct-btn-group sm"},Nz={class:"chart-action-wrap"},Gz={class:"chart-change-wrap"},jz={class:"chart-change"},zz={class:"text"},Yz={class:"chart-change"},qz={class:"text"},Wz={__name:"FutureRenewalsReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const a=t.reportFilter,s=T(!1),n=me.colors.report,l=T(me.isDark()),A=T(null);let u=null;const c=T({totalProjected:0,totalRenewals:0,projections:[],period:{start:null,end:null},groupBy:"monthly"}),m=T(!0),v=($,O="monthly")=>{m.value=!0,te.get("reports/future-renewals",{params:{...$.params,groupKey:O}}).then(D=>{c.value=D}).finally(()=>m.value=!1)},b=($,O,D,Q,I)=>({name:$,type:O,barMaxWidth:30,yAxisIndex:D,data:Q,smooth:!1,color:I,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:I,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:ea(I)},lineStyle:{color:I}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),g=()=>{u&&(u.dispose(),u=null),de(()=>{A.value&&(u=ot(A.value),F())})},F=()=>{if(!u)return;const $=ns(c.value.projections),O={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:l.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?n.dark_cyan_blue_16:n.light_gray_blue}},formatter:D=>{let Q=D[0].name;return D.forEach((I,L)=>{const K=L===0?`${xe.formatScaled(I.value)}`:bt(I.value),N=l.value?"#ffffff":"#565865";Q+=`<div>
                        ${I.marker}
                        <span style="color: ${N};">${I.seriesName}</span>
                        <span style="float: right; margin-left: 20px; color: ${N};">
                        ${K}
                        </span>
                    </div>`}),Q}},grid:{show:!1},xAxis:{type:"category",data:$,axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12,interval:S.value.interval},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12,formatter:D=>`${xe.formatScaled(D)}`},splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!1}}],series:k.value};u.setOption(O,{notMerge:!0,replaceMerge:["series"]})},B=()=>{s.value=!s.value,s.value?u.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):F()},w=()=>{l.value=me.isDark(),de(()=>{F()})},C=X(()=>{const $=Gs(c.value.period);return f("This report is calculated by looking at active subscriptions and extrapolating their renewals over time, to estimate future renewal revenue ")+$}),k=X(()=>[{name:f("Revenue"),key:"count",type:"line",color:l.value?n.blue_dark_mode:n.blue,data:c.value.projections.map(O=>O.projected_amount)},{name:f("Count"),key:"count",type:"bar",color:l.value?n.dark_cyan_blue_16:n.light_gray,data:c.value.projections.map(O=>O.renewals_count)}].map((O,D)=>b(O.name,O.type,D,O.data,O.color))),S=X(()=>xa(c.value.projections.length)),E=X(()=>[{title:f("Renewal Revenue"),value:xe.formatScaled(c.value.totalProjected),key:"renewal_revenue"},{title:f("Renewals"),value:bt(c.value.totalRenewals),key:"renewals_count",no_currency:!0}]),V=X(()=>!c.value.totalRenewals);return ce([()=>c.value],()=>{de(F)},{deep:!0}),ce(V,$=>{$||g()}),ce(m,$=>{$||g()}),pe(()=>{v(a.applicableFilters),de(()=>{g()}),window.addEventListener("onFluentCartThemeChange",w)}),je(()=>{window.removeEventListener("onFluentCartThemeChange",w,!1)}),($,O)=>{const D=y("el-skeleton");return d(),U(et,{permission:"reports/view"},{default:r(()=>[i("div",Qz,[i("div",Dz,[i("h1",$z,h(p(f)("Subscription Future Revenue")),1)])]),o(se,null,{default:r(()=>[o(ae,{class:"p-3"},{default:r(()=>[m.value?(d(),U(Cs,{key:0,loading:m.value,"margin-bottom":0,padding:0},null,8,["loading"])):(d(),_("div",Iz,h(C.value),1))]),_:1})]),_:1}),m.value?(d(),U(Cs,{key:0,loading:m.value,count:2},null,8,["loading"])):(d(),_("div",Tz,[(d(!0),_(H,null,q(E.value,(Q,I)=>(d(),_("div",{class:"summary-item",key:I},[i("div",Mz,[i("div",Vz,[i("div",Lz,[i("span",null,h(Q.value),1)])]),i("div",Oz,h(Q.title),1)])]))),128))])),i("div",Hz,[o(se,null,{default:r(()=>[o(le,{title_size:"small",border_bottom:""},ut({title:r(()=>[i("div",Rz,[i("h4",Pz,h(p(f)("Upcoming Renewal Revenue")),1)])]),_:2},[c.value.totalRenewals&&!m.value?{name:"action",fn:r(()=>[i("div",Kz,[o(Be,{tag:"button",size:"small",title:$.$t("Zoom Chart"),onClick:B,class:ne(s.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:A.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(ae,{class:"px-0 pt-0"},{default:r(()=>[m.value?(d(),U(D,{key:0,animated:"",rows:7,class:"px-4 pt-4"})):(d(),_(H,{key:1},[V.value?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_(H,{key:0},[V.value?x("",!0):(d(),_("div",{key:0,class:"fct-chart-wrap fct-revenue-line-chart mt-3",ref_key:"chartRef",ref:A},null,512)),i("div",Nz,[i("div",Gz,[i("div",jz,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",zz,h(p(f)("Data")),1)]),i("div",Yz,[i("span",qz,h(p(f)("Timeline")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])]),_:1})}}},Xz={key:1,class:"fct-report-order-summary"},Jz={class:"summary-item-inner"},Zz={class:"value"},eY={class:"inner-value"},tY={class:"title"},aY={__name:"Summary",props:{reportFilter:{type:Object},customerReport:{type:Object}},setup(t){const e=t,a=[{title:f("Customer Growth"),key:"customer_count"}],s=X(()=>e.customerReport.loading),n=X(()=>a.map(l=>({key:l.key,title:l.title,value:e.customerReport.summary[l.key],fluctuation:e.customerReport.fluctuations[l.key]})));return(l,A)=>s.value?(d(),U(Cs,{key:0,count:n.value.length},null,8,["count"])):(d(),_("div",Xz,[(d(!0),_(H,null,q(n.value,(u,c)=>(d(),_("div",{class:"summary-item",key:c},[i("div",Jz,[i("div",Zz,[i("div",eY,h(p(bt)(u.value)),1),o(ca,{fluctuation:u.fluctuation,"has-currency":!1,amount:e.customerReport.previousSummary[u.key]},null,8,["fluctuation","amount"])]),i("div",tY,h(u.title),1)])]))),128))]))}},sY={class:"fct-revenue-line-chart-wrap"},nY={class:"flex items-center gap-2"},oY={class:"fct-card-header-title is-small"},lY={class:"w-[270px] fct-btn-group sm gap-1.5 lg:gap-0"},rY={class:"chart-action-wrap"},iY={class:"chart-change-wrap"},AY={class:"chart-change"},dY={class:"text"},uY={class:"chart-change"},cY={class:"text"},fY={__name:"CustomerReportChart",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String},isEmpty:{type:Boolean,required:!1},loading:{type:Boolean,required:!1}},emits:["filter-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T(yt.getChartType("revenue","revenue_chart")||"line"),l=T(!1),A=me.colors.report,u=T(me.isDark()),c=(D,Q,I,L,K)=>({name:D,type:Q,barMaxWidth:30,yAxisIndex:I,data:L,smooth:!1,color:K,lineStyle:{width:3},areaStyle:{opacity:.3,color:K},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:K,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:ea(K)},lineStyle:{color:K},areaStyle:{opacity:.3,color:K}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),m=T(a.appliedGroupKey);ce(()=>a.appliedGroupKey,D=>{m.value=D});const v=[{label:"Default",value:"default"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}],b=e,g=()=>{b("filter-data",m.value)},F=X(()=>a.reportFilter.data.compareType!=="no_comparison"),B=X(()=>{var Q;let D=[{name:f("Current Range"),key:"customer_count",type:n.value,color:u.value?A.dark_cyan_blue_36:A.light_gray_cyan_blue,data:a.chartData.map(I=>I.customer_count)}];return F.value&&D.unshift({name:f("Compare Range"),key:"customer_count",type:n.value,color:u.value?A.dark_cyan_blue_16:A.light_gray,data:(Q=a.compareData)==null?void 0:Q.map(I=>({value:I.customer_count,date:I.group}))}),D.map(I=>c(I.name,I.type,0,I.data,I.color))});let w=null;const C=()=>{w&&(w.dispose(),w=null),de(()=>{s.value&&(w=ot(s.value),E())})},k=X(()=>{const D=Gs(a.reportFilter.data.dateRange);return f("Customers that first ordered ")+D}),S=X(()=>xa(a.chartData.length)),E=()=>{if(!w)return;const D=ns(a.chartData),Q={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:u.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?A.dark_cyan_blue_16:A.light_gray_blue}},alwaysShowContent:!1,formatter:I=>{let L="";const K=u.value?"#ffffff":"#565865";return I.forEach(function(N,W){const R=typeof N.data=="object"&&N.data!==null,ee=R?js(N.data.date):N.name,oe=R?N.data.value:N.value,Ae=I.length>1&&W===0;Ae&&(L+='<div style="margin-bottom: 10px">'),L+=`<div>${ee}</div>`,L+=`<div>
            ${N.marker}
            <span style="color: ${K}">${f("Customer")}</span>
            <span style="float: right; margin-left: 20px; color: ${K}">
              ${bt(oe)}
            </span>
          </div>`,Ae&&(L+="</div>")}),L}},grid:{show:!1},xAxis:{type:"category",data:D,axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12,interval:S.value.interval},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}},series:B.value};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},V=()=>{l.value=!l.value,l.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):E()},$=D=>{yt.onChange("revenue","revenue_chart",D),n.value!==D&&(l.value=!1,n.value=D,E())};ce([()=>a.chartData,m],()=>{de(E)},{deep:!0}),ce(()=>Ka.data.revenue,()=>{de(()=>{E()})},{deep:!0}),ce(()=>a.isEmpty,D=>{D||C()}),ce(()=>a.loading,D=>{D||C()});const O=()=>{u.value=me.isDark(),de(()=>{E()})};return je(()=>{window.removeEventListener("onFluentCartThemeChange",O,!1)}),pe(()=>{window.addEventListener("onFluentCartThemeChange",O),de(()=>{C()})}),(D,Q)=>{const I=y("el-tooltip"),L=y("el-option"),K=y("el-select"),N=y("el-skeleton");return d(),_("div",sY,[o(se,null,{default:r(()=>[o(le,{title_size:"small",border_bottom:""},ut({title:r(()=>[i("div",nY,[i("h5",oY,h(p(f)("New Customers")),1),o(I,{"popper-class":"fct-tooltip",content:k.value,placement:"top"},{default:r(()=>[o(Y,{class:"text-gray-500 w-4 h-4 cursor-help",name:"InformationFill"})]),_:1},8,["content"])])]),_:2},[!t.isEmpty&&!t.loading?{name:"action",fn:r(()=>[i("div",lY,[o(K,{class:"el-select--x-small",modelValue:m.value,"onUpdate:modelValue":Q[0]||(Q[0]=W=>m.value=W),onChange:g},{default:r(()=>[(d(),_(H,null,q(v,W=>o(L,{key:W.value,label:p(f)(W.label),value:W.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),o(Fs,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:$},null,8,["activeType"]),o(Be,{tag:"button",size:"small",title:p(f)("Zoom Chart"),onClick:V,class:ne(l.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(ae,{class:"px-0 pt-0"},{default:r(()=>[t.loading?(d(),U(N,{key:0,animated:"",rows:6,class:"p-5"})):(d(),_(H,{key:1},[t.isEmpty?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_(H,{key:0},[i("div",{class:"fct-chart-wrap fct-revenue-line-chart mt-3",ref_key:"chartRef",ref:s},null,512),i("div",rY,[i("div",iY,[i("div",AY,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",dY,h(p(f)("Data")),1)]),i("div",uY,[i("span",cY,h(p(f)("Timeline")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}},pY={name:"Comparison",props:{currentMetrics:{type:Array},previousMetrics:{type:Array},reportFilter:{type:Object},hasComparison:{type:Boolean},loading:{type:Boolean,required:!0}},components:{CardContainer:se,CardHeader:le,CardBody:ae},data(){return{}},computed:{currencySign(){return this.reportFilter.currentCurrencySign},comparisonData(){const t=[];return this.hasComparison?(this.currentMetrics.forEach((e,a)=>{var s;if(a<((s=this.previousMetrics)==null?void 0:s.length)){const n=this.previousMetrics[a],l=e.customer_count,A=n.customer_count,u=A?((l-A)/A*100).toFixed(2):"n/a";t.push({group:`${this.formatDate(e.group)} vs ${this.formatDate(n.group)}`,count:l,previous_count:A,percent_change:u})}}),t):this.currentMetrics}},methods:{translate:f,getPercentageClass(t){return t>0?"text-success-500":t<0?"text-red-500":"text-system-light"},formatDate(t){const e=t.split("-");if(e.length===3){const[a,s,n]=e;return`${$a[parseInt(s)-1]} ${n}, ${a}`}else if(e.length===2){const[a,s]=e;return`${$a[parseInt(s)-1]} ${a}`}else if(e.length===1){const[a]=e;return`${a}`}}}},mY={class:"fct-revenue-comparison"},hY={class:"inline-flex"},_Y={class:"inline-flex"};function gY(t,e,a,s,n,l){const A=y("CardHeader"),u=y("el-skeleton"),c=y("el-table-column"),m=y("el-table"),v=y("CardBody"),b=y("CardContainer");return d(),_("div",mY,[o(b,{class:"overflow-hidden"},{default:r(()=>[o(A,{title:l.translate("Comparison"),title_size:"small"},null,8,["title"]),o(v,{class:"px-0 pb-0"},{default:r(()=>[a.loading?(d(),U(u,{key:0,animated:"",rows:6,class:"p-5"})):(d(),U(m,{key:1,data:l.comparisonData,class:"w-full",maxHeight:"390"},{default:r(()=>[o(c,{label:"Date"},{default:r(g=>[M(h(g.row.group),1)]),_:1}),o(c,{label:l.translate("Current Range")},{default:r(g=>[i("div",hY,h(g.row.count),1)]),_:1},8,["label"]),a.hasComparison?(d(),_(H,{key:0},[o(c,{label:l.translate("Compare Range")},{default:r(g=>[i("div",_Y,h(g.row.previous_count),1)]),_:1},8,["label"]),o(c,{label:l.translate("Change")+" (%)"},{default:r(g=>[i("span",{class:ne(l.getPercentageClass(g.row.percent_change))},h(g.row.percent_change),3)]),_:1},8,["label"])],64)):x("",!0)]),_:1},8,["data"]))]),_:1})]),_:1})])}const vY=ye(pY,[["render",gY]]),yY={class:"fct-customer-report-page"},bY={class:"page-heading-wrap flex items-center justify-between"},wY={class:"page-title"},BY={__name:"CustomerReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=T({summary:{},previousSummary:{},fluctuations:{},currentMetrics:[],previousMetrics:[],loading:!0}),s=T("default"),n=e.reportFilter,l=n.applicableFilters.params,A=(c,m="default")=>{a.value.loading=!0,te.get("reports/customer-report",{params:{...c,groupKey:m}}).then(v=>{a.value=v}).finally(()=>{a.value.loading=!1})},u=c=>{s.value!==c&&(s.value=c,A(l,c))};return pe(()=>{A(l),e.reportFilter.addListener("customer-report",c=>{A(c.params,s.value)})}),(c,m)=>(d(),U(et,{permission:"reports/view"},{default:r(()=>[i("div",yY,[i("div",bY,[i("h1",wY,h(c.$t("Customers")),1)]),o(aY,{reportFilter:p(n),customerReport:a.value},null,8,["reportFilter","customerReport"]),o(fY,{chartData:a.value.currentMetrics,compareData:a.value.previousMetrics,reportFilter:p(n),appliedGroupKey:s.value,onFilterData:u,"is-empty":!a.value.summary.customer_count,loading:a.value.loading},null,8,["chartData","compareData","reportFilter","appliedGroupKey","is-empty","loading"]),o(vY,{class:"my-7.5",currentMetrics:a.value.currentMetrics,previousMetrics:a.value.previousMetrics,hasComparison:e.reportFilter.data.compareType!=="no_comparison",reportFilter:p(n),loading:a.value.loading},null,8,["currentMetrics","previousMetrics","hasComparison","reportFilter","loading"])])]),_:1}))}},CY={class:"fct-revenue-report-page"},kY={class:"page-heading-wrap flex items-center justify-between"},FY={class:"page-title"},xY={class:"fct-revenue-comparison fct-table-wrapper"},UY={class:"fct-card"},EY={class:"fct-card-header"},SY={class:"fct-card-header-top"},QY={class:"fct-card-header-left flex-1"},DY={class:"search-bar is-transparent"},$Y={class:"text-xs text-system-light pt-1 dark:text-gray-300"},IY={class:"fct-card-header-actions"},TY={class:"w-[130px]"},MY={class:"fct-btn-group sm"},VY={class:"filter-popover-item"},LY={class:"filter-popover-title"},OY={class:"fct-card-body"},HY={key:1,class:"unknown"},RY={key:1,class:"unknown"},PY={key:1,class:"unknown"},KY={key:1,class:"unknown"},NY={key:1,class:"unknown"},GY={key:1,class:"unknown"},jY={class:"inline-flex items-center gap-2"},zY={class:"inline-flex items-center gap-2"},YY={class:"inline-flex items-center gap-2"},qY={class:"inline-flex items-center gap-2"},WY={class:"inline-flex items-center gap-2"},XY=4,JY={__name:"SourcesReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=T([]),s=T({}),n=T(!1),l=T({utm_campaign:f("UTM Campaign"),utm_source:f("UTM Source"),utm_medium:f("UTM Medium"),utm_term:f("UTM Term"),utm_content:f("UTM Content"),utm_id:f("UTM ID")}),A=T(["utm_campaign","utm_source","utm_medium"]),u=T(!0),c=T(""),m=X(()=>a.value.filter(g=>{if(!c.value)return!0;const F=c.value.toLowerCase();return g.utm_campaign&&g.utm_campaign.toLowerCase().includes(F)||g.utm_source&&g.utm_source.toLowerCase().includes(F)||g.utm_medium&&g.utm_medium.toLowerCase().includes(F)||g.utm_term&&g.utm_term.toLowerCase().includes(F)||g.utm_content&&g.utm_content.toLowerCase().includes(F)||g.utm_id&&g.utm_id.toLowerCase().includes(F)})),v=()=>{u.value=!0,te.get("/reports/sources",e.reportFilter.applicableFilters).then(g=>{a.value=g.sourceReportData,s.value=g.fluctuations||{}}).finally(()=>{u.value=!1})},b=g=>A.value.includes(g)?!1:A.value.length>=XY;return pe(()=>{v(),e.reportFilter.addListener("product-top-chart",()=>{v()})}),(g,F)=>{const B=y("el-input"),w=y("el-switch"),C=y("el-checkbox"),k=y("el-checkbox-group"),S=y("el-tooltip"),E=y("el-popover"),V=y("el-skeleton"),$=y("el-table-column"),O=y("el-table");return d(),U(et,{permission:"reports/view"},{default:r(()=>[i("div",CY,[i("div",kY,[i("h1",FY,h(p(f)("Order Sources")),1)]),i("div",xY,[i("div",UY,[i("div",EY,[i("div",SY,[i("div",QY,[i("div",DY,[o(B,{placeholder:p(f)("Search"),ref:"search-input",type:"text",clearable:"",modelValue:c.value,"onUpdate:modelValue":F[0]||(F[0]=D=>c.value=D)},{prefix:r(()=>[o(Y,{name:"Search"})]),_:1},8,["placeholder","modelValue"])]),i("div",$Y,h(p(f)("Filter results by UTM values")),1)]),i("div",IY,[i("div",TY,[o(w,{modelValue:n.value,"onUpdate:modelValue":F[1]||(F[1]=D=>n.value=D),"active-text":p(f)("Net"),"inactive-text":p(f)("Gross")},null,8,["modelValue","active-text","inactive-text"])]),i("div",MY,[o(E,{trigger:"click",placement:"bottom-start",width:"240","popper-class":"filter-popover"},{reference:r(()=>[i("span",null,[o(S,{effect:"light",content:p(f)("Toggle columns"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(Be,{tag:"button"},{default:r(()=>[o(Y,{name:"ColumnIcon"})]),_:1})]),_:1},8,["content"])])]),default:r(()=>[i("div",VY,[i("h3",LY,h(g.$t("Columns")),1),o(k,{class:"fct-checkbox-blocks",modelValue:A.value,"onUpdate:modelValue":F[2]||(F[2]=D=>A.value=D)},{default:r(()=>[(d(!0),_(H,null,q(l.value,(D,Q)=>(d(),U(C,{label:D,value:Q,disabled:b(Q)},null,8,["label","value","disabled"]))),256))]),_:1},8,["modelValue"])])]),_:1})])])])]),i("div",OY,[u.value?(d(),U(V,{key:0,class:"px-5 pb-5",rows:5,animated:""})):(d(),U(O,{key:1,data:m.value,class:"w-full fct-source-report"},{empty:r(()=>[o(Le,{icon:"Empty/Order","has-dark":"",text:p(f)("No data available")},null,8,["text"])]),default:r(()=>[A.value.includes("utm_campaign")?(d(),U($,{key:0,label:p(f)("UTM Campaign"),width:"180"},{default:r(D=>[D.row.utm_campaign?(d(),U(p(qs),{key:0,class:"font-normal",underline:"always",onClick:Q=>c.value=D.row.utm_campaign},{default:r(()=>[M(h(D.row.utm_campaign),1)]),_:2},1032,["onClick"])):(d(),_("span",HY,h(p(f)("Unknown")),1))]),_:1},8,["label"])):x("",!0),A.value.includes("utm_source")?(d(),U($,{key:1,label:p(f)("UTM Source"),width:"150"},{default:r(D=>[D.row.utm_source?(d(),U(p(qs),{key:0,class:"font-normal",underline:"always",onClick:Q=>c.value=D.row.utm_source},{default:r(()=>[M(h(D.row.utm_source),1)]),_:2},1032,["onClick"])):(d(),_("span",RY,h(p(f)("Unknown")),1))]),_:1},8,["label"])):x("",!0),A.value.includes("utm_medium")?(d(),U($,{key:2,label:p(f)("UTM Medium"),width:"150"},{default:r(D=>[D.row.utm_medium?(d(),U(p(qs),{key:0,class:"font-normal",underline:"always",onClick:Q=>c.value=D.row.utm_medium},{default:r(()=>[M(h(D.row.utm_medium),1)]),_:2},1032,["onClick"])):(d(),_("span",PY,h(p(f)("Unknown")),1))]),_:1},8,["label"])):x("",!0),A.value.includes("utm_term")?(d(),U($,{key:3,label:p(f)("UTM Term"),width:"150"},{default:r(D=>[D.row.utm_term?(d(),U(p(qs),{key:0,class:"font-normal",underline:"always",onClick:Q=>c.value=D.row.utm_term},{default:r(()=>[M(h(D.row.utm_term),1)]),_:2},1032,["onClick"])):(d(),_("span",KY,h(p(f)("Unknown")),1))]),_:1},8,["label"])):x("",!0),A.value.includes("utm_content")?(d(),U($,{key:4,label:p(f)("UTM Content"),width:"150"},{default:r(D=>[D.row.utm_content?(d(),U(p(qs),{key:0,class:"font-normal",underline:"always",onClick:Q=>c.value=D.row.utm_content},{default:r(()=>[M(h(D.row.utm_content),1)]),_:2},1032,["onClick"])):(d(),_("span",NY,h(p(f)("Unknown")),1))]),_:1},8,["label"])):x("",!0),A.value.includes("utm_id")?(d(),U($,{key:5,label:p(f)("UTM ID"),width:"100"},{default:r(D=>[D.row.utm_id?(d(),U(p(qs),{key:0,class:"font-normal",underline:"always",onClick:Q=>c.value=D.row.utm_id},{default:r(()=>[M(h(D.row.utm_id),1)]),_:2},1032,["onClick"])):(d(),_("span",GY,h(p(f)("Unknown")),1))]),_:1},8,["label"])):x("",!0),o($,{label:p(f)("Orders"),width:"200"},{default:r(D=>{var Q,I;return[i("div",jY,[M(h(p(bt)(D.row.orders))+" ",1),o(ca,{class:"flex",fluctuation:((Q=s.value[D.row.utm_key])==null?void 0:Q.orders_fluctuation)||0,amount:((I=s.value[D.row.utm_key])==null?void 0:I.previous_orders)||0,"has-currency":!1},null,8,["fluctuation","amount"])])]}),_:1},8,["label"]),n.value?(d(),_(H,{key:6},[o($,{label:p(f)("Net Sales"),width:"200"},{default:r(D=>{var Q,I;return[i("div",zY,[M(h(p(xe).scaled(D.row.net_sales))+" ",1),o(ca,{class:"flex",fluctuation:((Q=s.value[D.row.utm_key])==null?void 0:Q.net_sales_fluctuation)||0,amount:((I=s.value[D.row.utm_key])==null?void 0:I.previous_net_sales)||0},null,8,["fluctuation","amount"])])]}),_:1},8,["label"]),o($,{label:p(f)("Average Order Net"),width:"200"},{default:r(D=>{var Q,I;return[i("div",YY,[M(h(p(xe).scaled(D.row.average_net_order))+" ",1),o(ca,{class:"flex",fluctuation:((Q=s.value[D.row.utm_key])==null?void 0:Q.average_net_order_fluctuation)||0,amount:((I=s.value[D.row.utm_key])==null?void 0:I.previous_average_net_order)||0},null,8,["fluctuation","amount"])])]}),_:1},8,["label"])],64)):(d(),_(H,{key:7},[o($,{label:p(f)("Gross Sales"),width:"200"},{default:r(D=>{var Q,I;return[i("div",qY,[M(h(p(xe).scaled(D.row.gross_sales))+" ",1),o(ca,{class:"flex",fluctuation:((Q=s.value[D.row.utm_key])==null?void 0:Q.gross_sales_fluctuation)||0,amount:((I=s.value[D.row.utm_key])==null?void 0:I.previous_gross_sales)||0},null,8,["fluctuation","amount"])])]}),_:1},8,["label"]),o($,{label:p(f)("Average Order"),width:"200"},{default:r(D=>{var Q,I;return[i("div",WY,[M(h(p(xe).scaled(D.row.average_order))+" ",1),o(ca,{class:"flex",fluctuation:((Q=s.value[D.row.utm_key])==null?void 0:Q.average_order_fluctuation)||0,amount:((I=s.value[D.row.utm_key])==null?void 0:I.previous_average_order)||0},null,8,["fluctuation","amount"])])]}),_:1},8,["label"])],64))]),_:1},8,["data"]))])])])])]),_:1})}}},ZY={class:"fct-revenue-line-chart-wrap"},eq={class:"flex items-center gap-2"},tq={class:"fct-card-header-title is-small"},aq={class:"fct-chart-select"},sq={class:"fct-btn-group sm"},nq={class:"chart-action-wrap"},oq={class:"chart-change-wrap"},lq={class:"chart-change"},rq={class:"text"},iq={class:"chart-change"},Aq={class:"text"},dq={__name:"ProductReportChart",props:{chartData:{type:Array,required:!0,default:()=>[]},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},emits:["filter-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T(yt.getChartType("product","product_chart")||"bar"),l=T(!1),A=me.colors.report,u=T(me.isDark()),c=(Q,I,L,K,N)=>({name:Q,type:I,barMaxWidth:30,yAxisIndex:L,data:K,smooth:!1,color:N,lineStyle:{width:3},areaStyle:{opacity:.3,color:N},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:N,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:ea(N)},lineStyle:{color:N},areaStyle:{opacity:.3,color:N}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),m=T("default"),v=[{label:"Default",value:"default"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}],b=e,g=()=>{b("filter-data",m.value)},F=X(()=>a.reportFilter.data.compareType!=="no_comparison"),B=X(()=>{let Q=[{name:f("Current Range"),key:"units_sold",type:n.value,color:u.value?A.dark_cyan_blue_36:A.light_gray_cyan_blue,data:a.chartData.map(I=>I.units_sold)}];return F.value&&Q.unshift({name:f("Compare Range"),key:"units_sold",type:n.value,color:u.value?A.dark_cyan_blue_16:A.light_gray,data:a.compareData.map(I=>({value:I.units_sold,date:I.group}))}),Q.map(I=>c(I.name,I.type,0,I.data,I.color))});let w=null;const C=()=>{w&&(w.dispose(),w=null),de(()=>{s.value&&(w=ot(s.value),E())})},k=X(()=>{const Q=Gs(a.reportFilter.data.dateRange);return f("This report looks at the units sold ")+Q}),S=X(()=>xa(a.chartData.length)),E=()=>{if(!w)return;const Q=ns(a.chartData),I={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:u.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?A.dark_cyan_blue_16:A.light_gray_blue}},formatter:L=>{let K="";const N=u.value?"#ffffff":"#565865";return L.forEach(function(W,R){const ee=typeof W.data=="object"&&W.data!==null,oe=ee?js(W.data.date):W.name,Ae=ee?W.data.value:W.value,ue=L.length>1&&R===0;ue&&(K+='<div style="margin-bottom: 10px">'),K+=`<div>${oe}</div>`,K+=`<div>
            ${W.marker} 
            <span style="color: ${N}">${f("Units Sold")}</span>
            <span style="float: right; margin-left: 20px; color: ${N}">
              ${bt(Ae)}
            </span>
          </div>`,ue&&(K+="</div>")}),K}},grid:{show:!1},xAxis:{type:"category",data:Q,splitNumber:S.value.splitNumber,axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12,interval:S.value.interval},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}},series:B.value};w.setOption(I,{notMerge:!0,replaceMerge:["series"]})},V=()=>{l.value=!l.value,l.value&&w?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):w&&E()},$=Q=>{yt.onChange("revenue","revenue_chart",Q),n.value!==Q&&(l.value=!1,n.value=Q,E())};ce([()=>a.chartData,m],()=>{de(()=>{E()})},{deep:!0}),ce(()=>Ka.data.product,()=>{de(()=>{E()})},{deep:!0}),ce(()=>a.isEmpty,Q=>{Q||C()}),ce(()=>a.loading,Q=>{Q||C()});const O=()=>{w&&w.resize()},D=()=>{u.value=me.isDark(),de(()=>{E()})};return pe(()=>{window.addEventListener("onFluentCartThemeChange",D),window.addEventListener("resize",O),setTimeout(()=>{C()},100)}),je(()=>{window.removeEventListener("onFluentCartThemeChange",D,!1),window.removeEventListener("resize",O),w&&(w.dispose(),w=null)}),(Q,I)=>{const L=y("el-tooltip"),K=y("el-option"),N=y("el-select"),W=y("el-skeleton");return d(),_("div",ZY,[o(se,{id:"chartContainer"},{default:r(()=>[o(le,{title_size:"small",border_bottom:""},ut({title:r(()=>[i("div",eq,[i("h5",tq,h(p(f)("Product Report Chart")),1),o(L,{"popper-class":"fct-tooltip",content:k.value,placement:"top"},{default:r(()=>[o(Y,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),_:2},[!t.isEmpty&&!t.loading?{name:"action",fn:r(()=>[i("div",aq,[o(N,{class:"el-select--x-small",modelValue:m.value,"onUpdate:modelValue":I[0]||(I[0]=R=>m.value=R),onChange:g},{default:r(()=>[(d(),_(H,null,q(v,R=>o(K,{key:R.value,label:p(f)(R.label),value:R.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),i("div",sq,[o(Fs,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:$},null,8,["activeType"]),o(Be,{tag:"button",size:"small",title:p(f)("Zoom Chart"),onClick:V,class:ne(l.value?"primary":"")},{default:r(()=>[o(Y,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(St,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(ae,{class:"px-0"},{default:r(()=>[t.loading?(d(),U(W,{key:0,animated:"",rows:8,class:"p-5"})):(d(),_(H,{key:1},[t.isEmpty?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_(H,{key:0},[t.isEmpty?x("",!0):(d(),_("div",{key:0,class:"fct-chart-wrap fct-revenue-line-chart",ref_key:"chartRef",ref:s},null,512)),i("div",nq,[i("div",oq,[i("div",lq,[o(Y,{name:"ArrowUp",class:"arrow-up"}),i("span",rq,h(p(f)("Data")),1)]),i("div",iq,[i("span",Aq,h(p(f)("Timeline")),1),o(Y,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}},uq=ye(dq,[["__scopeId","data-v-259e83ce"]]);class cq extends Xt{constructor(){super(...arguments);fe(this,"data",{summary:{},previousSummary:{},fluctuations:{},isBusy:!0,currentMetrics:[],previousMetrics:[],chartData:[]})}get controllerKey(){return"ProductReportController"}makeRequest(a,s,n,l){this.data.isBusy=!0,typeof s!="object"&&(s={});const A=te.get(`reports/${a}`,s);return this.resolvePromiseResponse(A,n,l),A}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null?Object.assign(this.data,l):this.data[n]=l[s]}).catch(l=>{console.log(l,"error")}).finally(()=>{this.data.isBusy=!1})}getReportData(a={}){return this.makeRequest("net-revenue",a,"data","revenueReport")}getReportByGroup(a={}){return this.makeRequest("net-revenue-by-group",a,"data","netRevenueByGroup")}getProductReportData(a={}){return this.makeRequest("product-report",a)}getSummary(a={}){return this.makeRequest("product-report-summary",a)}}const Xa=cq.init(),fq={class:"summary-item-inner"},pq={class:"value"},mq={class:"inner-value"},hq={class:"title"},_q={__name:"Summary",props:{reportFilter:{type:Object}},setup(t){t.reportFilter;const a=[{title:"Units Sold",key:"units_sold",info:f("The total number of units sold in this period.")},{title:"Gross Sale",key:"gross_sale",hasCurrency:!0,info:f("The total sales you had in this period.")},{title:"Refunds",key:"total_refunds",hasCurrency:!0,liability:!0,info:f("Refunds made in this period. This is deducted from gross sales to calculate revenue.")},{title:"Revenue",key:"net_sale",hasCurrency:!0,info:f("Gross sales less refunds, taxes, shipping, fees.")}],s=X(()=>Xa.data.isBusy),n=X(()=>a.map(u=>({key:u.key,title:u.title,value:Xa.data.summary[u.key]||0,fluctuation:Xa.data.fluctuations[u.key]||0,info:u.info,liability:u.liability||!1,hasCurrency:u.hasCurrency||!1}))),l=X(()=>a.filter(u=>u.hasCurrency).map(u=>u.key)),A=u=>l.value.includes(u.key)?Ba(u.value,u.liability):bt(u.value);return(u,c)=>{const m=y("el-tooltip");return s.value?(d(),U(Cs,{key:0,loading:s.value,count:n.value.length},null,8,["loading","count"])):(d(),_("div",{key:1,class:ne(["fct-report-order-summary",s.value?"":"summary-col-4"])},[(d(!0),_(H,null,q(n.value,(v,b)=>(d(),_("div",{class:"summary-item",key:b},[i("div",fq,[i("div",pq,[i("div",mq,[o(zs,{amount:A(v),title:v.title},null,8,["amount","title"])]),o(ca,{fluctuation:v.fluctuation,amount:p(Xa).data.previousSummary[v.key],"is-liability":v.liability,"has-currency":v.hasCurrency},null,8,["fluctuation","amount","is-liability","has-currency"])]),i("div",hq,[M(h(p(f)(v.title))+" ",1),o(m,{content:v.info,placement:"top","popper-class":"fct-tooltip",effect:"dark"},{default:r(()=>[o(Y,{class:"text-gray-500 w-4 flex-shrink-0",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))],2))}}},gq={class:"fct-product-performance-chart"},vq={class:"mb-6 flex flex-col sm:flex-row gap-6 items-start sm:items-center"},yq={class:"flex items-center gap-3 flex-wrap"},bq={class:"selector-group"},wq={class:"vs-pill inline-flex items-center justify-center px-2 h-6 bg-gray-100 rounded-[12px] font-xs font-medium text-uppercase dark:bg-primary-500"},Bq={class:"selector-group"},Cq={key:0,class:"comparison-mode ml-auto inline-flex items-center h-6 px-2.5 bg-gray-50 rounded-[12px] dark:bg-primary-500"},kq={class:"text-xs font-medium text-gray-500"},Fq={key:1,class:"comparison-mode ml-auto inline-flex items-center h-6 px-2.5 bg-gray-50 rounded-[12px] dark:bg-primary-500"},xq={class:"text-xs font-medium text-gray-500"},Uq={key:0,class:"comparison-results"},Eq={class:"legend flex items-center gap-4 mb-4"},Sq={class:"flex items-center"},Qq={class:"text-xs text-gray-600"},Dq={class:"flex items-center"},$q={class:"text-xs text-gray-600"},Iq={class:"comparison-table"},Tq={class:"w-full"},Mq={class:"sticky top-0 z-10 bg-gray-50 dark:bg-primary-500"},Vq={class:"w-[50%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},Lq={class:"w-[40%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},Oq={class:"w-[10%] text-right font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},Hq={class:"py-3 product-name font-medium max-w-[200px] truncate text-sm text-system-dark dark:text-gray-50"},Rq={class:"py-3"},Pq={class:"dual-bar-container"},Kq={class:"bar-label"},Nq={class:"dual-bar-wrapper"},Gq=["onMouseenter"],jq=["onMouseenter"],zq={class:"py-3 text-right"},Yq={key:0},qq={colspan:"3",class:"py-4 text-center text-gray-500"},Wq={class:"text-sm"},Xq={key:1,class:"current-period-data"},Jq={class:"legend flex items-center gap-4 mb-4"},Zq={class:"flex items-center"},eW={class:"text-xs text-gray-600"},tW={class:"current-period-table"},aW={class:"w-full"},sW={class:"sticky top-0 z-10 bg-gray-50 dark:bg-primary-500"},nW={class:"w-[50%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},oW={class:"w-[50%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},lW={class:"py-3 product-name font-medium max-w-[200px] truncate text-sm text-system-dark dark:text-gray-50"},rW={class:"py-3"},iW={class:"single-bar-container"},AW=["onMouseenter"],dW={class:"single-bar-wrapper"},uW=["onMouseenter"],cW={key:0},fW={colspan:"2",class:"py-4 text-center text-gray-500"},pW={class:"text-sm"},mW={key:2,class:"no-comparison-message"},hW={class:"flex flex-col items-center justify-center text-center py-8"},_W={class:"text-gray-500 text-sm"},gW={__name:"ProductTopChart",props:{reportFilter:{type:Object,required:!0}},setup(t){mp(z=>({"80e5ddb6":a.value?"#1C2732":"#F9FAFB","56b7177f":N.value,"6b30a1e8":W.value,"3061a922":R.value}));const e=t,a=T(me.isDark()),s=T(!0);pe(()=>{l(),e.reportFilter.addListener("product-top-chart",()=>{l()}),window.addEventListener("onFluentCartThemeChange",function(){a.value=me.isDark()})}),T({});const n=T({}),l=()=>{s.value=!0;const z=e.reportFilter.applicableFilters;te.get("reports/product-performance",z).then(j=>{n.value=j.productPerformance,F(),S(!0)}).finally(()=>s.value=!1)},A=X(()=>!(Array.isArray(n.value)?n.value:Object.values(n.value)).length),u=T(""),c=T(""),m=T(""),v=T(""),b=z=>z.sort((j,Z)=>Ce(j.value).diff(Ce(Z.value))),g=T([]),F=()=>{const z=new Set;Object.keys(n.value).forEach(j=>{const Z=j.split("-")[0];z.add(Z)}),g.value=Array.from(z).sort()},B=z=>{if(!z)return[];const j=[];return Object.keys(n.value).forEach(Z=>{Z.startsWith(z)&&j.push({value:Z,label:Ce(Z).format("MMMM")})}),b(j)},w=X(()=>{if(!u.value||!m.value)return!1;const z=!!c.value,j=!!v.value;return!z&&!j?u.value!==m.value:z&&j?c.value!==v.value:!0}),C=X(()=>c.value?Ce(c.value).format("MMM YYYY"):u.value),k=X(()=>v.value?Ce(v.value).format("MMM YYYY"):m.value),S=(z=!1)=>{const j=g.value;if(j.length){if(!u.value||z){u.value=j[0];const Z=B(u.value);Z.length&&(c.value=Z[0].value)}if(!m.value||z){m.value=j[j.length-1];const Z=B(m.value);Z.length&&(v.value=Z[Z.length-1].value)}}},E=z=>n.value[z]||[],V=z=>{const j={};Object.entries(n.value).forEach(([_e,he])=>{_e.startsWith(z)&&he.forEach(Qe=>{j[Qe.name]||(j[Qe.variation_id]={...Qe,value:0}),j[Qe.variation_id].value+=Qe.value})});const Z=[];return Object.values(j).forEach(_e=>{Z.push(_e)}),Z},$=(z,j)=>j?E(j):(V(z),V(z)),O=X(()=>u.value?[...$(u.value,c.value)].sort((j,Z)=>Z.value-j.value):[]),D=X(()=>O.value.length?Math.max(...O.value.map(z=>z.value))*1.1:100),Q=z=>z===0||D.value===0?0:z/D.value*100,I=X(()=>{if(!w.value)return[];const z=$(u.value,c.value),j=$(m.value,v.value),Z=new Set;return z.forEach(Qe=>Z.add(Qe.variation_id)),j.forEach(Qe=>Z.add(Qe.variation_id)),Array.from(Z).map(Qe=>{const ge=z.find(Ye=>Ye.variation_id===Qe),De=(ge==null?void 0:ge.value)||0,Ue=j.find(Ye=>Ye.variation_id===Qe),Ie=(Ue==null?void 0:Ue.value)||0;let Ee=0;return De>0?Ee=(Ie-De)/De*100:Ie>0&&(Ee=100),{name:(ge==null?void 0:ge.name)||(Ue==null?void 0:Ue.name)||"",post_title:(ge==null?void 0:ge.post_title)||(Ue==null?void 0:Ue.post_title)||"",primaryValue:De,comparisonValue:Ie,growthRate:parseFloat(Ee.toFixed(1))}}).sort((Qe,ge)=>Math.abs(ge.growthRate)-Math.abs(Qe.growthRate))}),L=(z,j)=>{if(z===0&&j===0)return{primaryWidth:0,comparisonWidth:0};const Z=z+j,_e=z/Z*100,he=j/Z*100;return{primaryWidth:_e,comparisonWidth:he}},K=z=>z>0?"positive":z<0?"negative":"neutral",N=X(()=>a.value?me.colors.report.dark_cyan_blue_16:me.colors.report.light_gray),W=X(()=>a.value?me.colors.report.dark_cyan_blue_36:me.colors.report.light_gray_cyan_blue),R=X(()=>a.value?"#ffffff":me.colors.system.mid),ee=(z,j)=>`${z} ${Zn("unit","units",z)} sold in ${j}`,oe=T(!1),Ae=T(""),ue=T(null);function P(z,j){ue.value=z.currentTarget,Ae.value=j,setTimeout(()=>{oe.value=!0},150)}function G(){oe.value=!1}return(z,j)=>{const Z=y("el-skeleton"),_e=y("el-option"),he=y("el-select"),Qe=y("el-tooltip");return d(),_("div",gq,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Product Performance Comparison"),title_size:"small",border_bottom:""},null,8,["title"]),o(ae,{class:"pt-6"},{default:r(()=>[s.value?(d(),U(Z,{key:0,animated:"",rows:8})):(d(),_(H,{key:1},[A.value?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_(H,{key:0},[i("div",vq,[i("div",yq,[i("div",bq,[o(he,{modelValue:u.value,"onUpdate:modelValue":j[0]||(j[0]=ge=>u.value=ge),placeholder:p(f)("Year"),size:"small",class:"year-select","popper-class":"minimal-select"},{default:r(()=>[(d(!0),_(H,null,q(g.value,ge=>(d(),U(_e,{key:ge,label:ge,value:ge},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),o(he,{modelValue:c.value,"onUpdate:modelValue":j[1]||(j[1]=ge=>c.value=ge),placeholder:p(f)("Month"),size:"small",clearable:"",class:"month-select",disabled:!u.value,"popper-class":"minimal-select"},{default:r(()=>[(d(!0),_(H,null,q(B(u.value),ge=>(d(),U(_e,{key:ge.value,label:ge.label,value:ge.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),i("div",wq,h(p(f)("vs")),1),i("div",Bq,[o(he,{modelValue:m.value,"onUpdate:modelValue":j[2]||(j[2]=ge=>m.value=ge),placeholder:p(f)("Year"),size:"small",class:"year-select","popper-class":"minimal-select"},{default:r(()=>[(d(!0),_(H,null,q(g.value,ge=>(d(),U(_e,{key:ge,label:ge,value:ge},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),o(he,{modelValue:v.value,"onUpdate:modelValue":j[3]||(j[3]=ge=>v.value=ge),placeholder:p(f)("Month"),size:"small",clearable:"",class:"month-select",disabled:!m.value,"popper-class":"minimal-select"},{default:r(()=>[(d(!0),_(H,null,q(B(m.value),ge=>(d(),U(_e,{key:ge.value,label:ge.label,value:ge.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])])]),w.value?(d(),_("div",Cq,[i("span",kq,h(p(f)("Comparing %s with %s",C.value,k.value)),1)])):u.value?(d(),_("div",Fq,[i("span",xq,h(p(f)("Viewing %s",C.value)),1)])):x("",!0)]),w.value?(d(),_("div",Uq,[i("div",Eq,[i("div",Sq,[j[5]||(j[5]=i("div",{class:"w-3 h-3 primary-legend rounded-sm mr-1.5"},null,-1)),i("span",Qq,h(C.value),1)]),i("div",Dq,[j[6]||(j[6]=i("div",{class:"w-3 h-3 comparison-legend rounded-sm mr-1.5"},null,-1)),i("span",$q,h(k.value),1)])]),i("div",Iq,[i("table",Tq,[i("thead",Mq,[i("tr",null,[i("th",Vq,h(p(f)("Product")),1),i("th",Lq,h(p(f)("Sales")),1),i("th",Oq,h(p(f)("Change")),1)])]),i("tbody",null,[(d(!0),_(H,null,q(I.value,(ge,De)=>(d(),_("tr",{key:De,class:"product-row border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400"},[i("td",Hq,[M(h(ge.post_title)+" ",1),j[7]||(j[7]=i("br",null,null,-1)),M(" "+h(ge.name),1)]),i("td",Rq,[i("div",Pq,[i("span",Kq,h(ge.primaryValue)+h(" vs "+ge.comparisonValue)+" "+h(p(f)("Units")),1),i("div",Nq,[i("div",{class:"dual-bar-segment primary-segment",style:sa({width:`${L(ge.primaryValue,ge.comparisonValue).primaryWidth}%`}),onMouseenter:Ue=>P(Ue,ee(ge.primaryValue,C.value)),onMouseleave:G},null,44,Gq),i("div",{class:"dual-bar-segment comparison-segment",style:sa({width:`${L(ge.primaryValue,ge.comparisonValue).comparisonWidth}%`}),onMouseenter:Ue=>P(Ue,ee(ge.comparisonValue,k.value)),onMouseleave:G},null,44,jq)])])]),i("td",zq,[i("div",{class:ne(["growth-pill",K(ge.growthRate)])},h(ge.growthRate>0?"+":"")+h(ge.growthRate)+"% ",3)])]))),128)),I.value.length===0?(d(),_("tr",Yq,[i("td",qq,[i("span",Wq,h(p(f)("No comparison data available")),1)])])):x("",!0)])])])])):u.value&&O.value.length>0?(d(),_("div",Xq,[i("div",Jq,[i("div",Zq,[j[8]||(j[8]=i("div",{class:"w-3 h-3 primary-legend rounded-sm mr-1.5"},null,-1)),i("span",eW,h(C.value),1)])]),i("div",tW,[i("table",aW,[i("thead",sW,[i("tr",null,[i("th",nW,h(p(f)("Product")),1),i("th",oW,h(p(f)("Sales")),1)])]),i("tbody",null,[(d(!0),_(H,null,q(O.value,(ge,De)=>(d(),_("tr",{key:De,class:"product-row border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400"},[i("td",lW,[M(h(ge.post_title)+" ",1),j[9]||(j[9]=i("br",null,null,-1)),M(" "+h(ge.name),1)]),i("td",rW,[i("div",iW,[i("span",{class:"bar-label",onMouseenter:Ue=>P(Ue,ee(ge.value,k.value)),onMouseleave:G},h(ge.value)+" "+h(p(Zn)("Unit","Units",ge.value)),41,AW),i("div",dW,[i("div",{class:"single-bar-segment",style:sa({width:`${Q(ge.value)}%`}),onMouseenter:Ue=>P(Ue,ee(ge.value,k.value)),onMouseleave:G},null,44,uW)])])])]))),128)),O.value.length===0?(d(),_("tr",cW,[i("td",fW,[i("span",pW,h(p(f)("No data available for this period")),1)])])):x("",!0)])])])])):(d(),_("div",mW,[i("div",hW,[j[10]||(j[10]=i("svg",{class:"w-10 h-10 text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),i("p",_W,h(p(f)("Please select a time period to view sales data")),1)])])),o(Qe,{ref:"sharedTooltip","popper-class":"fct-tooltip",visible:oe.value,"onUpdate:visible":j[4]||(j[4]=ge=>oe.value=ge),content:Ae.value,"virtual-ref":ue.value,"virtual-triggering":"",placement:"top"},null,8,["visible","content","virtual-ref"])],64))],64))]),_:1})]),_:1})])}}},vW=ye(gW,[["__scopeId","data-v-8b244b58"]]),yW={class:"fct-revenue-report-page"},bW={class:"page-heading-wrap flex items-center justify-between"},wW={class:"page-title"},BW={__name:"ProductReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=u=>{Xa.getProductReportData({params:{...u.params,groupKey:A.value}})},s=u=>{A.value!==u&&(A.value=u,a(l))},n=e.reportFilter,l=n.applicableFilters,A=T("default");return pe(()=>{n.addListener("product-report",a),a(l)}),je(()=>{n.removeListener("product-report",!1)}),(u,c)=>(d(),U(et,{permission:"reports/view"},{default:r(()=>[i("div",yW,[i("div",bW,[i("h1",wW,h(u.$t("Products")),1)]),o(_q,{reportFilter:p(n)},null,8,["reportFilter"]),o(uq,{chartData:p(Xa).data.currentMetrics,compareData:p(Xa).data.previousMetrics,appliedGroupKey:A.value,reportFilter:e.reportFilter,onFilterData:s,"is-empty":!p(Xa).data.summary.gross_sale,loading:p(Xa).data.isBusy},null,8,["chartData","compareData","appliedGroupKey","reportFilter","is-empty","loading"]),o(vW,{reportFilter:p(n)},null,8,["reportFilter"])])]),_:1}))}},CW={class:"fct-overview-chart-wrap"},kW={key:0,class:"error-message",style:{color:"red",padding:"10px"}},FW={__name:"OverviewChart",props:{data:{type:Object,required:!0},dataKey:{type:String,required:!0},labelSet:{type:String,default:"monthly"},dateRange:{type:Boolean,default:!1},barMaxWidth:{type:Number,default:30},isEmpty:{type:Boolean,default:!1}},setup(t){const e=t,a=T(null),s=T(null),n=T("bar"),l=T(null),A=me.colors,u=T(me.isDark()),c=X(()=>u.value?A.blue[500]+"52":A.blue[300]),m={current:f("Current"),prev:f("Previous"),yoy_growth:f("YoY Growth")},v=X(()=>{try{return Object.keys(e.data).map(S=>({label:S,value:e.data[S][e.dataKey]||0}))}catch(k){return l.value=`Error processing data: ${k.message}`,[]}}),b=X(()=>v.value.length?e.dateRange?v.value.map(k=>{try{const[S,E]=k.label.split("-");return new Date(S,E-1).toLocaleString("default",{month:"short",year:"numeric"})}catch{return k.label}}):v.value.map(k=>k.label):[]),g=X(()=>v.value.length?[{title:m[e.dataKey]||e.dataKey,data:v.value.map(S=>S.value),color:c.value,yAxisIndex:0}].map(({title:S,data:E,color:V,yAxisIndex:$})=>C(S,n.value,E,V,$)):[]);let F=null;const B=()=>{if(a.value&&F===null)try{F=ot(a.value),w()}catch(k){l.value=`Error initializing chart: ${k.message}`}},w=()=>{if(!F)return;if(l.value){console.error(l.value);return}u.value=me.isDark();const k={title:{text:"",left:"center"},legend:{show:!1,top:"5%",icon:"circle",itemWidth:8,itemHeight:8,itemGap:30,textStyle:{color:u.value?"#ffffff":"#696778"}},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?A.report.dark_cyan_blue_16:A.report.light_gray_cyan_blue}},formatter:S=>{let E=S[0].name;const V=u.value?"#ffffff":"#565865";return S.forEach($=>{const O=xe.formatScaled($.value);E+=`<div>
            ${$.marker} 
            <span style="color: ${V};">${$.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${V};">
              ${O}
            </span>
          </div>`}),E}},xAxis:{type:"category",data:b.value,axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",position:"left",axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12,formatter:S=>`${xe.formatScaled(S)}`},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}}],series:g.value,grid:{left:"10px",right:"10px",top:"20px",bottom:"60px",containLabel:!0}};try{F.setOption(k,{notMerge:!0,replaceMerge:["series"]})}catch(S){l.value=`Error updating chart: ${S.message}`,console.error(l.value)}},C=(k,S,E,V,$)=>({name:k,type:S,barMaxWidth:e.barMaxWidth,areaStyle:S==="line"?{}:void 0,data:E,smooth:!0,color:V,lineStyle:{width:2},yAxisIndex:$,emphasis:{itemStyle:{color:u.value?A.blue[800]:A.blue[400]}}});return ce([()=>e.data,()=>e.dataKey,()=>e.labelSet,n],()=>{de(w)},{deep:!0}),je(()=>{window.removeEventListener("onFluentCartThemeChange",w,!1),F&&(F.dispose(),F=null)}),pe(()=>{window.addEventListener("onFluentCartThemeChange",w),de(B)}),(k,S)=>(d(),_("div",CW,[o(se,{id:"chartContainer",ref_key:"cardRef",ref:s},{default:r(()=>[o(ae,{class:"p-0"},{default:r(()=>[l.value?(d(),_("div",kW,h(l.value),1)):x("",!0),t.isEmpty?(d(),U(Le,{key:2,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:1,class:"fct-chart-wrap fct-overview-chart",ref_key:"chartRef",ref:a,style:{height:"400px"}},null,512))]),_:1})]),_:1},512)]))}},No=ye(FW,[["__scopeId","data-v-9940cf42"]]),xW={class:"fct-gross-volume-chart-wrap"},UW={key:0,class:"error-message",style:{color:"red",padding:"10px"}},EW={__name:"GrossVolumeChart",props:{data:{type:Object,required:!0},title:{type:String,default:""},currentKey:{type:String,default:"current"},prevKey:{type:String,default:"prev"},labelKey:{type:String,default:"yoy_growth"},isDate:{type:Boolean,default:!1},barMaxWidth:{type:Number,default:30},isEmpty:{type:Boolean,default:!1}},setup(t){const e=t,a=T(null),s=T(null),n=T("bar"),l=T(null),A=me.colors,u=T(me.isDark()),c={current:f("Current"),prev:f("Previous"),prev_year:f("Previous"),yoy_growth:f("YoY Growth")},m=X(()=>{if(!e.data||typeof e.data!="object")return l.value="Invalid or missing data prop",[];try{return Object.keys(e.data).map(S=>{const E=e.data[S];return{label:S,current:E[e.currentKey]?parseInt(E[e.currentKey]):0,prev:E[e.prevKey]?parseInt(E[e.prevKey]):0,growth:E[e.labelKey]?parseFloat(E[e.labelKey]):0}})}catch(k){return l.value=`Error processing data: ${k.message}`,[]}}),v=X(()=>m.value.length?m.value.map(k=>{if(e.isDate)try{const[S,E]=k.label.split("-");return new Date(S,E-1).toLocaleString("default",{month:"short",year:"numeric"})}catch{return k.label}else return k.label}):[]),b=X(()=>m.value.length?[{title:c[e.currentKey]||e.currentKey,dataKey:"current",type:"line",color:u.value?A.report.blue_dark_mode:A.report.blue},{title:c[e.prevKey]||e.prevKey,dataKey:"prev",type:"bar",color:u.value?A.blue[500]+"52":A.blue[300]}].map(({title:k,dataKey:S,type:E,color:V})=>C(k,E,m.value.map($=>$[S]),V)):[]),g=X(()=>m.value.length?m.value.map(S=>S.growth):[]);let F=null;const B=()=>{if(a.value&&F===null)try{F=ot(a.value),w()}catch(k){l.value=`Error initializing chart: ${k.message}`}},w=()=>{if(!F)return;if(l.value){console.error(l.value);return}u.value=me.isDark();const k={legend:{show:!1,top:"5%",icon:"circle",itemWidth:8,itemHeight:8,itemGap:30,textStyle:{color:u.value?"#ffffff":"#696778"}},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?A.report.dark_cyan_blue_16:A.report.light_gray_cyan_blue}},formatter:S=>{let E=S[0].name;const V=u.value?"#ffffff":"#565865",$=g.value[S[0].dataIndex];S.push({marker:'<span style="display:inline-block; width:10px; height:10px; border-radius:50%; background-color:#FFA500; margin-right:5px;"></span>',seriesName:f("YoY Growth"),value:isNaN($)?"N/A":$.toFixed(2)+"%"});const O=u.value?A.report.dark_cyan_blue_16:A.report.light_gray_blue;return S.forEach(function(D,Q){const I=Q===S.length-1,L=I?D.value:xe.formatScaled(D.value);I?E+=`<div style="border-top: 1px solid ${O}; margin-top: 5px; padding-top: 5px;">`:E+="<div>",E+=`
            ${D.marker} 
            <span style="color: ${V};">${D.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${V};">
              ${L}
            </span>
          </div>`}),E}},xAxis:{type:"category",data:v.value,axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",position:"left",name:f("Volume (%s)",xe.currencySign),axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12,formatter:S=>xe.formatScaled(S)},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",position:"right",name:"YoY Growth (%)",axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12,formatter:"{value}%"},splitLine:{show:!1},min:Math.min(...g.value.filter(S=>!isNaN(S)),0)-5,max:Math.max(...g.value.filter(S=>!isNaN(S)),0)+5}],series:b.value};try{F.setOption(k,{notMerge:!0,replaceMerge:["series"]})}catch(S){l.value=`Error updating chart: ${S.message}`,console.error(l.value)}},C=(k,S,E,V,$=0)=>({name:k,type:S,barMaxWidth:e.barMaxWidth,areaStyle:S==="line"?null:void 0,data:E,smooth:S==="line",color:V,lineStyle:S==="line"?{width:2}:void 0,yAxisIndex:$,emphasis:{scale:2,itemStyle:{color:u.value?A.blue[800]:A.blue[400]}}});return ce([()=>e.data,n],()=>{de(w)},{deep:!0}),je(()=>{window.removeEventListener("onFluentCartThemeChange",w,!1),F&&(F.dispose(),F=null)}),pe(()=>{window.addEventListener("onFluentCartThemeChange",w),de(B)}),(k,S)=>(d(),_("div",xW,[o(se,{id:"chartContainer",ref_key:"cardRef",ref:s},{default:r(()=>[o(le,{title:p(f)(t.title),title_size:"small",border_bottom:""},{action:r(()=>S[0]||(S[0]=[])),_:1},8,["title"]),o(ae,{class:"p-0"},{default:r(()=>[l.value?(d(),_("div",UW,h(l.value),1)):x("",!0),t.isEmpty?(d(),U(Le,{key:2,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:1,class:"fct-chart-wrap fct-gross-volume-chart",ref_key:"chartRef",ref:a,style:{height:"400px"}},null,512))]),_:1})]),_:1},512)]))}},su=ye(EW,[["__scopeId","data-v-36fdc14e"]]),SW={class:"fct-country-volume-chart-wrap"},QW={class:"fct-btn-group sm"},DW={__name:"CountryVolumeChart",props:{data:{type:Object,required:!0},title:{type:String,default:""}},setup(t){const e=t,a=T(null),s=T(null);let n=null;const l=T("bar");T("");const A=T(me.isDark()),u=X(()=>[A.value?"#032647":"#3e9df6",A.value?"#04315b":"#1589f4",A.value?"#053c70":"#0a73d5",A.value?"#064784":"#0968c1",A.value?"#075298":"#085dad"]),c=X(()=>{const w=Array.isArray(e.data.by_countries)?e.data.by_countries:Object.values(e.data.by_countries);return!w.length||!w.every(C=>!!C)}),m=me.colors,v=X(()=>{const w=e.data.by_month||{};return Object.keys(w).sort().map(k=>{const S=w[k],E=Object.values(S).reduce(($,O)=>$+O,0),V=Object.entries(S).sort(($,O)=>$[1]-O[1]).reduce(($,[O,D])=>({...$,[O]:D}),{});return{label:k,countries:V,total:E}})}),b=X(()=>v.value.length?v.value.map(w=>{try{const[C,k]=w.label.split("-");return Ce(new Date(C,k-1)).format("MMM YYYY")}catch{return w.label}}):[]),g=X(()=>{const w=e.data.by_month||{},C=Object.keys(w).sort(),k=new Set;return Object.values(w).forEach(S=>{Object.keys(S).forEach(E=>k.add(E))}),Array.from(k).reverse().map(S=>{let E;const V=v.value.map(($,O)=>{const D=w[C[O]],I=Object.entries(D).sort((N,W)=>W[1]-N[1]).map(([N])=>N).indexOf(S),L=$.countries[S]||0,K=I<5?I:4;return!E&&K>=0&&(E=u.value[K]||u.value[4]),{value:L/100,label:{show:L>0,position:"inside",formatter:S,color:(A.value,"#fff"),fontSize:10,fontWeight:"bold"}}});return{name:S,type:l.value,stack:"total",data:V,itemStyle:{color:E},lineStyle:{color:E}}})}),F=()=>{if(!a.value)return;n=ot(a.value);const w={backgroundColor:"transparent",tooltip:{trigger:"axis",backgroundColor:A.value?"#253241":"#ffffff",textStyle:{color:A.value?m.gray[25]:m.system.mid},borderColor:A.value?"#2C3C4E":"#c0c4ca",axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:A.value?m.report.dark_cyan_blue_16:m.report.light_gray_cyan_blue}},borderWidth:1,formatter:C=>{let k=C[0].axisValue;const S=A.value?"#ffffff":"#565865",E=v.value[C[0].dataIndex].total;C=C.sort(($,O)=>O.value-$.value).filter($=>$.value>0),C.push({marker:'<span style="display:inline-block; width:10px; height:10px; border-radius:50%; background-color:#FFA500; margin-right:5px;"></span>',seriesName:f("Total"),value:E/100});const V=A.value?m.report.dark_cyan_blue_16:m.report.light_gray_blue;return C.forEach(function($,O){const D=O===C.length-1;if(!D&&$.value===0)return;const Q=xe.scaled($.value);D?k+=`<div style="border-top: 1px solid ${V}; margin-top: 5px; padding-top: 5px;">`:k+="<div>",k+=`
            ${$.marker} 
            <span style="color: ${S};">${$.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${S};">
              ${Q}
            </span>
          </div>`}),k}},xAxis:{type:"category",data:b.value,axisLabel:{color:A.value?"#ffffff":"#696778",fontSize:12},axisLine:{lineStyle:{color:A.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",position:"left",name:f("Volume (%s)",xe.currencySign),axisLabel:{color:A.value?"#ffffff":"#696778",fontSize:12,formatter:C=>xe.formatScaled(C*100)},splitLine:{show:!0,lineStyle:{color:A.value?"#253241":"#D6DAE1",type:"dashed"}}},series:g.value};n.setOption(w)},B=()=>{A.value=me.isDark(),de(()=>{F()})};return pe(()=>{window.addEventListener("onFluentCartThemeChange",B),de(F)}),ce(()=>A.value,()=>{n&&(n.dispose(),F())}),ce(()=>e.data,()=>{n&&F()}),(w,C)=>(d(),_("div",SW,[o(se,{id:"chartContainer",ref_key:"cardRef",ref:s},{default:r(()=>[o(le,{title:t.title,title_size:"small",border_bottom:""},{action:r(()=>[i("div",QW,[o(Wp,{targetRef:a.value},null,8,["targetRef"])])]),_:1},8,["title"]),o(ae,{class:"p-0"},{default:r(()=>[c.value?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-chart-wrap fct-country-volume-chart",ref_key:"chartRef",ref:a,style:{height:"400px"}},null,512))]),_:1})]),_:1},512)]))}},nu=ye(DW,[["__scopeId","data-v-9e9f9baa"]]),$W={class:"fct-card-header-title is-small"},ou={__name:"CountryNetChart",props:{data:{type:Object,required:!0},title:{type:String,default:""}},setup(t){const e=t,a=me.colors.report,s=T(me.isDark()),n=T(null),l=T("line"),A=T(e.data),u=X(()=>({textColor:s.value?"#ffffff":"#696778",borderColor:s.value?"#2C3C4E":"#c0c4ca",splitLineColor:s.value?"#253241":"#D6DAE1",bgColor:s.value?"#2d3748":"#ffffff"})),c=X(()=>Object.values(A.value).every(w=>w===0)),m=X(()=>Object.keys(A.value)),v=X(()=>[{name:f("Current"),type:l.value,data:Object.values(A.value),smooth:!0,color:s.value?a.purple_dark_mode:a.purple,lineStyle:{width:2},barMaxWidth:30}]);let b=null;const g=()=>{n.value&&!b&&(b=ot(n.value),F())},F=()=>{const w={legend:{show:!1},tooltip:{trigger:"axis",backgroundColor:u.value.bgColor,borderColor:u.value.borderColor,borderWidth:1,textStyle:{color:u.value.textColor},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:s.value?a.dark_cyan_blue_16:a.light_gray_blue}},formatter:C=>{let k=C[0].name;const S=s.value?"#ffffff":"#565865";return C.forEach(E=>{const V=xe.formatScaled(E.value);k+=`<div>
            ${E.marker} 
            <span style="color: ${S};">${E.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${S};">
              ${V}
            </span>
          </div>`}),k}},xAxis:{type:"category",data:m.value,axisLabel:{color:u.value.textColor,fontSize:12},axisLine:{lineStyle:{type:"dashed",color:u.value.splitLineColor}}},yAxis:{type:"value",axisLabel:{color:u.value.textColor,fontSize:12,formatter:C=>xe.formatScaled(C)},splitLine:{show:!0,lineStyle:{color:u.value.splitLineColor,type:"dashed"}}},series:v.value,grid:{left:"10px",right:"10px",top:"20px",bottom:"60px",containLabel:!0}};b.setOption(w,{notMerge:!0,replaceMerge:["series"]})};ce([()=>A.value,l,()=>s.value],()=>{de(F)},{deep:!0});const B=()=>{s.value=me.isDark(),de(()=>{F()})};return pe(()=>{window.addEventListener("onFluentCartThemeChange",B,!1),de(g)}),(w,C)=>(d(),U(se,null,{default:r(()=>[t.title!==""?(d(),U(le,{key:0,border_bottom:!0},{title:r(()=>[i("h3",$W,h(t.title),1)]),_:1})):x("",!0),o(ae,null,{default:r(()=>[c.value?(d(),U(Le,{key:1,icon:"Empty/ListView","has-dark":!0,text:p(f)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(d(),_("div",{key:0,class:"fct-chart-wrap h-[350px]",ref_key:"SubscriptionCountTrendChartRef",ref:n},null,512))]),_:1})]),_:1}))}},IW={class:"fct-overview-report-loader-wrap"},TW={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},MW={class:"fct-card-header-title is-small"},VW={class:"flex gap-2 mt-1"},LW={class:"py-6"},OW={class:"grid grid-cols-1"},HW={class:"fct-card-header-title is-small"},RW={class:"py-6"},PW={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},KW={class:"fct-card-header-title is-small"},NW={class:"flex gap-2 mt-1"},GW={class:"py-6"},jW={class:"grid grid-cols-1"},zW={class:"fct-card-header-title is-small"},YW={class:"py-6"},qW={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},WW={class:"fct-card-header-title is-small"},XW={class:"py-6"},JW={__name:"OverviewLoading",setup(t){const e=[{title:f("Gross Summary"),key:"gross_summary"},{title:f("Gross Revenue Quarterly"),key:"net_summary"}],a=[{title:f("Net Revenue"),key:"net_revenue"},{title:f("Net Revenue Quarterly"),key:"net_revenue_quarterly"}],s=[{title:f("Top Country Gross Volume"),key:"top_country_gross"},{title:f("Top Country Net Volume"),key:"top_country_net"}],n=[{title:f("Top Countries Gross Revenue"),key:"top_country_revenue"},{title:f("Top Countries Net Revenue"),key:"top_country_net_revenue"}];return(l,A)=>{const u=y("el-skeleton-item"),c=y("el-skeleton");return d(),_("div",IW,[i("div",TW,[(d(),_(H,null,q(e,(m,v)=>i("div",{key:v},[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(le,{border_bottom:!0},{title:r(()=>[i("h3",MW,h(m.title),1),i("div",VW,[o(c,{animated:""},{template:r(()=>[o(u,{variant:"p",class:"w-[100px]"})]),_:1})])]),_:2},1024),i("div",LW,[o(c,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))]),i("div",OW,[(d(),_(H,null,q(2,m=>i("div",{key:m},[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(c,{animated:""},{template:r(()=>[o(u,{variant:"p",class:"w-2/3"})]),_:1}),o(le,{border_bottom:!0},{title:r(()=>[i("h2",HW,h(p(f)("Gross Volume Breakdown")),1)]),_:1}),i("div",RW,[o(c,{animated:"",rows:7})])]),_:1})]),_:1})])),64))]),i("div",PW,[(d(),_(H,null,q(a,(m,v)=>i("div",{key:v},[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(le,{border_bottom:!0},{title:r(()=>[i("h3",KW,h(m.title),1),i("div",NW,[o(c,{animated:""},{template:r(()=>[o(u,{variant:"p",class:"w-[100px]"})]),_:1})])]),_:2},1024),i("div",GW,[o(c,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))]),i("div",jW,[(d(),_(H,null,q(s,(m,v)=>i("div",{key:v},[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(le,{border_bottom:!0},{title:r(()=>[i("h2",zW,h(m.title),1)]),_:2},1024),i("div",YW,[o(c,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))]),i("div",qW,[(d(),_(H,null,q(n,(m,v)=>i("div",{key:v},[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(le,{border_bottom:!0},{title:r(()=>[i("h3",WW,h(m.title),1)]),_:2},1024),i("div",XW,[o(c,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))])])}}},ZW={class:"overview-summary-report-inline"},eX={class:"inner-value"},tX={__name:"Summary",props:{title:{type:String},current:{type:[String,Number],required:!0},previous:{type:[String,Number],required:!0},fluctuation:{type:[String,Number],required:!0}},setup(t){return(e,a)=>(d(),_("div",ZW,[i("div",eX,[o(zs,{amount:p(xe).formatScaled(t.current),title:p(f)(t.title)},null,8,["amount","title"])]),o(ca,{fluctuation:t.fluctuation,amount:t.previous/100,fluctuationSuffix:p(f)("YoY")},null,8,["fluctuation","amount","fluctuationSuffix"])]))}},Go=ye(tX,[["__scopeId","data-v-b394c9f1"]]),aX={class:"report-overview-page"},sX={class:"page-heading-wrap flex items-center justify-between"},nX={class:"page-title"},oX={class:"flex items-center justify-start gap-1 mb-2 text-xs text-system-mid dark:text-system-light"},lX={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},rX={class:"fct-card-header-title is-small"},iX={class:"fct-card-header-title is-small"},AX={class:"grid grid-cols-1"},dX=["innerHTML"],uX=["innerHTML"],cX={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},fX={class:"fct-card-header-title is-small"},pX={class:"fct-card-header-title is-small"},mX={class:"grid gap-4 grid-cols-1"},hX={class:"grid gap-4 grid-cols-1"},_X={class:"report-overview-col-2 grid gap-7.5 grid-cols-2"},gX={__name:"Overview",setup(t){const e=T({}),a=T(!0),s=T({gross_revenue_quarterly:{},net_revenue_quarterly:{}}),n=()=>{te.get("reports/overview").then(u=>{e.value=u.data,l()}).catch(u=>{console.error(u,"error")}).finally(()=>{a.value=!1})},l=()=>{s.value.gross_revenue_quarterly=A(e.value.gross_revenue_quarterly,"current","prev_year"),s.value.net_revenue_quarterly=A(e.value.net_revenue_quarterly,"current","prev_year")},A=(u,c="current",m="prev")=>{const v=we.sum(u,"*."+c),b=we.sum(u,"*."+m),g=b===0?100:(v-b)/b*100;return{value:parseFloat(g.toFixed(2)),prev:b,current:v}};return X(()=>{var u,c;return((u=e.value.gross_summary)==null?void 0:u.yoy_growth)<0?"danger":((c=e.value.gross_summary)==null?void 0:c.yoy_growth)===null?"warning":"success"}),pe(()=>{n()}),(u,c)=>(d(),_("div",aX,[i("div",sX,[i("h1",nX,h(p(f)("Overview")),1)]),i("div",oX,[o(Y,{name:"InformationFill",class:"w-4 h-4 text-system-light"}),M(" "+h(p(f)("Last %s Months",p(f)(12))),1)]),a.value?(d(),U(JW,{key:0})):(d(),_(H,{key:1},[i("div",lX,[i("div",null,[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(le,{border_bottom:""},{title:r(()=>[i("h3",rX,h(p(f)("Gross Summary")),1),o(Go,{current:e.value.gross_summary.total,previous:e.value.gross_summary.total_prev,fluctuation:e.value.gross_summary.yoy_growth},null,8,["current","previous","fluctuation"])]),_:1}),o(No,{data:e.value.gross_revenue,dataKey:"current","date-range":"","is-empty":!e.value.gross_summary.total},null,8,["data","is-empty"])]),_:1})]),_:1})]),i("div",null,[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(le,{border_bottom:""},{title:r(()=>[i("h3",iX,h(p(f)("Gross Revenue Quarterly")),1),o(Go,{current:s.value.gross_revenue_quarterly.current,previous:s.value.gross_revenue_quarterly.prev,fluctuation:s.value.gross_revenue_quarterly.value},null,8,["current","previous","fluctuation"])]),_:1}),o(No,{data:e.value.gross_revenue_quarterly,dataKey:"current","bar-max-width":80,"is-empty":!s.value.gross_revenue_quarterly.current},null,8,["data","is-empty"])]),_:1})]),_:1})])]),i("div",AX,[i("div",null,[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[i("div",{class:"mb-3",innerHTML:p(xe).generateVolumeSummary(e.value.gross_revenue,!0)},null,8,dX),o(su,{title:"Gross Volume Breakdown",data:e.value.gross_revenue,dataKey:"current","is-date":"","is-empty":!e.value.gross_summary.total},null,8,["data","is-empty"])]),_:1})]),_:1})]),i("div",null,[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[i("div",{class:"mb-3",innerHTML:p(xe).generateVolumeSummary(e.value.gross_revenue_quarterly)},null,8,uX),o(su,{title:p(f)("Gross Revenue Breakdown"),data:e.value.gross_revenue_quarterly,dataKey:"current",prevKey:"prev_year",labelKey:"yy_growth","bar-max-width":80,"is-empty":!e.value.gross_summary.total},null,8,["title","data","is-empty"])]),_:1})]),_:1})])]),i("div",cX,[i("div",null,[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(le,{border_bottom:!0},{title:r(()=>[i("h3",fX,h(p(f)("Net Revenue")),1),o(Go,{title:"Net Revenue",current:e.value.net_summary.total,previous:e.value.net_summary.total_prev,fluctuation:e.value.net_summary.yoy_growth},null,8,["current","previous","fluctuation"])]),_:1}),o(No,{data:e.value.net_revenue,dataKey:"current","date-range":"","is-empty":!e.value.net_summary.total},null,8,["data","is-empty"])]),_:1})]),_:1})]),i("div",null,[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(le,{border_bottom:!0},{title:r(()=>[i("h3",pX,h(p(f)("Net Revenue Quarterly")),1),o(Go,{title:"Net Revenue Quarterly",current:s.value.net_revenue_quarterly.current,previous:s.value.net_revenue_quarterly.prev,fluctuation:s.value.net_revenue_quarterly.value},null,8,["current","previous","fluctuation"])]),_:1}),o(No,{data:e.value.net_revenue_quarterly,dataKey:"current","bar-max-width":80,"is-empty":!e.value.net_summary.total},null,8,["data","is-empty"])]),_:1})]),_:1})])]),i("div",mX,[i("div",null,[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(nu,{data:e.value.top_country_gross,title:p(f)("Top Country Gross Volume")},null,8,["data","title"])]),_:1})]),_:1})])]),i("div",hX,[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>[o(nu,{data:e.value.top_country_net,title:p(f)("Top Country Net Volume")},null,8,["data","title"])]),_:1})]),_:1})]),i("div",_X,[o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>{var m;return[o(ou,{data:(m=e.value.top_country_gross)==null?void 0:m.by_countries,title:p(f)("Top Countries Gross Revenue")},null,8,["data","title"])]}),_:1})]),_:1}),o(se,null,{default:r(()=>[o(ae,null,{default:r(()=>{var m;return[o(ou,{data:(m=e.value.top_country_net)==null?void 0:m.by_countries,title:p(f)("Top Countries Net Revenue")},null,8,["data","title"])]}),_:1})]),_:1})])],64))]))}},vX={class:"setting-wrap wm-container-enhanced"},yX={key:0,class:"bg-white rounded p-6 dark:bg-dark-700"},bX={class:"grid gap-3 mb-6"},wX={class:"grid gap-3 mb-6"},BX={class:"grid gap-3 mb-6"},CX={class:"grid gap-3"},kX=Object.assign({name:"StoreSettings"},{__name:"AddonSettings",setup(t){const e=Sf(),{form:a}=e.data,s=Ns(),n=Xe().ctx,l=T([]),A=T([]),u=T(!0),c=T(!1),m=T(!0),v=T({}),b=T(!1),g=()=>{c.value=!0;let B=a.values;n.$post("settings/modules",{...B}).then(w=>{n.handleSuccess(f("Settings saved successfully")),setTimeout(()=>{window.location.reload()},300)}).catch(w=>{if(w&&w.message)return n.handleError(w);v.value=w}).finally(()=>{c.value=!1,m.value=!1,u.value=!1})},F=()=>{u.value=!0,n.$get("settings/modules",{}).then(B=>{var k,S;a.setSchema(B.fields).setDefaults(B.settings).initForm(),l.value=B.settings,A.value=B.fields,m.value=!1,c.value=!1;const w=((S=(k=B.fields)==null?void 0:k.modules_settings)==null?void 0:S.schema)||[];let C=!1;Array.isArray(w)?C=w.length>0:C=Object.keys(w).length>0,b.value=C}).finally(()=>{u.value=!1})};return pe(()=>{F()}),s.onSave(g),(B,w)=>{const C=y("el-skeleton-item"),k=y("el-skeleton"),S=y("el-form");return d(),_("div",vX,[m.value?(d(),_("div",yX,[o(k,{loading:m.value,animated:""},{template:r(()=>[i("div",bX,[o(C,{variant:"p",class:"w-[20%]"}),o(C,{variant:"p"})]),i("div",wX,[o(C,{variant:"p",class:"w-[20%]"}),o(C,{variant:"p"})]),i("div",BX,[o(C,{variant:"p",class:"w-[20%]"}),o(C,{variant:"p"})]),i("div",CX,[o(C,{variant:"p",class:"w-[20%]"}),o(C,{variant:"p"})])]),_:1},8,["loading"])])):x("",!0),m.value?x("",!0):(d(),_(H,{key:1},[p(a).isReady?(d(),U(S,{key:0},{default:r(()=>[b.value?(d(),U(er,{key:0,form:p(a),showSubmitButton:!0,onOnSubmitButtonClick:g,submitButtonText:p(f)("Save Settings"),loading:c.value,onOnChange:w[0]||(w[0]=E=>{}),"validation-errors":v.value},null,8,["form","submitButtonText","loading","validation-errors"])):(d(),U(se,{key:1},{default:r(()=>[o(le,{title:p(f)("Features & addon"),border_bottom:""},null,8,["title"]),o(ae,null,{default:r(()=>[o(Le,{class:"fct-addon-empty-state",icon:"Empty/Integrations",text:p(f)("No module settings found.")},null,8,["text"])]),_:1})]),_:1}))]),_:1})):x("",!0)],64))])}}}),FX={class:"form-note"},xX={class:"form-note"},UX={class:"form-note"},EX={class:"form-note"},SX={class:"el-form-item__label"},QX={class:"h-[297px] w-full relative"},DX={class:"mt-2 mb-2"},$X={class:"form-note"},IX={class:"fct-powered-by-email-footer-checkbox mb-4 pb-4 border-[1px] border-l-0 border-t-0 border-r-0 border-solid border-gray-outline dark:border-dark-400"},TX={class:"setting-html-wrapper"},MX={class:"setting-label"},VX={class:"form-note"},LX={class:"setting-fields-inner w-full"},OX={__name:"MailingSettingsLoader",setup(t){return(e,a)=>{const s=y("el-skeleton-item"),n=y("el-skeleton"),l=y("el-form-item"),A=y("el-col"),u=y("el-row");return d(),U(ae,null,{default:r(()=>[o(u,{gutter:15},{default:r(()=>[o(A,{lg:12},{default:r(()=>[o(l,{label:p(f)("From Name"),"label-position":"top"},{default:r(()=>[o(n,{animated:"",class:"h-9 gap-2"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1}),a[0]||(a[0]=i("br",null,null,-1)),i("div",null,[i("div",FX,[i("p",null,h(p(f)("Name that will be used to send emails")),1)])])]),_:1,__:[0]},8,["label"])]),_:1}),o(A,{lg:12},{default:r(()=>[o(l,{label:p(f)("From Email"),"label-position":"top"},{default:r(()=>[o(n,{animated:"",class:"h-9"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1}),i("div",null,[i("div",xX,[i("p",null,h(p(f)(`Provide Valid Email Address email as per your domain/SMTP settings. This
email will be used to send emails like notifications`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),o(u,{gutter:15},{default:r(()=>[o(A,{lg:12},{default:r(()=>[o(l,{label:p(f)("Reply to name (Optional)"),"label-position":"top"},{default:r(()=>[o(n,{animated:"",class:"h-9"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1}),i("div",UX,[i("p",null,h(p(f)("Name that will be used for reply to attribute")),1)])]),_:1},8,["label"])]),_:1}),o(A,{lg:12},{default:r(()=>[o(l,{label:p(f)("Reply to email (Optional)"),"label-position":"top"},{default:r(()=>[o(n,{animated:"",class:"h-9"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1}),i("div",null,[i("div",EX,[i("p",null,h(p(f)(`If someone replies to your notification email, this is where you would like to
receive it.`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),o(u,{gutter:15},{default:r(()=>[o(A,null,{default:r(()=>[i("div",SX,h(p(f)("Email Footer")),1),i("div",QX,[o(n,{animated:"",rows:7})]),i("div",DX,[i("div",$X,[i("p",null,h(p(f)(`This email footer will be used for all emails sent from Webmakerr, It's highly recommended to use your business name and address in the footer for
compliance.`)),1)])]),i("div",IX,[o(n,{animated:"",class:"h-5"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})])]),_:1})]),_:1}),o(u,{gutter:15},{default:r(()=>[o(A,null,{default:r(()=>[o(l,null,{default:r(()=>[o(u,{gutter:15,class:"w-full"},{default:r(()=>[o(A,{lg:12},{default:r(()=>[i("div",TX,[i("span",MX,h(p(f)("Admin Email Address")),1),i("div",VX,[i("p",null,h(p(f)("Webmakerr will send admin notification to this email address.")),1)])])]),_:1}),o(A,{lg:12},{default:r(()=>[i("div",LX,[o(n,{animated:"",class:"h-9"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},HX={class:"setting-wrap wm-container-enhanced"},RX={class:"form-note"},PX={class:"form-note"},KX={class:"form-note"},NX={class:"form-note"},GX={class:"el-form-item__label"},jX={class:"mt-2 mb-2"},zX={class:"form-note"},YX={class:"fct-powered-by-email-footer-checkbox mb-4 pb-4 border-[1px] border-l-0 border-t-0 border-r-0 border-solid border-gray-outline dark:border-dark-400"},qX={class:"setting-html-wrapper"},WX={class:"setting-label"},XX={class:"form-note"},JX={class:"setting-fields-inner w-full"},ZX={class:"setting-save-action"},eJ={__name:"MailingSettings",setup(t){const e=T({from_name:"",from_email:"",reply_to_name:"",reply_to_email:"",email_footer:"",show_email_footer:"yes",admin_email:"{{wp.admin_email}}"}),a=$e.get("app_config.isProActive"),s=T(!1),n=T({}),l=T({}),A=()=>{s.value=!0,te.get("email-notification/get-settings").then(c=>{var m,v,b,g,F,B,w;e.value={from_name:(m=c.data)==null?void 0:m.from_name,from_email:(v=c.data)==null?void 0:v.from_email,reply_to_name:(b=c.data)==null?void 0:b.reply_to_name,reply_to_email:(g=c.data)==null?void 0:g.reply_to_email,email_footer:(F=c.data)==null?void 0:F.email_footer,admin_email:(B=c.data)==null?void 0:B.admin_email,show_email_footer:((w=c.data)==null?void 0:w.show_email_footer)||"yes"},l.value=c.shortcodes}).catch(c=>{}).finally(()=>{s.value=!1})},u=()=>{s.value=!0,n.value={},te.post("email-notification/save-settings",e.value).then(c=>{J.success(c.message)}).catch(c=>{c.message?J.error(c.message):(J.error(f("Please Fill up all the fields")),n.value=c)}).finally(()=>{s.value=!1})};return pe(()=>{A()}),(c,m)=>{const v=y("el-input"),b=y("el-form-item"),g=y("el-col"),F=y("el-row"),B=y("el-checkbox"),w=y("el-button");return d(),_("div",HX,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Mailing Settings"),text:p(f)("Set your from name, email, and email footer. These configurations will be used to send emails from %s.","Webmakerr"),border_bottom:""},null,8,["title","text"]),s.value?(d(),U(OX,{key:0})):(d(),U(ae,{key:1},{default:r(()=>[o(F,{gutter:15},{default:r(()=>[o(g,{lg:12},{default:r(()=>[o(b,{label:p(f)("From Name"),"label-position":"top"},{default:r(()=>[o(v,{modelValue:e.value.from_name,"onUpdate:modelValue":m[0]||(m[0]=C=>e.value.from_name=C)},null,8,["modelValue"]),m[9]||(m[9]=i("br",null,null,-1)),i("div",null,[o(Wa,{"validation-errors":n.value.from_name||{},"field-key":"from_name"},null,8,["validation-errors"]),i("div",RX,[i("p",null,h(p(f)("Name that will be used to send emails")),1)])])]),_:1,__:[9]},8,["label"])]),_:1}),o(g,{lg:12},{default:r(()=>[o(b,{label:p(f)("From Email"),"label-position":"top"},{default:r(()=>[o(v,{modelValue:e.value.from_email,"onUpdate:modelValue":m[1]||(m[1]=C=>e.value.from_email=C)},null,8,["modelValue"]),i("div",null,[o(Wa,{"validation-errors":n.value.from_email||{},"field-key":"from_name"},null,8,["validation-errors"]),i("div",PX,[i("p",null,h(p(f)(`Provide Valid Email Address email as per your domain/SMTP settings. This
email will be used to send emails like notifications`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),o(F,{gutter:15},{default:r(()=>[o(g,{lg:12},{default:r(()=>[o(b,{label:p(f)("Reply to name (Optional)"),"label-position":"top"},{default:r(()=>[o(v,{modelValue:e.value.reply_to_name,"onUpdate:modelValue":m[2]||(m[2]=C=>e.value.reply_to_name=C)},null,8,["modelValue"]),i("div",KX,[i("p",null,h(p(f)("Name that will be used for reply to attribute")),1)])]),_:1},8,["label"])]),_:1}),o(g,{lg:12},{default:r(()=>[o(b,{label:p(f)("Reply to email (Optional)"),"label-position":"top"},{default:r(()=>[o(v,{modelValue:e.value.reply_to_email,"onUpdate:modelValue":m[3]||(m[3]=C=>e.value.reply_to_email=C)},null,8,["modelValue"]),i("div",null,[o(Wa,{"validation-errors":n.value.reply_to_email||{},"field-key":"reply_to_email"},null,8,["validation-errors"]),i("div",NX,[i("p",null,h(p(f)(`If someone replies to your notification email, this is where you would like to
receive it.`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),o(F,{gutter:15},{default:r(()=>[o(g,null,{default:r(()=>[i("div",GX,h(p(f)("Email Footer")),1),o(Ks,{"short-codes":l.value,modelValue:e.value.email_footer,"onUpdate:modelValue":m[4]||(m[4]=C=>e.value.email_footer=C),onUpdate:m[5]||(m[5]=C=>{e.value.email_footer=C})},null,8,["short-codes","modelValue"]),i("div",jX,[o(Wa,{"validation-errors":n.value.email_footer||{},"field-key":"email_footer"},null,8,["validation-errors"]),i("div",zX,[i("p",null,h(p(f)(`This email footer will be used for all emails sent from Webmakerr, It's highly recommended to use your business name and address in the footer for
compliance.`)),1)])]),i("div",YX,[o(B,{modelValue:e.value.show_email_footer,"onUpdate:modelValue":m[6]||(m[6]=C=>e.value.show_email_footer=C),"true-value":"yes","false-value":"no",disabled:!p(a)},{default:r(()=>[M(h(p(f)("Enable powered by Webmakerr in the email footer")),1)]),_:1},8,["modelValue","disabled"])])]),_:1})]),_:1}),o(F,{gutter:15},{default:r(()=>[o(g,null,{default:r(()=>[o(b,null,{default:r(()=>[o(F,{gutter:15,class:"w-full"},{default:r(()=>[o(g,{lg:12},{default:r(()=>[i("div",qX,[i("span",WX,h(p(f)("Admin Email Address")),1),i("div",XX,[i("p",null,h(p(f)("Webmakerr will send admin notification to this email address.")),1)])])]),_:1}),o(g,{lg:12},{default:r(()=>[i("div",JX,[o(v,{modelValue:e.value.admin_email,"onUpdate:modelValue":m[7]||(m[7]=C=>e.value.admin_email=C)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),i("div",ZX,[o(w,{type:"primary",onClick:m[8]||(m[8]=C=>u()),loading:s.value},{default:r(()=>[M(h(s.value?p(f)("Saving"):p(f)("Save")),1)]),_:1},8,["loading"])])])}}},tJ={};function aJ(t,e){const a=y("router-view");return d(),_("div",null,[o(a)])}const sJ=ye(tJ,[["render",aJ]]),nJ={},oJ={class:"fct-setting-form-row"},lJ={class:"w-[300px]"},rJ={class:"flex-grow flex-shrink flex-basis-0 self-center"},iJ={class:"fct-setting-form-row"},AJ={class:"w-[300px]"},dJ={class:"flex-grow flex-shrink flex-basis-0 self-center"},uJ={class:"fct-setting-form-row"},cJ={class:"w-[300px]"},fJ={class:"flex-grow flex-shrink flex-basis-0 self-center"};function pJ(t,e){const a=y("el-skeleton-item"),s=y("el-skeleton");return d(),_("div",null,[i("div",oJ,[i("div",lJ,[o(s,{animated:"",class:"max-w-[70%]"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1}),o(s,{animated:"",class:"max-w-[80%]"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"}),o(a,{variant:"p",class:"w-1/2 h-4"})]),_:1})]),i("div",rJ,[o(s,{animated:""},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1})])]),i("div",iJ,[i("div",AJ,[o(s,{animated:"",class:"max-w-[60%]"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1}),o(s,{animated:"",class:"max-w-full"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1})]),i("div",dJ,[o(s,{animated:""},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1})])]),i("div",uJ,[i("div",cJ,[o(s,{animated:"",class:"max-w-[50%]"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1}),o(s,{animated:"",class:"max-w-full"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1})]),i("div",fJ,[o(s,{animated:""},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1})])])])}const mJ=ye(nJ,[["render",pJ]]),hJ={},_J={class:"fct-tax-classes-content flex-1"},gJ={class:"fct-tax-classes-actions"};function vJ(t,e){const a=y("el-skeleton-item"),s=y("el-skeleton");return d(),_(H,null,q(5,n=>i("div",{key:n,class:"fct-tax-classes h-[73px]"},[i("div",_J,[o(s,{animated:"",class:"max-w-[400px]"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1}),o(s,{animated:"",class:"max-w-[300px]"},{template:r(()=>[o(a,{variant:"p",class:"w-3/4 h-4"})]),_:1})]),i("div",gJ,[o(s,{animated:""},{template:r(()=>[o(a,{variant:"p",class:"w-[80px] h-4"})]),_:1})])])),64)}const yJ=ye(hJ,[["render",vJ]]),bJ={key:0,class:"setting-wrap"},wJ={class:"fct-all-tax-classes-page"},BJ={key:0,class:"fct-tax-classes-wrap"},CJ={key:1,class:"fct-tax-classes-wrap"},kJ={class:"fct-tax-classes-content"},FJ={class:"fct-tax-classes-title"},xJ={class:"heading"},UJ={key:0,class:"fct-tax-classes-categories"},EJ={key:0,class:"fct-tax-classes-category fct-tax-classes-more"},SJ={class:"fct-tax-classes-desc"},QJ={class:"fct-tax-classes-actions"},DJ={class:"form-hint"},$J={key:0},IJ={__name:"TaxClasses",props:{tax_settings_changed:{type:Boolean,default:!1},enable_tax:{type:String,default:"no"},categories_external:{type:Array,default:()=>[]}},setup(t){const e=T([]),a=T(!1),s=T(!1),n=T(!1),l=T({id:0,title:"",description:"",categories:[],priority:10}),A=t;ce(()=>A.tax_settings_changed,V=>{V&&v()});const u=T({}),c=T([]),m=T(!1),v=()=>{a.value=!0,te.get("tax/classes").then(V=>{e.value=V.tax_classes}).catch(V=>{V&&(V!=null&&V.message)&&J.error(V),console.error("Error fetching tax classes:",V)}).finally(()=>{a.value=!1})},b=()=>{g(),s.value=!0},g=()=>{l.value={id:0,title:"",description:"",categories:[],priority:10}},F=()=>{if(n.value=!0,!l.value.title)return n.value=!1,J.error(f("Title is required"));te.post("tax/classes",l.value).then(V=>{J.success(V.message),v(),s.value=!1,g(),u.value={}}).catch(V=>{V&&(V!=null&&V.message)?J.error(V==null?void 0:V.message):u.value=V}).finally(()=>{n.value=!1})},B=()=>{if(n.value=!0,!l.value.title)return n.value=!1,J.error(f("Title is required"));te.put("tax/classes/"+l.value.id,{title:l.value.title,description:l.value.description,categories:l.value.categories,priority:l.value.priority}).then(V=>{J.success(V.message),v(),s.value=!1,u.value={}}).catch(V=>{V&&(V!=null&&V.message)?J.error(V==null?void 0:V.message):u.value=V}).finally(()=>{n.value=!1})},w=V=>{V.action==="delete"&&Pt(f("Are you sure you want to delete this tax class?"),f("Confirm Delete!"),{confirmButtonText:f("Yes, Delete!"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{C(V.taxClass.id)}).catch(()=>{})},C=V=>{te.delete("tax/classes/"+V).then($=>{J.success($.message),v()}).catch($=>{$&&($!=null&&$.message)?J.error($==null?void 0:$.message):u.value=$}).finally(()=>{})},k=V=>{var $,O;l.value={id:V.id,title:V.title,description:V.description,categories:(($=V.meta)==null?void 0:$.categories)??[],priority:((O=V.meta)==null?void 0:O.priority)??0},s.value=!0},S=()=>{if(A.categories_external&&A.categories_external.length){c.value=A.categories_external.map(V=>({...V,value:parseInt(V.value??V.term_id)}));return}c.value.length>0||(m.value=!0,te.get("products/fetch-term").then(V=>{let $=V.taxonomies["product-categories"].terms;c.value=$.map(O=>({...O,value:parseInt(O.value)}))}).catch(V=>{console.error("Error fetching product categories:",V)}).finally(()=>{m.value=!1}))},E=V=>{var $;return(($=c.value.find(O=>O.value==V))==null?void 0:$.label)||V};return pe(()=>{v(),S()}),(V,$)=>{const O=y("el-button"),D=y("el-dropdown-item"),Q=y("el-dropdown-menu"),I=y("el-dropdown"),L=y("el-input"),K=y("el-form-item"),N=y("el-col"),W=y("el-input-number"),R=y("el-row"),ee=y("el-option"),oe=y("el-select"),Ae=y("el-form"),ue=y("el-dialog"),P=Et("loading");return A.enable_tax==="yes"&&e.value.length>0?(d(),_("div",bJ,[i("div",wJ,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Existing Tax Classes"),text:p(f)("Define categories to group products with similar tax treatment.")},{action:r(()=>[o(O,{type:"default",onClick:b},{default:r(()=>[M(h(p(f)("Add Tax Class")),1)]),_:1})]),_:1},8,["title","text"]),o(ae,null,{default:r(()=>[a.value?(d(),_("div",BJ,[o(yJ)])):(d(),_("div",CJ,[(d(!0),_(H,null,q(e.value,(G,z)=>(d(),_("div",{key:z,class:"fct-tax-classes"},[i("div",kJ,[i("h4",FJ,[i("span",xJ,h(G.title),1),G.categories&&G.categories.length>0?(d(),_("span",UJ,[(d(!0),_(H,null,q(G.categories.slice(0,2),(j,Z)=>(d(),_("span",{key:Z,class:"fct-tax-classes-category"},h(E(j)),1))),128)),G.categories.length>2?(d(),_("span",EJ," +"+h(G.categories.length-2),1)):x("",!0)])):x("",!0)]),i("p",SJ,h(G.description),1)]),i("div",QJ,[o(Be,{size:"small",tag:"span",onClick:j=>k(G)},{default:r(()=>[o(Y,{name:"Edit",class:"w-4 h-4"})]),_:2},1032,["onClick"]),["standard","reduced","zero"].includes(G.slug)?x("",!0):(d(),U(I,{key:0,trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:w},{dropdown:r(()=>[o(Q,null,{default:r(()=>[o(D,{command:{action:"delete",taxClass:G},class:"item-destructive"},{default:r(()=>[o(Y,{name:"Delete"}),M(" "+h(p(f)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[o(Be,{size:"small",tag:"span"},{default:r(()=>[o(Y,{name:"More",class:"w-4 h-4"})]),_:1})]),_:2},1024))])]))),128))]))]),_:1})]),_:1})]),o(ue,{modelValue:s.value,"onUpdate:modelValue":$[5]||($[5]=G=>s.value=G),title:p(f)("Add Tax Class"),width:"500px","append-to-body":"",class:"fluent-cart-admin-pages"},{footer:r(()=>[o(O,{onClick:$[4]||($[4]=G=>s.value=!1)},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),l.value.id>0?(d(),U(O,{key:0,type:"primary",onClick:B,loading:n.value},{default:r(()=>[M(h(n.value?p(f)("Updating"):p(f)("Update")),1)]),_:1},8,["loading"])):(d(),U(O,{key:1,type:"primary",onClick:F,loading:n.value},{default:r(()=>[M(h(n.value?p(f)("Creating"):p(f)("Create")),1)]),_:1},8,["loading"]))]),default:r(()=>[o(Ae,{"label-position":"top",model:l.value},{default:r(()=>[o(R,{gutter:20},{default:r(()=>[o(N,{span:16},{default:r(()=>[o(K,{label:p(f)("Tax Class Name")},{default:r(()=>[o(L,{modelValue:l.value.title,"onUpdate:modelValue":$[0]||($[0]=G=>l.value.title=G),placeholder:p(f)("Enter Tax Class Name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(N,{span:8},{default:r(()=>[o(K,{label:p(f)("Priority")},{label:r(()=>[o(Ze,{title:p(f)("Priority"),content:p(f)("Higher numbers have higher priority (0-10). Tax classes with higher priority will be applied first.")},null,8,["title","content"])]),default:r(()=>[o(W,{modelValue:l.value.priority,"onUpdate:modelValue":$[1]||($[1]=G=>l.value.priority=G),min:0,max:10,placeholder:p(f)("Enter priority (0-10)"),"controls-position":"right",class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),o(K,{label:p(f)("Product Category")},{default:r(()=>[At((d(),U(oe,{modelValue:l.value.categories,"onUpdate:modelValue":$[2]||($[2]=G=>l.value.categories=G),filterable:"",multiple:"",placeholder:p(f)("Select Product Category")},{default:r(()=>[(d(!0),_(H,null,q(c.value,(G,z)=>(d(),U(ee,{key:z,label:G.label,value:G.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])),[[P,m.value]]),i("div",DJ,[i("p",null,h(p(f)("Select the product categories that this tax class will be applied to.")),1)])]),_:1},8,["label"]),o(K,{label:p(f)("Description")},{default:r(()=>[o(L,{type:"textarea",rows:"3",modelValue:l.value.description,"onUpdate:modelValue":$[3]||($[3]=G=>l.value.description=G),placeholder:p(f)("Enter Tax Class Description")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),u.value?(d(),_("div",$J,[(d(!0),_(H,null,q(u.value,(G,z)=>(d(),_("p",{class:"text-red-500 m-0",key:z},h(G.required||G.max||G.unique),1))),128))])):x("",!0)]),_:1},8,["modelValue","title"])])):x("",!0)}}},TJ={name:"TaxConfigurations ",components:{TaxConfigurationsLoader:mJ,Animation:na,CardContainer:se,CardBody:ae,CardHeader:le,LabelHint:Ze,TaxClasses:IJ},data(){return{settings:{enable_tax:"no",tax_inclusion:"included",tax_calculation_basis:"shipping",tax_rounding:"item",eu_vat_settings:{require_vat_number:"no",local_reverse_charge:"no",vat_reverse_excluded_categories:[]}},tax_settings_changed:!1,saving:!1,loading:!1,categories:[],fetchingCategories:!1}},methods:{translate:f,saveSettings(){this.saving=!0,this.$post("tax/configuration/settings",{settings:this.settings}).then(t=>{this.handleSuccess(t.message),this.tax_settings_changed=!0}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message),this.saving=!1}).finally(()=>{this.saving=!1})},getSettings(){this.loading=!0,this.$get("tax/configuration/settings").then(t=>{if(this.settings=t.settings,this.settings.eu_vat_settings||(this.settings.eu_vat_settings={}),!Array.isArray(this.settings.eu_vat_settings.vat_reverse_excluded_categories))this.$set(this.settings.eu_vat_settings,"vat_reverse_excluded_categories",[]);else{let e=this.settings.eu_vat_settings.vat_reverse_excluded_categories.map(a=>a.toString());this.settings.eu_vat_settings.vat_reverse_excluded_categories=e}}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)}).finally(()=>{this.loading=!1})},fetchCategories(){this.categories.length>0||(this.fetchingCategories=!0,this.$get("products/fetch-term").then(t=>{this.categories=t.taxonomies["product-categories"].terms||[]}).catch(()=>{}).finally(()=>{this.fetchingCategories=!1}))}},mounted(){this.getSettings(),this.fetchCategories()}},MJ={class:"setting-wrap"},VJ={key:0,class:"setting-save-action mt-0"},LJ={class:"fct-setting-form-row"},OJ={class:"fct-setting-form-content flex gap-3.5 flex-1"},HJ={class:"fct-inline-tip"},RJ={class:"fct-setting-form-row"},PJ={class:"fct-setting-form-content"},KJ={class:"fct-inline-tip"},NJ={class:"fct-setting-form-fields self-center"},GJ={class:"fct-setting-form-row"},jJ={class:"fct-setting-form-content"},zJ={class:"fct-inline-tip"},YJ={class:"fct-setting-form-fields self-center"},qJ={class:"fct-setting-form-row"},WJ={class:"fct-setting-form-content"},XJ={class:"fct-inline-tip"},JJ={class:"fct-setting-form-fields self-center"},ZJ={class:"fct-setting-form-row"},eZ={class:"fct-setting-form-content"},tZ={class:"fct-inline-tip"},aZ={class:"fct-setting-form-content flex gap-3.5 flex-1"},sZ={class:"fct-inline-tip"},nZ={key:0,class:"fct-setting-form-content flex gap-3.5 flex-1"},oZ={class:"fct-inline-tip"},lZ={key:1,class:"fct-setting-form-row mt-6"},rZ={class:"fct-setting-form-content"},iZ={class:"fct-inline-tip"},AZ={class:"fct-setting-form-fields"},dZ={class:"p-6"},uZ={key:0,class:"setting-save-action"};function cZ(t,e,a,s,n,l){const A=y("el-button"),u=y("CardHeader"),c=y("el-switch"),m=y("LabelHint"),v=y("TaxConfigurationsLoader"),b=y("el-radio"),g=y("el-radio-group"),F=y("el-option"),B=y("el-select"),w=y("el-input"),C=y("Animation"),k=y("CardBody"),S=y("CardContainer"),E=y("TaxClasses"),V=Et("loading");return d(),_("div",MJ,[o(S,null,{default:r(()=>[o(u,{title:l.translate("Tax Configuration"),text:l.translate("Configure your tax settings.")},{action:r(()=>[n.loading?x("",!0):(d(),_("div",VJ,[o(A,{loading:n.saving,type:"primary",onClick:l.saveSettings},{default:r(()=>[M(h(n.saving?l.translate("Saving"):l.translate("Save")),1)]),_:1},8,["loading","onClick"])]))]),_:1},8,["title","text"]),o(k,null,{default:r(()=>[i("div",LJ,[i("div",OJ,[o(c,{modelValue:n.settings.enable_tax,"onUpdate:modelValue":e[0]||(e[0]=$=>n.settings.enable_tax=$),"active-value":"yes","inactive-value":"no"},null,8,["modelValue"]),i("div",null,[o(m,{title:l.translate("Enable Tax")},null,8,["title"]),i("p",HJ,h(l.translate("Key-value pairs sent with the request for context like auth or content type")),1)])])]),n.loading?(d(),U(v,{key:0})):x("",!0),o(C,{visible:!n.loading&&n.settings.enable_tax==="yes",accordion:""},{default:r(()=>{var $,O;return[i("div",RJ,[i("div",PJ,[o(m,{title:l.translate("Prices entered with tax")},null,8,["title"]),i("p",KJ,h(l.translate("Choose whether product prices are entered including or excluding tax.")),1)]),i("div",NJ,[o(g,{modelValue:n.settings.tax_inclusion,"onUpdate:modelValue":e[1]||(e[1]=D=>n.settings.tax_inclusion=D)},{default:r(()=>[o(b,{value:"included"},{default:r(()=>[M(h(l.translate("Included")),1)]),_:1}),o(b,{value:"excluded"},{default:r(()=>[M(h(l.translate("Excluded")),1)]),_:1})]),_:1},8,["modelValue"])])]),i("div",GJ,[i("div",jJ,[o(m,{title:l.translate("Calculate Tax Based On")},null,8,["title"]),i("p",zJ,h(l.translate("Determine the location used for tax calculations.")),1)]),i("div",YJ,[o(B,{modelValue:n.settings.tax_calculation_basis,"onUpdate:modelValue":e[2]||(e[2]=D=>n.settings.tax_calculation_basis=D),clearable:""},{default:r(()=>[o(F,{value:"shipping",label:l.translate("Customer Shipping Address")},null,8,["label"]),o(F,{value:"billing",label:l.translate("Customer Billing Address")},null,8,["label"]),o(F,{value:"store",label:l.translate("Store Location")},null,8,["label"])]),_:1},8,["modelValue"])])]),i("div",qJ,[i("div",WJ,[o(m,{title:l.translate("Price Suffix")},null,8,["title"]),i("p",XJ,h(l.translate("Will be shown on the product price.")),1)]),i("div",JJ,[o(w,{modelValue:n.settings.price_suffix,"onUpdate:modelValue":e[3]||(e[3]=D=>n.settings.price_suffix=D),placeholder:l.translate("e.g. (incl. tax)")},null,8,["modelValue","placeholder"])])]),i("div",ZJ,[i("div",eZ,[o(m,{title:l.translate("EU VAT Settings")},null,8,["title"]),i("p",tZ,h(l.translate("Determine the location used for tax calculations.")),1)])]),i("div",aZ,[o(c,{modelValue:n.settings.eu_vat_settings.require_vat_number,"onUpdate:modelValue":e[4]||(e[4]=D=>n.settings.eu_vat_settings.require_vat_number=D),"active-value":"yes","inactive-value":"no"},null,8,["modelValue"]),i("div",null,[o(m,{title:l.translate("Enable EU VAT Number")},null,8,["title"]),i("p",sZ,h(l.translate("If enabled, all customers in the EU will be able to enter a EU VAT number when checking out.")),1)])]),(($=n.settings.eu_vat_settings)==null?void 0:$.require_vat_number)==="yes"?(d(),_("div",nZ,[o(c,{modelValue:n.settings.eu_vat_settings.local_reverse_charge,"onUpdate:modelValue":e[5]||(e[5]=D=>n.settings.eu_vat_settings.local_reverse_charge=D),"active-value":"yes","inactive-value":"no"},null,8,["modelValue"]),i("div",null,[o(m,{title:l.translate("Local Reverse Charge")},null,8,["title"]),i("p",oZ,h(l.translate("If enabled, apply reverse charge when applicable even when customers are in your home country.")),1)])])):x("",!0),((O=n.settings.eu_vat_settings)==null?void 0:O.require_vat_number)==="yes"?(d(),_("div",lZ,[i("div",rZ,[o(m,{title:l.translate("Exclude Categories from VAT reverse")},null,8,["title"]),i("p",iZ,h(l.translate("Select product categories that should NOT get VAT reverse charge !")),1)]),e[7]||(e[7]=i("br",null,null,-1)),i("div",AZ,[At((d(),U(B,{modelValue:n.settings.eu_vat_settings.vat_reverse_excluded_categories,"onUpdate:modelValue":e[6]||(e[6]=D=>n.settings.eu_vat_settings.vat_reverse_excluded_categories=D),filterable:"",multiple:"",clearable:"",placeholder:l.translate("Select Product Categories"),class:"w-full"},{default:r(()=>[(d(!0),_(H,null,q(n.categories,D=>(d(),U(F,{key:D.value||D.term_id,label:D.label||D.name,value:D.value||D.term_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])),[[V,n.fetchingCategories]])])])):x("",!0)]}),_:1},8,["visible"])]),_:1}),i("div",dZ,[n.loading?x("",!0):(d(),_("div",uZ,[o(A,{loading:n.saving,type:"primary",onClick:l.saveSettings},{default:r(()=>[M(h(n.saving?l.translate("Saving"):l.translate("Save"))+" "+h(l.translate("Settings")),1)]),_:1},8,["loading","onClick"])]))])]),_:1}),o(E,{tax_settings_changed:n.tax_settings_changed,enable_tax:n.settings.enable_tax,categories_external:n.categories},null,8,["tax_settings_changed","enable_tax","categories_external"])])}const fZ=ye(TJ,[["render",cZ]]),pZ={class:"fct-tax-rates-wrap-loader"},Ei={__name:"TaxRatesLoader",setup(t){const e=T(Array.from({length:6},()=>`${Math.floor(Math.random()*21)+120}px`));return(a,s)=>{const n=y("el-skeleton-item"),l=y("el-skeleton");return d(),_("div",pZ,[(d(!0),_(H,null,q(e.value,(A,u)=>(d(),_("div",{key:u,class:"flex items-center justify-between border-[1px] border-solid border-gray-divider dark:border-dark-400 rounded h-12 pr-4 pl-6 mb-4"},[o(l,{animated:"",style:sa({width:A}),class:"h-4"},{template:r(()=>[o(n,{variant:"p",class:"h-4"})]),_:2},1032,["style"]),o(l,{animated:"",class:"w-[100px] h-4"},{template:r(()=>[o(n,{variant:"p",class:"h-4"})]),_:1})]))),128))])}}},mZ={class:"fct-tax-configuration-country-wrap"},hZ={class:"dialog-header"},_Z={class:"dialog-title m-0 mb-1"},gZ={class:"m-0"},vZ={class:"fct-tax-rates-configuration-country-view"},yZ={key:1,class:"fct-tax-rates-wrap"},bZ={key:0,class:"m-0 mb-2"},wZ={class:"font-medium"},BZ={key:0},CZ={class:"fct-tax-rates-title"},kZ={class:"total-countries"},FZ={key:0,class:"fct-tax-rates-countries"},xZ={class:"fct-tax-rates-country-name"},UZ=["src"],EZ={class:"fct-tax-rates-country-actions"},SZ={class:"fct-tax-rates-country-rate"},QZ={key:1},DZ={class:"p-2 float-right"},$Z={key:0,class:"p-2 float-right"},IZ={class:"dialog-footer"},or={__name:"TaxConfigurationCountryModal",props:{onlyEU:{type:Boolean,default:!1}},emits:["refresh"],setup(t,{emit:e}){const a=t,s=T(!1),n=T([]),l=T(!1),A=T([]),u=T([]),c=T(!1),m=T(""),v=()=>{s.value=!0},b=e,g=()=>{l.value=!0,te.get("tax/configuration/rates").then(E=>{A.value=E.tax_rates}).catch(E=>{console.error("Error fetching tax rates:",E)}).finally(()=>{l.value=!1})},F=()=>{g()},B=()=>{u.value=[]},w=E=>{u.value.includes(E)?u.value=u.value.filter(V=>V!==E):u.value.push(E)},C=()=>{u.value.length===0?Pt(f("If you don't select any country, all countries will be available for tax calculation. Are you sure you want to proceed?"),f("Yes, Proceed!"),{confirmButtonText:f("Yes, Proceed!"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{k()}).catch(()=>{}):k()},k=()=>{c.value=!0,te.post("tax/configuration/countries",{countries:u.value}).then(E=>{J.success(E.message),s.value=!1,b("refresh")}).catch(E=>{console.error("Failed to save config",E)}).finally(()=>{c.value=!1})},S=X(()=>{const E=m.value.toLowerCase();let V=Object.values(A.value||{});return a.onlyEU&&(V=V.filter($=>$.group_code==="EU")),E?V.map($=>{const O=$.countries.filter(D=>D.country_name.toLowerCase().includes(E)||D.country_code.toLowerCase().includes(E));return{...$,countries:O,total_countries:O.length}}).filter($=>$.countries.length>0):V});return(E,V)=>{const $=y("el-button"),O=y("el-input"),D=y("el-checkbox"),Q=y("router-link"),I=y("el-collapse-item"),L=y("el-collapse"),K=y("el-dialog");return d(),_("div",mZ,[o($,{type:"primary",link:"",onClick:v},{default:r(()=>[M(h(p(f)("Configure Countries")),1)]),_:1}),o(K,{modelValue:s.value,"onUpdate:modelValue":V[3]||(V[3]=N=>s.value=N),width:"800px","append-to-body":"",class:"fluent-cart-admin-pages",onOpen:F,onClose:B,"modal-class":"fct-tax-rates-configuration-country-modal"},{header:r(()=>[i("div",hZ,[i("h3",_Z,h(p(f)("Tax Configuration Countries")),1),i("p",gZ,h(p(f)("Select the countries you want to configure tax rates for.")),1)])]),footer:r(()=>[i("div",IZ,[o($,{onClick:V[2]||(V[2]=N=>s.value=!1),type:"info",soft:""},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),o($,{type:"primary",onClick:C,loading:c.value,disabled:c.value},{default:r(()=>[M(h(c.value?p(f)("Saving"):p(f)("Save")),1)]),_:1},8,["loading","disabled"])])]),default:r(()=>[i("div",vZ,[l.value?(d(),U(Ei,{key:0})):(d(),_("div",yZ,[o(O,{modelValue:m.value,"onUpdate:modelValue":V[0]||(V[0]=N=>m.value=N),placeholder:p(f)("Search country..."),clearable:"",class:"mb-3"},null,8,["modelValue","placeholder"]),u.value.length>0?(d(),_("div",bZ,[i("span",wZ,h(p(f)("Selected Countries: ")),1),(d(!0),_(H,null,q(u.value,(N,W)=>(d(),_("span",{key:N},[M(h(N),1),W<u.value.length-1?(d(),_("span",BZ,", ")):x("",!0)]))),128))])):x("",!0),o(L,{modelValue:n.value,"onUpdate:modelValue":V[1]||(V[1]=N=>n.value=N),accordion:"","expand-icon-position":"left"},{default:r(()=>[(d(!0),_(H,null,q(S.value,(N,W)=>(d(),U(I,{key:W,name:W},{title:r(()=>[i("span",CZ,[M(h(N.group_name)+" ",1),i("span",kZ,h(N.total_countries)+" "+h(p(f)(" Countries")),1)])]),default:r(()=>[t.onlyEU||N.group_code!=="EU"?(d(),_("div",FZ,[(d(!0),_(H,null,q(N.countries,(R,ee)=>(d(),_("div",{key:ee,class:"fct-tax-rates-country"},[i("div",xZ,[i("img",{class:"w-[22px] block",src:"https://flagcdn.com/w40/"+R.country_code.toLowerCase()+".png",alt:"US flag"},null,8,UZ),M(" "+h(R.country_name),1)]),i("div",EZ,[i("div",SZ,h(p(f)("%s rates",R.total_rates)),1),o(D,{"model-value":u.value.includes(R.country_code),onChange:oe=>w(R.country_code)},{default:r(()=>[M(h(p(f)("Select")),1)]),_:2},1032,["model-value","onChange"])])]))),128))])):(d(),_("div",QZ,[i("div",DZ,[V[4]||(V[4]=M(" Configure all European Union countries VAT Settings. ",-1)),N.group_code==="EU"?(d(),_("div",$Z,[o(Q,{to:"/settings/tax_settings/eu"},{default:r(()=>[M(h(p(f)("Configure EU VAT Settings")),1)]),_:1})])):x("",!0)])]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]))])]),_:1},8,["modelValue"])])}}},TZ={class:"setting-wrap"},MZ={class:"fct-all-tax-classes-page"},VZ={key:1,class:"fct-tax-rates-wrap"},LZ={class:"fct-tax-rates-title"},OZ={class:"total-countries"},HZ={class:"fct-tax-rates-countries"},RZ={class:"fct-tax-rates-country-name"},PZ=["src","alt"],KZ={class:"fct-tax-rates-country-actions"},NZ={class:"fct-tax-rates-country-rate"},GZ={key:1,class:"fct-tax-rates-add-country-form-wrap"},jZ={class:"dialog-footer"},zZ={__name:"TaxRates",setup(t){const e=T([]),a=T([]),s=T(!1),n=T(!1),l=T({country:"",class_id:""}),A=T([]),u=T(!1),c=T(!1),m=T([]),v=()=>{s.value=!0,te.get("tax/rates").then(S=>{a.value=S.tax_rates,a.value=a.value.filter(E=>E.group_code!=="EU")}).catch(S=>{console.error("Error fetching tax rates:",S)}).finally(()=>{s.value=!1})},b=()=>{F(),w()},g=()=>{n.value=!1},F=()=>{u.value=!0,te.get("address-info/countries").then(S=>{A.value=S.data}).catch(S=>{console.error("Error fetching countries:",S)}).finally(()=>{u.value=!1})},B=()=>{if(!l.value.country){J.error(f("Please select a country"));return}let S=l.value.country;typeof S=="string"&&(l.value.country=[S]),te.post("tax/configuration/countries",{countries:S}).then(E=>{J.success(E.message),v(),n.value=!1}).catch(E=>{console.error("Failed to add country",E)})},w=()=>{c.value=!0,te.get("tax/classes").then(S=>{m.value=S.tax_classes}).catch(S=>{console.error("Error fetching tax classes:",S)}).finally(()=>{c.value=!1})},C=S=>{te.delete("tax/country/"+S).then(E=>{J.success(E.message),v()}).catch(E=>{console.error("Failed to delete country",E)})},k=S=>{S.action==="delete"&&Pt(f("Are you sure you want to delete this tax rate?"),f("Confirm Delete!"),{confirmButtonText:f("Yes, Delete!"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{C(S.country_code)}).catch(()=>{})};return pe(()=>{v()}),(S,E)=>{const V=y("el-button"),$=y("el-dropdown-item"),O=y("el-dropdown-menu"),D=y("el-dropdown"),Q=y("el-collapse-item"),I=y("el-collapse"),L=y("el-option"),K=y("el-select"),N=y("el-form-item"),W=y("el-form"),R=y("el-dialog");return d(),_("div",TZ,[i("div",MZ,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Existing Tax Rates"),text:p(f)("Manage tax rates for different locations and tax classes")},{action:r(()=>[o(or,{onRefresh:v})]),_:1},8,["title","text"]),o(ae,null,{default:r(()=>[s.value?(d(),U(Ei,{key:0})):(d(),_("div",VZ,[o(I,{modelValue:e.value,"onUpdate:modelValue":E[0]||(E[0]=ee=>e.value=ee),accordion:"","expand-icon-position":"left"},{default:r(()=>[(d(!0),_(H,null,q(a.value,(ee,oe)=>(d(),U(Q,{name:oe},{title:r(()=>[i("span",LZ,[M(h(ee.group_name)+" ",1),i("span",OZ,h(ee.total_countries)+" "+h(p(f)(" Countries")),1)])]),default:r(()=>[i("div",HZ,[(d(!0),_(H,null,q(ee.countries,(Ae,ue)=>(d(),_("div",{key:ue,class:"fct-tax-rates-country"},[i("div",RZ,[i("img",{class:"w-[22px] block",src:"https://flagcdn.com/w40/"+Ae.country_code.toLowerCase()+".png",alt:Ae.country_code},null,8,PZ),M(" "+h(Ae.country_name),1)]),i("div",KZ,[i("div",NZ,h(p(Zn)("Rate","Rates",Ae.total_rates)),1),o(V,{type:"info",soft:"",plain:"",size:"small",onClick:P=>S.$router.push({name:"tax-rates-country-single",params:{country:Ae.country_code,group:ee.group_code}})},{default:r(()=>[M(h(p(f)("View")),1)]),_:2},1032,["onClick"]),o(D,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:k},{dropdown:r(()=>[o(O,null,{default:r(()=>[o($,{command:{action:"delete",country_code:Ae.country_code},class:"item-destructive"},{default:r(()=>[o(Y,{name:"Delete"}),M(" "+h(p(f)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[o(Be,{size:"small",tag:"span",class:"cursor-pointer"},{default:r(()=>[o(Y,{name:"More",class:"w-4 h-4"})]),_:1})]),_:2},1024)])]))),128))])]),_:2},1032,["name"]))),256))]),_:1},8,["modelValue"]),o(V,{type:"info",soft:"",plain:"",size:"small",onClick:E[1]||(E[1]=ee=>n.value=!0),class:"fct-tax-rates-country-add"},{default:r(()=>[o(Y,{name:"Plus",class:"w-5 h-5 items-center justify-center"}),M(" "+h(p(f)("Add Country")),1)]),_:1})]))]),_:1})]),_:1})]),o(R,{modelValue:n.value,"onUpdate:modelValue":E[5]||(E[5]=ee=>n.value=ee),title:p(f)("Add Country"),width:"500px","append-to-body":"",class:"fluent-cart-admin-pages","modal-class":"fct-tax-rates-add-country-modal",onOpen:b,onClose:g},{default:r(()=>[s.value?(d(),U(Ei,{key:0})):(d(),_("div",GZ,[o(W,{"label-position":"top",model:l.value},{default:r(()=>[o(N,{label:p(f)("Country")},{default:r(()=>[o(K,{modelValue:l.value.country,"onUpdate:modelValue":E[2]||(E[2]=ee=>l.value.country=ee),filterable:"",loading:u.value,placeholder:p(f)("Select Country")},{default:r(()=>[(d(!0),_(H,null,q(A.value,ee=>(d(),U(L,{key:ee.value,label:ee.name,value:ee.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","placeholder"])]),_:1},8,["label"]),x("",!0)]),_:1},8,["model"]),i("div",jZ,[o(V,{onClick:E[4]||(E[4]=ee=>n.value=!1)},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),o(V,{type:"primary",onClick:B},{default:r(()=>[M(h(p(f)("Add")),1)]),_:1})])]))]),_:1},8,["modelValue","title"])])}}},YZ={class:"fct-tax-rates-country-modal-actions"},qZ={__name:"CountryTaxRatesLoader",setup(t){return(e,a)=>{const s=y("el-skeleton-item"),n=y("el-skeleton"),l=y("el-table-column"),A=y("el-table");return d(),U(A,{data:[1,2,3,4,5]},{default:r(()=>[o(l,{label:p(f)("Tax Label"),width:"150"},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:p(f)("City"),width:"100"},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:p(f)("State")},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:p(f)("Postcode")},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:p(f)("Rate (%)")},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:p(f)("Tax Class"),width:"130"},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:p(f)("Compound"),width:"100"},{default:r(()=>[o(n,{animated:"",class:"flex items-center justify-center"},{template:r(()=>[o(s,{variant:"p",class:"w-1/2 h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:p(f)("Priority"),width:"100"},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:p(f)("Shipping")},{default:r(()=>[o(n,{animated:"",class:"flex items-center justify-center"},{template:r(()=>[o(s,{variant:"p",class:"w-1/2 h-4"})]),_:1})]),_:1},8,["label"]),o(l,null,{default:r(()=>[i("div",YZ,[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})])]),_:1})]),_:1})}}},WZ={class:"setting-wrap"},XZ={class:"fct-single-tax-rates-country-single-page"},JZ={class:"fct-single-tax-rates-country-single"},ZZ={class:"single-page-header flex items-center justify-between"},eee={class:"form-help-text text-xs font-normal mt-1"},tee={class:"form-help-text text-xs font-normal mt-1"},aee={class:"fct-tax-rates-country-view"},see={key:1},nee={key:1},oee={key:2},lee={key:1},ree={key:1},iee={key:1},Aee={key:1},dee={class:"fct-tax-rates-country-modal-actions"},uee={class:"fct-tax-rates-country-add"},cee={class:"fct-tax-rates-country-view"},fee={class:"fct-tax-rates-country-modal-actions"},lu={__name:"TaxRatesCountrySingle",props:{country:{type:String},group:{type:String}},setup(t){var ue;const e=t,a=T([]),s=T([]),n=T(!1),l=T(!1),A=T([]),u=T([]),c=T(!1),m=T({tax_id:"",tax_id_disabled:!1}),v=T([]),b=T(""),g=T(((ue=$e.get("country_tax_titles"))==null?void 0:ue[e.country])||"Tax"),F=T(!1),B=T([]),w=T({id:"",tax_rate:""}),C=()=>{F.value=!0},k=P=>{F.value=!0,w.value={id:P.id,tax_rate:P.for_shipping}},S=()=>{te.get("tax/configuration/settings").then(P=>{var z;const G=((z=P.settings)==null?void 0:z.eu_vat_settings)||{};(G==null?void 0:G.method)=="home"?e.country==(G==null?void 0:G.home_country)&&(m.value.tax_id=G==null?void 0:G.home_vat,m.value.tax_id_disabled=!0):(G==null?void 0:G.method)=="oss"&&e.country==(G==null?void 0:G.oss_country)&&(m.value.tax_id=G==null?void 0:G.oss_vat,m.value.tax_id_disabled=!0)}).catch(P=>{console.error("Failed to fetch tax settings",P)})},E=P=>{te.delete("tax/rates/country/override/"+P.id).then(G=>{J.success(G.message),O()})},V=()=>{te.post("tax/rates/country/override",{id:w.value.id,override_tax_rate:w.value.tax_rate}).then(P=>{J.success(P.message),F.value=!1,w.value={id:"",tax_rate:""},O()}).catch(P=>{console.error("Failed to save tax override",P)})},$=()=>{a.value.push({id:"",state:"",postcode:"",rate:"",tax_class:{id:"",title:""},is_compound:"0",priority:"1",for_shipping:null,isEditing:!0,isNew:!0})},O=()=>{n.value=!0,te.get("tax/rates/country/rates/"+e.country).then(P=>{var G;a.value=P.tax_rates,s.value=P.tax_rates.filter(z=>z.for_shipping!==null),u.value=P.settings?(G=P.settings)==null?void 0:G.hidden:[],B.value=P.tax_rates.map(z=>({name:z.name,value:z.id}))}).catch(P=>{console.error("Error fetching tax rates:",P)}).finally(()=>{n.value=!1})},D=P=>{P&&te.delete("tax/country/rate/"+P).then(G=>{J.success(G.message),O()}).catch(G=>{G&&(G!=null&&G.message)&&J.error(G.message),console.error("Failed to delete row",G)}).finally(()=>{})},Q=P=>{P.action==="delete"&&Pt(f("Are you sure you want to delete this tax rate?"),f("Confirm Delete!"),{confirmButtonText:f("Yes, Delete!"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{D(P.taxClass.id)}).catch(()=>{})},I=(P,G)=>{var z;te.put("tax/country/rate/"+P.id,{state:P.state,postcode:P.postcode,rate:P.rate,is_compound:P.is_compound,priority:P.priority,for_shipping:P.for_shipping,class_id:(z=P.tax_class)==null?void 0:z.id,group:e.group,city:P.city,name:P.name,country:e.country}).then(j=>{J.success(j.message),a.value[G]={...j.tax_rate,isEditing:!1,isNew:!1}}).catch(j=>{var Z;j.status_code=="422"?J.validationErrors(j):J.error((Z=j.data)==null?void 0:Z.message)})},L=(P,G)=>{te.post("tax/country/rate",{country:e.country,state:P.state,postcode:P.postcode,rate:P.rate,is_compound:P.is_compound,priority:P.priority,for_shipping:P.for_shipping,class_id:P.tax_class.id,group:e.group,name:P.name,city:P.city}).then(z=>{J.success(z.message),O(),a.value[G]={...z.tax_rate,isEditing:!1,isNew:!1}}).catch(z=>{var j;z.status_code=="422"?J.validationErrors(z):J.error((j=z.data)==null?void 0:j.message),console.error("Failed to save row",error)})},K=(P,G)=>{P.isNew?L(P,G):I(P,G)},N=()=>{l.value=!0,te.get("tax/classes").then(P=>{A.value=P.tax_classes}).catch(P=>{var z,j;let G=(z=P.data)!=null&&z.message?(j=P.data)==null?void 0:j.message:"Failed to fetch tax classes";J.error(G)}).finally(()=>{l.value=!1})},W=(P,G)=>{P.isNew?a.value.splice(G,1):P.isEditing=!1},R=P=>!u.value.includes(P),ee=()=>{c.value=!0,te.post("tax/country-tax-id/"+e.country,{tax_id:m.value.tax_id}).then(P=>{J.success(P.message)}).catch(P=>{var z,j;let G=(z=P.data)!=null&&z.message?(j=P.data)==null?void 0:j.message:"Failed to save tax id";J.error(G)}).finally(()=>{c.value=!1})},oe=()=>{c.value=!0,te.get("tax/country-tax-id/"+e.country).then(P=>{m.value={...m.value,...P.tax_data}}).catch(P=>{var G,z;P&&((G=P==null?void 0:P.data)!=null&&G.message)&&J.error((z=P.data)==null?void 0:z.message)}).finally(()=>{c.value=!1})},Ae=()=>{te.get("address-info/get-country-info",{country_code:e.country}).then(P=>{v.value=P.states,b.value=P.country_name}).catch(P=>{console.error("Error fetching country info:",P)}).finally(()=>{})};return pe(()=>{S(),N(),O(),oe(),Ae()}),(P,G)=>{const z=y("el-breadcrumb-item"),j=y("el-breadcrumb"),Z=y("el-skeleton-item"),_e=y("el-skeleton"),he=y("el-form-item"),Qe=y("el-form"),ge=y("el-input"),De=y("el-button"),Ue=y("el-table-column"),Ie=y("el-option"),Ee=y("el-select"),Ye=y("el-switch"),mt=y("el-dropdown-item"),qe=y("el-dropdown-menu"),ie=y("el-dropdown"),ve=y("el-table"),Oe=y("el-dialog");return d(),_("div",WZ,[i("div",XZ,[i("div",JZ,[i("div",ZZ,[o(j,{class:"mb-0","separator-icon":p(ma)},{default:r(()=>[t.group==="EU"?(d(),U(z,{key:0,to:{name:"eu"}},{default:r(()=>[M(h(p(f)("EU VAT Settings")),1)]),_:1})):(d(),U(z,{key:1,to:{name:"tax_rates"}},{default:r(()=>[M(h(p(f)("Existing Tax Rates")),1)]),_:1})),o(z,null,{default:r(()=>[M(h(g.value)+" Rates ",1)]),_:1}),o(z,null,{default:r(()=>[M(h(b.value||t.country),1)]),_:1})]),_:1},8,["separator-icon"])]),o(se,null,{default:r(()=>[c.value?(d(),U(ae,{key:0},{default:r(()=>[o(Qe,{"label-position":"top",model:m.value.tax_id},{default:r(()=>[o(he,{label:g.value+" ID"},{default:r(()=>[o(_e,{animated:""},{template:r(()=>[o(Z,{variant:"p",class:"w-full h-4"})]),_:1}),i("div",eee,h(g.value)+" "+h(p(f)(" id is used to identify the tax rate in the system.")),1)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})):(d(),U(ae,{key:1},{default:r(()=>[o(Qe,{"label-position":"top",model:m.value.tax_id},{default:r(()=>[o(he,{label:g.value+" ID"},{default:r(()=>[o(ge,{modelValue:m.value.tax_id,"onUpdate:modelValue":G[0]||(G[0]=re=>m.value.tax_id=re),size:"small",disabled:m.value.tax_id_disabled},null,8,["modelValue","disabled"]),i("div",tee,h(g.value)+" "+h(p(f)(" id is used to identify the tax rate in the system.")),1)]),_:1},8,["label"]),o(De,{type:"primary",onClick:ee},{default:r(()=>[M(h(p(f)("Save")),1)]),_:1})]),_:1},8,["model"])]),_:1}))]),_:1}),o(se,null,{default:r(()=>[o(le,{title:p(f)("Regional settings"),text:p(f)("Regions you're collecting in")},null,8,["title","text"]),o(ae,null,{default:r(()=>[i("div",aee,[n.value?(d(),U(qZ,{key:0})):(d(),U(ve,{key:1,data:a.value},{default:r(()=>[o(Ue,{label:p(f)("Tax Label"),width:"150"},{default:r(({row:re})=>[re.isEditing?(d(),U(ge,{key:0,modelValue:re.name,"onUpdate:modelValue":Se=>re.name=Se,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(d(),_("span",see,h(re.name||"-"),1))]),_:1},8,["label"]),R("city")?(d(),U(Ue,{key:0,label:p(f)("City"),width:"100"},{default:r(({row:re})=>[re.isEditing?(d(),U(ge,{key:0,modelValue:re.city,"onUpdate:modelValue":Se=>re.city=Se,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(d(),_("span",nee,h(re.city||"-"),1))]),_:1},8,["label"])):x("",!0),R("state")?(d(),U(Ue,{key:1,label:p(f)("State"),width:"120"},{default:r(({row:re})=>[re.isEditing&&v.value.length>0?(d(),U(Ee,{key:0,modelValue:re.state,"onUpdate:modelValue":Se=>re.state=Se,size:"small",filterable:""},{default:r(()=>[(d(!0),_(H,null,q(v.value,Se=>(d(),U(Ie,{key:Se.value,label:Se.name,value:Se.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):x("",!0),re.isEditing&&v.value.length===0?(d(),U(ge,{key:1,modelValue:re.state,"onUpdate:modelValue":Se=>re.state=Se,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):re.isEditing?x("",!0):(d(),_("span",oee,h(re.formatted_state||"-"),1))]),_:1},8,["label"])):x("",!0),R("zip")?(d(),U(Ue,{key:2,label:p(f)("Postcode")},{default:r(({row:re})=>[re.isEditing?(d(),U(ge,{key:0,modelValue:re.postcode,"onUpdate:modelValue":Se=>re.postcode=Se,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(d(),_("span",lee,h(re.postcode||"-"),1))]),_:1},8,["label"])):x("",!0),o(Ue,{label:p(f)("Rate (%)")},{default:r(({row:re})=>[re.isEditing?(d(),U(ge,{key:0,modelValue:re.rate,"onUpdate:modelValue":Se=>re.rate=Se,size:"small",type:"number"},null,8,["modelValue","onUpdate:modelValue"])):(d(),_("span",ree,h(re.rate||"-"),1))]),_:1},8,["label"]),o(Ue,{label:p(f)("Tax Class"),width:"130"},{default:r(({row:re})=>{var Se;return[re.isEditing?(d(),U(Ee,{key:0,modelValue:re.tax_class.id,"onUpdate:modelValue":Pe=>re.tax_class.id=Pe,size:"small",filterable:"",placement:"bottom"},{default:r(()=>[(d(!0),_(H,null,q(A.value,Pe=>(d(),U(Ie,{key:Pe.id,label:Pe.title,value:Pe.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(d(),_("span",iee,h(((Se=re.tax_class)==null?void 0:Se.title)||"-"),1))]}),_:1},8,["label"]),o(Ue,{label:p(f)("Compound"),width:"100"},{default:r(({row:re})=>[re.isEditing?(d(),U(Ye,{key:0,modelValue:re.is_compound,"onUpdate:modelValue":Se=>re.is_compound=Se,"active-value":"1","inactive-value":"0"},null,8,["modelValue","onUpdate:modelValue"])):(d(),_("span",Aee,h(re.is_compound>0?p(f)("Yes"):p(f)("No")),1))]),_:1},8,["label"]),o(Ue,{fixed:"right",width:"100",label:"Actions"},{default:r(({row:re,$index:Se})=>[i("div",dee,[re.isEditing?(d(),_(H,{key:0},[o(Be,{size:"small",tag:"span",onClick:Pe=>K(re,Se),class:"text-green-500"},{default:r(()=>[o(Y,{name:"Check"})]),_:2},1032,["onClick"]),o(Be,{size:"small",tag:"span",onClick:Pe=>W(re,Se),class:"text-red-500"},{default:r(()=>[o(Y,{name:"Close"})]),_:2},1032,["onClick"])],64)):(d(),_(H,{key:1},[o(Be,{size:"small",tag:"span",onClick:()=>{re.isEditing=!0}},{default:r(()=>[o(Y,{name:"Edit"})]),_:2},1032,["onClick"]),o(ie,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:Q},{dropdown:r(()=>[o(qe,null,{default:r(()=>[o(mt,{command:{action:"delete",taxClass:re},class:"item-destructive"},{default:r(()=>[o(Y,{name:"Delete"}),M(" "+h(p(f)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[o(Be,{size:"small",tag:"span"},{default:r(()=>[o(Y,{name:"More",class:"w-4 h-4"})]),_:1})]),_:2},1024)],64))])]),_:1})]),_:1},8,["data"])),i("div",uee,[o(De,{type:"info",soft:"",plain:"",size:"small",onClick:$},{default:r(()=>[o(Y,{name:"Plus",class:"w-5 h-5 items-center justify-center"}),M(" "+h(p(f)("Add New Rate")),1)]),_:1})])])]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{title:p(f)("Shipping Tax Overrides")+" ("+t.country+")",text:p(f)("You can specify shipping tax rates.")},{action:r(()=>[o(De,{type:"primary",onClick:C},{default:r(()=>[M(h(p(f)("Add Tax Override")),1)]),_:1})]),_:1},8,["title","text"]),o(ae,null,{default:r(()=>[i("div",cee,[o(ve,{data:s.value},{default:r(()=>[o(Ue,{label:p(f)("Tax Label")},{default:r(({row:re})=>[M(h(re.name),1)]),_:1},8,["label"]),o(Ue,{label:p(f)("Shipping Tax Rate (%)")},{default:r(({row:re})=>[M(h(re.for_shipping),1)]),_:1},8,["label"]),o(Ue,{label:p(f)("Actions"),width:"100"},{default:r(({row:re})=>[i("div",fee,[o(Be,{size:"small",tag:"span",onClick:Se=>k(re)},{default:r(()=>[o(Y,{name:"Edit"})]),_:2},1032,["onClick"]),o(Be,{size:"small",tag:"span",onClick:Se=>E(re)},{default:r(()=>[o(Y,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1},8,["label"])]),_:1},8,["data"])])]),_:1})]),_:1}),o(Oe,{modelValue:F.value,"onUpdate:modelValue":G[3]||(G[3]=re=>F.value=re),title:p(f)("Add Tax Override")},{default:r(()=>[o(Qe,{"label-position":"top",model:w.value},{default:r(()=>[o(he,{label:p(f)("Regions")},{default:r(()=>[o(Ee,{modelValue:w.value.id,"onUpdate:modelValue":G[1]||(G[1]=re=>w.value.id=re),size:"small"},{default:r(()=>[(d(!0),_(H,null,q(B.value,re=>(d(),U(Ie,{key:re.value,label:re.name,value:re.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(he,{label:p(f)("Tax Rate (%)")},{default:r(()=>[o(ge,{modelValue:w.value.tax_rate,"onUpdate:modelValue":G[2]||(G[2]=re=>w.value.tax_rate=re),size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),o(De,{type:"primary",onClick:V},{default:r(()=>[M(h(p(f)("Save")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])])])}}};class pee extends gn{getTabs(){return{all:f("All"),filed:f("Filed"),not_filed:f("Not Filed")}}getToggleableColumns(){return[{label:"ID",value:"id"},{label:"Order ID",value:"order_id"},{label:"Zip Code",value:"postcode"},{label:"Tax Rate",value:"rate"},{label:"Filed",value:"filed_at"}]}getSortableColumns(){return[{label:f("ID"),value:"id"},{label:f("Tax Country"),value:"country"}]}getSearchHint(){return f("Search by id, title, content or module.")}getFetchUrl(){return"taxes"}parseResponse(e){return e.taxes}getTableName(){return"taxes_table"}getAdvanceFilterOptions(){return we.get(window,"fluentCartAdminApp.filter_options.tax_filter_options.advance")}getSearchGuideOptions(){return[]}with(){return["tax_rate"]}scopes(){return["validOrder"]}}function mee(t){return pee.init(t)}const hee=t=>t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),_ee=t=>{const e=Object.keys(t[0]),s=[e.map(hee).join(",")];return t.forEach(n=>{const l=e.map(A=>{let u=n[A];return typeof u=="object"&&(u=JSON.stringify(u)),typeof u=="string"&&(u=`"${u.replace(/"/g,'""')}"`),u});s.push(l.join(","))}),s.join(`
`)},gee=(t,e="export.csv")=>new Promise((a,s)=>{try{if(!t||!t.length)throw new Error("No data to export");const n=_ee(t),l=new Blob([n],{type:"text/csv"}),A=document.createElement("a"),u=()=>{window.removeEventListener("focus",u),a()};window.addEventListener("focus",u),A.href=URL.createObjectURL(l),A.download=e,A.click(),URL.revokeObjectURL(A.href),setTimeout(()=>{a()},200)}catch(n){s(n)}}),vee={class:"table-cell"},yee={class:"table-cell"},bee={class:"table-cell"},wee={class:"table-cell"},Bee={class:"table-cell"},Cee={class:"table-cell"},kee={class:"table-cell"},Fee={class:"table-cell"},xee={class:"table-cell"},Uee={__name:"TaxesLoader",props:{nextPageCount:{type:Number,default:0},taxTable:{type:Object,default:()=>({})}},setup(t){const e=t,a=Array.from({length:e.nextPageCount},(s,n)=>n+1);return(s,n)=>{const l=y("el-table-column"),A=y("el-skeleton-item"),u=y("el-skeleton"),c=y("el-table");return d(),U(c,{data:p(a),class:"w-full compact-table full-compact"},{default:r(()=>[o(l,{type:"selection",width:45}),t.taxTable.isColumnVisible("id")?(d(),U(l,{key:0,width:100,label:p(f)("ID")},{default:r(()=>[i("div",vee,[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),t.taxTable.isColumnVisible("order_id")?(d(),U(l,{key:1,label:p(f)("Order ID"),width:100},{default:r(()=>[i("div",yee,[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),o(l,{label:p(f)("Tax Country"),width:120},{default:r(()=>[i("div",bee,[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p"})]),_:1})])]),_:1},8,["label"]),o(l,{label:p(f)("Tax Region"),width:120},{default:r(()=>[i("div",wee,[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p"})]),_:1})])]),_:1},8,["label"]),t.taxTable.isColumnVisible("postcode")?(d(),U(l,{key:2,label:p(f)("Zip Code"),width:120},{default:r(()=>[i("div",Bee,[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),o(l,{label:p(f)("Tax Name"),width:120},{default:r(()=>[i("div",Cee,[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p"})]),_:1})])]),_:1},8,["label"]),t.taxTable.isColumnVisible("rate")?(d(),U(l,{key:3,label:p(f)("Tax Rate"),width:120},{default:r(()=>[i("div",kee,[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),o(l,{label:p(f)("Sale Taxes"),width:120},{default:r(()=>[i("div",Fee,[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p"})]),_:1})])]),_:1},8,["label"]),t.taxTable.isColumnVisible("filed_at")?(d(),U(l,{key:4,label:p(f)("Filed"),width:120},{default:r(()=>[i("div",xee,[o(u,{animated:""},{template:r(()=>[o(A,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])}}},Eee={class:"table-cell"},See={class:"table-cell"},Qee={class:"table-cell"},Dee={class:"table-cell"},$ee={class:"table-cell"},Iee={class:"table-cell"},Tee={class:"table-cell"},Mee={class:"table-cell"},Vee={class:"table-cell"},Lee={__name:"AllCouponsLoader",props:{nextPageCount:{type:Number,default:0},couponTable:{type:Object,default:()=>({})}},setup(t){const e=t,a=Array.from({length:e.nextPageCount},(s,n)=>n+1);return(s,n)=>{const l=y("el-skeleton-item"),A=y("el-skeleton"),u=y("el-table-column"),c=y("el-table");return d(),U(c,{data:p(a),class:"w-full compact-table responsive full-compact"},{default:r(()=>[o(u,{width:100,label:p(f)("ID")},{default:r(()=>[i("div",Eee,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[70px]"})]),_:1})])]),_:1},8,["label"]),t.couponTable.isColumnVisible("title")?(d(),U(u,{key:0,label:p(f)("Title"),width:250},{default:r(()=>[i("div",See,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[180px]"})]),_:1})])]),_:1},8,["label"])):x("",!0),o(u,{label:p(f)("Code"),width:200},{default:r(()=>[i("div",Qee,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[130px]"})]),_:1})])]),_:1},8,["label"]),o(u,{label:p(f)("Amount"),width:120},{default:r(()=>[i("div",Dee,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[100px]"})]),_:1})])]),_:1},8,["label"]),o(u,{label:p(f)("Usage"),width:150},{default:r(()=>[i("div",$ee,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[100px]"})]),_:1})])]),_:1},8,["label"]),t.couponTable.isColumnVisible("stackable")?(d(),U(u,{key:1,label:p(f)("Stackable"),width:120},{default:r(()=>[i("div",Iee,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[80px]"})]),_:1})])]),_:1},8,["label"])):x("",!0),o(u,{label:p(f)("Status"),width:120},{default:r(()=>[i("div",Tee,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[90px]"})]),_:1})])]),_:1},8,["label"]),o(u,{label:p(f)("Expiry Date"),width:120},{default:r(()=>[i("div",Mee,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[90px]"})]),_:1})])]),_:1},8,["label"]),t.couponTable.isColumnVisible("actions")?(d(),U(u,{key:2,label:p(f)("Actions"),width:100,align:"right"},{default:r(()=>[i("div",Vee,[o(A,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[70px]"})]),_:1})])]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])}}},Oee={class:"fct-taxes-page fct-layout-width"},Hee={key:1},Ree={class:"fct-tax-filing-wrap"},Pee={class:"fct-tax-filing-summary"},Kee={class:"summary-item"},Nee={class:"summary-label"},Gee={class:"summary-value"},jee={class:"summary-item"},zee={class:"summary-label"},Yee={class:"summary-value"},qee={class:"fct-tax-filing max-h-[400px] overflow-y-auto"},Wee={class:"dialog-footer"},Xee={class:"fct-tax-filing-success-wrap"},Jee={class:"fct-tax-filling-success-icon"},Zee={class:"dialog-footer"},ete={__name:"Taxes",setup(t){Xe().ctx;const e=mee(),a=T(!1),s=T(!1),n=T(!1),l=T([]),A=X(()=>e.getTableData().map(S=>{var E,V,$,O,D;return{id:S.id,order_id:S.order_id,country:(E=S.tax_rate)==null?void 0:E.country,state:(V=S.tax_rate)==null?void 0:V.state,postcode:($=S.tax_rate)==null?void 0:$.postcode,name:(O=S.tax_rate)==null?void 0:O.name,rate:(D=S.tax_rate)==null?void 0:D.rate,total_tax:parseFloat(S.total_tax/100).toFixed(2),filed_at:S.filed_at?"Yes":"No"}})),u=()=>{a.value=!0,s.value=!1},c=()=>{a.value=!1,s.value=!0},m=async()=>{try{await gee(w.value),c()}catch(S){console.error("Export failed:",S)}},v=()=>{s.value=!1},b=()=>{const S=w.value.map(E=>E.id);te.post(e.getFetchUrl(),{ids:S}).then(E=>{J.success(E.message),e.fetch()}).catch(E=>{J.error(E)}).finally(()=>{v()})},g=S=>{l.value=S,n.value=S.length>0},F=S=>{w.value=S},B=T(null),w=T([]),C=X(()=>{const S=w.value.reduce((V,$)=>V+$.total_tax,0),E=[...new Set(w.value.map(V=>V.order_id))];return{totalTax:S,totalOrders:E.length,items:w.value}}),k=()=>{de(()=>{w.value=[...l.value],l.value.forEach(S=>{B.value.toggleRowSelection(S,!0)})})};return(S,E)=>{const V=y("el-button"),$=y("el-tooltip"),O=y("el-table-column"),D=y("router-link"),Q=y("el-table"),I=y("el-dialog");return d(),_("div",Oee,[o(Ps,{title:p(f)("Taxes")},{action:r(()=>[n.value?(d(),U(V,{key:1,type:"primary",onClick:u,disabled:!n.value},{default:r(()=>[M(h(p(f)("Tax Filing")),1)]),_:1},8,["disabled"])):(d(),U($,{key:0,"popper-class":"fct-tooltip",effect:"dark",content:p(f)("Please select the taxes you want to file"),placement:"top-start"},{default:r(()=>[o(V,{type:"primary",disabled:!n.value},{default:r(()=>[M(h(p(f)("Tax Filing")),1)]),_:1},8,["disabled"])]),_:1},8,["content"]))]),_:1},8,["title"]),o(vn,{table:p(e),"has-mobile-slot":!1},{default:r(()=>[p(e).isLoading()?(d(),U(Uee,{key:0,taxTable:p(e),"next-page-count":p(e).nextPageCount},null,8,["taxTable","next-page-count"])):(d(),_("div",Hee,[o(Q,{class:"w-full",data:A.value,onSelectionChange:g},{empty:r(()=>[o(Le,{icon:"Empty/ListView",text:p(f)("We could't find any taxes matching your filter.")},null,8,["text"])]),default:r(()=>[o(O,{type:"selection",width:45}),p(e).isColumnVisible("id")?(d(),U(O,{key:0,label:p(f)("ID"),width:100},{default:r(L=>[i("span",null,"#"+h(p(f)(L.row.id)),1)]),_:1},8,["label"])):x("",!0),p(e).isColumnVisible("order_id")?(d(),U(O,{key:1,label:p(f)("Order ID"),width:100},{default:r(L=>[o(D,{class:"link",to:{name:"view_order",params:{order_id:L.row.order_id}}},{default:r(()=>[M(" #"+h(L.row.order_id),1)]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),o(O,{label:p(f)("Tax Country"),width:120},{default:r(L=>[i("span",null,h(L.row.country),1)]),_:1},8,["label"]),o(O,{label:p(f)("Tax Region"),width:120},{default:r(L=>[i("span",null,h(L.row.state),1)]),_:1},8,["label"]),p(e).isColumnVisible("postcode")?(d(),U(O,{key:2,label:p(f)("Zip Code"),width:120},{default:r(L=>[i("span",null,h(L.row.postcode),1)]),_:1},8,["label"])):x("",!0),o(O,{label:p(f)("Tax Name"),width:120},{default:r(L=>[i("span",null,h(L.row.name),1)]),_:1},8,["label"]),p(e).isColumnVisible("rate")?(d(),U(O,{key:3,label:p(f)("Tax Rate"),width:120},{default:r(L=>[i("span",null,h(L.row.rate),1)]),_:1},8,["label"])):x("",!0),o(O,{label:p(f)("Sale Taxes"),width:120},{default:r(L=>[i("span",null,h(L.row.total_tax),1)]),_:1},8,["label"]),p(e).isColumnVisible("filed_at")?(d(),U(O,{key:4,label:p(f)("Filed"),width:120},{default:r(L=>[i("span",null,h(L.row.filed_at),1)]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])]))]),_:1},8,["table"]),o(I,{modelValue:a.value,"onUpdate:modelValue":E[1]||(E[1]=L=>a.value=L),title:p(f)("Tax Filing"),onOpen:k,class:"fct-tax-filling-modal"},{footer:r(()=>[i("div",Wee,[o(V,{onClick:E[0]||(E[0]=()=>{a.value=!1})},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),o(V,{type:"primary",onClick:m},{default:r(()=>[o(Y,{name:"Download",style:{width:"16px",height:"16px"}}),M(" "+h(p(f)("Download & Continue")),1)]),_:1})])]),default:r(()=>[i("div",Ree,[i("div",Pee,[i("div",Kee,[i("span",Nee,h(p(f)("Taxable Amount")),1),i("span",Gee,h(C.value.totalTax),1)]),i("div",jee,[i("span",zee,h(p(f)("Total Orders")),1),i("span",Yee,h(p(f)(C.value.totalOrders)),1)])]),i("div",qee,[o(Q,{ref_key:"selectedTaxesTableRef",ref:B,data:l.value,onSelectionChange:F},{empty:r(()=>[o(Le,{icon:"Empty/ListView",text:p(f)("We could't find any taxes matching your filter.")},null,8,["text"])]),default:r(()=>[o(O,{type:"selection",width:45}),o(O,{label:p(f)("ID"),width:100},{default:r(L=>[i("span",null,h(L.row.id),1)]),_:1},8,["label"]),o(O,{label:p(f)("Order ID"),width:100},{default:r(L=>[i("span",null,h(L.row.order_id),1)]),_:1},8,["label"]),o(O,{width:120,label:p(f)("Tax Country")},{default:r(L=>[i("span",null,h(L.row.country),1)]),_:1},8,["label"]),o(O,{width:120,label:p(f)("Tax Region")},{default:r(L=>[i("span",null,h(L.row.state),1)]),_:1},8,["label"]),o(O,{label:p(f)("Zip Code"),width:120},{default:r(L=>[i("span",null,h(L.row.postcode),1)]),_:1},8,["label"]),o(O,{width:120,label:p(f)("Tax Name")},{default:r(L=>[i("span",null,h(L.row.name),1)]),_:1},8,["label"]),o(O,{label:p(f)("Tax Rate"),width:120},{default:r(L=>[i("span",null,h(L.row.rate),1)]),_:1},8,["label"]),o(O,{width:150,label:p(f)("Sale Taxes")},{default:r(L=>[i("span",null,h(L.row.total_tax),1)]),_:1},8,["label"])]),_:1},8,["data"])])])]),_:1},8,["modelValue","title"]),o(I,{modelValue:s.value,"onUpdate:modelValue":E[2]||(E[2]=L=>s.value=L),class:"fct-tax-filling-success-modal","close-on-click-modal":!1},{footer:r(()=>[i("div",Zee,[o(V,{onClick:v},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),o(V,{type:"primary",onClick:b},{default:r(()=>[M(h(p(f)("Mark as Filed")),1)]),_:1})])]),default:r(()=>[i("div",Xee,[i("div",Jee,[o(Y,{name:"CheckCircleFill"})]),i("div",null,[i("h4",null,h(p(f)("Don't Forget to Save Your Tax File")),1),i("p",null,h(p(f)("You're about to mark this tax report as filed.")),1),i("p",null,[M(h(p(f)("Make sure you've downloaded and saved the CSV file for your records before proceeding."))+" ",1),i("a",{onClick:Ke(m,["prevent"]),class:"cursor-pointer"},h(p(f)("Download Again")),1)])])])]),_:1},8,["modelValue"])])}}},tte={class:"country-info"},ate=["src","alt"],ste={key:0,class:"fct-selected-country-tax-classes"},nte={class:"selected-country-tax-heading"},ote={class:"space-y-3"},lte={class:"selected-tax-class"},rte={class:"tax-type"},ite={class:"tax-rate"},Ate={key:0,class:"tax-state"},dte={key:0,class:"selected-tax-input-wrap"},ute={key:1,class:"selected-tax-input-wrap"},cte={key:1,class:"mt-4 text-sm text-system-mid text-center py-4 dark:text-gray-300"},fte={class:"dialog-footer"},Of={__name:"OssOverrideModal",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""},countries:{type:Array,required:!0},selectedCountryTaxClasses:{type:Array,required:!0},countryCode:{type:String,default:""},hasValidOverrides:{type:Boolean,default:!1},mode:{type:String,default:"tax"}},emits:["update:modelValue","change-country","save"],setup(t,{emit:e}){const a=t,s=e,n=X({get:()=>a.modelValue,set:A=>s("update:modelValue",A)}),l=X({get:()=>a.countryCode,set:A=>s("change-country",A)});return(A,u)=>{const c=y("el-option"),m=y("el-select"),v=y("el-form-item"),b=y("el-input"),g=y("el-form"),F=y("el-button"),B=y("el-dialog");return d(),U(B,{modelValue:n.value,"onUpdate:modelValue":u[3]||(u[3]=w=>n.value=w),title:t.title,class:"fct-oss-override-modal"},{footer:r(()=>[i("div",fte,[o(F,{onClick:u[1]||(u[1]=w=>n.value=!1)},{default:r(()=>[M(h(p(f)("Cancel")),1)]),_:1}),o(F,{type:"primary",onClick:u[2]||(u[2]=w=>A.$emit("save")),disabled:!t.hasValidOverrides},{default:r(()=>[M(h(p(f)("Save Overrides")),1)]),_:1},8,["disabled"])])]),default:r(()=>[o(g,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(v,{label:p(f)("Select Country"),required:""},{default:r(()=>[o(m,{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=w=>l.value=w),placeholder:"Choose a country",filterable:"",style:{width:"100%"},"popper-class":"fct-oss-override-country-select"},{default:r(()=>[(d(!0),_(H,null,q(t.countries,w=>(d(),U(c,{key:w.country_code,label:w.country_name,value:w.country_code},{default:r(()=>[i("div",tte,[i("img",{src:`https://flagcdn.com/w40/${w.country_code.toLowerCase()}.png`,alt:w.country_code},null,8,ate),i("span",null,h(w.country_name),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t.selectedCountryTaxClasses&&t.selectedCountryTaxClasses.length>0?(d(),_("div",ste,[i("h4",nte,h(p(f)("Tax Classes")),1),i("div",ote,[(d(!0),_(H,null,q(t.selectedCountryTaxClasses,(w,C)=>(d(),_("div",{key:C,class:"fct-selected-country-tax-class"},[i("div",lte,[i("div",rte,h(w.type),1),i("div",ite,h(p(f)("Default"))+": "+h(w.rate)+"% ",1),w.state?(d(),_("div",Ate,h(p(f)("State"))+": "+h(w.state),1)):x("",!0)]),t.mode==="tax"?(d(),_("div",dte,[o(b,{modelValue:w.override_rate,"onUpdate:modelValue":k=>w.override_rate=k,placeholder:p(f)("Override rate"),class:"el-input--x-small",type:"number",min:0,max:100,step:.1},{append:r(()=>u[4]||(u[4]=[M("%",-1)])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):t.mode==="shipping"?(d(),_("div",ute,[o(b,{modelValue:w.for_shipping,"onUpdate:modelValue":k=>w.for_shipping=k,placeholder:p(f)("Shipping rate"),class:"el-input--x-small",type:"number",min:0,max:100,step:.1},{append:r(()=>u[5]||(u[5]=[M("%",-1)])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):x("",!0)]))),128))])])):t.countryCode?(d(),_("div",cte,h(p(f)("No tax classes available for this country")),1)):x("",!0)]),_:1})]),_:1},8,["modelValue","title"])}}},pte={name:"CrossBorderForm",props:["crossBorderForm","countries"]},mte={class:"form-note"};function hte(t,e,a,s,n,l){const A=y("el-option"),u=y("el-select"),c=y("el-form-item"),m=y("el-col"),v=y("el-input"),b=y("el-row"),g=y("el-form");return d(),U(g,{"label-position":"top"},{default:r(()=>[o(b,{gutter:"20"},{default:r(()=>[o(m,{span:12},{default:r(()=>[o(c,{label:t.$t("Country of OSS registration *")},{default:r(()=>[o(u,{modelValue:a.crossBorderForm.oss_country,"onUpdate:modelValue":e[0]||(e[0]=F=>a.crossBorderForm.oss_country=F),placeholder:t.$t("Select country"),filterable:"",clearable:""},{default:r(()=>[(d(!0),_(H,null,q(a.countries,F=>(d(),U(A,{key:F.value,label:F.label,value:F.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(m,{span:12},{default:r(()=>[o(c,{label:t.$t("VAT number")},{default:r(()=>[o(v,{modelValue:a.crossBorderForm.oss_vat,"onUpdate:modelValue":e[1]||(e[1]=F=>a.crossBorderForm.oss_vat=F),placeholder:"e.g 123456"},null,8,["modelValue"]),i("div",mte,[i("p",null,h(t.$t("Shown on VAT invoice")),1)])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})}const Hf=ye(pte,[["render",hte]]),_te={name:"CrossBorderForm",props:["crossBorderForm","countries"]},gte={class:"form-note"};function vte(t,e,a,s,n,l){const A=y("el-option"),u=y("el-select"),c=y("el-form-item"),m=y("el-col"),v=y("el-input"),b=y("el-row"),g=y("el-form");return d(),U(g,{"label-position":"top"},{default:r(()=>[o(b,{gutter:"20"},{default:r(()=>[o(m,{span:12},{default:r(()=>[o(c,{label:t.$t("Country of registration *")},{default:r(()=>[o(u,{modelValue:a.crossBorderForm.home_country,"onUpdate:modelValue":e[0]||(e[0]=F=>a.crossBorderForm.home_country=F),placeholder:"Select country",filterable:"",clearable:""},{default:r(()=>[(d(!0),_(H,null,q(a.countries,F=>(d(),U(A,{key:F.value,label:F.label,value:F.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(m,{span:12},{default:r(()=>[o(c,{label:t.$t("VAT number")},{default:r(()=>[o(v,{modelValue:a.crossBorderForm.home_vat,"onUpdate:modelValue":e[1]||(e[1]=F=>a.crossBorderForm.home_vat=F),placeholder:"e.g 123456"},null,8,["modelValue"]),i("div",gte,[i("p",null,h(t.$t("Shown on VAT invoice")),1)])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})}const Rf=ye(_te,[["render",vte]]),yte={name:"CollectionSection",props:{crossBorderForm:{type:Object,default:{}},countries:{type:Array,default:[]},modelValue:{type:String,default:""}},components:{OssRegistrationForm:Hf,HomeCountryForm:Rf},emits:["update:modelValue","change"],data(){return{selectedMethod:this.modelValue||""}},watch:{modelValue(t){this.selectedMethod=t}},methods:{handleCollectionMethod(t){this.selectedMethod=t,this.$emit("update:modelValue",t),this.$emit("change",t)}}},bte={class:"fct-tax-collection-section"},wte={class:"fct-tax-collection-sec-head"},Bte={class:"fct-tax-collection-sec-title"},Cte={class:"fct-tax-collection-method"},kte={class:"method-content"},Fte={class:"method-text"},xte={key:0,class:"fct-tax-method-oss mt-4"},Ute={class:"fct-tax-collection-method"},Ete={class:"method-content"},Ste={class:"method-text"},Qte={key:0,class:"fct-tax-method-home mt-4"},Dte={class:"fct-tax-collection-method"},$te={class:"method-content"},Ite={class:"method-text"};function Tte(t,e,a,s,n,l){const A=y("DynamicIcon"),u=y("el-tooltip"),c=y("el-radio"),m=y("OssRegistrationForm"),v=y("HomeCountryForm"),b=y("el-radio-group");return d(),_("div",bte,[i("div",wte,[i("h4",Bte,h(t.$t("Choose how you collect VAT in the EU")),1),o(u,{content:t.$t("Select a collection method, then continue to configure it"),placement:"top"},{default:r(()=>[o(A,{name:"InformationFill",class:"w-4.5 opacity-50"})]),_:1},8,["content"])]),o(b,{modelValue:n.selectedMethod,"onUpdate:modelValue":e[0]||(e[0]=g=>n.selectedMethod=g),class:"fct-tax-collection-methods",onChange:l.handleCollectionMethod},{default:r(()=>[i("div",Cte,[o(c,{value:"oss"},{default:r(()=>[M(h(t.$t("Collect using a One Stop Shop (OSS) registration")),1)]),_:1}),i("div",kte,[i("p",Fte,h(t.$t("Select this option if you have a single EU VAT number for all EU countries.")),1),n.selectedMethod==="oss"?(d(),_("div",xte,[o(m,{crossBorderForm:a.crossBorderForm,countries:a.countries},null,8,["crossBorderForm","countries"])])):x("",!0)])]),i("div",Ute,[o(c,{value:"home"},{default:r(()=>[M(h(t.$t("Collect using your home country registration")),1)]),_:1}),i("div",Ete,[i("p",Ste,h(t.$t("Applies to micro-businesses located in one EU country making less than 10,000 in cross-border EU sales yearly.")),1),n.selectedMethod==="home"?(d(),_("div",Qte,[o(v,{crossBorderForm:a.crossBorderForm,countries:a.countries},null,8,["crossBorderForm","countries"])])):x("",!0)])]),i("div",Dte,[o(c,{value:"specific"},{default:r(()=>[M(h(t.$t("Collect specific country rate")),1)]),_:1}),i("div",$te,[i("p",Ite,h(t.$t("Select this option if you want to collect VAT for specific EU countries.")),1)])])]),_:1},8,["modelValue","onChange"])])}const Mte=ye(yte,[["render",Tte]]),Vte={name:"crossBorderSummary",props:["summary","label","crossBorderForm","countries","selectedMethod"],components:{DynamicIcon:Y,IconButton:Be,OssRegistrationForm:Hf,HomeCountryForm:Rf},data(){return{showForm:!1}},methods:{onClick(){this.showForm=!this.showForm,this.$emit("toggle-form",this.showForm)},save(){this.showForm=!1,this.$emit("toggle-form",this.showForm),this.$emit("save")}}},Lte={class:"fct-tax-selection-sum-box"},Ote={class:"summary-box-content"},Hte={class:"summary-box-label"},Rte={class:"summary-box-meta"},Pte={key:0,class:"summary-box-vat"},Kte={key:1,class:"mt-5"},Nte={key:0,class:"flex items-center justify-end"};function Gte(t,e,a,s,n,l){var b,g,F,B;const A=y("DynamicIcon"),u=y("IconButton"),c=y("OssRegistrationForm"),m=y("HomeCountryForm"),v=y("el-button");return d(),_(H,null,[i("div",Lte,[e[0]||(e[0]=i("img",{src:"https://flagcdn.com/w40/eu.png",alt:"EU Flag"},null,-1)),i("div",Ote,[i("div",Hte,h(a.label),1),i("div",Rte,[i("span",null,h((b=a.summary)==null?void 0:b.methodLabel)+": "+h((g=a.summary)==null?void 0:g.country),1),(F=a.summary)!=null&&F.vat?(d(),_("span",Pte," - VAT "+h((B=a.summary)==null?void 0:B.vat),1)):x("",!0)]),n.showForm?x("",!0):(d(),U(u,{key:0,class:"edit-method-btn",onClick:l.onClick,size:"small",border:"none",tag:"button"},{default:r(()=>[o(A,{name:"Edit"})]),_:1},8,["onClick"])),n.showForm?(d(),_("div",Kte,[a.selectedMethod==="oss"?(d(),U(c,{key:0,crossBorderForm:a.crossBorderForm,countries:a.countries},null,8,["crossBorderForm","countries"])):x("",!0),a.selectedMethod==="home"?(d(),U(m,{key:1,crossBorderForm:a.crossBorderForm,countries:a.countries},null,8,["crossBorderForm","countries"])):x("",!0)])):x("",!0)])]),n.showForm?(d(),_("div",Nte,[o(v,{onClick:l.onClick},{default:r(()=>[M(h(t.$t("Cancel")),1)]),_:1},8,["onClick"]),o(v,{type:"primary",onClick:l.save},{default:r(()=>[M(h(t.$t("Save")),1)]),_:1},8,["onClick"])])):x("",!0)],64)}const jte=ye(Vte,[["render",Gte]]),zte={name:"TaxOverride",props:["taxOverrides"],components:{IconButton:Be,DynamicIcon:Y},emits:["add","onEdit","onDelete"],methods:{onAdd(){this.$emit("onAdd")},onEdit(t){this.$emit("onEdit",t)},onDelete(t){this.$emit("onDelete",t)}}},Yte={class:"fct-tax-override-wrap"},qte={class:"fct-tax-rate-box-head"},Wte={class:"flex-shrink-0"},Xte={key:0,class:"fct-tax-overrides"},Jte={class:"country-info"},Zte=["src","alt"],eae={class:"override-actions"},tae={class:"total-rates"},aae={class:"fct-btn-group sm"},sae={key:1,class:"text-sm text-gray-500 text-center py-4"};function nae(t,e,a,s,n,l){const A=y("el-button"),u=y("DynamicIcon"),c=y("IconButton");return d(),_("div",Yte,[i("div",qte,[i("h4",null,h(t.$t("Tax Overrides")),1),i("div",Wte,[o(A,{type:"primary",size:"small",onClick:l.onAdd},{default:r(()=>[M(h(t.$t("Add Custom Rate")),1)]),_:1},8,["onClick"])])]),a.taxOverrides.length>0?(d(),_("div",Xte,[(d(!0),_(H,null,q(a.taxOverrides,(m,v)=>(d(),_("div",{class:"fct-tax-override-item",key:v},[i("div",Jte,[i("img",{class:"w-5 h-5",src:`https://flagcdn.com/w40/${m.country_code.toLowerCase()}.png`,alt:m.country_code},null,8,Zte),i("span",null,h(m.country_name),1)]),i("div",eae,[i("span",tae,h(m.total_rates)+" "+h(t.$t("Rates")),1),i("div",aae,[o(c,{size:"small",border:"none",tag:"button",onClick:b=>l.onEdit(m)},{default:r(()=>[o(u,{name:"Edit"})]),_:2},1032,["onClick"]),o(c,{size:"small",border:"none",tag:"button",onClick:b=>l.onDelete(m)},{default:r(()=>[o(u,{name:"Delete"})]),_:2},1032,["onClick"])])])]))),128))])):(d(),_("div",sae,h(t.$t("No Custom VAT rates configured")),1))])}const oae=ye(zte,[["render",nae]]),lae={name:"OssCountryRates",components:{DynamicIcon:Y,Loading:il},props:{ossCountryRates:{type:Array,default:()=>[]},ossCountryRatesLoading:{type:Boolean,default:!1}},data(){return{activeCollapse:["1"],activeCountryCollapse:[]}},methods:{handleCollapseChange(t){t.includes("1")&&this.ossCountryRates.length===0&&this.$emit("fetch")}}},rae={class:"fct-tax-rate-box"},iae={class:"fct-tax-rate-box-head"},Aae={class:"inline-flex items-center gap-2"},dae={class:"fct-tax-collapse-inner"},uae={key:0,class:"text-center py-4"},cae={class:"collapse-header"},fae={class:"country-info"},pae=["src","alt"],mae={class:"font-medium"},hae={class:"total-rates"},_ae={class:"fct-country-rates"},gae={class:"flex items-center gap-2"},vae={class:"rate-type"},yae={key:0,class:"tax-class"},bae={class:"tax-rate"},wae={key:1,class:"text-sm text-gray-500 text-center py-2"},Bae={key:2,class:"text-gray-500 text-center py-4"};function Cae(t,e,a,s,n,l){const A=y("DynamicIcon"),u=y("Loading"),c=y("el-icon"),m=y("el-collapse-item"),v=y("el-collapse");return d(),_("div",rae,[i("div",iae,[i("h4",null,h(t.$t("Country Rates")),1)]),o(v,{class:"fct-tax-collapse",modelValue:n.activeCollapse,"onUpdate:modelValue":e[1]||(e[1]=b=>n.activeCollapse=b),onChange:l.handleCollapseChange},{default:r(()=>[o(m,{name:"1"},{title:r(({isActive:b})=>[i("div",Aae,[o(A,{name:"CaretRight",class:ne(["w-3",[{"rotate-90":b}]])},null,8,["class"]),M(" "+h(t.$t("Collecting in 27 regions")),1)])]),default:r(()=>[i("div",dae,[a.ossCountryRatesLoading?(d(),_("div",uae,[o(c,{class:"is-loading"},{default:r(()=>[o(u)]),_:1}),e[2]||(e[2]=i("span",{class:"ml-2"},"Loading EU tax rates...",-1))])):a.ossCountryRates.length>0?(d(),U(v,{key:1,class:"fct-tax-active-country-collapse",modelValue:n.activeCountryCollapse,"onUpdate:modelValue":e[0]||(e[0]=b=>n.activeCountryCollapse=b),accordion:""},{default:r(()=>[(d(!0),_(H,null,q(a.ossCountryRates,(b,g)=>(d(),U(m,{key:g,name:`country-${g}`},{title:r(({isActive:F})=>[i("div",cae,[i("div",fae,[o(A,{name:"CaretRight",class:ne(["w-3",[{"rotate-90":F}]])},null,8,["class"]),i("img",{class:"w-5",src:`https://flagcdn.com/w40/${b.country_code.toLowerCase()}.png`,alt:b.country_code},null,8,pae),i("span",mae,h(b.country_name),1)]),i("div",hae,h(t.$t("Total Rates"))+": "+h(b.total_rates),1)])]),default:r(()=>[i("div",_ae,[b.rates&&b.rates.length>0?(d(!0),_(H,{key:0},q(b.rates,(F,B)=>(d(),_("div",{key:B,class:"fct-country-rate-item"},[i("div",gae,[i("span",vae,h(F.type),1),F.tax_class?(d(),_("span",yae," ("+h(F.tax_class)+") ",1)):x("",!0)]),i("div",bae,h(F.rate)+"% ",1)]))),128)):(d(),_("div",wae," No individual rates available "))])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])):(d(),_("div",Bae," No EU tax rates found "))])]),_:1})]),_:1},8,["modelValue","onChange"])])}const kae=ye(lae,[["render",Cae]]),Fae={name:"SpecificCountrySection",props:["countryWiseVatSettings","euCountries","euRatesSummary","euRatesLoading"],components:{IconButton:Be,DynamicIcon:Y,LabelHint:Ze,TaxConfigurationCountryModal:or},data(){return{showConfigure:!1}},emits:["refresh","fetch"],methods:{handleHideConfigure(){this.showConfigure=!1},handleShowConfigure(){this.showConfigure=!0},refreshSettings(){this.$emit("refresh")},manageCountryTaxRates(t){this.$router.push({name:"eu_country_tax_rates",params:{country:t,group:"EU"}})},deleteCountryTaxRate(t){Pt("Are you sure you want to delete this tax rate?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/country/"+t).then(e=>{this.handleSuccess(e.message),this.$emit("fetch")}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})}},computed:{configuredSpecificCountriesCount(){const t=Object.keys(this.countryWiseVatSettings||{});return t.length?t.length:Array.isArray(this.euCountries)&&this.euCountries.length?this.euCountries.filter(e=>(e.total_rates||0)>0).length:0}}},xae={class:"fct-specific-country-wrapper"},Uae={key:0,class:"fct-tax-selection-sum-box"},Eae={class:"summary-box-content"},Sae={class:"summary-box-label text-system-dark text-base dark:text-gray-50"},Qae={class:"summary-box-text mt-2.5 text-[13px] text-system-mid dark:text-gray-300"},Dae={key:1,class:"fct-specific-country-list-wrap"},$ae={class:"flex items-center mb-3"},Iae={key:0,class:"fct-specific-country-box"},Tae={key:0,class:"summary-box-content"},Mae={class:"summary-box-label"},Vae={class:"summary-box-meta mt-5"},Lae={class:"fct-specific-country-list"},Oae={class:"value"},Hae={class:"label"},Rae={class:"value"},Pae={class:"label"},Kae={key:1,class:"mt-3 text-xs text-system-mid dark:text-gray-300"},Nae={key:1,class:"fct-eu-union-countries-wrap mt-7.5"},Gae={class:"fct-tax-rate-box-head"},jae={class:"fct-eu-union-countries"},zae=["onClick"],Yae={class:"country-info"},qae=["src"],Wae={class:"flex items-center gap-2"};function Xae(t,e,a,s,n,l){var g,F,B;const A=y("DynamicIcon"),u=y("IconButton"),c=y("el-button"),m=y("LabelHint"),v=y("TaxConfigurationCountryModal"),b=y("el-tag");return d(),_("div",xae,[n.showConfigure?(d(),_("div",Uae,[i("div",Eae,[i("div",Sae,h(l.configuredSpecificCountriesCount)+" country(ies) configured ",1),i("div",Qae,h(t.$t("Specific EU country rates selected.")),1),o(u,{class:"edit-method-btn",onClick:l.handleHideConfigure,size:"small",border:"none",tag:"button",title:"Edit"},{default:r(()=>[o(A,{name:"Edit"})]),_:1},8,["onClick"])])])):x("",!0),n.showConfigure?x("",!0):(d(),_("div",Dae,[i("div",$ae,[o(c,{size:"small",soft:"",type:"info",onClick:l.handleShowConfigure},{default:r(()=>[o(A,{name:"ChevronLeft",class:"w-3"}),M(" "+h(t.$t("Back")),1)]),_:1},8,["onClick"])]),a.euRatesLoading?x("",!0):(d(),_("div",Iae,[a.euRatesLoading?(d(),_("div",Kae,h(t.$t("Loading EU rates")),1)):(d(),_("div",Tae,[i("div",Mae,[o(m,{title:t.$t("EU rates available")},null,8,["title"])]),i("div",Vae,[i("ul",Lae,[i("li",null,[i("span",Oae,h((g=a.euRatesSummary)==null?void 0:g.totalCountries),1),i("span",Hae,h(t.$t("Countries")),1)]),i("li",null,[i("span",Rae,h((F=a.euRatesSummary)==null?void 0:F.totalRates),1),i("span",Pae,h(t.$t("total rates")),1)])]),o(v,{onlyEU:!0,onRefresh:l.refreshSettings},null,8,["onRefresh"])])]))])),(B=a.euCountries)!=null&&B.length?(d(),_("div",Nae,[i("div",Gae,[i("h4",null,h(t.$t("European Union Countries")),1)]),i("div",jae,[(d(!0),_(H,null,q(a.euCountries,(w,C)=>(d(),_("div",{key:w.country_code+"-"+C,class:"fct-eu-union-country",onClick:k=>l.manageCountryTaxRates(w.country_code)},[i("div",Yae,[i("img",{src:"https://flagcdn.com/w40/"+w.country_code.toLowerCase()+".png",alt:"flag"},null,8,qae),i("span",null,h(w.country_name),1)]),i("div",Wae,[o(b,null,{default:r(()=>[M(h(w.total_rates)+" "+h(t.$t("Rates")),1)]),_:2},1024),o(u,{border:"none",size:"small",onClick:Ke(k=>l.deleteCountryTaxRate(w.country_code),["stop"]),tag:"button"},{default:r(()=>[o(A,{name:"Delete"})]),_:2},1032,["onClick"]),o(A,{name:"ChevronRight",class:"w-1.5"})])],8,zae))),128))])])):x("",!0)]))])}const Jae=ye(Fae,[["render",Xae]]),Zae={name:"EUVatSettings",components:{Card:se,CardBody:ae,CardHeader:le,TaxConfigurationCountryModal:or,DynamicIcon:Y,OssOverrideModal:Of,IconButton:Be,CollectionMethodSection:Mte,CrossBorderSummary:jte,TaxOverride:oae,OssCountryRates:kae,LabelHint:Ze,SpecificCountrySection:Jae},data(){return{showForm:!1,showSelectionEditor:!1,upcomingFeature:!1,ossOverrides:[],activeCollapse:!1,activeCountryCollapse:[],ossCountryRates:[],ossCountryRatesLoading:!1,showAddOssTaxOverrideModal:!1,ossProvinces:[],ossTaxOverrideForm:{country_code:"",tax_classes:[]},selectedCountryTaxClasses:[],selectedMethod:"",countryWiseVatSettings:{},settings:{},countryWiseEUvatForm:{registration_country:"",vat_number:""},crossBorderForm:{method:"",oss_country:"",oss_vat:"",home_country:"",home_vat:""},crossBorderRules:{},countries:fluentCartAdminApp.eu_vat_county_options,euRatesSummary:{totalCountries:0,totalRates:0},euRatesLoading:!1,euCountries:[],shippingOverrides:[],taxOverrides:[],overrideModalTitle:"Add OSS Tax Override",overrideMode:"tax"}},methods:{handleToggleForm(t){this.showForm=t},fetchEuTaxRates(){this.euRatesLoading=!0,this.$get("tax/configuration/settings/eu-vat/rates").then(t=>{const a=Object.values((t==null?void 0:t.tax_rates)||{}).find(s=>s.group_code==="EU");if(a){const s=(a.countries||[]).length,n=(a.countries||[]).reduce((l,A)=>l+(A.total_rates||0),0);this.euRatesSummary={totalCountries:s,totalRates:n},this.euCountries=a.countries||[],this.filterCountriesByShippingOverrides()}else this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).catch(()=>{this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).finally(()=>{this.euRatesLoading=!1})},filterCountriesByShippingOverrides(){this.shippingOverrides=this.euCountries.filter(t=>t.rates&&t.rates.some(e=>e.for_shipping>0)),this.taxOverrides=this.euCountries},changeRegistration(){Pt("Are you sure you want to change the registration? This will reset the current registration and you will need to configure it again.","Confirm Change!",{confirmButtonText:"Yes, Change!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.resetRegistration()})},resetRegistration(){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"},reset_registration:"yes"}).then(t=>{this.handleSuccess(t.message),this.getTaxSettings(),this.showSelectionEditor=!1}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},fetchOssCountryRates(){this.ossCountryRatesLoading=!0,this.$get("tax/configuration/rates",{}).then(t=>{var e,a;this.ossCountryRates=((a=(e=t==null?void 0:t.tax_rates)==null?void 0:e.EU)==null?void 0:a.countries)??[]}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)}).finally(()=>{this.ossCountryRatesLoading=!1})},handleCollapseChange(t){t.includes("1")&&this.ossCountryRates.length===0&&this.fetchOssCountryRates()},refreshSettings(){this.getTaxSettings(),this.fetchEuTaxRates()},getTaxSettings(){this.$get("tax/configuration/settings").then(t=>{var a;this.settings=t.settings;const e=((a=this.settings)==null?void 0:a.eu_vat_settings)||{};this.crossBorderForm.method=(e==null?void 0:e.method)||"",this.crossBorderForm.oss_country=(e==null?void 0:e.oss_country)||"",this.crossBorderForm.oss_vat=(e==null?void 0:e.oss_vat)||"",this.crossBorderForm.home_country=(e==null?void 0:e.home_country)||"",this.crossBorderForm.home_vat=(e==null?void 0:e.home_vat)||"",this.countryWiseVatSettings=(e==null?void 0:e.country_wise_vat)||{},["oss","home","specific"].includes(this.crossBorderForm.method)?(this.selectedMethod=this.crossBorderForm.method,this.crossBorderForm.method==="oss"&&this.fetchOssOverrides()):Object.keys(this.countryWiseVatSettings||{}).length>0?this.selectedMethod="specific":this.selectedMethod=""}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},handleCollectionMethod(){this.crossBorderForm.method=this.selectedMethod},handleCollectionMethodOld(){if(this.selectedMethod==="specific"){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"}}).then(t=>{this.getTaxSettings(),this.fetchEuTaxRates(),this.handleSuccess(t.message),this.showSelectionEditor=!0}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)});return}if(this.selectedMethod==="oss"||this.selectedMethod==="home"){this.crossBorderForm.method=this.selectedMethod;return}},proceedWithCurrentSelection(){if(this.selectedMethod==="specific"){this.showSelectionEditor=!1;return}(this.selectedMethod==="oss"||this.selectedMethod==="home")&&(this.crossBorderForm.method=this.selectedMethod,this.showSelectionEditor=!1)},handleCollectCrossBorder(){if(!this.crossBorderForm.method){this.handleError(f("Select a cross-border registration type"));return}if(this.crossBorderForm.method==="oss"){if(!this.crossBorderForm.oss_vat||!this.crossBorderForm.oss_country){this.handleError(f("Enter your OSS VAT number"));return}}else if(this.crossBorderForm.method==="home"&&(!this.crossBorderForm.home_vat||!this.crossBorderForm.home_country)){this.handleError(f("Enter your home country VAT number"));return}this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:this.crossBorderForm}).then(t=>{this.getTaxSettings(),this.showSelectionEditor=!0,this.handleSuccess(t.message)}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},saveCountryWiseVatSettings(){this.$post("tax/configuration/settings/eu-vat",{action:"countryWiseEUvat",country_wise_vat_settings:this.countryWiseEUvatForm}).then(t=>{this.getTaxSettings(),this.handleSuccess(t.message),this.showSelectionEditor=!0}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},addNewOssTaxOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add custom rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},addShippingOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},editOssTaxOverride(t){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Edit Custom Rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:t.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],t.country_code&&this.onCountryChange(t.country_code)},editOssShippingTaxOverride(t){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:t.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],t.country_code&&this.onShippingCountryChange(t.country_code)},onCountryChange(t){if(!t){this.selectedCountryTaxClasses=[];return}if(this.overrideMode=="shipping")this.onShippingCountryChange(t);else{this.ossTaxOverrideForm.country_code=t;const e=this.ossCountryRates.find(s=>s.country_code===t);if(!e||!e.rates){this.selectedCountryTaxClasses=[];return}const a=this.euCountries.find(s=>s.country_code===t);this.selectedCountryTaxClasses=e.rates.map(s=>{let n="";if(a&&a.rates){const l=a.rates.find(A=>A.name===s.type);l&&(n=l.rate||"")}return{type:s.type,rate:s.rate,state:s.state,override_rate:n,enabled:!1}})}},onShippingCountryChange(t){this.ossTaxOverrideForm.country_code=t;const e=this.ossCountryRates.find(s=>s.country_code===t);if(!e||!e.rates){this.selectedCountryTaxClasses=[];return}const a=this.shippingOverrides.find(s=>s.country_code===t);this.selectedCountryTaxClasses=e.rates.map(s=>{let n="";if(a&&a.rates){const l=a.rates.find(A=>A.name===s.type);l&&(n=l.for_shipping||"")}return{type:s.type,rate:s.rate,state:s.state,for_shipping:n,enabled:!1}})},deleteOssTaxOverride(t){Pt("Are you sure you want to delete this tax override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/configuration/settings/eu-vat/oss/override",{country:t.country_code,state:t.state}).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},deleteOssShippingOverride(t){Pt("Are you sure you want to delete this shipping override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/configuration/settings/eu-vat/oss/shipping-override",{country:t.country_code,state:t.state}).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;console.error("Delete error:",e),this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},saveOssTaxOverride(){if(this.overrideMode=="shipping")this.saveOssShippingOverride();else{const t=this.selectedCountryTaxClasses.filter(a=>a.override_rate!=="").map(a=>({type:a.type,rate:parseFloat(a.override_rate)}));if(t.length===0){this.handleError("Please enable at least one tax class override");return}this.$post("tax/configuration/settings/eu-vat/oss/override",{country_code:this.ossTaxOverrideForm.country_code,overrides:t}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})}},saveOssShippingOverride(){const t=this.selectedCountryTaxClasses.filter(a=>a.for_shipping!=="").map(a=>({type:a.type,for_shipping:parseInt(a.for_shipping),rate:a.rate}));if(t.length===0){this.handleError("Please enable at least one tax class override");return}this.$post("tax/configuration/settings/eu-vat/oss/shipping-override",{country_code:this.ossTaxOverrideForm.country_code,overrides:t}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})},async manageCountryTaxRates(t){var e,a;try{const s=await this.$get("tax/rates/country/rates/"+t);if(((e=s==null?void 0:s.tax_rates)==null?void 0:e.length)>0)this.$router.push({name:"eu_country_tax_rates",params:{country:t,group:"EU"}});else{const n=await this.$post("tax/configuration/countries",{countries:[t]});n!=null&&n.message&&this.$router.push({name:"eu_country_tax_rates",params:{country:t,group:"EU"}})}}catch(s){console.error("Error fetching tax rates:",s),this.handleError((a=s==null?void 0:s.data)==null?void 0:a.message)}}},created(){this.crossBorderRules={method:[{required:!0,message:"Select a cross-border registration type",trigger:"change"}],oss_country:[{validator:(t,e,a)=>{this.crossBorderForm.method==="oss"&&!e?a(new Error("Select country of OSS registration")):a()},trigger:"change"}],home_country:[{validator:(t,e,a)=>{this.crossBorderForm.method==="home"&&!e?a(new Error("Select home country of registration")):a()},trigger:"change"}]}},computed:{hasExistingSelection(){var a,s,n,l,A,u;const t=((s=(a=this.settings)==null?void 0:a.eu_vat_settings)==null?void 0:s.method)==="oss"||((l=(n=this.settings)==null?void 0:n.eu_vat_settings)==null?void 0:l.method)==="home"||((u=(A=this.settings)==null?void 0:A.eu_vat_settings)==null?void 0:u.method)==="specific",e=Object.keys(this.countryWiseVatSettings||{}).length>0;return t||e},crossBorderSummary(){var A;const t=((A=this.settings)==null?void 0:A.eu_vat_settings)||{},e=t.method;if(!e)return null;const a=e==="oss"?t.oss_country:t.home_country,s=e==="oss"?t.oss_vat:t.home_vat,n=e==="oss"?"OSS":"Home Registration";let l=a;if(a&&Array.isArray(this.countries)){const u=this.countries.find(c=>c.value===a);u&&(l=u.label)}return{methodLabel:n,country:l||"",vat:s||""}},selectedCountryName(){if(!this.ossTaxOverrideForm.country_code)return"";const t=this.euCountries.find(e=>e.country_code===this.ossTaxOverrideForm.country_code);return t?t.country_name:""},hasValidOverrides(){return this.selectedCountryTaxClasses.some(t=>t.override_rate!=="")}},mounted(){this.getTaxSettings(),this.fetchEuTaxRates(),this.fetchOssCountryRates()}},ese={class:"setting-wrap"},tse={class:"fct-tax-collection-page"},ase={key:0},sse={class:"fct-tax-collection-wrap"},nse={key:1,class:"fct-tax-selection-summary"},ose={key:0,class:"form-section-save-action"},lse={key:0,class:"form-section-save-action"};function rse(t,e,a,s,n,l){const A=y("el-button"),u=y("CardHeader"),c=y("CollectionMethodSection"),m=y("CrossBorderSummary"),v=y("TaxOverride"),b=y("OssCountryRates"),g=y("SpecificCountrySection"),F=y("CardBody"),B=y("Card"),w=y("OssOverrideModal");return d(),_("div",ese,[i("div",tse,[o(B,null,{default:r(()=>[o(u,{title:t.$t("VAT collection"),border_bottom:""},{action:r(()=>[l.hasExistingSelection||n.showSelectionEditor?(d(),_("div",ase,[o(A,{type:"primary",link:"",onClick:l.changeRegistration,plain:""},{default:r(()=>[M(h(t.$t("Change Registration")),1)]),_:1},8,["onClick"])])):x("",!0)]),_:1},8,["title"]),o(F,null,{default:r(()=>[i("div",sse,[!n.showSelectionEditor&&!l.hasExistingSelection?(d(),U(c,{key:0,modelValue:n.selectedMethod,"onUpdate:modelValue":e[0]||(e[0]=C=>n.selectedMethod=C),crossBorderForm:n.crossBorderForm,countries:n.countries,onChange:l.handleCollectionMethod},null,8,["modelValue","crossBorderForm","countries","onChange"])):x("",!0),l.hasExistingSelection||n.showSelectionEditor?(d(),_("div",nse,[n.selectedMethod==="oss"?(d(),_(H,{key:0},[o(m,{label:t.$t("Using One-Stop Shop (OSS) registration"),summary:l.crossBorderSummary,crossBorderForm:n.crossBorderForm,countries:n.countries,selectedMethod:n.selectedMethod,onToggleForm:l.handleToggleForm,onSave:e[1]||(e[1]=C=>l.handleCollectCrossBorder())},null,8,["label","summary","crossBorderForm","countries","selectedMethod","onToggleForm"]),n.showForm?x("",!0):(d(),_(H,{key:0},[o(v,{taxOverrides:n.taxOverrides,onOnAdd:l.addNewOssTaxOverride,onOnEdit:l.editOssTaxOverride,onOnDelete:l.deleteOssTaxOverride},null,8,["taxOverrides","onOnAdd","onOnEdit","onOnDelete"]),o(b,{ossCountryRates:n.ossCountryRates,ossCountryRatesLoading:n.ossCountryRatesLoading,onFetch:e[2]||(e[2]=C=>l.fetchOssCountryRates())},null,8,["ossCountryRates","ossCountryRatesLoading"])],64))],64)):x("",!0),n.selectedMethod==="home"?(d(),_(H,{key:1},[o(m,{label:t.$t("Using home country registration a single EU VAT number for all EU countries."),summary:l.crossBorderSummary,crossBorderForm:n.crossBorderForm,countries:n.countries,selectedMethod:n.selectedMethod,onToggleForm:l.handleToggleForm,onSave:e[3]||(e[3]=C=>l.handleCollectCrossBorder())},null,8,["label","summary","crossBorderForm","countries","selectedMethod","onToggleForm"]),n.showForm?x("",!0):(d(),_("div",ose,[o(A,{type:"primary",onClick:e[4]||(e[4]=C=>l.manageCountryTaxRates(n.crossBorderForm.home_country))},{default:r(()=>[M(h(t.$t("Overide Home Country Tax")),1)]),_:1})]))],64)):n.selectedMethod==="specific"?(d(),U(g,{key:2,countryWiseVatSettings:n.countryWiseVatSettings,euCountries:n.euCountries,euRatesSummary:n.euRatesSummary,euRatesLoading:n.euRatesLoading,onRefresh:e[5]||(e[5]=C=>l.refreshSettings()),onFetch:e[6]||(e[6]=C=>l.fetchEuTaxRates())},null,8,["countryWiseVatSettings","euCountries","euRatesSummary","euRatesLoading"])):x("",!0)])):x("",!0)])]),_:1})]),_:1}),!n.showSelectionEditor&&n.selectedMethod&&!l.hasExistingSelection?(d(),_("div",lse,[o(A,{type:"primary",onClick:l.handleCollectCrossBorder},{default:r(()=>[M(h(t.$t("Save")),1)]),_:1},8,["onClick"])])):x("",!0)]),o(w,{modelValue:n.showAddOssTaxOverrideModal,"onUpdate:modelValue":e[7]||(e[7]=C=>n.showAddOssTaxOverrideModal=C),title:n.overrideModalTitle,countries:n.ossCountryRates,"selected-country-tax-classes":n.selectedCountryTaxClasses,"country-code":n.ossTaxOverrideForm.country_code,"has-valid-overrides":l.hasValidOverrides,onChangeCountry:l.onCountryChange,onSave:l.saveOssTaxOverride,mode:n.overrideMode,class:"fluent-cart-admin-pages","modal-class":"fct-eu-oss-override-modal","append-to-body":!0},null,8,["modelValue","title","countries","selected-country-tax-classes","country-code","has-valid-overrides","onChangeCountry","onSave","mode"])])}const ise=ye(Zae,[["render",rse]]);var sl={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Ase=sl.exports,ru;function dse(){return ru||(ru=1,function(t,e){((a,s)=>{t.exports=s()})(Ase,function a(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},n,l=!s.document&&!!s.postMessage,A=s.IS_PAPA_WORKER||!1,u={},c=0,m={};function v(Q){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(I){var L=$(I);L.chunkSize=parseInt(L.chunkSize),I.step||I.chunk||(L.chunkSize=null),this._handle=new w(L),(this._handle.streamer=this)._config=L}).call(this,Q),this.parseChunk=function(I,L){var K=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<K){let W=this._config.newline;W||(N=this._config.quoteChar||'"',W=this._handle.guessLineEndings(I,N)),I=[...I.split(W).slice(K)].join(W)}this.isFirstChunk&&D(this._config.beforeFirstChunk)&&(N=this._config.beforeFirstChunk(I))!==void 0&&(I=N),this.isFirstChunk=!1,this._halted=!1;var K=this._partialLine+I,N=(this._partialLine="",this._handle.parse(K,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(I=N.meta.cursor,K=(this._finished||(this._partialLine=K.substring(I-this._baseIndex),this._baseIndex=I),N&&N.data&&(this._rowCount+=N.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),A)s.postMessage({results:N,workerId:m.WORKER_ID,finished:K});else if(D(this._config.chunk)&&!L){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=N=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),this._completed||!K||!D(this._config.complete)||N&&N.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),K||N&&N.meta.paused||this._nextChunk(),N}this._halted=!0},this._sendError=function(I){D(this._config.error)?this._config.error(I):A&&this._config.error&&s.postMessage({workerId:m.WORKER_ID,error:I,finished:!1})}}function b(Q){var I;(Q=Q||{}).chunkSize||(Q.chunkSize=m.RemoteChunkSize),v.call(this,Q),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(L){this._input=L,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(I=new XMLHttpRequest,this._config.withCredentials&&(I.withCredentials=this._config.withCredentials),l||(I.onload=O(this._chunkLoaded,this),I.onerror=O(this._chunkError,this)),I.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var L,K=this._config.downloadRequestHeaders;for(L in K)I.setRequestHeader(L,K[L])}var N;this._config.chunkSize&&(N=this._start+this._config.chunkSize-1,I.setRequestHeader("Range","bytes="+this._start+"-"+N));try{I.send(this._config.downloadRequestBody)}catch(W){this._chunkError(W.message)}l&&I.status===0&&this._chunkError()}},this._chunkLoaded=function(){I.readyState===4&&(I.status<200||400<=I.status?this._chunkError():(this._start+=this._config.chunkSize||I.responseText.length,this._finished=!this._config.chunkSize||this._start>=(L=>(L=L.getResponseHeader("Content-Range"))!==null?parseInt(L.substring(L.lastIndexOf("/")+1)):-1)(I),this.parseChunk(I.responseText)))},this._chunkError=function(L){L=I.statusText||L,this._sendError(new Error(L))}}function g(Q){(Q=Q||{}).chunkSize||(Q.chunkSize=m.LocalChunkSize),v.call(this,Q);var I,L,K=typeof FileReader<"u";this.stream=function(N){this._input=N,L=N.slice||N.webkitSlice||N.mozSlice,K?((I=new FileReader).onload=O(this._chunkLoaded,this),I.onerror=O(this._chunkError,this)):I=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var N=this._input,W=(this._config.chunkSize&&(W=Math.min(this._start+this._config.chunkSize,this._input.size),N=L.call(N,this._start,W)),I.readAsText(N,this._config.encoding));K||this._chunkLoaded({target:{result:W}})},this._chunkLoaded=function(N){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(N.target.result)},this._chunkError=function(){this._sendError(I.error)}}function F(Q){var I;v.call(this,Q=Q||{}),this.stream=function(L){return I=L,this._nextChunk()},this._nextChunk=function(){var L,K;if(!this._finished)return L=this._config.chunkSize,I=L?(K=I.substring(0,L),I.substring(L)):(K=I,""),this._finished=!I,this.parseChunk(K)}}function B(Q){v.call(this,Q=Q||{});var I=[],L=!0,K=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(N){this._input=N,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){K&&I.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),I.length?this.parseChunk(I.shift()):L=!0},this._streamData=O(function(N){try{I.push(typeof N=="string"?N:N.toString(this._config.encoding)),L&&(L=!1,this._checkIsFinished(),this.parseChunk(I.shift()))}catch(W){this._streamError(W)}},this),this._streamError=O(function(N){this._streamCleanUp(),this._sendError(N)},this),this._streamEnd=O(function(){this._streamCleanUp(),K=!0,this._streamData("")},this),this._streamCleanUp=O(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function w(Q){var I,L,K,N,W=Math.pow(2,53),R=-W,ee=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,oe=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Ae=this,ue=0,P=0,G=!1,z=!1,j=[],Z={data:[],errors:[],meta:{}};function _e(De){return Q.skipEmptyLines==="greedy"?De.join("").trim()==="":De.length===1&&De[0].length===0}function he(){if(Z&&K&&(ge("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+m.DefaultDelimiter+"'"),K=!1),Q.skipEmptyLines&&(Z.data=Z.data.filter(function(Ee){return!_e(Ee)})),Qe()){let Ee=function(Ye,mt){D(Q.transformHeader)&&(Ye=Q.transformHeader(Ye,mt)),j.push(Ye)};if(Z)if(Array.isArray(Z.data[0])){for(var De=0;Qe()&&De<Z.data.length;De++)Z.data[De].forEach(Ee);Z.data.splice(0,1)}else Z.data.forEach(Ee)}function Ue(Ee,Ye){for(var mt=Q.header?{}:[],qe=0;qe<Ee.length;qe++){var ie=qe,ve=Ee[qe],ve=((Oe,re)=>(Se=>(Q.dynamicTypingFunction&&Q.dynamicTyping[Se]===void 0&&(Q.dynamicTyping[Se]=Q.dynamicTypingFunction(Se)),(Q.dynamicTyping[Se]||Q.dynamicTyping)===!0))(Oe)?re==="true"||re==="TRUE"||re!=="false"&&re!=="FALSE"&&((Se=>{if(ee.test(Se)&&(Se=parseFloat(Se),R<Se&&Se<W))return 1})(re)?parseFloat(re):oe.test(re)?new Date(re):re===""?null:re):re)(ie=Q.header?qe>=j.length?"__parsed_extra":j[qe]:ie,ve=Q.transform?Q.transform(ve,ie):ve);ie==="__parsed_extra"?(mt[ie]=mt[ie]||[],mt[ie].push(ve)):mt[ie]=ve}return Q.header&&(qe>j.length?ge("FieldMismatch","TooManyFields","Too many fields: expected "+j.length+" fields but parsed "+qe,P+Ye):qe<j.length&&ge("FieldMismatch","TooFewFields","Too few fields: expected "+j.length+" fields but parsed "+qe,P+Ye)),mt}var Ie;Z&&(Q.header||Q.dynamicTyping||Q.transform)&&(Ie=1,!Z.data.length||Array.isArray(Z.data[0])?(Z.data=Z.data.map(Ue),Ie=Z.data.length):Z.data=Ue(Z.data,0),Q.header&&Z.meta&&(Z.meta.fields=j),P+=Ie)}function Qe(){return Q.header&&j.length===0}function ge(De,Ue,Ie,Ee){De={type:De,code:Ue,message:Ie},Ee!==void 0&&(De.row=Ee),Z.errors.push(De)}D(Q.step)&&(N=Q.step,Q.step=function(De){Z=De,Qe()?he():(he(),Z.data.length!==0&&(ue+=De.data.length,Q.preview&&ue>Q.preview?L.abort():(Z.data=Z.data[0],N(Z,Ae))))}),this.parse=function(De,Ue,Ie){var Ee=Q.quoteChar||'"',Ee=(Q.newline||(Q.newline=this.guessLineEndings(De,Ee)),K=!1,Q.delimiter?D(Q.delimiter)&&(Q.delimiter=Q.delimiter(De),Z.meta.delimiter=Q.delimiter):((Ee=((Ye,mt,qe,ie,ve)=>{var Oe,re,Se,Pe;ve=ve||[",","	","|",";",m.RECORD_SEP,m.UNIT_SEP];for(var oa=0;oa<ve.length;oa++){for(var Lt,Qt=ve[oa],Ct=0,ha=0,kt=0,Gt=(Se=void 0,new k({comments:ie,delimiter:Qt,newline:mt,preview:10}).parse(Ye)),Ua=0;Ua<Gt.data.length;Ua++)qe&&_e(Gt.data[Ua])?kt++:(Lt=Gt.data[Ua].length,ha+=Lt,Se===void 0?Se=Lt:0<Lt&&(Ct+=Math.abs(Lt-Se),Se=Lt));0<Gt.data.length&&(ha/=Gt.data.length-kt),(re===void 0||Ct<=re)&&(Pe===void 0||Pe<ha)&&1.99<ha&&(re=Ct,Oe=Qt,Pe=ha)}return{successful:!!(Q.delimiter=Oe),bestDelimiter:Oe}})(De,Q.newline,Q.skipEmptyLines,Q.comments,Q.delimitersToGuess)).successful?Q.delimiter=Ee.bestDelimiter:(K=!0,Q.delimiter=m.DefaultDelimiter),Z.meta.delimiter=Q.delimiter),$(Q));return Q.preview&&Q.header&&Ee.preview++,I=De,L=new k(Ee),Z=L.parse(I,Ue,Ie),he(),G?{meta:{paused:!0}}:Z||{meta:{paused:!1}}},this.paused=function(){return G},this.pause=function(){G=!0,L.abort(),I=D(Q.chunk)?"":I.substring(L.getCharIndex())},this.resume=function(){Ae.streamer._halted?(G=!1,Ae.streamer.parseChunk(I,!0)):setTimeout(Ae.resume,3)},this.aborted=function(){return z},this.abort=function(){z=!0,L.abort(),Z.meta.aborted=!0,D(Q.complete)&&Q.complete(Z),I=""},this.guessLineEndings=function(Ye,Ee){Ye=Ye.substring(0,1048576);var Ee=new RegExp(C(Ee)+"([^]*?)"+C(Ee),"gm"),Ie=(Ye=Ye.replace(Ee,"")).split("\r"),Ee=Ye.split(`
`),Ye=1<Ee.length&&Ee[0].length<Ie[0].length;if(Ie.length===1||Ye)return`
`;for(var mt=0,qe=0;qe<Ie.length;qe++)Ie[qe][0]===`
`&&mt++;return mt>=Ie.length/2?`\r
`:"\r"}}function C(Q){return Q.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function k(Q){var I=(Q=Q||{}).delimiter,L=Q.newline,K=Q.comments,N=Q.step,W=Q.preview,R=Q.fastMode,ee=null,oe=!1,Ae=Q.quoteChar==null?'"':Q.quoteChar,ue=Ae;if(Q.escapeChar!==void 0&&(ue=Q.escapeChar),(typeof I!="string"||-1<m.BAD_DELIMITERS.indexOf(I))&&(I=","),K===I)throw new Error("Comment character same as delimiter");K===!0?K="#":(typeof K!="string"||-1<m.BAD_DELIMITERS.indexOf(K))&&(K=!1),L!==`
`&&L!=="\r"&&L!==`\r
`&&(L=`
`);var P=0,G=!1;this.parse=function(z,j,Z){if(typeof z!="string")throw new Error("Input must be a string");var _e=z.length,he=I.length,Qe=L.length,ge=K.length,De=D(N),Ue=[],Ie=[],Ee=[],Ye=P=0;if(!z)return Ct();if(R||R!==!1&&z.indexOf(Ae)===-1){for(var mt=z.split(L),qe=0;qe<mt.length;qe++){if(Ee=mt[qe],P+=Ee.length,qe!==mt.length-1)P+=L.length;else if(Z)return Ct();if(!K||Ee.substring(0,ge)!==K){if(De){if(Ue=[],Pe(Ee.split(I)),ha(),G)return Ct()}else Pe(Ee.split(I));if(W&&W<=qe)return Ue=Ue.slice(0,W),Ct(!0)}}return Ct()}for(var ie=z.indexOf(I,P),ve=z.indexOf(L,P),Oe=new RegExp(C(ue)+C(Ae),"g"),re=z.indexOf(Ae,P);;)if(z[P]===Ae)for(re=P,P++;;){if((re=z.indexOf(Ae,re+1))===-1)return Z||Ie.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ue.length,index:P}),Lt();if(re===_e-1)return Lt(z.substring(P,re).replace(Oe,Ae));if(Ae===ue&&z[re+1]===ue)re++;else if(Ae===ue||re===0||z[re-1]!==ue){ie!==-1&&ie<re+1&&(ie=z.indexOf(I,re+1));var Se=oa((ve=ve!==-1&&ve<re+1?z.indexOf(L,re+1):ve)===-1?ie:Math.min(ie,ve));if(z.substr(re+1+Se,he)===I){Ee.push(z.substring(P,re).replace(Oe,Ae)),z[P=re+1+Se+he]!==Ae&&(re=z.indexOf(Ae,P)),ie=z.indexOf(I,P),ve=z.indexOf(L,P);break}if(Se=oa(ve),z.substring(re+1+Se,re+1+Se+Qe)===L){if(Ee.push(z.substring(P,re).replace(Oe,Ae)),Qt(re+1+Se+Qe),ie=z.indexOf(I,P),re=z.indexOf(Ae,P),De&&(ha(),G))return Ct();if(W&&Ue.length>=W)return Ct(!0);break}Ie.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ue.length,index:P}),re++}}else if(K&&Ee.length===0&&z.substring(P,P+ge)===K){if(ve===-1)return Ct();P=ve+Qe,ve=z.indexOf(L,P),ie=z.indexOf(I,P)}else if(ie!==-1&&(ie<ve||ve===-1))Ee.push(z.substring(P,ie)),P=ie+he,ie=z.indexOf(I,P);else{if(ve===-1)break;if(Ee.push(z.substring(P,ve)),Qt(ve+Qe),De&&(ha(),G))return Ct();if(W&&Ue.length>=W)return Ct(!0)}return Lt();function Pe(kt){Ue.push(kt),Ye=P}function oa(kt){var Gt=0;return Gt=kt!==-1&&(kt=z.substring(re+1,kt))&&kt.trim()===""?kt.length:Gt}function Lt(kt){return Z||(kt===void 0&&(kt=z.substring(P)),Ee.push(kt),P=_e,Pe(Ee),De&&ha()),Ct()}function Qt(kt){P=kt,Pe(Ee),Ee=[],ve=z.indexOf(L,P)}function Ct(kt){if(Q.header&&!j&&Ue.length&&!oe){var Gt=Ue[0],Ua=Object.create(null),za=new Set(Gt);let Ta=!1;for(let Ys=0;Ys<Gt.length;Ys++){let Ma=Gt[Ys];if(Ua[Ma=D(Q.transformHeader)?Q.transformHeader(Ma,Ys):Ma]){let kn,kA=Ua[Ma];for(;kn=Ma+"_"+kA,kA++,za.has(kn););za.add(kn),Gt[Ys]=kn,Ua[Ma]++,Ta=!0,(ee=ee===null?{}:ee)[kn]=Ma}else Ua[Ma]=1,Gt[Ys]=Ma;za.add(Ma)}Ta&&console.warn("Duplicate headers found and renamed."),oe=!0}return{data:Ue,errors:Ie,meta:{delimiter:I,linebreak:L,aborted:G,truncated:!!kt,cursor:Ye+(j||0),renamedHeaders:ee}}}function ha(){N(Ct()),Ue=[],Ie=[]}},this.abort=function(){G=!0},this.getCharIndex=function(){return P}}function S(Q){var I=Q.data,L=u[I.workerId],K=!1;if(I.error)L.userError(I.error,I.file);else if(I.results&&I.results.data){var N={abort:function(){K=!0,E(I.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:V,resume:V};if(D(L.userStep)){for(var W=0;W<I.results.data.length&&(L.userStep({data:I.results.data[W],errors:I.results.errors,meta:I.results.meta},N),!K);W++);delete I.results}else D(L.userChunk)&&(L.userChunk(I.results,N,I.file),delete I.results)}I.finished&&!K&&E(I.workerId,I.results)}function E(Q,I){var L=u[Q];D(L.userComplete)&&L.userComplete(I),L.terminate(),delete u[Q]}function V(){throw new Error("Not implemented.")}function $(Q){if(typeof Q!="object"||Q===null)return Q;var I,L=Array.isArray(Q)?[]:{};for(I in Q)L[I]=$(Q[I]);return L}function O(Q,I){return function(){Q.apply(I,arguments)}}function D(Q){return typeof Q=="function"}return m.parse=function(Q,I){var L=(I=I||{}).dynamicTyping||!1;if(D(L)&&(I.dynamicTypingFunction=L,L={}),I.dynamicTyping=L,I.transform=!!D(I.transform)&&I.transform,!I.worker||!m.WORKERS_SUPPORTED)return L=null,m.NODE_STREAM_INPUT,typeof Q=="string"?(Q=(K=>K.charCodeAt(0)!==65279?K:K.slice(1))(Q),L=new(I.download?b:F)(I)):Q.readable===!0&&D(Q.read)&&D(Q.on)?L=new B(I):(s.File&&Q instanceof File||Q instanceof Object)&&(L=new g(I)),L.stream(Q);(L=(()=>{var K;return!!m.WORKERS_SUPPORTED&&(K=(()=>{var N=s.URL||s.webkitURL||null,W=a.toString();return m.BLOB_URL||(m.BLOB_URL=N.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",W,")();"],{type:"text/javascript"})))})(),(K=new s.Worker(K)).onmessage=S,K.id=c++,u[K.id]=K)})()).userStep=I.step,L.userChunk=I.chunk,L.userComplete=I.complete,L.userError=I.error,I.step=D(I.step),I.chunk=D(I.chunk),I.complete=D(I.complete),I.error=D(I.error),delete I.worker,L.postMessage({input:Q,config:I,workerId:L.id})},m.unparse=function(Q,I){var L=!1,K=!0,N=",",W=`\r
`,R='"',ee=R+R,oe=!1,Ae=null,ue=!1,P=((()=>{if(typeof I=="object"){if(typeof I.delimiter!="string"||m.BAD_DELIMITERS.filter(function(j){return I.delimiter.indexOf(j)!==-1}).length||(N=I.delimiter),typeof I.quotes!="boolean"&&typeof I.quotes!="function"&&!Array.isArray(I.quotes)||(L=I.quotes),typeof I.skipEmptyLines!="boolean"&&typeof I.skipEmptyLines!="string"||(oe=I.skipEmptyLines),typeof I.newline=="string"&&(W=I.newline),typeof I.quoteChar=="string"&&(R=I.quoteChar),typeof I.header=="boolean"&&(K=I.header),Array.isArray(I.columns)){if(I.columns.length===0)throw new Error("Option columns is empty");Ae=I.columns}I.escapeChar!==void 0&&(ee=I.escapeChar+R),I.escapeFormulae instanceof RegExp?ue=I.escapeFormulae:typeof I.escapeFormulae=="boolean"&&I.escapeFormulae&&(ue=/^[=+\-@\t\r].*$/)}})(),new RegExp(C(R),"g"));if(typeof Q=="string"&&(Q=JSON.parse(Q)),Array.isArray(Q)){if(!Q.length||Array.isArray(Q[0]))return G(null,Q,oe);if(typeof Q[0]=="object")return G(Ae||Object.keys(Q[0]),Q,oe)}else if(typeof Q=="object")return typeof Q.data=="string"&&(Q.data=JSON.parse(Q.data)),Array.isArray(Q.data)&&(Q.fields||(Q.fields=Q.meta&&Q.meta.fields||Ae),Q.fields||(Q.fields=Array.isArray(Q.data[0])?Q.fields:typeof Q.data[0]=="object"?Object.keys(Q.data[0]):[]),Array.isArray(Q.data[0])||typeof Q.data[0]=="object"||(Q.data=[Q.data])),G(Q.fields||[],Q.data||[],oe);throw new Error("Unable to serialize unrecognized input");function G(j,Z,_e){var he="",Qe=(typeof j=="string"&&(j=JSON.parse(j)),typeof Z=="string"&&(Z=JSON.parse(Z)),Array.isArray(j)&&0<j.length),ge=!Array.isArray(Z[0]);if(Qe&&K){for(var De=0;De<j.length;De++)0<De&&(he+=N),he+=z(j[De],De);0<Z.length&&(he+=W)}for(var Ue=0;Ue<Z.length;Ue++){var Ie=(Qe?j:Z[Ue]).length,Ee=!1,Ye=Qe?Object.keys(Z[Ue]).length===0:Z[Ue].length===0;if(_e&&!Qe&&(Ee=_e==="greedy"?Z[Ue].join("").trim()==="":Z[Ue].length===1&&Z[Ue][0].length===0),_e==="greedy"&&Qe){for(var mt=[],qe=0;qe<Ie;qe++){var ie=ge?j[qe]:qe;mt.push(Z[Ue][ie])}Ee=mt.join("").trim()===""}if(!Ee){for(var ve=0;ve<Ie;ve++){0<ve&&!Ye&&(he+=N);var Oe=Qe&&ge?j[ve]:ve;he+=z(Z[Ue][Oe],ve)}Ue<Z.length-1&&(!_e||0<Ie&&!Ye)&&(he+=W)}}return he}function z(j,Z){var _e,he;return j==null?"":j.constructor===Date?JSON.stringify(j).slice(1,25):(he=!1,ue&&typeof j=="string"&&ue.test(j)&&(j="'"+j,he=!0),_e=j.toString().replace(P,ee),(he=he||L===!0||typeof L=="function"&&L(j,Z)||Array.isArray(L)&&L[Z]||((Qe,ge)=>{for(var De=0;De<ge.length;De++)if(-1<Qe.indexOf(ge[De]))return!0;return!1})(_e,m.BAD_DELIMITERS)||-1<_e.indexOf(N)||_e.charAt(0)===" "||_e.charAt(_e.length-1)===" ")?R+_e+R:_e)}},m.RECORD_SEP="",m.UNIT_SEP="",m.BYTE_ORDER_MARK="\uFEFF",m.BAD_DELIMITERS=["\r",`
`,'"',m.BYTE_ORDER_MARK],m.WORKERS_SUPPORTED=!l&&!!s.Worker,m.NODE_STREAM_INPUT=1,m.LocalChunkSize=10485760,m.RemoteChunkSize=5242880,m.DefaultDelimiter=",",m.Parser=k,m.ParserHandle=w,m.NetworkStreamer=b,m.FileStreamer=g,m.StringStreamer=F,m.ReadableStreamStreamer=B,s.jQuery&&((n=s.jQuery).fn.parse=function(Q){var I=Q.config||{},L=[];return this.each(function(W){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var R=0;R<this.files.length;R++)L.push({file:this.files[R],inputElem:this,instanceConfig:n.extend({},I)})}),K(),this;function K(){if(L.length===0)D(Q.complete)&&Q.complete();else{var W,R,ee,oe,Ae=L[0];if(D(Q.before)){var ue=Q.before(Ae.file,Ae.inputElem);if(typeof ue=="object"){if(ue.action==="abort")return W="AbortError",R=Ae.file,ee=Ae.inputElem,oe=ue.reason,void(D(Q.error)&&Q.error({name:W},R,ee,oe));if(ue.action==="skip")return void N();typeof ue.config=="object"&&(Ae.instanceConfig=n.extend(Ae.instanceConfig,ue.config))}else if(ue==="skip")return void N()}var P=Ae.instanceConfig.complete;Ae.instanceConfig.complete=function(G){D(P)&&P(G,Ae.file,Ae.inputElem),N()},m.parse(Ae.file,Ae.instanceConfig)}}function N(){L.splice(0,1),K()}}),A&&(s.onmessage=function(Q){Q=Q.data,m.WORKER_ID===void 0&&Q&&(m.WORKER_ID=Q.workerId),typeof Q.input=="string"?s.postMessage({workerId:m.WORKER_ID,results:m.parse(Q.input,Q.config),finished:!0}):(s.File&&Q.input instanceof File||Q.input instanceof Object)&&(Q=m.parse(Q.input,Q.config))&&s.postMessage({workerId:m.WORKER_ID,results:Q,finished:!0})}),(b.prototype=Object.create(v.prototype)).constructor=b,(g.prototype=Object.create(v.prototype)).constructor=g,(F.prototype=Object.create(F.prototype)).constructor=F,(B.prototype=Object.create(v.prototype)).constructor=B,m})}(sl)),sl.exports}dse();const use={class:"setting-wrap"},cse={class:"fct-all-tax-classes-page"},fse={class:"fct-tax-rates-wrap"},pse={class:"p-4 bg-gray-50 rounded-lg"},mse={key:0,class:"p-4 bg-gray-50 rounded-lg"},hse={class:"text-sm font-medium text-gray-700 flex items-center gap-1 mb-3"},_se={key:0},gse={key:0},vse={key:0},yse={class:"rounded-md p-4 border border-solid border-gray-divider bg-white"},bse={key:0,src:"https://flagcdn.com/w40/eu.png",alt:"EU Flag",class:"w-6 rounded-sm mr-2"},wse={class:"mt-3 pl-10"},Bse={class:"font-medium"},Cse={key:0},kse={class:"mt-3 flex justify-end gap-2"},Fse={class:"rounded-md p-4 border border-solid border-gray-divider bg-white mt-4"},xse={class:"p-4"},Use={key:0,class:"text-center py-4"},Ese={key:1},Sse={class:"flex items-center justify-between w-full pr-4"},Qse={class:"flex items-center gap-2"},Dse=["src","alt"],$se={class:"font-medium"},Ise={class:"text-sm text-gray-600"},Tse={class:"p-3 bg-gray-50 rounded"},Mse={key:0,class:"space-y-2"},Vse={class:"flex items-center gap-2"},Lse={class:"text-sm font-medium"},Ose={key:0,class:"text-xs text-gray-500"},Hse={class:"text-sm font-medium text-blue-600"},Rse={key:1,class:"text-sm text-gray-500 text-center py-2"},Pse={key:2,class:"text-gray-500 text-center py-4"},Kse={class:"rounded-md p-6 border border-solid border-gray-divider bg-white mt-4"},Nse={class:"flex items-start justify-between mb-6"},Gse={class:"flex-shrink-0"},jse={key:0},zse={class:"flex items-center gap-2"},Yse=["src","alt"],qse={class:"fct-tax-rates-country-modal-actions flex items-center gap-2"},Wse={key:1,class:"text-sm text-gray-500 text-center py-4"},Xse={key:0,class:"rounded-md p-4 border border-solid border-gray-divider bg-white mt-4"},Jse={class:"flex items-center justify-between mb-3"},Zse={key:0},ene={class:"flex items-center gap-2"},tne=["src","alt"],ane={key:0},sne={key:0},nne={key:1},one={class:"fct-tax-rates-country-modal-actions flex items-center gap-2"},lne={key:1,class:"text-sm text-gray-500 text-center py-4"},rne={key:1,class:"rounded-md p-4 border border-solid border-gray-divider bg-white"},ine={class:"ml-3 text-gray-600"},Ane={class:"mt-3 pl-10"},dne={class:"font-medium"},une={key:0},cne={class:"mt-3 flex justify-end gap-2"},fne={key:2,class:"rounded-md p-4 border border-solid border-gray-divider bg-white"},pne={class:"ml-3 text-xs text-gray-600"},mne={class:"mt-3 flex justify-end gap-2"},hne={key:1},_ne={class:"rounded-md p-4 mb-2 border border-solid border-gray-divider bg-white"},gne={class:"rounded-md p-4 mb-2 border border-solid border-gray-divider bg-white"},vne={class:"rounded-md p-4 mb-2 border border-solid border-gray-divider bg-white"},yne={class:"mt-3 flex justify-end"},bne={key:1,class:"mt-4"},wne={class:"flex items-center mb-3"},Bne={class:"ml-3 text-sm text-gray-700"},Cne={class:"flex justify-end gap-2 mt-3"},kne={key:2,class:"mt-4"},Fne={class:"flex items-center mb-3"},xne={key:0,class:"mt-3 p-2 text-xs text-gray-600"},Une={key:1,class:"mt-3 text-xs text-gray-600"},Ene={key:2,class:"mt-4 border border-gray-200 rounded"},Sne={class:"divide-y"},Qne=["onClick"],Dne={class:"flex items-center gap-2"},$ne=["src"],Ine={class:"text-gray-800"},Tne={class:"flex items-center gap-2"},Mne={class:"text-xs text-gray-600"},Vne={label:"EUVatSettings",data(){return{showInlineConfig:!1,upcomingFeature:!1,showSelectionEditor:!1,ossOverrides:[],activeCollapse:!1,activeCountryCollapse:[],ossCountryRates:[],ossCountryRatesLoading:!1,showAddOssTaxOverrideModal:!1,ossProvinces:[],ossTaxOverrideForm:{country_code:"",tax_classes:[]},selectedCountryTaxClasses:[],selectedMethod:"",countryWiseVatSettings:{},settings:{},countryWiseEUvatForm:{registration_country:"",vat_number:""},crossBorderForm:{method:"",oss_country:"",oss_vat:"",home_country:"",home_vat:""},crossBorderRules:{},countries:fluentCartAdminApp.eu_vat_county_options,euRatesSummary:{totalCountries:0,totalRates:0},euRatesLoading:!1,euCountries:[],shippingOverrides:[],taxOverrides:[],overrideModalTitle:"Add OSS Tax Override",overrideMode:"tax"}},methods:{fetchEuTaxRates(){this.euRatesLoading=!0,te.get("tax/configuration/settings/eu-vat/rates").then(t=>{const a=Object.values((t==null?void 0:t.tax_rates)||{}).find(s=>s.group_code==="EU");if(a){const s=(a.countries||[]).length,n=(a.countries||[]).reduce((l,A)=>l+(A.total_rates||0),0);this.euRatesSummary={totalCountries:s,totalRates:n},this.euCountries=a.countries||[],this.filterCountriesByShippingOverrides()}else this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).catch(()=>{this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).finally(()=>{this.euRatesLoading=!1})},filterCountriesByShippingOverrides(){this.shippingOverrides=this.euCountries.filter(t=>t.rates&&t.rates.some(e=>e.for_shipping>0)),this.taxOverrides=this.euCountries.filter(t=>!t.rates||!t.rates.some(e=>e.for_shipping>0))},changeRegistration(){Pt("Are you sure you want to change the registration? This will reset the current registration and you will need to configure it again.","Confirm Change!",{confirmButtonText:"Yes, Change!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.resetRegistration()})},resetRegistration(){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"},reset_registration:"yes"}).then(t=>{this.handleSuccess(t.message),this.getTaxSettings(),this.showSelectionEditor=!0}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},fetchOssOverrides(){},fetchOssCountryRates(){this.ossCountryRatesLoading=!0,this.$get("tax/configuration/rates",{}).then(t=>{var e,a;this.ossCountryRates=((a=(e=t==null?void 0:t.tax_rates)==null?void 0:e.EU)==null?void 0:a.countries)??[]}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)}).finally(()=>{this.ossCountryRatesLoading=!1})},handleCollapseChange(t){t.includes("1")&&this.ossCountryRates.length===0&&this.fetchOssCountryRates()},refreshSettings(){this.getTaxSettings(),this.fetchEuTaxRates()},manageCountryTaxRates(t){this.$router.push({name:"eu_country_tax_rates",params:{country:t,group:"EU"}})},getTaxSettings(){this.$get("tax/configuration/settings").then(t=>{var a;this.settings=t.settings;const e=((a=this.settings)==null?void 0:a.eu_vat_settings)||{};this.crossBorderForm.method=(e==null?void 0:e.method)||"",this.crossBorderForm.oss_country=(e==null?void 0:e.oss_country)||"",this.crossBorderForm.oss_vat=(e==null?void 0:e.oss_vat)||"",this.crossBorderForm.home_country=(e==null?void 0:e.home_country)||"",this.crossBorderForm.home_vat=(e==null?void 0:e.home_vat)||"",this.countryWiseVatSettings=(e==null?void 0:e.country_wise_vat)||{},["oss","home","specific"].includes(this.crossBorderForm.method)?(this.selectedMethod=this.crossBorderForm.method,this.crossBorderForm.method==="oss"&&this.fetchOssOverrides()):Object.keys(this.countryWiseVatSettings||{}).length>0?this.selectedMethod="specific":this.selectedMethod=""}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},handleContinueSelection(){if(this.selectedMethod==="specific"){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"}}).then(t=>{this.getTaxSettings(),this.showInlineConfig=!0,this.fetchEuTaxRates(),this.handleSuccess(t.message)}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)});return}if(this.selectedMethod==="oss"||this.selectedMethod==="home"){this.crossBorderForm.method=this.selectedMethod,this.showInlineConfig=!0;return}},proceedWithCurrentSelection(){if(this.selectedMethod==="specific"){this.showInlineConfig=!0;return}(this.selectedMethod==="oss"||this.selectedMethod==="home")&&(this.crossBorderForm.method=this.selectedMethod,this.showInlineConfig=!0)},cancelInlineConfig(){this.showInlineConfig=!1},handleCollectCrossBorder(){this.$refs.crossBorderFormRef.validate(t=>{t&&this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:this.crossBorderForm}).then(e=>{this.getTaxSettings(),this.showInlineConfig=!1,this.showSelectionEditor=!1,this.handleSuccess(e.message)}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})})},saveCountryWiseVatSettings(){this.$post("tax/configuration/settings/eu-vat",{action:"countryWiseEUvat",country_wise_vat_settings:this.countryWiseEUvatForm}).then(t=>{this.getTaxSettings(),this.handleSuccess(t.message),this.showInlineConfig=!1,this.showSelectionEditor=!1}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},deleteCountryTaxRate(t){Pt("Are you sure you want to delete this tax rate?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/country/"+t).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},addNewOssTaxOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add custom rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},addShippingOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},editOssTaxOverride(t){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Edit Custom Rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:t.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],t.country_code&&this.onCountryChange(t.country_code)},editOssShippingTaxOverride(t){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:t.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],t.country_code&&this.onShippingCountryChange(t.country_code)},onCountryChange(t){if(!t){this.selectedCountryTaxClasses=[];return}if(this.overrideMode=="shipping")this.onShippingCountryChange(t);else{this.ossTaxOverrideForm.country_code=t;const e=this.ossCountryRates.find(s=>s.country_code===t);if(!e||!e.rates){this.selectedCountryTaxClasses=[];return}const a=this.euCountries.find(s=>s.country_code===t);this.selectedCountryTaxClasses=e.rates.map(s=>{let n="";if(a&&a.rates){const l=a.rates.find(A=>A.name===s.type);l&&(n=l.rate||"")}return{type:s.type,rate:s.rate,state:s.state,override_rate:n,enabled:!1}})}},onShippingCountryChange(t){this.ossTaxOverrideForm.country_code=t;const e=this.ossCountryRates.find(s=>s.country_code===t);if(!e||!e.rates){this.selectedCountryTaxClasses=[];return}const a=this.shippingOverrides.find(s=>s.country_code===t);this.selectedCountryTaxClasses=e.rates.map(s=>{let n="";if(a&&a.rates){const l=a.rates.find(A=>A.name===s.type);l&&(n=l.for_shipping||"")}return{type:s.type,rate:s.rate,state:s.state,for_shipping:n,enabled:!1}})},deleteOssTaxOverride(t){Pt("Are you sure you want to delete this tax override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{te.delete("tax/configuration/settings/eu-vat/oss/override",{country:t.country_code,state:t.state}).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},deleteOssShippingOverride(t){Pt("Are you sure you want to delete this shipping override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{te.delete("tax/configuration/settings/eu-vat/oss/shipping-override",{country:t.country_code,state:t.state}).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;console.error("Delete error:",e),this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},saveOssTaxOverride(){if(this.overrideMode=="shipping")this.saveOssShippingOverride();else{const t=this.selectedCountryTaxClasses.filter(a=>a.override_rate!=="").map(a=>({type:a.type,rate:parseFloat(a.override_rate)}));if(t.length===0){this.handleError("Please enable at least one tax class override");return}te.post("tax/configuration/settings/eu-vat/oss/override",{country_code:this.ossTaxOverrideForm.country_code,overrides:t}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})}},saveOssShippingOverride(){const t=this.selectedCountryTaxClasses.filter(a=>a.for_shipping!=="").map(a=>({type:a.type,for_shipping:parseInt(a.for_shipping),rate:a.rate}));if(t.length===0){this.handleError("Please enable at least one tax class override");return}te.post("tax/configuration/settings/eu-vat/oss/shipping-override",{country_code:this.ossTaxOverrideForm.country_code,overrides:t}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})}},computed:{hasExistingSelection(){var a,s,n,l,A,u;const t=((s=(a=this.settings)==null?void 0:a.eu_vat_settings)==null?void 0:s.method)==="oss"||((l=(n=this.settings)==null?void 0:n.eu_vat_settings)==null?void 0:l.method)==="home"||((u=(A=this.settings)==null?void 0:A.eu_vat_settings)==null?void 0:u.method)==="specific",e=Object.keys(this.countryWiseVatSettings||{}).length>0;return t||e},crossBorderSummary(){var A;const t=((A=this.settings)==null?void 0:A.eu_vat_settings)||{},e=t.method;if(!e)return null;const a=e==="oss"?t.oss_country:t.home_country,s=e==="oss"?t.oss_vat:t.home_vat,n=e==="oss"?"OSS":"Home Registration";let l=a;if(a&&Array.isArray(this.countries)){const u=this.countries.find(c=>c.value===a);u&&(l=u.label)}return{methodLabel:n,country:l||"",vat:s||""}},configuredSpecificCountriesCount(){const t=Object.keys(this.countryWiseVatSettings||{});return t.length?t.length:Array.isArray(this.euCountries)&&this.euCountries.length?this.euCountries.filter(e=>(e.total_rates||0)>0).length:0},selectedCountryName(){if(!this.ossTaxOverrideForm.country_code)return"";const t=this.euCountries.find(e=>e.country_code===this.ossTaxOverrideForm.country_code);return t?t.country_name:""},hasValidOverrides(){return this.selectedCountryTaxClasses.some(t=>t.override_rate!=="")}},created(){this.crossBorderRules={method:[{required:!0,message:"Select a cross-border registration type",trigger:"change"}],oss_country:[{validator:(t,e,a)=>{this.crossBorderForm.method==="oss"&&!e?a(new Error("Select country of OSS registration")):a()},trigger:"change"}],home_country:[{validator:(t,e,a)=>{this.crossBorderForm.method==="home"&&!e?a(new Error("Select home country of registration")):a()},trigger:"change"}]}},mounted(){this.getTaxSettings(),this.fetchEuTaxRates(),this.fetchOssCountryRates()}},Lne=Object.assign(Vne,{__name:"EUVatSettingsOld",setup(t){return(e,a)=>{const s=y("InfoFilled"),n=y("el-icon"),l=y("el-tooltip"),A=y("el-button"),u=y("el-collapse-item"),c=y("el-collapse"),m=y("el-table-column"),v=y("el-table"),b=y("el-radio"),g=y("el-radio-group"),F=y("el-option"),B=y("el-select"),w=y("el-form-item"),C=y("el-col"),k=y("el-input"),S=y("el-row"),E=y("el-form"),V=y("el-card");return d(),_("div",use,[i("div",cse,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Tax Settings / EU"),text:p(f)("")},null,8,["title","text"]),o(ae,null,{default:r(()=>[i("div",fse,[a[42]||(a[42]=i("div",null,[i("p",{class:"text-gray-500 text-sm"}," VAT collection ")],-1)),i("div",pse,[e.showInlineConfig?x("",!0):(d(),_("div",mse,[i("div",hse,[e.hasExistingSelection?x("",!0):(d(),_("p",_se,"Choose how you collect VAT in the EU")),o(l,{content:"Select a collection method, then continue to configure it",placement:"top"},{default:r(()=>[o(n,null,{default:r(()=>[o(s)]),_:1})]),_:1}),e.hasExistingSelection&&!e.showSelectionEditor?(d(),U(A,{key:1,type:"primary",link:"",class:"ml-auto",onClick:e.changeRegistration,plain:""},{default:r(()=>a[9]||(a[9]=[M("Change Registration",-1)])),_:1,__:[9]},8,["onClick"])):x("",!0)]),e.hasExistingSelection&&!e.showSelectionEditor?(d(),_("div",gse,[e.selectedMethod==="oss"?(d(),_("div",vse,[i("div",yse,[e.selectedMethod==="oss"||e.selectedMethod==="home"?(d(),_("img",bse)):x("",!0),a[11]||(a[11]=i("span",{class:"text-gray-800 font-medium"}," Using One-Stop Shop (OSS) registration ",-1)),i("div",wse,[i("span",Bse,h(e.crossBorderSummary.methodLabel)+":",1),M(" "+h(e.crossBorderSummary.country)+" ",1),e.crossBorderSummary.vat?(d(),_("span",Cse," - VAT "+h(e.crossBorderSummary.vat),1)):x("",!0)]),i("div",kse,[o(A,{type:"primary",link:"",onClick:e.proceedWithCurrentSelection},{default:r(()=>a[10]||(a[10]=[M("Edit",-1)])),_:1,__:[10]},8,["onClick"])])]),i("div",Fse,[i("div",null,[a[13]||(a[13]=i("h3",{class:"mt-3"},"country rates",-1)),o(c,{modelValue:e.activeCollapse,"onUpdate:modelValue":a[1]||(a[1]=$=>e.activeCollapse=$),onChange:e.handleCollapseChange},{default:r(()=>[o(u,{title:"Collecting in 27 regions",name:"1"},{default:r(()=>[i("div",xse,[e.ossCountryRatesLoading?(d(),_("div",Use,[o(n,{class:"is-loading"},{default:r(()=>[o(p(il))]),_:1}),a[12]||(a[12]=i("span",{class:"ml-2"},"Loading EU tax rates...",-1))])):e.ossCountryRates.length>0?(d(),_("div",Ese,[o(c,{modelValue:e.activeCountryCollapse,"onUpdate:modelValue":a[0]||(a[0]=$=>e.activeCountryCollapse=$),accordion:""},{default:r(()=>[(d(!0),_(H,null,q(e.ossCountryRates,($,O)=>(d(),U(u,{key:O,name:`country-${O}`},{title:r(()=>[i("div",Sse,[i("div",Qse,[i("img",{class:"w-5 h-5",src:`https://flagcdn.com/w40/${$.country_code.toLowerCase()}.png`,alt:$.country_code},null,8,Dse),i("span",$se,h($.country_name),1)]),i("div",Ise," Total Rates: "+h($.total_rates),1)])]),default:r(()=>[i("div",Tse,[$.rates&&$.rates.length>0?(d(),_("div",Mse,[(d(!0),_(H,null,q($.rates,(D,Q)=>(d(),_("div",{key:Q,class:"flex items-center justify-between px-4 py-1 border border-gray-200 rounded"},[i("div",Vse,[i("span",Lse,h(D.type),1),D.tax_class?(d(),_("span",Ose,"("+h(D.tax_class)+")",1)):x("",!0)]),i("div",Hse,h(D.rate)+"% ",1)]))),128))])):(d(),_("div",Rse," No individual rates available "))])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])):(d(),_("div",Pse," No EU tax rates found "))])]),_:1})]),_:1},8,["modelValue","onChange"])])]),i("div",Kse,[i("div",Nse,[a[15]||(a[15]=i("div",{class:"flex-1 pr-6"},[i("h3",{class:"text-sm font-semibold text-gray-800 mb-2"},"Custom VAT Rates"),i("p",{class:"text-sm text-gray-600 leading-relaxed"},"Custom rates will override the default VAT rates for specific countries, giving you precise control over tax collection.")],-1)),i("div",Gse,[o(A,{type:"primary",size:"small",class:"px-6 py-2 font-medium shadow-sm hover:shadow-md transition-shadow",onClick:e.addNewOssTaxOverride},{default:r(()=>a[14]||(a[14]=[M(" Add Custom Rate ",-1)])),_:1,__:[14]},8,["onClick"])])]),e.taxOverrides.length>0?(d(),_("div",jse,[o(v,{data:e.taxOverrides,size:"small"},{default:r(()=>[o(m,{label:"Country"},{default:r(({row:$})=>[i("div",zse,[i("img",{class:"w-5 h-5",src:`https://flagcdn.com/w40/${$.country_code.toLowerCase()}.png`,alt:$.country_code},null,8,Yse),i("span",null,h($.country_name),1)])]),_:1}),o(m,{label:"Total Rates"},{default:r(({row:$})=>[M(h($.total_rates)+" rates ",1)]),_:1}),o(m,{label:"Actions",width:"100"},{default:r(({row:$})=>[i("div",qse,[o(Be,{size:"small",tag:"span",onClick:O=>e.editOssTaxOverride($)},{default:r(()=>[o(Y,{name:"Edit"})]),_:2},1032,["onClick"]),o(Be,{size:"small",tag:"span",onClick:O=>e.deleteOssTaxOverride($)},{default:r(()=>[o(Y,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])):(d(),_("div",Wse," No Custom VAT rates configured "))]),e.upcomingFeature?(d(),_("div",Xse,[i("div",Jse,[a[17]||(a[17]=i("h3",{class:"text-sm font-medium text-gray-700"},"Shipping Overrides",-1)),o(A,{type:"primary",size:"small",onClick:e.addShippingOverride},{default:r(()=>a[16]||(a[16]=[M("Add Shipping Override",-1)])),_:1,__:[16]},8,["onClick"])]),e.shippingOverrides.length>0?(d(),_("div",Zse,[o(v,{data:e.shippingOverrides,size:"small"},{default:r(()=>[o(m,{label:"Country"},{default:r(({row:$})=>[i("div",ene,[i("img",{class:"w-5",src:`https://flagcdn.com/w40/${$.country_code.toLowerCase()}.png`,alt:$.country_code},null,8,tne),i("span",null,h($.country_name),1)])]),_:1}),o(m,{label:"Shipping Rate"},{default:r(({row:$})=>[$.rates&&$.rates.length>0?(d(),_("span",ane,[(d(!0),_(H,null,q($.rates.filter(O=>O.for_shipping>0),(O,D)=>(d(),_("span",{key:D},[M(h(O.for_shipping)+"%",1),D<$.rates.filter(Q=>Q.for_shipping>0).length-1?(d(),_("span",sne,", ")):x("",!0)]))),128))])):(d(),_("span",nne,"No shipping rates"))]),_:1}),o(m,{label:"Actions",width:"100"},{default:r(({row:$})=>[i("div",one,[o(Be,{size:"small",tag:"span",onClick:O=>e.editOssShippingTaxOverride($)},{default:r(()=>[o(Y,{name:"Edit"})]),_:2},1032,["onClick"]),o(Be,{size:"small",tag:"span",onClick:O=>e.deleteOssShippingOverride($)},{default:r(()=>[o(Y,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])):(d(),_("div",lne," No OSS shipping overrides configured "))])):x("",!0)])):e.selectedMethod==="home"?(d(),_("div",rne,[i("div",ine,[a[19]||(a[19]=i("div",{class:"flex items-center gap-2"},[i("img",{src:"https://flagcdn.com/w40/eu.png",alt:"EU Flag",class:"w-6 rounded-sm mr-2"}),i("span",{class:"text-gray-800 font-bold"}," Using home country registration a single EU VAT number for all EU countries. ")],-1)),i("div",Ane,[i("span",dne,h(e.crossBorderSummary.methodLabel)+":",1),M(" "+h(e.crossBorderSummary.country)+" ",1),e.crossBorderSummary.vat?(d(),_("span",une," - VAT "+h(e.crossBorderSummary.vat),1)):x("",!0)]),i("div",cne,[o(A,{type:"primary",link:"",onClick:e.proceedWithCurrentSelection},{default:r(()=>a[18]||(a[18]=[M("Edit",-1)])),_:1,__:[18]},8,["onClick"])])])])):e.selectedMethod==="specific"?(d(),_("div",fne,[i("div",pne,[i("div",null,[M(h(e.configuredSpecificCountriesCount)+" country(ies) configured ",1),a[20]||(a[20]=i("br",null,null,-1)),a[21]||(a[21]=i("p",null,"Specific EU country rates selected.",-1))]),i("div",mne,[o(A,{type:"primary",link:"",onClick:e.proceedWithCurrentSelection},{default:r(()=>a[22]||(a[22]=[M("Edit",-1)])),_:1,__:[22]},8,["onClick"])])])])):x("",!0)])):(d(),_("div",hne,[o(g,{modelValue:e.selectedMethod,"onUpdate:modelValue":a[2]||(a[2]=$=>e.selectedMethod=$),class:"block"},{default:r(()=>[i("div",_ne,[o(b,{label:"oss"},{default:r(()=>a[23]||(a[23]=[M("Collect using a One Stop Shop (OSS) registration",-1)])),_:1,__:[23]}),a[24]||(a[24]=i("p",{class:"text-gray-500 text-xs mt-1"},"Select this option if you have a single EU VAT number for all EU countries.",-1))]),i("div",gne,[o(b,{label:"home"},{default:r(()=>a[25]||(a[25]=[M("Collect using your home country registration",-1)])),_:1,__:[25]}),a[26]||(a[26]=i("p",{class:"text-gray-500 text-xs mt-1"},"Applies to micro-businesses located in one EU country making less than 10,000 in cross-border EU sales yearly.",-1))]),i("div",vne,[o(b,{label:"specific"},{default:r(()=>a[27]||(a[27]=[M("Collect specific country rate",-1)])),_:1,__:[27]}),a[28]||(a[28]=i("p",{class:"text-gray-500 text-xs mt-1"},"Select this option if you want to collect VAT for specific EU countries.",-1))])]),_:1},8,["modelValue"]),i("div",yne,[e.hasExistingSelection?(d(),U(A,{key:0,onClick:a[3]||(a[3]=$=>e.showSelectionEditor=!1),plain:""},{default:r(()=>a[29]||(a[29]=[M("Cancel",-1)])),_:1,__:[29]})):x("",!0),e.selectedMethod!==""?(d(),U(A,{key:1,type:"primary",onClick:e.handleContinueSelection},{default:r(()=>a[30]||(a[30]=[M("Next",-1)])),_:1,__:[30]},8,["onClick"])):x("",!0)])]))])),e.showInlineConfig&&(e.selectedMethod==="oss"||e.selectedMethod==="home")?(d(),_("div",bne,[o(V,{shadow:"never",class:"p-4 rounded-md"},{default:r(()=>[i("div",wne,[o(A,{size:"small",onClick:e.cancelInlineConfig,plain:""},{default:r(()=>a[31]||(a[31]=[M("Back",-1)])),_:1,__:[31]},8,["onClick"]),i("span",Bne,"Configure "+h(e.selectedMethod==="oss"?"OSS":"Home country")+" collection",1)]),i("pre",null,h(e.crossBorderForm),1),o(E,{ref:"crossBorderFormRef",model:e.crossBorderForm,rules:e.crossBorderRules,"label-position":"top",class:"space-y-4"},{default:r(()=>[i("div",null,[e.selectedMethod==="oss"?(d(),_("div",{key:0,shadow:"never",class:ne([{"border-primary":e.crossBorderForm.method==="oss"},"rounded-md p-4 border border-solid border-gray-divider"])},[a[32]||(a[32]=i("div",{class:"font-medium mb-2"},"One Stop Shop (OSS)",-1)),o(S,{gutter:"20"},{default:r(()=>[o(C,{span:12},{default:r(()=>[o(w,{label:"Country of OSS registration",prop:"oss_country"},{default:r(()=>[o(B,{modelValue:e.crossBorderForm.oss_country,"onUpdate:modelValue":a[4]||(a[4]=$=>e.crossBorderForm.oss_country=$),placeholder:"Select country",filterable:""},{default:r(()=>[(d(!0),_(H,null,q(e.countries,$=>(d(),U(F,{key:$.value,label:$.label,value:$.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(C,{span:12},{default:r(()=>[o(w,{label:"VAT number"},{default:r(()=>[o(k,{modelValue:e.crossBorderForm.oss_vat,"onUpdate:modelValue":a[5]||(a[5]=$=>e.crossBorderForm.oss_vat=$),placeholder:"Shown on VAT invoice"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],2)):x("",!0),e.selectedMethod==="home"?(d(),_("div",{key:1,shadow:"never",class:ne([{"border-primary":e.crossBorderForm.method==="home"},"rounded-md p-4 border border-solid border-gray-divider"])},[a[33]||(a[33]=i("div",{class:"font-medium mb-2"},"Home country registration",-1)),a[34]||(a[34]=i("p",{class:"text-gray-500 text-sm mt-1"},"Applies to micro-businesses located in one EU country and making less than 10,000 in sales to other EU countries each year",-1)),o(S,{gutter:"20",class:"mt-3"},{default:r(()=>[o(C,{span:12},{default:r(()=>[o(w,{label:"Country of registration",prop:"home_country"},{default:r(()=>[o(B,{modelValue:e.crossBorderForm.home_country,"onUpdate:modelValue":a[6]||(a[6]=$=>e.crossBorderForm.home_country=$),placeholder:"Select country",filterable:""},{default:r(()=>[(d(!0),_(H,null,q(e.countries,$=>(d(),U(F,{key:$.value,label:$.label,value:$.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(C,{span:12},{default:r(()=>[o(w,{label:"VAT number"},{default:r(()=>[o(k,{modelValue:e.crossBorderForm.home_vat,"onUpdate:modelValue":a[7]||(a[7]=$=>e.crossBorderForm.home_vat=$),placeholder:"Shown on VAT invoice"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],2)):x("",!0)]),i("div",Cne,[o(A,{onClick:e.cancelInlineConfig},{default:r(()=>a[35]||(a[35]=[M("Cancel",-1)])),_:1,__:[35]},8,["onClick"]),o(A,{type:"primary",onClick:e.handleCollectCrossBorder},{default:r(()=>a[36]||(a[36]=[M("Save",-1)])),_:1,__:[36]},8,["onClick"])])]),_:1},8,["model","rules"])]),_:1})])):x("",!0),e.showInlineConfig&&e.selectedMethod==="specific"?(d(),_("div",kne,[o(V,{shadow:"never",class:"p-4 rounded-md"},{default:r(()=>[i("div",Fne,[o(A,{size:"small",onClick:e.cancelInlineConfig,plain:""},{default:r(()=>a[37]||(a[37]=[M("Back",-1)])),_:1,__:[37]},8,["onClick"]),a[38]||(a[38]=i("span",{class:"ml-3 text-sm text-gray-700"},"Collect specific country VAT",-1))]),o(or,{onlyEU:!0,onRefresh:e.refreshSettings},null,8,["onRefresh"]),e.euRatesLoading?(d(),_("div",Une," Loading EU rates ")):(d(),_("div",xne,[a[39]||(a[39]=i("span",{class:"font-medium"},"EU rates available:",-1)),M(" "+h(e.euRatesSummary.totalCountries)+" countries, "+h(e.euRatesSummary.totalRates)+" total rates ",1)])),e.euCountries.length?(d(),_("div",Ene,[a[41]||(a[41]=i("div",{class:"p-3 text-sm font-medium text-gray-700"},"European Union Countries",-1)),i("div",Sne,[(d(!0),_(H,null,q(e.euCountries,($,O)=>(d(),_("div",{key:$.country_code+"-"+O,class:"flex items-center justify-between p-3 hover:bg-gray-50 cursor-pointer transition-colors",onClick:D=>e.manageCountryTaxRates($.country_code)},[i("div",Dne,[i("img",{class:"w-[22px] block",src:"https://flagcdn.com/w40/"+$.country_code.toLowerCase()+".png",alt:"flag"},null,8,$ne),i("span",Ine,h($.country_name),1)]),i("div",Tne,[i("div",Mne,h($.total_rates)+" rates",1),o(A,{type:"danger",size:"small",plain:"",onClick:Ke(D=>e.deleteCountryTaxRate($.country_code),["stop"])},{default:r(()=>a[40]||(a[40]=[M(" Delete ",-1)])),_:2,__:[40]},1032,["onClick"]),o(n,{class:"text-gray-400"},{default:r(()=>[o(p(ma))]),_:1})])],8,Qne))),128))])])):x("",!0)]),_:1})])):x("",!0)])])]),_:1})]),_:1})]),o(Of,{modelValue:e.showAddOssTaxOverrideModal,"onUpdate:modelValue":a[8]||(a[8]=$=>e.showAddOssTaxOverrideModal=$),title:e.overrideModalTitle,countries:e.ossCountryRates,"selected-country-tax-classes":e.selectedCountryTaxClasses,"country-code":e.ossTaxOverrideForm.country_code,"has-valid-overrides":e.hasValidOverrides,onChangeCountry:e.onCountryChange,onSave:e.saveOssTaxOverride,mode:e.overrideMode,class:"fluent-cart-admin-pages","modal-class":"fct-eu-oss-override-modal","append-to-body":!0},null,8,["modelValue","title","countries","selected-country-tax-classes","country-code","has-valid-overrides","onChangeCountry","onSave","mode"])])}}});class One extends gn{getTabs(){return{all:f("All"),active:f("Active"),expired:f("Inactive")}}getToggleableColumns(){return[{label:"Title",value:"title"},{label:"Stackable",value:"stackable"},{label:"Actions",value:"actions"}]}getSortableColumns(){return[{label:f("ID"),value:"id"},{label:f("Title"),value:"title"},{label:f("Code"),value:"code"},{label:f("Amount"),value:"amount"},{label:f("Max Uses"),value:"max_uses"},{label:f("Stackable"),value:"stackable"},{label:f("Status"),value:"status"},{label:f("Expiry Date"),value:"expiry_date"}]}getSearchHint(){return f("Search by id, title, amount, code.")}getFetchUrl(){return"coupons"}parseResponse(e){return e.coupons}getTableName(){return"coupon_table"}getAdvanceFilterOptions(){return null}getSearchGuideOptions(){return[]}with(){return["appliedCouponsCount"]}}function Pf(t){return One.init(t)}const Hne={class:"fct-table-mobile-wrap fct-coupons-table-mobile-wrap"},Rne={class:"fct-table-mobile-header"},Pne={class:"fct-table-mobile-header-left"},Kne={class:"fct-table-id-col"},Nne={class:"fct-table-status-col"},Gne=["onClick"],jne={class:"title"},zne={class:"value"},Yne={key:0,class:"fct-table-action-col"},qne={class:"more-btn pr-0"},Wne={class:"fct-table-mobile-body"},Xne=["onClick"],Jne={key:0,class:"fct-table-coupon-title-col"},Zne={class:"fct-table-coupon-code-col"},eoe=["onClick"],toe={class:"fct-table-mobile-footer"},aoe=["onClick"],soe={class:"fct-table-date-col grid"},noe={class:"title"},ooe={class:"value"},loe={key:0,class:"fct-table-stackable-col"},roe={class:"title"},ioe={class:"value"},Aoe={class:"fct-table-amount-col"},doe={class:"title"},uoe={class:"value"},coe={__name:"CouponsTableMobile",props:{table:{type:Object,required:!0},emptyText:{type:String,default:f("No customers found.")}},setup(t){const e=t,a=n=>{const l=Ce().format("YYYY-MM-DD"),A=Ce(n).format("YYYY-MM-DD");return A==="Invalid date"?!1:A<l},s=n=>{let l=f("Are you sure you want to delete this %s coupon. This action is not recoverable",n.coupon.title);n.action==="delete"&&Pt(l,f("Confirm Delete!"),{confirmButtonText:f("Yes, Delete!"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{te.delete("coupons/"+n.coupon.id).then(A=>{J.success(A.message),e.table.fetch()}).catch(A=>{console.log(A,"err"),J.error(A)}).finally(()=>{})}).catch(()=>{})};return(n,l)=>{const A=y("router-link"),u=y("el-tooltip"),c=y("el-dropdown-item"),m=y("el-dropdown-menu"),v=y("el-dropdown");return d(),_("div",Hne,[(d(!0),_(H,null,q(t.table.getTableData(),(b,g)=>(d(),_("div",{key:b.id,class:"fct-table-mobile-row"},[i("div",Rne,[i("div",Pne,[i("div",Kne,[o(A,{to:{name:"add_or_edit_coupon",params:{coupon_id:b.id}},class:"id"},{default:r(()=>[M(" #"+h(b.id),1)]),_:2},1032,["to"])]),i("div",Nne,[o(dt,{status:b.status},{default:r(()=>[M(h(a(b.end_date)?p(f)("Expired"):b.status),1)]),_:2},1032,["status"]),b.status==="scheduled"?(d(),U(u,{key:0,effect:"dark",placement:"top","popper-class":"fct-label-hint-popover fct-tooltip","show-after":400,"hide-after":0},{content:r(()=>[M(h(p(f)("Available On: %s",p(ws)(b.start_date,!0))),1)]),default:r(()=>[o(Y,{name:"InformationFill",class:"w-4 h-4 flex-none"})]),_:2},1024)):x("",!0)]),i("div",{class:"fct-table-usage-col",onClick:F=>n.$router.push({name:"add_or_edit_coupon",params:{coupon_id:b.id}})},[i("div",jne,h(p(f)("Usage:")),1),i("div",zne,[M(h(b.use_count??0)+" ",1),l[0]||(l[0]=i("span",null,"/",-1)),M(" "+h(b.conditions.max_uses>0?b.conditions.max_uses:p(f)("Unlimited")),1)])],8,Gne)]),t.table.isColumnVisible("actions")?(d(),_("div",Yne,[o(v,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:r(()=>[o(m,null,{default:r(()=>[b.id?(d(),U(c,{key:0,class:"item-link"},{default:r(()=>[o(A,{to:{name:"add_or_edit_coupon",params:{coupon_id:b.id,action:"edit"}}},{default:r(()=>[o(Y,{name:"Edit"}),M(" "+h(p(f)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):x("",!0),o(c,{command:{action:"delete",coupon:b},class:"item-destructive"},{default:r(()=>[o(Y,{name:"Delete"}),M(" "+h(p(f)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[i("span",qne,[o(Y,{name:"More"})])]),_:2},1024)])):x("",!0)]),i("div",Wne,[i("div",{class:"fct-table-coupon-code-wrapper-col",onClick:F=>n.$router.push({name:"add_or_edit_coupon",params:{coupon_id:b.id}})},[t.table.isColumnVisible("title")?(d(),_("div",Jne,h(b.title),1)):x("",!0),i("div",Zne,[i("code",{class:"copyable-content",onClick:F=>{p(Ol).copy(b.code)}},h(b.code),9,eoe)])],8,Xne)]),i("div",toe,[i("div",{class:"fct-table-mobile-footer-row items-start",onClick:F=>n.$router.push({name:"add_or_edit_coupon",params:{coupon_id:b.id}})},[i("div",soe,[i("div",noe,h(p(f)("Expiry Date")),1),i("div",ooe,[isNaN(Date.parse(b.end_date))?(d(),_(H,{key:1},[M("n/a")],64)):(d(),U(Vt,{key:0,"date-time":b.end_date,"with-time":!0},null,8,["date-time"]))])]),t.table.isColumnVisible("stackable")?(d(),_("div",loe,[i("div",roe,h(p(f)("Stackable")),1),i("div",ioe,h(b.stackable),1)])):x("",!0),i("div",Aoe,[i("div",doe,h(p(f)("Amount")),1),i("div",uoe,h(b.type!=="percentage"?p(st)(b.amount,!0):b.amount+"%"),1)])],8,aoe)])]))),128))])}}},foe={},poe={class:"px-4 py-3"},moe={class:"grid grid-cols-3 gap-5 mt-5"};function hoe(t,e){const a=y("el-skeleton-item"),s=y("el-skeleton");return d(),U(s,{animated:""},{template:r(()=>[i("div",poe,[(d(),_(H,null,q(2,n=>i("div",{key:n,class:"flex items-center justify-between mb-3"},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64)),i("div",moe,[(d(),_(H,null,q(3,n=>i("div",{key:n},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const _oe=ye(foe,[["render",hoe]]),goe={class:"fct-all-coupons-page fct-layout-width"},voe={class:"fct-all-coupons-wrap"},yoe={key:1},boe=["onClick"],woe={class:"capitalize"},Boe={class:"more-btn mr-2"},iu={__name:"AllCoupons",setup(t){const e=Pf(),a=T(!1),s=A=>{let u=f("Are you sure you want to delete this %s coupon. This action is not recoverable",A.coupon.title);A.action==="delete"&&Pt(u,f("Confirm Delete!"),{confirmButtonText:f("Yes, Delete!"),cancelButtonText:f("Cancel"),type:"warning"}).then(()=>{te.delete("coupons/"+A.coupon.id).then(c=>{J.success(c.message),e.fetch()}).catch(c=>{var m;c.status_code=="422"?J.validationErrors(c):J.error((m=c.data)==null?void 0:m.message)}).finally(()=>{})}).catch(()=>{})},n=()=>{te.get("coupons/getSettings").then(A=>{a.value=!!parseInt(A.show_on_checkout)}).catch(A=>{var u;A.status_code=="422"?J.validationErrors(A):J.error((u=A.data)==null?void 0:u.message)}).finally(()=>{})},l=A=>{const u=Ce().format("YYYY-MM-DD"),c=Ce(A).format("YYYY-MM-DD");return c==="Invalid date"?!1:c<u};return pe(()=>{n()}),(A,u)=>{const c=y("el-button"),m=y("el-table-column"),v=y("el-tooltip"),b=y("router-link"),g=y("el-dropdown-item"),F=y("el-dropdown-menu"),B=y("el-dropdown"),w=y("el-table");return d(),U(et,{permission:"coupons/view"},{default:r(()=>[i("div",goe,[o(Ps,{title:p(f)("Coupons")},{action:r(()=>[o(c,{tag:"router-link",type:"primary",to:{name:"add_or_edit_coupon"}},{default:r(()=>[M(h(p(f)("Add Coupon")),1)]),_:1})]),_:1},8,["title"]),i("div",voe,[o(vn,{table:p(e),"has-mobile-slot":!0},{mobile:r(()=>[p(e).isLoading()?(d(),U(_oe,{key:0})):x("",!0),p(e).isLoading()?x("",!0):(d(),U(coe,{key:1,table:p(e)},null,8,["table"]))]),default:r(()=>[p(e).isLoading()?(d(),U(Lee,{key:0,couponTable:p(e),"next-page-count":p(e).nextPageCount},null,8,["couponTable","next-page-count"])):(d(),_("div",yoe,[o(w,{data:p(e).getTableData(),class:"w-full compact-table full-compact"},{empty:r(()=>[o(Le,{icon:"Empty/Order","has-dark":"",text:p(f)("No coupons available at the moment.")},null,8,["text"])]),default:r(()=>[o(m,{width:100,label:p(f)("ID")},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:C.row.id}}},{default:r(()=>[M(" #"+h(p(Mt)(C.row.id)),1)]),_:2},1032,["to"])]),_:1},8,["label"]),p(e).isColumnVisible("title")?(d(),U(m,{key:0,label:p(f)("Title"),width:220},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:C.row.id,action:"edit"}}},{default:r(()=>[M(h(C.row.title),1)]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),o(m,{label:p(f)("Code"),width:200},{default:r(C=>[i("code",{class:"copyable-content",onClick:k=>{p(Ol).copy(C.row.code)}},h(C.row.code),9,boe)]),_:1},8,["label"]),o(m,{label:p(f)("Amount"),width:120},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:C.row.id,action:"edit"}}},{default:r(()=>[M(h(C.row.type!=="percentage"?p(st)(C.row.amount,!0):C.row.amount+"%"),1)]),_:2},1032,["to"])]),_:1},8,["label"]),o(m,{label:p(f)("Usage"),width:150},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:C.row.id,action:"edit"}}},{default:r(()=>[i("span",null,h(C.row.use_count??0),1),u[0]||(u[0]=i("span",{class:"px-1"},"/",-1)),i("span",null,h(C.row.conditions.max_uses>0?C.row.conditions.max_uses:p(f)("Unlimited")),1)]),_:2,__:[0]},1032,["to"])]),_:1},8,["label"]),p(e).isColumnVisible("stackable")?(d(),U(m,{key:1,label:p(f)("Stackable"),width:120},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:C.row.id,action:"edit"}}},{default:r(()=>[i("span",woe,h(C.row.stackable),1)]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),o(m,{label:p(f)("Status"),width:120},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:C.row.id,action:"edit"}}},{default:r(()=>[o(dt,{status:C.row.status},{default:r(()=>[M(h(l(C.row.end_date)?p(f)("Expired"):C.row.status),1)]),_:2},1032,["status"]),C.row.status==="scheduled"?(d(),U(v,{key:0,effect:"dark",placement:"top","popper-class":"fct-label-hint-popover fct-tooltip","show-after":400,"hide-after":0},{content:r(()=>[M(h(p(f)("Available On: %s",p(ws)(C.row.start_date,!0))),1)]),default:r(()=>[o(Y,{name:"InformationFill",class:"w-4 h-4 flex-none"})]),_:2},1024)):x("",!0)]),_:2},1032,["to"])]),_:1},8,["label"]),o(m,{label:p(f)("Expiry Date"),width:120},{default:r(C=>[o(vt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:C.row.id,action:"edit"}}},{default:r(()=>[i("span",null,[isNaN(Date.parse(C.row.end_date))?(d(),_(H,{key:1},[M("n/a")],64)):(d(),U(Vt,{key:0,"date-time":C.row.end_date,"with-time":!0},null,8,["date-time"]))])]),_:2},1032,["to"])]),_:1},8,["label"]),p(e).isColumnVisible("actions")?(d(),U(m,{key:2,label:p(f)("Actions"),width:100,align:"right",fixed:"right"},{default:r(C=>[o(B,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:r(()=>[o(F,null,{default:r(()=>[C.row.id?(d(),U(g,{key:0,class:"item-link"},{default:r(()=>[o(b,{to:{name:"add_or_edit_coupon",params:{coupon_id:C.row.id,action:"edit"}}},{default:r(()=>[o(Y,{name:"Edit"}),M(" "+h(p(f)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):x("",!0),o(g,{command:{action:"delete",coupon:C.row},class:"item-destructive"},{default:r(()=>[o(Y,{name:"Delete"}),M(" "+h(p(f)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[i("span",Boe,[o(Y,{name:"More"})])]),_:2},1024)]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])]))]),_:1},8,["table"])])])]),_:1})}}},Coe={class:"fct-add-edit-coupon-wrapper fct-layout-width"},koe={class:"single-page-header"},Foe={class:"single-page-body"},xoe={class:"fct-add-edit-coupon"},Uoe={class:"fct-add-edit-coupon-main"},Eoe={class:"fct-add-edit-coupon-aside"},Soe={class:"fct-admin-sidebar"},Qoe={__name:"SingleCouponLoader",setup(t){return(e,a)=>{const s=y("el-skeleton-item"),n=y("el-skeleton"),l=y("el-breadcrumb-item"),A=y("el-breadcrumb");return d(),_("div",Coe,[i("div",koe,[o(A,{"separator-icon":p(ma)},{default:r(()=>[o(l,null,{default:r(()=>[o(n,{animated:!0},{template:r(()=>[o(s,{variant:"p",class:"w-[90px] h-4"})]),_:1})]),_:1}),o(l,null,{default:r(()=>[o(n,{animated:!0},{template:r(()=>[o(s,{variant:"p",class:"w-[90px] h-4"})]),_:1})]),_:1}),o(l,null,{default:r(()=>[o(n,{animated:!0},{template:r(()=>[o(s,{variant:"p",class:"w-[60px] h-4"})]),_:1})]),_:1})]),_:1},8,["separator-icon"])]),i("div",Foe,[i("div",xoe,[i("div",Uoe,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Basic Information"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:!0,class:"flex flex-col gap-3"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"}),o(s,{variant:"p",class:"max-w-[400px] h-4"}),o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{title:p(f)("Discount Value"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:!0,class:"flex flex-col gap-3"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"}),o(s,{variant:"p",class:"max-w-[400px] h-4"}),o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{title:p(f)("Schedule"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:!0,class:"flex flex-col gap-3"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"}),o(s,{variant:"p",class:"max-w-[400px] h-4"}),o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{title:p(f)("Maximum Discount Uses"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:!0,class:"flex flex-col gap-3"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),o(se,null,{default:r(()=>[o(le,{title:p(f)("Additional Information"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:!0,class:"flex flex-col gap-3"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"}),o(s,{variant:"p",class:"max-w-[400px] h-4"}),o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"}),o(s,{variant:"p",class:"max-w-[400px] h-4"}),o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1})]),i("div",Eoe,[i("div",Soe,[o(se,null,{default:r(()=>[o(le,{title:p(f)("Summary"),border_bottom:"",title_size:"small"},null,8,["title"]),o(ae,null,{default:r(()=>[o(n,{animated:!0,class:"flex flex-col gap-3"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1})])])])])])}}};Ce.extend(Eu);Ce.extend(Su);const Doe={name:"AddOrEditCoupon",props:{coupon_id:{type:[String,Number],required:!0}},components:{CardContainer:se,CardHeader:le,CardBody:ae,LabelHint:Ze,ValidationError:rt,CopyToClipboard:Ca,DynamicTemplates:Bn,SaveBar:yn,ProductVariationSelector:jp,SingleCouponLoader:Qoe,Activity:Cf},data(){return{changes_made:0,creating:!1,updating:!1,keyboardShortcuts:null,coupon:{type:"fixed",status:"active",stackable:"no",show_on_checkout:"no",title:"",code:"",priority:0,amount:0,start_date:"",end_date:"",notes:"",conditions:{buy_quantity:1,get_quantity:1,excluded_categories:[],included_categories:[],excluded_products:[],included_products:[],min_purchase_amount:"",max_purchase_amount:"",allowed_user_ids:[],allowed_user_roles:[],apply_to_quantity:"no",apply_to_whole_cart:"yes",max_per_customer:"",max_discount_amount:"",max_uses:"",buy_products:[],get_products:[]}},validationErrors:{},minQuantity:1,maxQuantity:100,minPurchaseAmount:0,maxPurchaseAmount:1e4,minDiscountAmount:0,minLimit:0,maxLimit:1e3,categories:[],usageError:!1,isEndDateEnabled:!1,fetchingCoupon:!1,isInitialLoading:!1,showDynamicTemplates:!1,showManageActivity:!1}},methods:{translate:f,generateRandomCouponCode(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let a=0;a<8;a++)e+=t.charAt(Math.floor(Math.random()*t.length));this.coupon.code=e},onChangeCouponInput(t,e){if(e=parseInt(e),isNaN(e)||e===""){this.coupon[t]="";return}if(t==="priority"&&(e<0||e>100)){this.coupon[t]=0;return}if((t==="buy_quantity"||t==="get_quantity")&&(e<this.minQuantity||e>this.maxQuantity)){this.coupon[t]=this.minQuantity;return}if((t==="min_purchase_amount"||t==="max_discount_amount")&&(e<this.minPurchaseAmount||e>this.maxPurchaseAmount)){this.coupon.conditions[t]=this.minPurchaseAmount;return}if(t==="amount"){if(this.coupon.type==="fixed"&&(e<this.minDiscountAmount||e>this.maxDiscountAmount)){this.coupon[t]=this.minDiscountAmount;return}if(this.coupon.type==="percentage"&&(e<this.minDiscountAmount||e>this.maxDiscountAmount)){this.coupon[t]=this.minDiscountAmount;return}}if((t==="max_uses"||t==="max_per_customer")&&(e<this.minLimit||e>this.maxLimit)){this.coupon[t]=this.minLimit;return}},preventInvalidChars(t,e=!1){let a=["-",".","+"];e&&(a=["-","+"]),a.includes(t.key)&&t.preventDefault()},handleChangesMade(){this.changes_made++},setDefaultStatus(){const t=new Date,e=this.coupon.start_date?new Date(this.coupon.start_date):null,a=this.coupon.end_date?new Date(this.coupon.end_date):null;this.coupon.status!=="disabled"&&(a===null&&(this.isEndDateEnabled=!1),!e&&!a?this.coupon.status="active":e&&t<e?this.coupon.status="scheduled":a&&t>a?this.coupon.status="expired":this.coupon.status="active")},disabledStartDate(t){const e=new Date;return e.setHours(0,0,0,0),t&&t.getTime()<e.getTime()},disabledEndDate(t){const e=this.coupon.start_date?new Date(this.coupon.start_date):new Date;return e.setHours(0,0,0,0),t&&t.getTime()<e.getTime()},formatDate(t){return!t||t==="0000-00-00 00:00:00"?null:Ce(t).format("YYYY-MM-DD HH:mm:ssZ")},formatAmount(){this.coupon.amount!==null&&(this.coupon.type!=="percentage"&&(this.coupon.amount=st(this.coupon.amount,!1)),this.coupon.conditions.min_purchase_amount!==null&&(this.coupon.conditions.min_purchase_amount?this.coupon.conditions.min_purchase_amount=st(this.coupon.conditions.min_purchase_amount,!1):this.coupon.conditions.min_purchase_amount=""),this.coupon.conditions.max_discount_amount!==null&&(this.coupon.conditions.max_discount_amount?this.coupon.conditions.max_discount_amount=st(this.coupon.conditions.max_discount_amount,!1):this.coupon.conditions.max_discount_amount=""),this.coupon.conditions.max_purchase_amount||(this.coupon.conditions.max_purchase_amount=""),this.coupon.conditions.max_uses||(this.coupon.conditions.max_uses=""),this.coupon.conditions.max_per_customer||(this.coupon.conditions.max_per_customer=""),this.coupon.conditions.min_purchase_amount||(this.coupon.conditions.min_purchase_amount=""))},parseProductIds(t){return Array.isArray(t)?t.map(e=>parseInt(e,10)):[]},reloadPage(){return window.location.reload()},validateAndFormatDate(t){let e=this.formatDate(t);return e!==null&&e!=="Invalid date"?e:null},validateDate(){this.coupon.start_date=this.validateAndFormatDate(this.coupon.start_date),this.coupon.end_date=this.validateAndFormatDate(this.coupon.end_date)},fetchTerms(){te.get("products/fetch-term").then(t=>{this.categories=t.taxonomies["product-categories"].terms}).catch(t=>{var e;t.status_code=="422"?J.validationErrors(t):J.error((e=t.data)==null?void 0:e.message)}).finally(()=>{})},fetchCoupon(){this.fetchingCoupon=!0,this.isInitialLoading=!0,te.get(`coupons/${this.coupon_id}`,{}).then(t=>{var s,n;const e=(s=t==null?void 0:t.coupon)==null?void 0:s.start_date,a=(n=t==null?void 0:t.coupon)==null?void 0:n.end_date;e&&e!=="0000-00-00 00:00:00"&&(t.coupon.start_date=Ce.utc(e).tz(Ce.tz.guess()).format("YYYY-MM-DD HH:mm:ss")),a&&a!=="0000-00-00 00:00:00"&&(t.coupon.end_date=Ce.utc(a).tz(Ce.tz.guess()).format("YYYY-MM-DD HH:mm:ss")),t=t.coupon,this.coupon=t,this.coupon.start_date=this.formatDate(this.coupon.start_date),this.coupon.end_date=this.formatDate(this.coupon.end_date),this.coupon.end_date!==null&&(this.isEndDateEnabled=!0),this.coupon.end_date=this.coupon.end_date!==null&&this.coupon.end_date!=="Invalid date"?this.coupon.end_date:null,this.coupon.conditions.excluded_products=this.parseProductIds(t.conditions.excluded_products),this.coupon.conditions.included_products=this.parseProductIds(t.conditions.included_products),this.formatAmount(),this.setDefaultStatus(),this.showDynamicTemplates=!0}).catch(t=>{var e;errors.status_code=="422"?J.validationErrors(errors):J.error((e=errors.data)==null?void 0:e.message),console.error("Error fetching coupon: ",t)}).finally(()=>{this.fetchingCoupon=!1,this.isInitialLoading=!1,this.changes_made=0})},updateCoupon(){var t,e;this.updating=!0,this.validateDate(),(t=this.$refs.dynamic_templates)==null||t.beforeUpdatingData({data:{coupon:this.coupon}}),te.put(`coupons/${this.coupon_id}`,{...this.coupon,metaValue:(e=this.$refs.dynamic_templates)==null?void 0:e.getFormStates()}).then(a=>{var s;(s=this.$refs.dynamic_templates)==null||s.afterUpdatingData({coupon:this.coupon,response:a}),J.success(a.message),this.validationErrors={},this.setDefaultStatus(),this.changes_made=0}).catch(a=>{var s;a.status_code=="422"?(J.validationErrors(a),this.validationErrors=a):J.error((s=a.data)==null?void 0:s.message)}).finally(()=>{this.updating=!1,this.changes_made=0})},addCoupon(){var t,e;this.creating=!0,this.validateDate(),(t=this.$refs.dynamic_templates)==null||t.beforeUpdatingData({data:{coupon:this.coupon}}),te.post("coupons",{...this.coupon,metaValue:(e=this.$refs.dynamic_templates)==null?void 0:e.getFormStates()}).then(a=>{var s;(s=this.$refs.dynamic_templates)==null||s.afterUpdatingData({coupon:this.coupon,response:a}),J.success(a.message),this.$router.push({name:"coupons"}),this.validationErrors={}}).catch(a=>{var s;a.status_code=="422"?(J.validationErrors(a),this.validationErrors=a):J.error((s=a.data)==null?void 0:s.message)}).finally(()=>{this.creating=!1})}},computed:{ArrowRight(){return ma},maxDiscountAmount(){return this.coupon.type==="percentage"?100:999999}},watch:{coupon:{handler(){this.handleChangesMade()},deep:!0}},mounted(){this.keyboardShortcuts=ro(),this.fetchTerms(),this.coupon_id?(this.fetchCoupon(),this.keyboardShortcuts.bind(["mod+s"],t=>{t.preventDefault(),this.updateCoupon()}),window.onbeforeunload=()=>{if(this.changes_made>1)return!0}):this.keyboardShortcuts.bind(["mod+s"],t=>{t.preventDefault(),this.addCoupon()})},beforeRouteLeave(t,e,a){var s;(s=this.keyboardShortcuts)!=null&&s.unbind&&this.keyboardShortcuts.unbind("mod+s"),a()}},$oe={class:"fct-add-edit-coupon-wrapper fct-layout-width"},Ioe={class:"single-page-header"},Toe={class:"single-page-body"},Moe={class:"fct-add-edit-coupon"},Voe={class:"fct-add-edit-coupon-main"},Loe={class:"flex gap-2 items-center justify-between w-full mb-2.5"},Ooe={class:"form-note"},Hoe=["innerHTML"],Roe={key:1},Poe=["innerHTML"],Koe=["innerHTML"],Noe=["innerHTML"],Goe={class:"fct-add-edit-coupon-aside"},joe={class:"fct-admin-sidebar"},zoe={class:"fct-admin-sidebar-item"},Yoe={key:0,class:"flex items-center gap-1"},qoe={class:"text-sm font-medium text-system-dark dark:text-gray-300"},Woe={key:1},Xoe={class:"fct-admin-sidebar-item mt-5 hidden"},Joe={class:"sidebar-title mb-3"},Zoe={class:"fct-bullet-lists"},ele={class:"fct-admin-sidebar-item mt-5 hidden"},tle={class:"sidebar-title mb-3"},ale={class:"fct-bullet-lists"},sle={key:0};function nle(t,e,a,s,n,l){const A=y("SaveBar"),u=y("SingleCouponLoader"),c=y("el-breadcrumb-item"),m=y("el-breadcrumb"),v=y("CardHeader"),b=y("el-input"),g=y("validation-error"),F=y("el-form-item"),B=y("el-col"),w=y("LabelHint"),C=y("el-row"),k=y("CardBody"),S=y("CardContainer"),E=y("el-option"),V=y("el-select"),$=y("ProductVariationSelector"),O=y("el-radio"),D=y("el-radio-group"),Q=y("el-form"),I=y("CopyToClipboard"),L=y("el-date-picker"),K=y("el-checkbox"),N=y("DynamicTemplates"),W=y("Activity");return d(),_("div",$oe,[o(A,{isActive:n.changes_made>0?"is-active":"",loading:a.coupon_id?n.updating:n.creating,onSave:e[0]||(e[0]=R=>a.coupon_id?l.updateCoupon():l.addCoupon()),onDiscard:l.reloadPage,"show-cmnd-icon":!0,saveButtonText:a.coupon_id?l.translate("Update"):l.translate("Create"),loadingText:a.coupon_id?l.translate("Updating"):l.translate("Creating")},null,8,["isActive","loading","onDiscard","saveButtonText","loadingText"]),n.fetchingCoupon?(d(),U(u,{key:0})):x("",!0),n.fetchingCoupon?x("",!0):(d(),_(H,{key:1},[i("div",Ioe,[o(m,{"separator-icon":l.ArrowRight},{default:r(()=>[o(c,{to:{name:"coupons"}},{default:r(()=>[M(h(l.translate("Coupons")),1)]),_:1}),o(c,null,{default:r(()=>[M(h(a.coupon_id?l.translate("Edit Coupon"):l.translate("Add Coupon")),1)]),_:1}),a.coupon_id?(d(),U(c,{key:0},{default:r(()=>[M(h(n.coupon.title),1)]),_:1})):x("",!0)]),_:1},8,["separator-icon"])]),i("div",Toe,[i("div",Moe,[i("div",Voe,[o(Q,{model:n.coupon,"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(S,null,{default:r(()=>[o(v,{title:l.translate("Basic Information"),border_bottom:"",title_size:"small"},null,8,["title"]),o(k,{class:"pb-1.5"},{default:r(()=>[o(C,{gutter:20},{default:r(()=>[o(B,{lg:24},{default:r(()=>[o(F,{label:l.translate("Title"),required:""},{default:r(()=>{var R,ee;return[o(b,{modelValue:n.coupon.title,"onUpdate:modelValue":e[1]||(e[1]=oe=>n.coupon.title=oe),placeholder:l.translate("Enter title"),class:ne((R=n.validationErrors)!=null&&R.hasOwnProperty("title")?"is-error":""),maxlength:"50",id:"title"},null,8,["modelValue","placeholder","class"]),(ee=n.validationErrors)!=null&&ee.hasOwnProperty("title")?(d(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"title"},null,8,["validation-errors"])):x("",!0)]}),_:1},8,["label"])]),_:1}),o(B,{lg:12},{default:r(()=>[o(F,null,{default:r(()=>{var R,ee;return[i("div",Loe,[o(w,{title:l.translate("Code"),required:""},null,8,["title"]),i("span",{class:"text-system-dark text-xs cursor-pointer hover:underline dark:text-gray-50 underline",onClick:e[2]||(e[2]=(...oe)=>l.generateRandomCouponCode&&l.generateRandomCouponCode(...oe))},h(l.translate("Generate Random Code")),1)]),o(b,{modelValue:n.coupon.code,"onUpdate:modelValue":e[3]||(e[3]=oe=>n.coupon.code=oe),placeholder:l.translate("Eg. COUPON10"),class:ne((R=n.validationErrors)!=null&&R.hasOwnProperty("code")?"is-error":""),maxlength:"20"},null,8,["modelValue","placeholder","class"]),(ee=n.validationErrors)!=null&&ee.hasOwnProperty("code")?(d(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"code"},null,8,["validation-errors"])):x("",!0),i("div",Ooe,[i("p",null,h(l.translate("Customers must enter this code at checkout.")),1)])]}),_:1})]),_:1}),o(B,{lg:12},{default:r(()=>[o(F,null,{label:r(()=>[o(w,{title:l.translate("Coupon Priority"),content:l.translate("Coupons will be calculated based on their priority. The lower the number the higher the priority is.")},null,8,["title","content"])]),default:r(()=>{var R,ee;return[o(b,{modelValue:n.coupon.priority,"onUpdate:modelValue":e[4]||(e[4]=oe=>n.coupon.priority=oe),type:"number",placeholder:l.translate("Enter priority"),class:ne((R=n.validationErrors)!=null&&R.hasOwnProperty("priority")?"is-error":""),min:"0",max:"100",onInput:e[5]||(e[5]=oe=>{l.onChangeCouponInput("priority",oe)}),onKeypress:l.preventInvalidChars},null,8,["modelValue","placeholder","class","onKeypress"]),(ee=n.validationErrors)!=null&&ee.hasOwnProperty("priority")?(d(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"priority"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(S,null,{default:r(()=>[o(v,{title:l.translate("Discount Details"),border_bottom:"",title_size:"small"},null,8,["title"]),o(k,{class:"pb-1.5"},{default:r(()=>[o(C,{gutter:20},{default:r(()=>[o(B,{lg:8},{default:r(()=>[o(F,{label:l.translate("Type"),required:""},{default:r(()=>{var R;return[o(V,{modelValue:n.coupon.type,"onUpdate:modelValue":e[6]||(e[6]=ee=>n.coupon.type=ee),placeholder:l.translate("Select coupon type"),class:ne((R=n.validationErrors)!=null&&R.hasOwnProperty("type")?"is-error":""),"default-first-option":""},{default:r(()=>[o(E,{label:l.translate("Fixed"),value:"fixed"},null,8,["label"]),o(E,{label:l.translate("Percentage"),value:"percentage"},null,8,["label"])]),_:1},8,["modelValue","placeholder","class"])]}),_:1},8,["label"])]),_:1}),n.coupon.type==="fixed"||n.coupon.type==="percentage"?(d(),_(H,{key:0},[o(B,{lg:8},{default:r(()=>[o(F,{label:n.coupon.type==="percentage"?l.translate("Discount Percentage (%)"):l.translate("Discount Amount"),required:""},{default:r(()=>{var R;return[o(b,{modelValue:n.coupon.amount,"onUpdate:modelValue":e[7]||(e[7]=ee=>n.coupon.amount=ee),type:"number",placeholder:"0.00",min:n.minDiscountAmount,max:l.maxDiscountAmount,step:"0.01",onInput:e[8]||(e[8]=ee=>{l.onChangeCouponInput("amount",ee)}),onKeypress:e[9]||(e[9]=ee=>l.preventInvalidChars(ee,!0))},{prefix:r(()=>[n.coupon.type==="fixed"?(d(),_("span",{key:0,innerHTML:t.appVars.shop.currency_sign},null,8,Hoe)):(d(),_("span",Roe,"%"))]),_:1},8,["modelValue","min","max"]),(R=n.validationErrors)!=null&&R.hasOwnProperty("amount")?(d(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"amount"},null,8,["validation-errors"])):x("",!0)]}),_:1},8,["label"])]),_:1}),n.coupon.type==="percentage"?(d(),U(B,{key:0,lg:8},{default:r(()=>[o(F,{label:l.translate("Max Discount Amount")},{default:r(()=>{var R;return[o(b,{modelValue:n.coupon.conditions.max_discount_amount,"onUpdate:modelValue":e[10]||(e[10]=ee=>n.coupon.conditions.max_discount_amount=ee),type:"number",placeholder:l.translate("leave empty or 0 for no max limit"),class:ne((R=n.validationErrors)!=null&&R.hasOwnProperty("max_discount_amount")?"is-error":"")},{prefix:r(()=>[i("span",{innerHTML:t.appVars.shop.currency_sign},null,8,Poe)]),_:1},8,["modelValue","placeholder","class"]),o(g,{"validation-errors":n.validationErrors,"field-key":"max_discount_amount"},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1})):x("",!0)],64)):x("",!0)]),_:1})]),_:1})]),_:1}),o(S,null,{default:r(()=>[o(v,{title:l.translate("Usage Restrictions"),border_bottom:"",title_size:"small"},null,8,["title"]),o(k,{class:"pb-1.5"},{default:r(()=>[o(C,{gutter:20},{default:r(()=>[o(B,{lg:12},{default:r(()=>[o(F,null,{label:r(()=>[o(w,{title:l.translate("Min Spend Amount"),content:l.translate("Minimum spend (subtotal) allowed to use the coupon.")},null,8,["title","content"])]),default:r(()=>{var R,ee;return[o(b,{modelValue:n.coupon.conditions.min_purchase_amount,"onUpdate:modelValue":e[11]||(e[11]=oe=>n.coupon.conditions.min_purchase_amount=oe),type:"number",placeholder:"0.00",class:ne((R=n.validationErrors)!=null&&R.hasOwnProperty("min_purchase_amount")?"is-error":"")},{prefix:r(()=>[i("span",{innerHTML:t.appVars.shop.currency_sign},null,8,Koe)]),_:1},8,["modelValue","class"]),(ee=n.validationErrors)!=null&&ee.hasOwnProperty("min_purchase_amount")?(d(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"min_purchase_amount"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1}),o(B,{lg:12},{default:r(()=>[o(F,null,{label:r(()=>[o(w,{title:l.translate("Max Spend Amount"),content:l.translate("Set the maximum spend (subtotal) allowed when using the coupon.")},null,8,["title","content"])]),default:r(()=>{var R,ee;return[o(b,{modelValue:n.coupon.conditions.max_purchase_amount,"onUpdate:modelValue":e[12]||(e[12]=oe=>n.coupon.conditions.max_purchase_amount=oe),type:"number",placeholder:l.translate("leave empty or 0 for no max limit"),class:ne((R=n.validationErrors)!=null&&R.hasOwnProperty("max_purchase_amount")?"is-error":"")},{prefix:r(()=>[i("span",{innerHTML:t.appVars.shop.currency_sign},null,8,Noe)]),_:1},8,["modelValue","placeholder","class"]),(ee=n.validationErrors)!=null&&ee.hasOwnProperty("max_purchase_amount")?(d(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"max_purchase_amount"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1}),o(B,{md:12},{default:r(()=>[o(F,{label:l.translate("Include Categories")},{default:r(()=>[o(V,{modelValue:n.coupon.conditions.included_categories,"onUpdate:modelValue":e[13]||(e[13]=R=>n.coupon.conditions.included_categories=R),multiple:"",placeholder:l.translate("Any Category"),filterable:"",remote:"","reserve-keyword":!1},{default:r(()=>[(d(!0),_(H,null,q(n.categories,R=>(d(),U(E,{key:R.value,label:R.label,value:R.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(B,{md:12},{default:r(()=>[o(F,{label:l.translate("Exclude Categories")},{default:r(()=>[o(V,{modelValue:n.coupon.conditions.excluded_categories,"onUpdate:modelValue":e[14]||(e[14]=R=>n.coupon.conditions.excluded_categories=R),multiple:"",placeholder:l.translate("No Categories"),filterable:"",remote:"","reserve-keyword":!1},{default:r(()=>[(d(!0),_(H,null,q(n.categories,R=>(d(),U(E,{key:R.value,label:R.label,value:R.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(B,{md:24},{default:r(()=>[o(F,{label:l.translate("Include Products")},{default:r(()=>[o($,{modelValue:n.coupon.conditions.included_products,"onUpdate:modelValue":e[15]||(e[15]=R=>n.coupon.conditions.included_products=R)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(B,{md:24},{default:r(()=>[o(F,{label:l.translate("Excluded Products")},{default:r(()=>[o($,{modelValue:n.coupon.conditions.excluded_products,"onUpdate:modelValue":e[16]||(e[16]=R=>n.coupon.conditions.excluded_products=R)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(B,{md:24},{default:r(()=>[o(F,null,{label:r(()=>[o(w,{title:l.translate("By Email Address"),content:l.translate("List of email addresses that can use the coupon. Separate multiple emails with commas. You may also use regular expressions.")},null,8,["title","content"])]),default:r(()=>{var R;return[o(b,{autocomplete:"off",modelValue:n.coupon.conditions.email_restrictions,"onUpdate:modelValue":e[17]||(e[17]=ee=>n.coupon.conditions.email_restrictions=ee),type:"text",placeholder:l.translate("email1@domain.com, *@special.com, ... or regex pattern")},null,8,["modelValue","placeholder"]),(R=n.validationErrors)!=null&&R.hasOwnProperty("email_restrictions")?(d(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"email_restrictions"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(S,null,{default:r(()=>[o(v,{title:l.translate("Maximum Discount Uses"),border_bottom:"",title_size:"small"},null,8,["title"]),o(k,{class:"pb-1.5"},{default:r(()=>[o(C,{gutter:20},{default:r(()=>[o(B,{lg:12},{default:r(()=>[o(F,null,{label:r(()=>[o(w,{title:l.translate("Total Limit"),content:l.translate("Total number of times this coupon can be redeemed across the entire store.")},null,8,["title","content"])]),default:r(()=>{var R,ee;return[o(b,{modelValue:n.coupon.conditions.max_uses,"onUpdate:modelValue":e[18]||(e[18]=oe=>n.coupon.conditions.max_uses=oe),type:"number",placeholder:l.translate("Total limit"),class:ne((R=n.validationErrors)!=null&&R.hasOwnProperty("max_uses")?"is-error":n.usageError),min:n.minLimit,max:n.maxLimit,onInput:e[19]||(e[19]=oe=>{l.onChangeCouponInput("max_uses",oe)}),onKeypress:l.preventInvalidChars},null,8,["modelValue","placeholder","class","min","max","onKeypress"]),(ee=n.validationErrors)!=null&&ee.hasOwnProperty("max_uses")?(d(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"max_uses"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1}),o(B,{lg:12},{default:r(()=>[o(F,null,{label:r(()=>[o(w,{title:l.translate("Per User Limit"),content:l.translate("Maximum an user can use. 0 means unlimited")},null,8,["title","content"])]),default:r(()=>[o(b,{modelValue:n.coupon.conditions.max_per_customer,"onUpdate:modelValue":e[20]||(e[20]=R=>n.coupon.conditions.max_per_customer=R),type:"number",placeholder:l.translate("Max limit per user"),class:ne(n.validationErrors.hasOwnProperty("max_per_customer")?"is-error":""),min:n.minLimit,max:n.maxLimit,onInput:e[21]||(e[21]=R=>{l.onChangeCouponInput("max_per_customer",R)}),onKeypress:l.preventInvalidChars},null,8,["modelValue","placeholder","class","min","max","onKeypress"]),o(g,{"validation-errors":n.validationErrors,"field-key":"max_per_customer"},null,8,["validation-errors"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(S,null,{default:r(()=>[o(v,{title:l.translate("Additional Information"),border_bottom:"",title_size:"small"},null,8,["title"]),o(k,{class:"pb-1.5"},{default:r(()=>[o(C,{gutter:20},{default:r(()=>[o(B,{lg:24},{default:r(()=>[o(F,{label:l.translate("Status")},{default:r(()=>[o(D,{modelValue:n.coupon.status,"onUpdate:modelValue":e[22]||(e[22]=R=>n.coupon.status=R)},{default:r(()=>[o(O,{value:"active",label:l.translate("Active")},null,8,["label"]),o(O,{value:"disabled",label:l.translate("Disabled")},null,8,["label"]),o(O,{disabled:"",value:"expired",label:l.translate("Expired")},null,8,["label"])]),_:1},8,["modelValue"]),o(g,{"validation-errors":n.validationErrors,"field-key":"status"},null,8,["validation-errors"])]),_:1},8,["label"])]),_:1}),o(B,{lg:24},{default:r(()=>[o(F,{label:l.translate("Internal Notes")},{default:r(()=>{var R;return[o(b,{modelValue:n.coupon.notes,"onUpdate:modelValue":e[23]||(e[23]=ee=>n.coupon.notes=ee),type:"textarea",placeholder:l.translate("Enter note"),class:ne((R=n.validationErrors)!=null&&R.hasOwnProperty("notes")?"is-error":"")},null,8,["modelValue","placeholder","class"]),o(g,{"validation-errors":n.validationErrors,"field-key":"notes"},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1}),o(B,{lg:24},{default:r(()=>{var R;return[o(F,null,{label:r(()=>[o(w,{title:l.translate("Stackable"),content:l.translate("Yes means the coupon can be applied with other coupons")},null,8,["title","content"])]),default:r(()=>[o(D,{modelValue:n.coupon.stackable,"onUpdate:modelValue":e[24]||(e[24]=ee=>n.coupon.stackable=ee)},{default:r(()=>[o(O,{value:"yes"},{default:r(()=>[M(h(l.translate("Yes")),1)]),_:1}),o(O,{value:"no"},{default:r(()=>[M(h(l.translate("No")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(R=n.validationErrors)!=null&&R.hasOwnProperty("stackable")?(d(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"stackable"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),i("div",Goe,[i("div",joe,[o(S,null,{default:r(()=>[o(v,{title:l.translate("Summary"),border_bottom:"",title_size:"small"},null,8,["title"]),o(k,null,{default:r(()=>[i("div",zoe,[n.coupon.code?(d(),_("div",Yoe,[i("span",qoe,h(l.translate("Coupon code"))+": "+h(n.coupon.code),1),o(I,{text:n.coupon.code,showMode:"basic_copy_btn",tooltipText:l.translate("Copy discount code")},null,8,["text","tooltipText"])])):(d(),_("div",Woe,h(l.translate("No discount code yet")),1))]),i("div",Xoe,[i("h4",Joe,h(l.translate("Type & Method")),1),i("ul",Zoe,[i("li",null,[i("span",null,h(l.translate("Amount off Products")),1)]),i("li",null,[i("span",null,h(l.translate("Code")),1)])])]),i("div",ele,[i("h4",tle,h(l.translate("Details")),1),i("ul",ale,[i("li",null,[i("span",null,h(l.translate("For Online Store")),1)]),i("li",null,[i("span",null,h(l.translate("No Min Purchase Requirement")),1)]),i("li",null,[i("span",null,h(l.translate("All Customers")),1)])])])]),_:1})]),_:1}),o(S,null,{default:r(()=>[o(v,{title:l.translate("Schedule"),border_bottom:"",title_size:"small"},null,8,["title"]),o(k,{class:"pb-1.5"},{default:r(()=>[o(Q,{"label-position":"top"},{default:r(()=>[o(C,{gutter:20},{default:r(()=>[o(B,{lg:24},{default:r(()=>[o(F,{label:l.translate("Start Date & Time")},{default:r(()=>[o(L,{modelValue:n.coupon.start_date,"onUpdate:modelValue":e[25]||(e[25]=R=>n.coupon.start_date=R),type:"datetime","value-format":"YYYY-MM-DDTHH:mm:ssZ",placeholder:l.translate("Start date & time"),onChange:l.setDefaultStatus,"disabled-date":l.disabledStartDate},null,8,["modelValue","placeholder","onChange","disabled-date"])]),_:1},8,["label"])]),_:1}),o(B,{lg:24},{default:r(()=>[o(F,null,{default:r(()=>[o(K,{modelValue:n.isEndDateEnabled,"onUpdate:modelValue":e[26]||(e[26]=R=>n.isEndDateEnabled=R),label:l.translate("Set end date & time"),onChange:e[27]||(e[27]=R=>{R||(n.coupon.end_date=null)})},null,8,["modelValue","label"])]),_:1})]),_:1}),n.isEndDateEnabled?(d(),U(B,{key:0,lg:24},{default:r(()=>[o(F,{label:l.translate("End Date & Time")},{default:r(()=>[o(L,{modelValue:n.coupon.end_date,"onUpdate:modelValue":e[28]||(e[28]=R=>n.coupon.end_date=R),type:"datetime","value-format":"YYYY-MM-DDTHH:mm:ssZ",placeholder:l.translate("End date & time"),onChange:l.setDefaultStatus,"disabled-date":l.disabledEndDate},null,8,["modelValue","placeholder","onChange","disabled-date"]),n.validationErrors.hasOwnProperty("end_date")?(d(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"end_date"},null,8,["validation-errors"])):x("",!0)]),_:1},8,["label"])]),_:1})):x("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),n.showDynamicTemplates?(d(),_("div",sle,[o(N,{filter:"fluent_cart_single_coupon_page",ref:"dynamic_templates",data:{coupon:n.coupon},widgetsQuery:{coupon_id:n.coupon.id}},null,8,["data","widgetsQuery"])])):x("",!0),o(S,null,{default:r(()=>[o(v,{title:l.translate("Activity"),border_bottom:"",title_size:"small"},null,8,["title"]),o(k,null,{default:r(()=>[o(W,{onReload:l.fetchCoupon,activities:n.coupon.activities||[],showManageActivity:n.showManageActivity},null,8,["onReload","activities","showManageActivity"])]),_:1})]),_:1})])])])],64))])}const ole=ye(Doe,[["render",nle]]),lle={name:"CheckoutFields",components:{CardHeader:le,Card:se,CardBody:ae},data(){return{fields:{},settings:{},saving:!1,fetching:!1}},methods:{getFields(){this.fetching=!0,this.$get("checkout-fields/get-fields").then(t=>{this.fields=t.fields||{},this.settings=t.settings||{}}).catch(t=>{this.handleError(t)}).finally(()=>{this.fetching=!1})},saveFields(){this.saving=!0,this.$post("checkout-fields/save-fields",{settings:this.settings}).then(t=>{this.$notify.success(t.message||this.$t("Settings saved successfully!"))}).catch(t=>{this.handleError(t)}).finally(()=>{this.saving=!1})},formatSectionTitle(t){return t.replace("_"," ")}},mounted(){this.getFields()}},rle={class:"setting-wrap wm-container-enhanced"},ile={class:"fct-checkout-fields-wrapp"},Ale={class:"field-heading"},dle={class:"fct-checkout-fields"},ule={key:0,class:"fct-checkout-field"},cle={class:"fct-checkout-field-info"},fle={class:"fct-checkout-field-tags"},ple={key:0,class:"fct-checkout-field-action"},mle={key:1,class:"fct-checkout-field-input"},hle={class:"fct-checkout-field-info"},_le={class:"fct-checkout-field-tags"},gle={key:0,class:"fct-checkout-field-action"},vle={class:"form-section-save-action"};function yle(t,e,a,s,n,l){const A=y("CardHeader"),u=y("el-skeleton"),c=y("el-switch"),m=y("el-tag"),v=y("el-checkbox"),b=y("el-input"),g=y("CardBody"),F=y("Card"),B=y("el-button");return d(),_("div",rle,[i("div",ile,[o(F,null,{default:r(()=>[o(A,{title:t.$t("Checkout Fields"),border_bottom:""},null,8,["title"]),o(g,null,{default:r(()=>[o(u,{loading:n.fetching,animated:"",rows:5},null,8,["loading"]),n.fetching?x("",!0):(d(!0),_(H,{key:0},q(n.fields,(w,C)=>(d(),_("div",{key:C,class:"fct-checkout-field-section"},[i("h3",Ale,h(l.formatSectionTitle(C)),1),i("div",dle,[w.label?(d(),_("div",ule,[i("div",cle,[w.can_alter==="yes"?(d(),U(c,{key:0,modelValue:n.settings[C].enabled,"onUpdate:modelValue":k=>n.settings[C].enabled=k,"active-value":"yes","inactive-value":"no"},null,8,["modelValue","onUpdate:modelValue"])):x("",!0),i("span",{class:ne(`fct-checkout-field-label ${n.settings[C].enabled==="no"?"opacity-50":""}`)},h(w.label),3),i("div",fle,[w.can_alter!=="yes"&&n.settings[C].enabled==="yes"?(d(),U(m,{key:0,size:"small"},{default:r(()=>[M(h(t.$t("System")),1)]),_:1})):x("",!0),n.settings[C].required==="yes"&&n.settings[C].enabled==="yes"?(d(),U(m,{key:1,size:"small"},{default:r(()=>[M(h(t.$t("Required")),1)]),_:1})):x("",!0)])]),w.can_alter==="yes"?(d(),_("div",ple,[o(v,{modelValue:n.settings[C].required,"onUpdate:modelValue":k=>n.settings[C].required=k,"true-label":"yes","false-label":"no",disabled:n.settings[C].enabled!=="yes"},{default:r(()=>[M(h(t.$t("Required")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])):x("",!0),n.settings[C].hasOwnProperty("text")&&n.settings[C].enabled==="yes"?(d(),_("div",mle,[o(b,{type:"textarea",modelValue:n.settings[C].text,"onUpdate:modelValue":k=>n.settings[C].text=k,disabled:n.settings[C].enabled!=="yes"},null,8,["modelValue","onUpdate:modelValue","disabled"])])):x("",!0)])):(d(!0),_(H,{key:1},q(w,(k,S)=>(d(),_("div",{key:S,class:"fct-checkout-field"},[i("div",hle,[k.can_alter==="yes"?(d(),U(c,{key:0,modelValue:n.settings[C][S].enabled,"onUpdate:modelValue":E=>n.settings[C][S].enabled=E,"active-value":"yes","inactive-value":"no"},null,8,["modelValue","onUpdate:modelValue"])):x("",!0),i("span",{class:ne(`fct-checkout-field-label ${n.settings[C][S].enabled==="no"?"opacity-50":""}`)},h(k.label),3),i("div",_le,[k.can_alter!=="yes"&&n.settings[C][S].enabled==="yes"?(d(),U(m,{key:0,size:"small"},{default:r(()=>[M(h(t.$t("System")),1)]),_:1})):x("",!0),n.settings[C][S].required==="yes"&&n.settings[C][S].enabled==="yes"?(d(),U(m,{key:1,size:"small"},{default:r(()=>[M(h(t.$t("Required")),1)]),_:1})):x("",!0)])]),k.can_alter==="yes"?(d(),_("div",gle,[o(v,{modelValue:n.settings[C][S].required,"onUpdate:modelValue":E=>n.settings[C][S].required=E,"true-label":"yes","false-label":"no",disabled:n.settings[C][S].enabled!=="yes"},{default:r(()=>[M(h(t.$t("Required")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])):x("",!0)]))),128))])]))),128))]),_:1})]),_:1}),i("div",vle,[o(B,{type:"primary",onClick:l.saveFields,loading:n.saving},{default:r(()=>[M(h(n.saving?t.$t("Saving"):t.$t("Save")),1)]),_:1},8,["onClick","loading"])])])])}const ble=ye(lle,[["render",yle]]),Kf=$e.get("payment_routes");for(const t of Kf)t.props=!0;const Nf=$e.get("storage_driver_routes");for(const t of Nf)t.props=!0;var wle={dashboard:{name:"dashboard",path:"/",component:GB,meta:{active_menu:"dashboard",title:"Dashboard"}},orders:{path:"/orders",component:s4,meta:{active_menu:"orders",title:"Orders"},children:[{name:"orders",path:"",component:Yh,meta:{active_menu:"orders",title:"Orders",permission:"orders/view"}},{name:"view_order",path:":order_id/view",component:h$,props:!0,meta:{active_menu:"orders",title:"View Order",permission:["orders/view","orders/manage"]}},{name:"add_order",path:"add",component:j$,props:!0,meta:{active_menu:"orders",title:"Create Order",permission:"orders/create"}}]},products:{name:"products",path:"/products",component:cT,meta:{active_menu:"products",title:"Products",permission:"products/view"}},product_route:{path:"/products/:product_id",component:T5,name:"product_route",meta:{active_menu:"products",title:"Products",permission:["products/view","products/edit","integrations/manage"]},props:!0,children:[{name:"product_edit",path:"",props:!0,component:UO,meta:{active_menu:"products",title:"Product Edit",permission:"products/edit"}},{name:"product_integrations",path:"integrations",props:!0,component:au,meta:{active_menu:"products",title:"Integrations",permission:"integrations/manage"}},{name:"product_integration_feed_editor",path:"integrations/:integration_id/:integration_name",component:Vd,meta:{active_menu:"products",title:"Edit Integration",permission:"integrations/manage"}},{name:"SingleIntegration",path:"integrations/:integration_id",props:!0,component:M7,meta:{active_menu:"products",title:"Integrations",permission:"integrations/manage"}},{name:"product_upgrade_paths",path:"upgrade-paths",props:!0,component:m7,meta:{active_menu:"products",title:"Upgrade Paths",permission:"integrations/manage"}},{name:"Integrations",path:"integrations",props:!0,component:au,meta:{active_menu:"integrations",title:"Product Integrations",permission:"integrations/manage"}}]},customers:{path:"/customers",component:s_,meta:{active_menu:"customers",permission:["customers/view","customers/manage"]},children:[{name:"customers",path:"/customers",component:nh,meta:{active_menu:"customers",title:"Customers",permission:"customers/view"}},{name:"view_customer",path:":customer_id/view",component:PU,props:!0,meta:{active_menu:"customers",title:"View Customer",permission:"customers/view"}}]},reports:{name:"reports",path:"/reports",component:lP,meta:{active_menu:"reports",permission:"reports/view"},children:[{name:"reports_overview",path:"overview",component:gX,meta:{title:"Overview Reports",permission:"reports/view"}},{name:"reports_sales",path:"sales",component:VP,meta:{title:"Sales Reports",permission:"reports/view"}},{name:"reports_orders",path:"orders",component:JG,meta:{title:"Order Reports",permission:"reports/view"}},{name:"reports_revenue",path:"revenue",component:SK,meta:{title:"Revenue Report",permission:"reports/view"}},{name:"reports_refunds",path:"refunds",component:Mj,meta:{title:"Refund Report",permission:"reports/view"}},{name:"reports_subscriptions",path:"subscriptions",component:Sz,meta:{title:"Subscription Report",permission:"reports/view"}},{name:"future_renewals",path:"subscriptions/future-renewals",component:Wz,meta:{title:"Future Renewals",permission:"reports/view"}},{name:"reports_products",path:"products",component:BW,meta:{title:"Product Report",permission:"reports/view"}},{name:"reports_customer",path:"customer",component:BY,meta:{title:"Customer Report",permission:"reports/view"}},{name:"reports_sources",path:"sources",component:JY,meta:{title:"Sources Report",permission:"reports/view"}}]},settings:{path:"/settings",component:Hx,meta:{active_menu:"settings",title:"Settings",permission:["store/settings","store/sensitive"]},children:[{name:"store_settings",path:"store-settings",component:n5,meta:{active_menu:"settings",title:"Settings",permission:"store/settings"},children:[{name:"store_setup",path:"",component:Ko,meta:{}},{name:"pages_setup",path:"pages_setup",component:Ko,meta:{}},{name:"single_product_setup",path:"single_product_setup",component:Ko,meta:{}},{name:"cart_and_checkout",path:"cart_and_checkout",component:Ko,meta:{}},{name:"checkout_fields",path:"checkout_fields",component:ble,meta:{}}]},{name:"email_notifications",path:"email_notifications",component:G7,meta:{active_menu:"settings",title:"Notifications",permission:"store/sensitive"}},{name:"email_mailing_settings",path:"email_mailing_settings",component:eJ,meta:{active_menu:"settings",title:"Mailing Settings",permission:"store/sensitive"}},{path:"email_notifications/:name/",name:"email_notifications/edit",component:J7,meta:{active_menu:"settings",title:"Edit Notification",permission:"store/sensitive"},props:!0},{path:"email_notifications/add",name:"email_notifications/add",component:mH,meta:{active_menu:"settings",title:"Add Notification",permission:"store/sensitive"}},{name:"licensing",path:"licensing",component:k5,meta:{active_menu:"settings",title:"Licensing",permission:"store/sensitive"}},{name:"payments",path:"payments",component:Z4,meta:{active_menu:"settings",title:"Payment Settings",permission:"is_super_admin"}},{name:"gateway",component:K8,path:"payments",children:Kf,props:!0,meta:{active_menu:"settings",title:"Payment Settings",permission:"is_super_admin"}},{name:"invoice-packing",path:"invoice-packing",component:Zh,meta:{active_menu:"settings",title:"Invoice & Packing",permission:"is_super_admin"}},{name:"roles",path:"roles",component:gx,meta:{active_menu:"settings",title:"Role Settings",permission:"is_super_admin"}},{name:"addons",path:"addons",component:kX,meta:{active_menu:"settings",title:"Features & addon",permission:"is_super_admin"}},{name:"coupons",path:"coupons",component:iu,meta:{active_menu:"coupons",title:"Coupons Settings",permission:"is_super_admin"}},{name:"storage",path:"storage",component:iH,meta:{active_menu:"settings",title:"Storage Settings",permission:"is_super_admin"}},{name:"drivers",component:dH,path:"storage",children:Nf,props:!0,meta:{active_menu:"settings",title:"Storage Settings",permission:"is_super_admin"}},{name:"tax_settings",path:"tax_settings",component:sJ,meta:{active_menu:"settings",title:"Tax Settings",permission:"store/settings"},children:[{name:"tax_configurations",path:"",component:fZ,meta:{}},{name:"tax_rates",path:"tax_rates",component:zZ,meta:{}},{name:"eu",path:"eu",component:ise,meta:{}},{name:"euo",path:"euo",component:Lne,meta:{}},{name:"eu_country_tax_rates",path:"eu/:country/:group",component:lu,props:!0,meta:{}},{name:"tax-rates-country-single",path:"tax_rates_country_single/:country/:group",component:lu,props:!0,meta:{}}]}]},integrations:{name:"integrations",path:"/integrations",component:nk,meta:{active_menu:"integrations",title:"Integrations",permission:"integrations/view"}},global_feed_editor:{name:"feed_editor",path:"/global_integrations/:integration_id/:integration_name",component:Vd,meta:{active_menu:"integrations",title:"Global Integrations",permission:"integrations/view"}},integration_editor:{name:"integration_editor",path:"/integrations/:integration_name",component:fF,meta:{active_menu:"integrations",title:"Integrations",permission:"integrations/manage"}},coupons:{name:"coupons",path:"/coupons",component:iu,meta:{active_menu:"coupons",title:"Coupons",permission:"coupons/view"}},logs:{name:"logs",path:"/logs",component:aR,meta:{active_menu:"logs",title:"Logs",permission:"is_super_admin"}},taxes:{name:"taxes",path:"/taxes",component:ete,meta:{active_menu:"taxes",title:"taxes",permission:"is_super_admin"}},add_or_edit_coupon_route:{name:"add_or_edit_coupon",path:"/coupons/add_or_edit_coupon/:coupon_id?",component:ole,props:!0,meta:{active_menu:"coupons",title:"Coupons",permission:"coupons/manage"}},onboarding:{path:"/onboarding",component:t4,name:"onboarding",meta:{active_menu:"dashboard",title:"Onboarding",permission:"is_super_admin"}}};const Ble={class:"fct-theme-button-container"},Cle={class:"theme-selected-button"},kle={__name:"ThemeToggle",setup(t){const e=T(me.MODE_LIGHT),a=A=>{e.value!==A&&(e.value=A,me.apply(A))},s=[{value:"light",label:f("Light"),icon:"Sun"},{value:"dark",label:f("Dark"),icon:"Moon"},{value:"system",label:f("System"),icon:"Tools"}];Rs(()=>{e.value=localStorage.getItem("fcart_admin_theme")??me.MODE_SYSTEM,e.value.toString().startsWith(me.MODE_SYSTEM)&&(e.value=me.MODE_SYSTEM)});const n=A=>{de(()=>{e.value=me.getCurrentTheme()})},l=A=>{a(A)};return pe(()=>{window.addEventListener("onFluentCartThemeChange",n,!1)}),(A,u)=>{const c=y("el-dropdown-item"),m=y("el-dropdown-menu"),v=y("el-dropdown");return d(),_("div",Ble,[o(v,{placement:"bottom-end",trigger:"click","popper-class":"fct-dropdown",onCommand:l},{dropdown:r(()=>[o(m,null,{default:r(()=>[(d(),_(H,null,q(s,b=>o(c,{key:b.value,command:b.value,class:ne({active:e.value===b.value})},{default:r(()=>[o(Y,{name:b.icon},null,8,["name"]),M(" "+h(b.label),1)]),_:2},1032,["command","class"])),64))]),_:1})]),default:r(()=>[i("div",Cle,[e.value==="light"?(d(),U(Y,{key:0,name:"Sun"})):e.value==="dark"?(d(),U(Y,{key:1,name:"Moon"})):e.value==="system"?(d(),U(Y,{key:2,name:"Tools"})):x("",!0)])]),_:1})])}}};function ss(t){return Array.isArray?Array.isArray(t):zf(t)==="[object Array]"}function Fle(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function xle(t){return t==null?"":Fle(t)}function Ha(t){return typeof t=="string"}function Gf(t){return typeof t=="number"}function Ule(t){return t===!0||t===!1||Ele(t)&&zf(t)=="[object Boolean]"}function jf(t){return typeof t=="object"}function Ele(t){return jf(t)&&t!==null}function da(t){return t!=null}function Gr(t){return!t.trim().length}function zf(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Sle="Incorrect 'index' type",Qle=t=>`Invalid value for key ${t}`,Dle=t=>`Pattern length exceeds max of ${t}.`,$le=t=>`Missing ${t} property in key`,Ile=t=>`Property 'weight' in key '${t}' must be a positive integer`,Au=Object.prototype.hasOwnProperty;class Tle{constructor(e){this._keys=[],this._keyMap={};let a=0;e.forEach(s=>{let n=Yf(s);this._keys.push(n),this._keyMap[n.id]=n,a+=n.weight}),this._keys.forEach(s=>{s.weight/=a})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Yf(t){let e=null,a=null,s=null,n=1,l=null;if(Ha(t)||ss(t))s=t,e=du(t),a=Si(t);else{if(!Au.call(t,"name"))throw new Error($le("name"));const A=t.name;if(s=A,Au.call(t,"weight")&&(n=t.weight,n<=0))throw new Error(Ile(A));e=du(A),a=Si(A),l=t.getFn}return{path:e,id:a,weight:n,src:s,getFn:l}}function du(t){return ss(t)?t:t.split(".")}function Si(t){return ss(t)?t.join("."):t}function Mle(t,e){let a=[],s=!1;const n=(l,A,u)=>{if(da(l))if(!A[u])a.push(l);else{let c=A[u];const m=l[c];if(!da(m))return;if(u===A.length-1&&(Ha(m)||Gf(m)||Ule(m)))a.push(xle(m));else if(ss(m)){s=!0;for(let v=0,b=m.length;v<b;v+=1)n(m[v],A,u+1)}else A.length&&n(m,A,u+1)}};return n(t,Ha(e)?e.split("."):e,0),s?a:a[0]}const Vle={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Lle={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Ole={location:0,threshold:.6,distance:100},Hle={useExtendedSearch:!1,getFn:Mle,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Ve={...Lle,...Vle,...Ole,...Hle};const Rle=/[^ ]+/g;function Ple(t=1,e=3){const a=new Map,s=Math.pow(10,e);return{get(n){const l=n.match(Rle).length;if(a.has(l))return a.get(l);const A=1/Math.pow(l,.5*t),u=parseFloat(Math.round(A*s)/s);return a.set(l,u),u},clear(){a.clear()}}}class wA{constructor({getFn:e=Ve.getFn,fieldNormWeight:a=Ve.fieldNormWeight}={}){this.norm=Ple(a,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((a,s)=>{this._keysMap[a.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ha(this.docs[0])?this.docs.forEach((e,a)=>{this._addString(e,a)}):this.docs.forEach((e,a)=>{this._addObject(e,a)}),this.norm.clear())}add(e){const a=this.size();Ha(e)?this._addString(e,a):this._addObject(e,a)}removeAt(e){this.records.splice(e,1);for(let a=e,s=this.size();a<s;a+=1)this.records[a].i-=1}getValueForItemAtKeyId(e,a){return e[this._keysMap[a]]}size(){return this.records.length}_addString(e,a){if(!da(e)||Gr(e))return;let s={v:e,i:a,n:this.norm.get(e)};this.records.push(s)}_addObject(e,a){let s={i:a,$:{}};this.keys.forEach((n,l)=>{let A=n.getFn?n.getFn(e):this.getFn(e,n.path);if(da(A)){if(ss(A)){let u=[];const c=[{nestedArrIndex:-1,value:A}];for(;c.length;){const{nestedArrIndex:m,value:v}=c.pop();if(da(v))if(Ha(v)&&!Gr(v)){let b={v,i:m,n:this.norm.get(v)};u.push(b)}else ss(v)&&v.forEach((b,g)=>{c.push({nestedArrIndex:g,value:b})})}s.$[l]=u}else if(Ha(A)&&!Gr(A)){let u={v:A,n:this.norm.get(A)};s.$[l]=u}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function qf(t,e,{getFn:a=Ve.getFn,fieldNormWeight:s=Ve.fieldNormWeight}={}){const n=new wA({getFn:a,fieldNormWeight:s});return n.setKeys(t.map(Yf)),n.setSources(e),n.create(),n}function Kle(t,{getFn:e=Ve.getFn,fieldNormWeight:a=Ve.fieldNormWeight}={}){const{keys:s,records:n}=t,l=new wA({getFn:e,fieldNormWeight:a});return l.setKeys(s),l.setIndexRecords(n),l}function jo(t,{errors:e=0,currentLocation:a=0,expectedLocation:s=0,distance:n=Ve.distance,ignoreLocation:l=Ve.ignoreLocation}={}){const A=e/t.length;if(l)return A;const u=Math.abs(s-a);return n?A+u/n:u?1:A}function Nle(t=[],e=Ve.minMatchCharLength){let a=[],s=-1,n=-1,l=0;for(let A=t.length;l<A;l+=1){let u=t[l];u&&s===-1?s=l:!u&&s!==-1&&(n=l-1,n-s+1>=e&&a.push([s,n]),s=-1)}return t[l-1]&&l-s>=e&&a.push([s,l-1]),a}const Is=32;function Gle(t,e,a,{location:s=Ve.location,distance:n=Ve.distance,threshold:l=Ve.threshold,findAllMatches:A=Ve.findAllMatches,minMatchCharLength:u=Ve.minMatchCharLength,includeMatches:c=Ve.includeMatches,ignoreLocation:m=Ve.ignoreLocation}={}){if(e.length>Is)throw new Error(Dle(Is));const v=e.length,b=t.length,g=Math.max(0,Math.min(s,b));let F=l,B=g;const w=u>1||c,C=w?Array(b):[];let k;for(;(k=t.indexOf(e,B))>-1;){let D=jo(e,{currentLocation:k,expectedLocation:g,distance:n,ignoreLocation:m});if(F=Math.min(D,F),B=k+v,w){let Q=0;for(;Q<v;)C[k+Q]=1,Q+=1}}B=-1;let S=[],E=1,V=v+b;const $=1<<v-1;for(let D=0;D<v;D+=1){let Q=0,I=V;for(;Q<I;)jo(e,{errors:D,currentLocation:g+I,expectedLocation:g,distance:n,ignoreLocation:m})<=F?Q=I:V=I,I=Math.floor((V-Q)/2+Q);V=I;let L=Math.max(1,g-I+1),K=A?b:Math.min(g+I,b)+v,N=Array(K+2);N[K+1]=(1<<D)-1;for(let R=K;R>=L;R-=1){let ee=R-1,oe=a[t.charAt(ee)];if(w&&(C[ee]=+!!oe),N[R]=(N[R+1]<<1|1)&oe,D&&(N[R]|=(S[R+1]|S[R])<<1|1|S[R+1]),N[R]&$&&(E=jo(e,{errors:D,currentLocation:ee,expectedLocation:g,distance:n,ignoreLocation:m}),E<=F)){if(F=E,B=ee,B<=g)break;L=Math.max(1,2*g-B)}}if(jo(e,{errors:D+1,currentLocation:g,expectedLocation:g,distance:n,ignoreLocation:m})>F)break;S=N}const O={isMatch:B>=0,score:Math.max(.001,E)};if(w){const D=Nle(C,u);D.length?c&&(O.indices=D):O.isMatch=!1}return O}function jle(t){let e={};for(let a=0,s=t.length;a<s;a+=1){const n=t.charAt(a);e[n]=(e[n]||0)|1<<s-a-1}return e}const Ql=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Wf{constructor(e,{location:a=Ve.location,threshold:s=Ve.threshold,distance:n=Ve.distance,includeMatches:l=Ve.includeMatches,findAllMatches:A=Ve.findAllMatches,minMatchCharLength:u=Ve.minMatchCharLength,isCaseSensitive:c=Ve.isCaseSensitive,ignoreDiacritics:m=Ve.ignoreDiacritics,ignoreLocation:v=Ve.ignoreLocation}={}){if(this.options={location:a,threshold:s,distance:n,includeMatches:l,findAllMatches:A,minMatchCharLength:u,isCaseSensitive:c,ignoreDiacritics:m,ignoreLocation:v},e=c?e:e.toLowerCase(),e=m?Ql(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const b=(F,B)=>{this.chunks.push({pattern:F,alphabet:jle(F),startIndex:B})},g=this.pattern.length;if(g>Is){let F=0;const B=g%Is,w=g-B;for(;F<w;)b(this.pattern.substr(F,Is),F),F+=Is;if(B){const C=g-Is;b(this.pattern.substr(C),C)}}else b(this.pattern,0)}searchIn(e){const{isCaseSensitive:a,ignoreDiacritics:s,includeMatches:n}=this.options;if(e=a?e:e.toLowerCase(),e=s?Ql(e):e,this.pattern===e){let w={isMatch:!0,score:0};return n&&(w.indices=[[0,e.length-1]]),w}const{location:l,distance:A,threshold:u,findAllMatches:c,minMatchCharLength:m,ignoreLocation:v}=this.options;let b=[],g=0,F=!1;this.chunks.forEach(({pattern:w,alphabet:C,startIndex:k})=>{const{isMatch:S,score:E,indices:V}=Gle(e,w,C,{location:l+k,distance:A,threshold:u,findAllMatches:c,minMatchCharLength:m,includeMatches:n,ignoreLocation:v});S&&(F=!0),g+=E,S&&V&&(b=[...b,...V])});let B={isMatch:F,score:F?g/this.chunks.length:1};return F&&n&&(B.indices=b),B}}class xs{constructor(e){this.pattern=e}static isMultiMatch(e){return uu(e,this.multiRegex)}static isSingleMatch(e){return uu(e,this.singleRegex)}search(){}}function uu(t,e){const a=t.match(e);return a?a[1]:null}class zle extends xs{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const a=e===this.pattern;return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class Yle extends xs{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class qle extends xs{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const a=e.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class Wle extends xs{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const a=!e.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class Xle extends xs{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const a=e.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Jle extends xs{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const a=!e.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class Xf extends xs{constructor(e,{location:a=Ve.location,threshold:s=Ve.threshold,distance:n=Ve.distance,includeMatches:l=Ve.includeMatches,findAllMatches:A=Ve.findAllMatches,minMatchCharLength:u=Ve.minMatchCharLength,isCaseSensitive:c=Ve.isCaseSensitive,ignoreDiacritics:m=Ve.ignoreDiacritics,ignoreLocation:v=Ve.ignoreLocation}={}){super(e),this._bitapSearch=new Wf(e,{location:a,threshold:s,distance:n,includeMatches:l,findAllMatches:A,minMatchCharLength:u,isCaseSensitive:c,ignoreDiacritics:m,ignoreLocation:v})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Jf extends xs{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let a=0,s;const n=[],l=this.pattern.length;for(;(s=e.indexOf(this.pattern,a))>-1;)a=s+l,n.push([s,a-1]);const A=!!n.length;return{isMatch:A,score:A?0:1,indices:n}}}const Qi=[zle,Jf,qle,Wle,Jle,Xle,Yle,Xf],cu=Qi.length,Zle=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ere="|";function tre(t,e={}){return t.split(ere).map(a=>{let s=a.trim().split(Zle).filter(l=>l&&!!l.trim()),n=[];for(let l=0,A=s.length;l<A;l+=1){const u=s[l];let c=!1,m=-1;for(;!c&&++m<cu;){const v=Qi[m];let b=v.isMultiMatch(u);b&&(n.push(new v(b,e)),c=!0)}if(!c)for(m=-1;++m<cu;){const v=Qi[m];let b=v.isSingleMatch(u);if(b){n.push(new v(b,e));break}}}return n})}const are=new Set([Xf.type,Jf.type]);class sre{constructor(e,{isCaseSensitive:a=Ve.isCaseSensitive,ignoreDiacritics:s=Ve.ignoreDiacritics,includeMatches:n=Ve.includeMatches,minMatchCharLength:l=Ve.minMatchCharLength,ignoreLocation:A=Ve.ignoreLocation,findAllMatches:u=Ve.findAllMatches,location:c=Ve.location,threshold:m=Ve.threshold,distance:v=Ve.distance}={}){this.query=null,this.options={isCaseSensitive:a,ignoreDiacritics:s,includeMatches:n,minMatchCharLength:l,findAllMatches:u,ignoreLocation:A,location:c,threshold:m,distance:v},e=a?e:e.toLowerCase(),e=s?Ql(e):e,this.pattern=e,this.query=tre(this.pattern,this.options)}static condition(e,a){return a.useExtendedSearch}searchIn(e){const a=this.query;if(!a)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:n,ignoreDiacritics:l}=this.options;e=n?e:e.toLowerCase(),e=l?Ql(e):e;let A=0,u=[],c=0;for(let m=0,v=a.length;m<v;m+=1){const b=a[m];u.length=0,A=0;for(let g=0,F=b.length;g<F;g+=1){const B=b[g],{isMatch:w,indices:C,score:k}=B.search(e);if(w){if(A+=1,c+=k,s){const S=B.constructor.type;are.has(S)?u=[...u,...C]:u.push(C)}}else{c=0,A=0,u.length=0;break}}if(A){let g={isMatch:!0,score:c/A};return s&&(g.indices=u),g}}return{isMatch:!1,score:1}}}const Di=[];function nre(...t){Di.push(...t)}function $i(t,e){for(let a=0,s=Di.length;a<s;a+=1){let n=Di[a];if(n.condition(t,e))return new n(t,e)}return new Wf(t,e)}const Dl={AND:"$and",OR:"$or"},Ii={PATH:"$path",PATTERN:"$val"},Ti=t=>!!(t[Dl.AND]||t[Dl.OR]),ore=t=>!!t[Ii.PATH],lre=t=>!ss(t)&&jf(t)&&!Ti(t),fu=t=>({[Dl.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Zf(t,e,{auto:a=!0}={}){const s=n=>{let l=Object.keys(n);const A=ore(n);if(!A&&l.length>1&&!Ti(n))return s(fu(n));if(lre(n)){const c=A?n[Ii.PATH]:l[0],m=A?n[Ii.PATTERN]:n[c];if(!Ha(m))throw new Error(Qle(c));const v={keyId:Si(c),pattern:m};return a&&(v.searcher=$i(m,e)),v}let u={children:[],operator:l[0]};return l.forEach(c=>{const m=n[c];ss(m)&&m.forEach(v=>{u.children.push(s(v))})}),u};return Ti(t)||(t=fu(t)),s(t)}function rre(t,{ignoreFieldNorm:e=Ve.ignoreFieldNorm}){t.forEach(a=>{let s=1;a.matches.forEach(({key:n,norm:l,score:A})=>{const u=n?n.weight:null;s*=Math.pow(A===0&&u?Number.EPSILON:A,(u||1)*(e?1:l))}),a.score=s})}function ire(t,e){const a=t.matches;e.matches=[],da(a)&&a.forEach(s=>{if(!da(s.indices)||!s.indices.length)return;const{indices:n,value:l}=s;let A={indices:n,value:l};s.key&&(A.key=s.key.src),s.idx>-1&&(A.refIndex=s.idx),e.matches.push(A)})}function Are(t,e){e.score=t.score}function dre(t,e,{includeMatches:a=Ve.includeMatches,includeScore:s=Ve.includeScore}={}){const n=[];return a&&n.push(ire),s&&n.push(Are),t.map(l=>{const{idx:A}=l,u={item:e[A],refIndex:A};return n.length&&n.forEach(c=>{c(l,u)}),u})}class Cn{constructor(e,a={},s){this.options={...Ve,...a},this.options.useExtendedSearch,this._keyStore=new Tle(this.options.keys),this.setCollection(e,s)}setCollection(e,a){if(this._docs=e,a&&!(a instanceof wA))throw new Error(Sle);this._myIndex=a||qf(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){da(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const a=[];for(let s=0,n=this._docs.length;s<n;s+=1){const l=this._docs[s];e(l,s)&&(this.removeAt(s),s-=1,n-=1,a.push(l))}return a}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:a=-1}={}){const{includeMatches:s,includeScore:n,shouldSort:l,sortFn:A,ignoreFieldNorm:u}=this.options;let c=Ha(e)?Ha(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return rre(c,{ignoreFieldNorm:u}),l&&c.sort(A),Gf(a)&&a>-1&&(c=c.slice(0,a)),dre(c,this._docs,{includeMatches:s,includeScore:n})}_searchStringList(e){const a=$i(e,this.options),{records:s}=this._myIndex,n=[];return s.forEach(({v:l,i:A,n:u})=>{if(!da(l))return;const{isMatch:c,score:m,indices:v}=a.searchIn(l);c&&n.push({item:l,idx:A,matches:[{score:m,value:l,norm:u,indices:v}]})}),n}_searchLogical(e){const a=Zf(e,this.options),s=(u,c,m)=>{if(!u.children){const{keyId:b,searcher:g}=u,F=this._findMatches({key:this._keyStore.get(b),value:this._myIndex.getValueForItemAtKeyId(c,b),searcher:g});return F&&F.length?[{idx:m,item:c,matches:F}]:[]}const v=[];for(let b=0,g=u.children.length;b<g;b+=1){const F=u.children[b],B=s(F,c,m);if(B.length)v.push(...B);else if(u.operator===Dl.AND)return[]}return v},n=this._myIndex.records,l={},A=[];return n.forEach(({$:u,i:c})=>{if(da(u)){let m=s(a,u,c);m.length&&(l[c]||(l[c]={idx:c,item:u,matches:[]},A.push(l[c])),m.forEach(({matches:v})=>{l[c].matches.push(...v)}))}}),A}_searchObjectList(e){const a=$i(e,this.options),{keys:s,records:n}=this._myIndex,l=[];return n.forEach(({$:A,i:u})=>{if(!da(A))return;let c=[];s.forEach((m,v)=>{c.push(...this._findMatches({key:m,value:A[v],searcher:a}))}),c.length&&l.push({idx:u,item:A,matches:c})}),l}_findMatches({key:e,value:a,searcher:s}){if(!da(a))return[];let n=[];if(ss(a))a.forEach(({v:l,i:A,n:u})=>{if(!da(l))return;const{isMatch:c,score:m,indices:v}=s.searchIn(l);c&&n.push({score:m,key:e,value:l,idx:A,norm:u,indices:v})});else{const{v:l,n:A}=a,{isMatch:u,score:c,indices:m}=s.searchIn(l);u&&n.push({score:c,key:e,value:l,norm:A,indices:m})}return n}}Cn.version="7.1.0";Cn.createIndex=qf;Cn.parseIndex=Kle;Cn.config=Ve;Cn.parseQuery=Zf;nre(sre);const ls=$e.get("admin_url"),ure=[{title:f("Dashboard"),data:{type:"link",url:ls,description:f("Go to dashboard"),show_description:!1}},{title:f("Orders"),data:{type:"link",url:ls+"orders",description:f("Go to order page"),show_description:!1}},{title:f("Customers"),data:{type:"link",url:ls+"customers",description:f("Go to customers page"),show_description:!1}},{title:f("Products"),data:{type:"link",new_tab:!0,url:ls+"products",description:f("Go to products page"),show_description:!1}},{title:f("Integrations"),data:{type:"link",url:ls+"integrations",description:f("Go to integrations page"),show_description:!1}},{title:f("Coupons"),data:{type:"link",url:ls+"coupons",description:f("Go to coupons page"),show_description:!0}},{title:f("Manage %s","PayPal"),data:{type:"link",new_tab:!1,url:ls+"settings/payments/paypal",description:f("Go to %s page","PayPal settings"),show_description:!1}},{title:f("Manage %s","Stripe"),data:{type:"link",new_tab:!1,url:ls+"settings/payments/stripe",description:f("Go to %s page","stripe settings"),show_description:!1}}],cre=[{title:"Theme",title_resolver:()=>{let e=(me.isDark()?"dark":"light")==="light"?f("Dark"):f("Light");return f("Change theme to %s",e)},data:{type:"action",action:()=>{let e=(me.isDark()?"dark":"light")==="light"?"dark":"light";me.apply(e,{fromShortcut:!0})}}}];$e.get("admin_url")+"";const pu={"/settings/store-settings":f("Store Setup"),"/settings/store-settings/pages_setup":f("Pages Setup"),"/settings/store-settings/single_product_setup":f("Single product & Order Setup"),"/settings/store-settings/cart_and_checkout":f("Cart and Checkout"),"/settings/store-settings/checkout_fields":f("Checkout Fields")};let ep=[];Object.keys(pu).forEach(t=>{const e=pu[t];ep.push({title:e,data:{type:"action",action:({router:a})=>{a.push({path:t})},description:f("Go to %s",e),show_description:!1}})});const fre={Menu:ure,Actions:cre,Settings:ep},Mi=[];Object.entries(fre).forEach(([t,e])=>{e.forEach((a,s)=>{Mi.push({...a,id:`${t.toString().toLowerCase()}-${s}`,group:[t]})})});const pre=()=>({shouldSort:!0,threshold:.6,keys:[{name:"title",getFn:t=>t.title},{name:"data.description",getFn:t=>t.data.description},{name:"group",weight:2,getFn:t=>t.group}]}),mre={class:"navigable-list-container fct-global-search-result-container"},hre={key:0,class:"no-results fct-global-search-result-not-found"},_re={key:1},gre=["tabindex","onClick","onKeydown"],vre={__name:"NavigableList",props:{items:{type:Array,required:!0,default:()=>[]},noResultsText:{type:String,default:f("No results found")},onAction:{type:Function,required:!0}},setup(t,{expose:e}){const a=t,s=T(-1),n=hp("listContainer"),l=T({}),A=(B,w)=>{w&&(l.value[B]=w)},u=B=>{const w=a.items.length;if(w===0)return;const C=w-1;B==="up"?s.value=s.value<=0?C:s.value-1:B==="down"&&(s.value=s.value>=C?0:s.value+1),c()},c=()=>{const B=n.value,w=l.value[s.value];w&&B&&(w.scrollIntoView({behavior:"smooth",block:"nearest"}),de(()=>{w.focus()}))},m=B=>{s.value=B,v(B)},v=B=>{B>=0&&B<a.items.length&&a.onAction(a.items[B],B)},b=()=>{s.value=-1};return e({focusList:B=>{B=B??a.items.length-1,B>=0&&(s.value=B,de(()=>{l.value[B]&&l.value[B].focus()}))},resetSelection:b,performFirstAction:()=>{a.items.length>0?(s.value=0,setTimeout(()=>{v(0)},200)):s.value=-1}}),ce(()=>a.items,B=>{b(),B.length>0&&de(()=>{})},{immediate:!0}),ce(s,()=>{}),(B,w)=>(d(),_("div",mre,[t.items.length===0?(d(),_("div",hre,[o(Y,{name:"Empty/GlobalSearch"}),M(" "+h(t.noResultsText),1)])):(d(),_("div",_re,[i("ul",{ref_key:"listContainer",ref:n,class:"navigable-list fct-global-search-result-list"},[(d(!0),_(H,null,q(t.items,(C,k)=>(d(),_("li",{key:k,ref_for:!0,ref:S=>A(k,S),class:ne({selected:k===s.value}),tabindex:k,onClick:S=>m(k),onKeydown:[w[0]||(w[0]=fa(Ke(S=>u("up"),["prevent"]),["arrow-up"])),w[1]||(w[1]=fa(Ke(S=>u("down"),["prevent"]),["arrow-down"])),fa(S=>v(k),["enter"])]},[Nt(B.$slots,"default",{item:C,index:k,isSelected:k===s.value},void 0,!0)],42,gre))),128))],512)]))]))}},Vi=ye(vre,[["__scopeId","data-v-2379fe26"]]),yre={key:0},bre={class:"action-icon"},wre={class:"recent-search-title"},Bre={key:0},Cre={class:"action-icon"},jr="recent_actions",kre={__name:"ResultList",props:{query:{type:String,required:!0},searchResults:{type:Array,required:!0,default:()=>[]},onActionPerformed:{type:Function,required:!0},focusInput:{type:Function,required:!0},searchData:{type:Array,required:!0,default:()=>[]}},setup(t,{expose:e}){const a=Fa();Xe().ctx;const s=t,n=T(0),l=T({}),A=T(),u=(C,k)=>{const E=C.item.data,V=m(E.type);if(V==="link"){let $=m(E.url);m(E.new_tab)?window.open($,"_blank"):window.location.href=$}else V==="action"&&m(E.action);c(C),s.onActionPerformed()},c=C=>{const k=C.item.id;let S=Ge.get(jr)||[];S=S.filter(E=>E!==k),S.unshift(k),S=S.slice(0,5),Ge.set(jr,S)},m=C=>typeof C=="function"?v(C):C,v=async C=>await C({query:s.query,router:a}),b=()=>{var C;(C=A.value)==null||C.resetSelection()},g=()=>{var C;(C=A.value)==null||C.focusList(0)},F=()=>{var C;(C=A.value)==null||C.performFirstAction()};ce(()=>s.searchResults,async()=>{l.value={},l.value=s.searchResults??{},n.value=Object.keys(l.value).length-1;let C=l.value;for(const k of Object.keys(C)){const S=C[k];S.item.title_resolver&&(C[k].item.title=await m(S.item.title_resolver))}l.value={...C}});const B=T([]),w=async()=>{const C=Ge.get(jr)||[];let k=we.whereIn(s.searchData,"id",C),S=[];for(const E of k)typeof E.title_resolver=="function"&&(E.title=await m(E.title_resolver)),S.push({item:E});B.value=S};return pe(()=>{w()}),e({focusList:g,resetSelection:b,performFirstAction:F,fetchRecentActions:w}),(C,k)=>(d(),_(H,null,[t.query||B.value.length<1?(d(),U(Vi,{key:0,items:t.searchResults,"on-action":u,"no-results-text":p(f)("No matches found"),ref_key:"navigableList",ref:A},{default:r(({item:S,index:E,isSelected:V})=>{var $,O;return[i("span",null,[M(h(S.item.title)+" ",1),k[0]||(k[0]=i("br",null,null,-1)),((O=($=S.item)==null?void 0:$.data)==null?void 0:O.show_description)===!0?(d(),_("span",yre,h(S.item.data.description),1)):x("",!0)]),i("div",bre,[o(Y,{name:"Enter"})])]}),_:1},8,["items","no-results-text"])):x("",!0),!t.query&&B.value.length>0?(d(),_(H,{key:1},[i("span",wre,h(p(f)("Recent Actions")),1),o(Vi,{items:B.value,"on-action":u,"no-results-text":p(f)("No matches found"),ref_key:"navigableList",ref:A},{default:r(({item:S,index:E,isSelected:V})=>{var $,O;return[i("span",null,[M(h(S.item.title)+" ",1),k[1]||(k[1]=i("br",null,null,-1)),((O=($=S.item)==null?void 0:$.data)==null?void 0:O.show_description)===!0?(d(),_("span",Bre,h(S.item.data.description),1)):x("",!0)]),i("div",Cre,[o(Y,{name:"Enter"})])]}),_:1},8,["items","no-results-text"])],64)):x("",!0)],64))}},Fre=ye(kre,[["__scopeId","data-v-2bf1bb57"]]),xre={class:"fct-global-search-product-wrap"},Ure={class:"fct-global-search-product-left-info"},Ere={key:0,class:"type"},Sre={key:0,class:"price-and-status"},Qre={__name:"Product",props:{product:{type:Object,required:!0}},setup(t){const e=s=>s.min_price===s.max_price?st(s.min_price,!0):`${st(s.min_price,!0)} - ${st(s.max_price,!0)}`,a=s=>s==="publish"?f("published"):s==="future"?f("scheduled"):s;return(s,n)=>(d(),_("div",xre,[i("div",Ure,[o(Ki,{product:t.product},null,8,["product"]),t.product.detail?(d(),_("span",Ere,[M(h(p(nt).headline(t.product.detail.variation_type))+" ",1),n[0]||(n[0]=i("br",null,null,-1)),M(" "+h(p(nt).headline(t.product.detail.fulfillment_type)),1)])):x("",!0)]),t.product.detail?(d(),_("span",Sre,[M(h(e(t.product.detail))+" ",1),(d(),U(dt,{key:t.product.ID,status:t.product.post_status},{default:r(()=>[M(h(a(t.product.post_status)),1)]),_:1},8,["status"]))])):x("",!0)]))}},Dre={class:"fct-global-search-order-wrap"},$re={class:"fct-global-search-order-header"},Ire={class:"fct-global-search-order-id"},Tre={class:"items"},Mre={class:"fct-global-search-order-header-meta"},Vre={class:"date"},Lre=["innerHTML"],Ore={class:"customer-name"},Hre={class:"fct-global-search-order-status-wrapper"},Rre=["src","alt"],Pre={__name:"Order",props:{order:{type:Object,required:!0}},setup(t){const e=a=>we.get(window,"fluentCartAdminApp.payment_logos."+a);return(a,s)=>{var l;const n=y("el-tag");return d(),_("div",Dre,[i("div",$re,[i("div",Ire,[M(" #"+h(t.order.id)+" ",1),i("span",Tre,h(p(f)("%s Items",t.order.order_items.length)),1)]),i("div",Mre,[i("span",Vre,[o(Vt,{"date-time":t.order.created_at},null,8,["date-time"])]),s[0]||(s[0]=i("span",{class:"circle"},null,-1)),i("span",{class:"total-price",innerHTML:p(st)(t.order.total_amount,!0,!1,t.order.currency)},null,8,Lre),s[1]||(s[1]=i("span",{class:"circle"},null,-1)),i("span",Ore,h(((l=t.order.customer)==null?void 0:l.full_name)||p(f)("No Name")),1)])]),i("div",Hre,[o(dt,{status:t.order.payment_status,"hide-icon":!0},null,8,["status"]),e(t.order.payment_method)?(d(),_("img",{key:0,src:e(t.order.payment_method),alt:p(nt).headline(t.order.payment_method)},null,8,Rre)):(d(),U(n,{key:1,type:"info",round:"",size:"small",class:"capitalize"},{default:r(()=>[M(h(p(nt).headline(t.order.payment_method)),1)]),_:1}))])])}}},Kre={class:"fct-global-search-customer-wrap"},Nre={class:"fct-customer-card"},Gre={class:"fct-customer-avatar"},jre=["src"],zre={class:"fct-customer-details"},Yre={class:"fct-customer-name"},qre={class:"fct-customer-id"},Wre={class:"fct-customer-email"},Xre={class:"purchase-count"},Jre={class:"date"},Zre={__name:"Customer",props:{customer:{type:Object,required:!0}},setup(t){return(e,a)=>(d(),_("div",Kre,[i("div",Nre,[i("div",Gre,[i("img",{src:t.customer.photo,alt:"avatar"},null,8,jre)]),i("div",zre,[i("div",Yre,[M(h(t.customer.full_name||e.$t("No Name"))+" ",1),i("span",qre,"#"+h(t.customer.id),1)]),i("div",Wre,[M(h(t.customer.email)+" ",1),a[0]||(a[0]=i("span",{class:"circle"},null,-1)),a[1]||(a[1]=M()),i("span",Xre,"Purchase: "+h(t.customer.purchase_count),1)])])]),i("span",Jre,[o(Vt,{"date-time":t.customer.last_purchase_date},null,8,["date-time"])])]))}},eie={class:"fct-global-search-coupon-wrap"},tie={class:"amount"},aie={__name:"Coupon",props:{coupon:{type:Object,required:!0}},setup(t){return(e,a)=>(d(),_("div",eie,[i("span",null,h(t.coupon.title),1),i("span",null,h(t.coupon.code),1),i("span",tie,h(p(st)(t.coupon.amount,!0)),1)]))}},sie={class:"fct-global-remote-result-container"},nie={class:"fct-global-remote-result-label"},oie={class:"text"},lie={class:"navigable-content"},rie={class:"action-icon"},iie={__name:"RemoteResult",emits:["close-modal","onRemoteSearchStateChange"],setup(t,{expose:e,emit:a}){const s=a,n=Fa(),l=T({}),A=T(""),u=T(),c=T({}),m=T([]),v=D=>{b.value=!1,m.value=C.data.tableData,s("onRemoteSearchStateChange",!1)},b=T(!1),g={orders:$u({fetch:!1}),products:Qf({fetch:!1}),customers:Du({fetch:!1}),coupons:Pf({fetch:!1})},F=()=>{},B=()=>{var D;(D=u.value)==null||D.focusList(0)},w=()=>{var D;(D=u.value)==null||D.performFirstAction()};Rs(()=>{for(const D of Object.keys(g))g[D].onDataLoaded(v)});let C=null;const k=()=>{C=g[l.value.key],C.data.search=A.value,b.value=!0,C.fetch(),s("onRemoteSearchStateChange",!0)},S=Wi.debounce(k,800),E=(D,Q)=>{if(m.value=[],C&&(C.data.search=""),l.value=Q,c.value={title:Q.title,key:Q.key},!D){A.value="";return}A.value=D,S()},V=()=>{n.push({name:c.value.key,query:{search:A.value}}),s("close-modal")},$={orders:{name:"view_order",key:"order_id"},products:{name:"product_edit",key:"product_id"},customers:{name:"view_customer",key:"customer_id"},coupons:{name:"edit_coupon",key:"coupon_id"}},O=D=>{l.value.key in $&&(n.push({name:$[l.value.key].name,params:{[$[l.value.key].key]:D.id||D.ID,action:"edit"}}),s("close-modal"))};return e({fetchData:E,focusList:B,resetSelection:F,performFirstAction:w}),(D,Q)=>(d(),_("div",sie,[i("div",nie,[i("span",oie,h(l.value.title),1),c.value.key?(d(),_("span",{key:0,class:"view-all",onClick:V},h(A.value?p(f)('Search "%1$s" in %2$s',A.value,c.value.title):p(f)("See All %s",c.value.title)),1)):x("",!0)]),o(Vi,{items:m.value,"on-action":I=>{O(I)},"no-results-text":A.value?p(f)("No matches found for %s",l.value.title):p(f)("Type something to find %s",l.value.title),ref_key:"navigableList",ref:u},{default:r(({item:I,index:L,isSelected:K})=>[i("div",lie,[l.value.key==="products"?(d(),U(Qre,{key:0,product:I},null,8,["product"])):x("",!0),l.value.key==="orders"?(d(),U(Pre,{key:1,order:I},null,8,["order"])):x("",!0),l.value.key==="customers"?(d(),U(Zre,{key:2,customer:I},null,8,["customer"])):x("",!0),l.value.key==="coupons"?(d(),U(aie,{key:3,coupon:I},null,8,["coupon"])):x("",!0)]),i("div",rie,[o(Y,{name:"Enter"})])]),_:1},8,["items","on-action","no-results-text"])]))}},Aie={class:"fct-global-search-input-wrap"},die={class:"fct-setting-search-icon"},uie={class:"fct-global-search-input-container"},cie={key:0,class:"searched-item"},fie={class:"fct-global-searching-for"},pie={class:"fct-global-searching-for-label"},mie={class:"fct-global-searching-suggestion-list"},hie=["onClick"],_ie={class:"dialog-footer is-border"},gie={class:"fct-search-commands"},vie={class:"command-key"},yie={class:"command-key"},bie={class:"label"},wie={class:"command-key"},Bie={class:"label"},Cie={__name:"GlobalSearch",setup(t){Xe().ctx;const e=T(!1),a=T(""),s=T({}),n=T(),l=T(""),A=T([f("orders"),f("products"),f("customers"),f("coupons"),f("settings"),f("menus"),f("shortcuts...")]),u=T(0),c=T(!0),m=T(0),v=T(null),b=T(null),g=T(70),F=T(40),B=T(1700),w=()=>{},C=()=>{var ue,P;e.value?(ue=R.value)==null||ue.resetSelection():(P=E.value)==null||P.resetSelection(),O.value=!1,N.value=!1,S()},k=()=>{var ue;(ue=n.value)==null||ue.focus()},S=()=>{O.value=!1,s.value=[],e.value=!1,a.value="",D.value=null},E=T(),V=ue=>{let P=ue.includes(","),G={},z=[];(P?ue.split(","):[ue]).forEach(_e=>{_e.includes(":")?$(_e,G,z):z.push(_e)});let Z=[];return Object.keys(G).forEach(_e=>{const he=G[_e];he.length>0?he.forEach(Qe=>{Qe.length>0?Z.push({group:"'"+_e,title:Qe}):Z.push({group:"'"+_e})}):Z.push({group:"'"+_e})}),z.forEach(_e=>{_e.length>0&&Z.push({title:_e})}),Z},$=(ue,P,G)=>{if(ue.length===1)return;let z=ue.split(":"),j=z[0],Z=z[1];j.length>0?(P.hasOwnProperty(j)||(P[j]=[]),Z.length>0&&P[j].push(Z)):G.push(Z)},O=T(!1),D=T(null),Q=T({o:{key:"orders",title:f("Orders")},p:{key:"products",title:f("Products")},c:{key:"customers",title:f("Customers")},d:{key:"coupons",title:f("Coupons")}}),I=ue=>{D.value=ue,O.value=!0,s.value={},de(()=>{var P,G;(P=R.value)==null||P.fetchData(a.value,ue),(G=n.value)==null||G.focus()})},L=()=>{var ue;s.value=[],D.value=null,a.value="",O.value=!1,(ue=n.value)==null||ue.focus(),N.value=!1},K=()=>{var ue;(ue=R.value)==null||ue.fetchData(a.value,D.value)},N=T(!1),W=ue=>{N.value=ue,de(()=>{var P;(P=n.value)==null||P.focus()})},R=T(),ee=ro();ee.bind("/",ue=>{e.value&&(ue.preventDefault(),k())}),ee.bind(["mod+k"],(ue,P)=>{var j;ue.preventDefault();let G=null;const z=["o","p","c","d"];ee.bind(z,Z=>{Z.preventDefault(),G=Q.value[Z.key],G&&I(G)}),e.value=!0,(j=E.value)==null||j.fetchRecentActions(),setTimeout(()=>{k(),ee.unbind(z)},500)});const oe=()=>{if(v.value)return;const ue=()=>{if(n.value&&n.value.length>0)return;const G=A.value[u.value];if(c.value)m.value<G.length?(l.value=G.slice(0,m.value+1),m.value++):(c.value=!1,clearTimeout(b.value),b.value=setTimeout(()=>{b.value=null},B.value));else{if(b.value)return;m.value>0?(m.value--,l.value=G.slice(0,m.value)):(c.value=!0,u.value=(u.value+1)%A.value.length)}},P=()=>{ue();const G=c.value?g.value:b.value?120:F.value;v.value=setTimeout(P,G)};P()};let Ae;return pe(()=>{oe(),Ae=new Cn(Mi,pre())}),(ue,P)=>{const G=y("el-input"),z=y("el-dialog");return d(),_(H,null,[(d(),U(Il,{to:"#fct_admin_menu_search"},[i("div",Aie,[i("button",{onClick:P[0]||(P[0]=j=>e.value=!0),type:"button",class:"fct-setting-search-button","aria-label":"Search"},[i("span",die,[o(Y,{name:"Search"})]),P[7]||(P[7]=i("span",{class:"fct-global-search-button-keys"},[i("kbd",{class:"fct-global-search-button-key"},""),i("kbd",{class:"fct-global-search-button-key"},"K")],-1))])])])),o(z,{modelValue:e.value,"onUpdate:modelValue":P[6]||(P[6]=j=>e.value=j),onOpened:w,onClosed:C,class:"fct-global-search-container","append-to-body":!0},{header:r(()=>[i("div",uie,[o(Y,{name:"Search",class:"search-icon"}),D.value!=null?(d(),_("div",cie,[M(h(D.value.title)+" ",1),o(Y,{name:"Cross",class:"searched-item-remove",onClick:L})])):x("",!0),o(G,{class:"mousetrap",placeholder:p(f)("Search for %s",l.value),autofocus:"",ref_key:"searchRef",ref:n,id:"fct-global-search-input",disabled:N.value,onKeydown:[P[1]||(P[1]=fa(Ke(()=>{var j,Z;if(O.value){(j=R.value)==null||j.focusList();return}(Z=E.value)==null||Z.focusList()},["prevent"]),["arrow-down"])),P[2]||(P[2]=fa(Ke(()=>{var j,Z;if(O.value){(j=R.value)==null||j.performFirstAction();return}(Z=E.value)==null||Z.performFirstAction()},["prevent"]),["enter"])),P[3]||(P[3]=fa(()=>{a.value.length===0&&(D.value=null,O.value=!1)},["backspace"]))],onInput:P[4]||(P[4]=()=>{if(O.value){K();return}let j=a.value.includes(","),Z=a.value.includes(":");if(!j&&!Z)s.value.value=p(Ae).search(a.value);else{const _e=V(a.value);s.value.value=p(Ae).search({$or:_e})}}),modelValue:a.value,"onUpdate:modelValue":P[5]||(P[5]=j=>a.value=j),clearable:""},null,8,["placeholder","disabled","modelValue"])])]),default:r(()=>[o(na,{visible:!D.value&&a.value.length===0,accordion:""},{default:r(()=>[i("div",fie,[i("div",pie,h(p(f)("Searching for")),1),i("div",mie,[(d(!0),_(H,null,q(Q.value,j=>{var Z;return d(),_("div",{key:j.key,onClick:_e=>I(j),class:ne(["fct-global-searching-suggestion",((Z=D.value)==null?void 0:Z.key)===j.key?"active":""])},h(j.title),11,hie)}),128))])])]),_:1},8,["visible"]),O.value?(d(),U(iie,{key:0,ref_key:"remoteResultRef",ref:R,query:a.value,tag:D.value,onCloseModal:S,onOnRemoteSearchStateChange:W},null,8,["query","tag"])):(d(),U(Fre,{key:1,ref_key:"resultListRef",ref:E,query:a.value,"search-results":s.value.value,onActionPerformed:S,focusInput:k,searchData:p(Mi)},null,8,["query","search-results","searchData"])),i("div",_ie,[i("ul",gie,[i("li",null,[i("span",vie,[o(Y,{name:"ArrowUp"})]),i("span",yie,[o(Y,{name:"ArrowDown"})]),i("span",bie,h(p(f)("To navigate")),1)]),i("li",null,[i("span",wie,[o(Y,{name:"Enter"})]),i("span",Bie,h(p(f)("To select")),1)])])])]),_:1},8,["modelValue"])],64)}}},kie={class:"fl_app fluent-cart-admin-pages"},Fie=Object.assign({name:"DashboardApplication"},{__name:"Application",setup(t){const e=T("");pe(()=>{jQuery(".notice:not(.fluent-cart), .error:not(.fluent-cart), #ehp-admin-cb").remove(),e.value=a();const A=document.querySelector(".fct_admin_menu_wrap"),u=()=>{window.scrollY>10?A==null||A.classList.add("scroll-header"):A==null||A.classList.remove("scroll-header")};window.addEventListener("scroll",u)});const a=()=>window.location.href,s=T(!1),n=Wt();ce(()=>n.fullPath,async()=>{e.value=a(),s.value=!1,await de(()=>{setTimeout(()=>{s.value=!0},100)})});const l=X(()=>!(n.fullPath.includes("reports")||n.fullPath.includes("settings")));return(A,u)=>{const c=y("router-view");return d(),_("div",null,[o(Cie),l.value?(d(),U(hA,{key:0})):x("",!0),i("div",kie,[o(c)]),(d(),U(Il,{to:"#theme-button-container"},[o(kle)]))])}}});let mu=!1;function xie(t){return{data:function(){return{appVars:window.fluentCartAdminApp}},methods:{$get:te.get,$post:te.post,$put:te.put,$del:te.delete,$t:f,$n:Zn,formatMoney(e,a,s=!1){return!e&&s?"":(e||(e="0.00"),$e.get("shop.currency_sign")+" "+e)},formatCents(e,a,s=!1){return!e&&s?"":(e?e=(e*100).toFixed(2):e="0.00",a?(e=new Intl.NumberFormat("en-US").format(e),$e.get("shop.currency_sign")+" "+e):e)},formatNumber(e,a=!0,s=!1,n){return xe.formatNumber(e,a,s,n)},getAddress(e,a="billing"){let s=[e[a+"_address_1"],e[a+"_address_2"],e[a+"_city"],e[a+"_city"],e[a+"_state"],e[a+"_zip"],e[a+"_country"]];return s=s.filter(n=>!!n).join(", "),s||"no "+a+" address"},getOrderAddress(e,a="billing",s=!1){return Gp(e,a,s)},changeTitle(e){jQuery("head title").text(e+" - Webmakerr")},handleError(e){if(!e)return;let a="";typeof e=="string"?a=e:e&&e.message?a=e.message:a=e,typeof e=="object"&&(a=this.convertToText(e)),a||(a="Something is wrong!"),this.$notify({type:"error",title:"Error",message:a,dangerouslyUseHTMLString:!0})},convertToText(e){const a=[];if(typeof e=="object"&&e.join===void 0)for(const s in e)a.push(this.convertToText(e[s]));else if(typeof e=="object"&&e.join!==void 0)for(const s in e)a.push(this.convertToText(e[s]));else typeof e=="function"||typeof e=="string"&&a.push(e);return a.join("<br />")},handleSuccess:e=>{J.success(e)},handleMessage:(e,a="info",s=40,n=1e3)=>{yp.show(e,a,s,n)},Storage:()=>Ge,buildFormRendererValue(e,a){let s={};return Object.keys(e).forEach(n=>{let l=e[n];["grid"].includes(l.type??"")?s[n]=this.buildFormRendererValue(l.schema??{},a[n]??{}):s[n]=a[n]??""}),s},registerCopyAction(){mu||(mu=!0,document.addEventListener("click",e=>{e.target.matches(".copyable-content")&&Ol.copy(e.target.textContent)}))},currencySign(){return $e.get("shop.currency_sign")},getPlaceholderImage(){return Os.getUrl("images/placeholder.svg")},saveLocal(e,a){Ge.set(e,a)},getLocal(e){return Ge.get(e)},hasPermission(e){return eo.hasPermission(e)}}}}function Uie(t){t.beforeEach((e,a,s)=>{const n=we.get(e,"meta.permission");return n?eo.resolve({permission:n,permissionType:we.get(e,"meta.permissionType")})?s():s({name:"unauthorized"}):($e.get("app_config.env")==="dev"&&console.warn(`[Permission] Route "${e.name||e.path}" is missing 'meta.permission'.`),s())})}function Eie(t){t.afterEach((e,a)=>{const s=e.meta.active_menu;jQuery(".fct_menu li").removeClass("active_admin_menu"),jQuery(".fct_menu li.fct_menu_item_"+s).addClass("active_admin_menu"),jQuery(".toplevel_page_webmakerr li").removeClass("current"),jQuery(".toplevel_page_webmakerr li.fluent_cart_"+s).addClass("current"),e.meta.title&&jQuery("head title").text(e.meta.title+" - Webmakerr")})}const Sie={mounted(t,e){const a=e.value,s=1e3,n=0,l=performance.now(),A=()=>{const u=performance.now()-l,c=Math.min(u/s,1),m=(n+c*(a-n)).toFixed(2);t.textContent=m,c<1&&requestAnimationFrame(A)};A()},updated(t,e){const a=e.value,s=2e3,n=0,l=performance.now(),A=()=>{const u=performance.now()-l,c=Math.min(u/s,1),m=(n+c*(a-n)).toFixed(2);t.textContent=m,c<1&&requestAnimationFrame(A)};A()}},Qie={__name:"Unauthorized",setup(t){return(e,a)=>(d(),_("span",null,h(p(f)("You are not allowed")),1))}},Die=window.fluent_cart_admin.hooks.applyFilters("fluent_cart_routes",wle);let hu=!1;document.addEventListener("fcart_renew_rest_nonce",function(t){hu||cs.alert(f("Your session has expired due to inactivity. Please refresh the page to continue."),f("Session Expired"),{confirmButtonText:f("Reload"),callback:e=>{hu=!1,window.location.reload()}})});const $ie=[Tp,Mp,Vp,Ds,Lp,zi,Op,Hp,Vl,Rp,Pp,Fu],ja=_p(Fie);ja.config.globalProperties.appVars=$e.get();ja.provide("appVars",$e.get());ja.mixin(xie());ja.directive("loading",Yp);ja.directive("animate",Sie);Xp(ja);const BA=gp({routes:[...Object.values(Die),{path:"/unauthorized",name:"unauthorized",component:Qie,props:!0},{path:"/:path(.*)*",name:"NotFound",component:Ll,props:!0}],history:vp(),scrollBehavior(t,e,a){return a||{top:0,behavior:"smooth"}}});ja.use(BA);Uie(BA);Eie(BA);$ie.forEach(t=>{ja.component(t.name,t)});const CA=$e.get("el_strings"),tp=$e.get("datei18");CA.el.datepicker.weeks=tp.weekdaysShort;CA.el.datepicker.months=tp.monthsShort;ja.use(qp,{locale:CA});ja.mount("#fluent_cart_plugin_app");
